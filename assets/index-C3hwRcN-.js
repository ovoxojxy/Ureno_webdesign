(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();const Eb="modulepreload",Tb=function(n){return"/Ureno_webdesign/"+n},eE={},kl=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let l=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),h=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=l(t.map(f=>{if(f=Tb(f),f in eE)return;eE[f]=!0;const m=f.endsWith(".css"),v=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${v}`))return;const E=document.createElement("link");if(E.rel=m?"stylesheet":Eb,m||(E.as="script"),E.crossOrigin="",E.href=f,h&&E.setAttribute("nonce",h),document.head.appendChild(E),m)return new Promise((x,R)=>{E.addEventListener("load",x),E.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};function Nc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ym={exports:{}},Vu={},Xm={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tE;function Ib(){if(tE)return Le;tE=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function E(z){return z===null||typeof z!="object"?null:(z=v&&z[v]||z["@@iterator"],typeof z=="function"?z:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,A={};function S(z,J,pe){this.props=z,this.context=J,this.refs=A,this.updater=pe||x}S.prototype.isReactComponent={},S.prototype.setState=function(z,J){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,J,"setState")},S.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function M(){}M.prototype=S.prototype;function U(z,J,pe){this.props=z,this.context=J,this.refs=A,this.updater=pe||x}var B=U.prototype=new M;B.constructor=U,R(B,S.prototype),B.isPureReactComponent=!0;var W=Array.isArray,Y=Object.prototype.hasOwnProperty,X={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function b(z,J,pe){var Ie,Ae={},De=null,je=null;if(J!=null)for(Ie in J.ref!==void 0&&(je=J.ref),J.key!==void 0&&(De=""+J.key),J)Y.call(J,Ie)&&!N.hasOwnProperty(Ie)&&(Ae[Ie]=J[Ie]);var Oe=arguments.length-2;if(Oe===1)Ae.children=pe;else if(1<Oe){for(var Ke=Array(Oe),Rt=0;Rt<Oe;Rt++)Ke[Rt]=arguments[Rt+2];Ae.children=Ke}if(z&&z.defaultProps)for(Ie in Oe=z.defaultProps,Oe)Ae[Ie]===void 0&&(Ae[Ie]=Oe[Ie]);return{$$typeof:n,type:z,key:De,ref:je,props:Ae,_owner:X.current}}function k(z,J){return{$$typeof:n,type:z.type,key:J,ref:z.ref,props:z.props,_owner:z._owner}}function L(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function j(z){var J={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(pe){return J[pe]})}var V=/\/+/g;function D(z,J){return typeof z=="object"&&z!==null&&z.key!=null?j(""+z.key):J.toString(36)}function le(z,J,pe,Ie,Ae){var De=typeof z;(De==="undefined"||De==="boolean")&&(z=null);var je=!1;if(z===null)je=!0;else switch(De){case"string":case"number":je=!0;break;case"object":switch(z.$$typeof){case n:case e:je=!0}}if(je)return je=z,Ae=Ae(je),z=Ie===""?"."+D(je,0):Ie,W(Ae)?(pe="",z!=null&&(pe=z.replace(V,"$&/")+"/"),le(Ae,J,pe,"",function(Rt){return Rt})):Ae!=null&&(L(Ae)&&(Ae=k(Ae,pe+(!Ae.key||je&&je.key===Ae.key?"":(""+Ae.key).replace(V,"$&/")+"/")+z)),J.push(Ae)),1;if(je=0,Ie=Ie===""?".":Ie+":",W(z))for(var Oe=0;Oe<z.length;Oe++){De=z[Oe];var Ke=Ie+D(De,Oe);je+=le(De,J,pe,Ke,Ae)}else if(Ke=E(z),typeof Ke=="function")for(z=Ke.call(z),Oe=0;!(De=z.next()).done;)De=De.value,Ke=Ie+D(De,Oe++),je+=le(De,J,pe,Ke,Ae);else if(De==="object")throw J=String(z),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return je}function Ce(z,J,pe){if(z==null)return z;var Ie=[],Ae=0;return le(z,Ie,"","",function(De){return J.call(pe,De,Ae++)}),Ie}function Re(z){if(z._status===-1){var J=z._result;J=J(),J.then(function(pe){(z._status===0||z._status===-1)&&(z._status=1,z._result=pe)},function(pe){(z._status===0||z._status===-1)&&(z._status=2,z._result=pe)}),z._status===-1&&(z._status=0,z._result=J)}if(z._status===1)return z._result.default;throw z._result}var Te={current:null},se={transition:null},ue={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:se,ReactCurrentOwner:X};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Le.Children={map:Ce,forEach:function(z,J,pe){Ce(z,function(){J.apply(this,arguments)},pe)},count:function(z){var J=0;return Ce(z,function(){J++}),J},toArray:function(z){return Ce(z,function(J){return J})||[]},only:function(z){if(!L(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Le.Component=S,Le.Fragment=t,Le.Profiler=s,Le.PureComponent=U,Le.StrictMode=r,Le.Suspense=h,Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,Le.act=ie,Le.cloneElement=function(z,J,pe){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var Ie=R({},z.props),Ae=z.key,De=z.ref,je=z._owner;if(J!=null){if(J.ref!==void 0&&(De=J.ref,je=X.current),J.key!==void 0&&(Ae=""+J.key),z.type&&z.type.defaultProps)var Oe=z.type.defaultProps;for(Ke in J)Y.call(J,Ke)&&!N.hasOwnProperty(Ke)&&(Ie[Ke]=J[Ke]===void 0&&Oe!==void 0?Oe[Ke]:J[Ke])}var Ke=arguments.length-2;if(Ke===1)Ie.children=pe;else if(1<Ke){Oe=Array(Ke);for(var Rt=0;Rt<Ke;Rt++)Oe[Rt]=arguments[Rt+2];Ie.children=Oe}return{$$typeof:n,type:z.type,key:Ae,ref:De,props:Ie,_owner:je}},Le.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:o,_context:z},z.Consumer=z},Le.createElement=b,Le.createFactory=function(z){var J=b.bind(null,z);return J.type=z,J},Le.createRef=function(){return{current:null}},Le.forwardRef=function(z){return{$$typeof:c,render:z}},Le.isValidElement=L,Le.lazy=function(z){return{$$typeof:m,_payload:{_status:-1,_result:z},_init:Re}},Le.memo=function(z,J){return{$$typeof:f,type:z,compare:J===void 0?null:J}},Le.startTransition=function(z){var J=se.transition;se.transition={};try{z()}finally{se.transition=J}},Le.unstable_act=ie,Le.useCallback=function(z,J){return Te.current.useCallback(z,J)},Le.useContext=function(z){return Te.current.useContext(z)},Le.useDebugValue=function(){},Le.useDeferredValue=function(z){return Te.current.useDeferredValue(z)},Le.useEffect=function(z,J){return Te.current.useEffect(z,J)},Le.useId=function(){return Te.current.useId()},Le.useImperativeHandle=function(z,J,pe){return Te.current.useImperativeHandle(z,J,pe)},Le.useInsertionEffect=function(z,J){return Te.current.useInsertionEffect(z,J)},Le.useLayoutEffect=function(z,J){return Te.current.useLayoutEffect(z,J)},Le.useMemo=function(z,J){return Te.current.useMemo(z,J)},Le.useReducer=function(z,J,pe){return Te.current.useReducer(z,J,pe)},Le.useRef=function(z){return Te.current.useRef(z)},Le.useState=function(z){return Te.current.useState(z)},Le.useSyncExternalStore=function(z,J,pe){return Te.current.useSyncExternalStore(z,J,pe)},Le.useTransition=function(){return Te.current.useTransition()},Le.version="18.3.1",Le}var nE;function Fy(){return nE||(nE=1,Xm.exports=Ib()),Xm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rE;function xb(){if(rE)return Vu;rE=1;var n=Fy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,f){var m,v={},E=null,x=null;f!==void 0&&(E=""+f),h.key!==void 0&&(E=""+h.key),h.ref!==void 0&&(x=h.ref);for(m in h)r.call(h,m)&&!o.hasOwnProperty(m)&&(v[m]=h[m]);if(c&&c.defaultProps)for(m in h=c.defaultProps,h)v[m]===void 0&&(v[m]=h[m]);return{$$typeof:e,type:c,key:E,ref:x,props:v,_owner:s.current}}return Vu.Fragment=t,Vu.jsx=l,Vu.jsxs=l,Vu}var sE;function Cb(){return sE||(sE=1,Ym.exports=xb()),Ym.exports}var y=Cb(),I=Fy();const In=Nc(I);var yh={},Jm={exports:{}},Nn={},Zm={exports:{}},eg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iE;function Sb(){return iE||(iE=1,function(n){function e(se,ue){var ie=se.length;se.push(ue);e:for(;0<ie;){var z=ie-1>>>1,J=se[z];if(0<s(J,ue))se[z]=ue,se[ie]=J,ie=z;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var ue=se[0],ie=se.pop();if(ie!==ue){se[0]=ie;e:for(var z=0,J=se.length,pe=J>>>1;z<pe;){var Ie=2*(z+1)-1,Ae=se[Ie],De=Ie+1,je=se[De];if(0>s(Ae,ie))De<J&&0>s(je,Ae)?(se[z]=je,se[De]=ie,z=De):(se[z]=Ae,se[Ie]=ie,z=Ie);else if(De<J&&0>s(je,ie))se[z]=je,se[De]=ie,z=De;else break e}}return ue}function s(se,ue){var ie=se.sortIndex-ue.sortIndex;return ie!==0?ie:se.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],f=[],m=1,v=null,E=3,x=!1,R=!1,A=!1,S=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(se){for(var ue=t(f);ue!==null;){if(ue.callback===null)r(f);else if(ue.startTime<=se)r(f),ue.sortIndex=ue.expirationTime,e(h,ue);else break;ue=t(f)}}function W(se){if(A=!1,B(se),!R)if(t(h)!==null)R=!0,Re(Y);else{var ue=t(f);ue!==null&&Te(W,ue.startTime-se)}}function Y(se,ue){R=!1,A&&(A=!1,M(b),b=-1),x=!0;var ie=E;try{for(B(ue),v=t(h);v!==null&&(!(v.expirationTime>ue)||se&&!j());){var z=v.callback;if(typeof z=="function"){v.callback=null,E=v.priorityLevel;var J=z(v.expirationTime<=ue);ue=n.unstable_now(),typeof J=="function"?v.callback=J:v===t(h)&&r(h),B(ue)}else r(h);v=t(h)}if(v!==null)var pe=!0;else{var Ie=t(f);Ie!==null&&Te(W,Ie.startTime-ue),pe=!1}return pe}finally{v=null,E=ie,x=!1}}var X=!1,N=null,b=-1,k=5,L=-1;function j(){return!(n.unstable_now()-L<k)}function V(){if(N!==null){var se=n.unstable_now();L=se;var ue=!0;try{ue=N(!0,se)}finally{ue?D():(X=!1,N=null)}}else X=!1}var D;if(typeof U=="function")D=function(){U(V)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,Ce=le.port2;le.port1.onmessage=V,D=function(){Ce.postMessage(null)}}else D=function(){S(V,0)};function Re(se){N=se,X||(X=!0,D())}function Te(se,ue){b=S(function(){se(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){R||x||(R=!0,Re(Y))},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(se){switch(E){case 1:case 2:case 3:var ue=3;break;default:ue=E}var ie=E;E=ue;try{return se()}finally{E=ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,ue){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ie=E;E=se;try{return ue()}finally{E=ie}},n.unstable_scheduleCallback=function(se,ue,ie){var z=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?z+ie:z):ie=z,se){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ie+J,se={id:m++,callback:ue,priorityLevel:se,startTime:ie,expirationTime:J,sortIndex:-1},ie>z?(se.sortIndex=ie,e(f,se),t(h)===null&&se===t(f)&&(A?(M(b),b=-1):A=!0,Te(W,ie-z))):(se.sortIndex=J,e(h,se),R||x||(R=!0,Re(Y))),se},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(se){var ue=E;return function(){var ie=E;E=ue;try{return se.apply(this,arguments)}finally{E=ie}}}}(eg)),eg}var oE;function Rb(){return oE||(oE=1,Zm.exports=Sb()),Zm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aE;function Ab(){if(aE)return Nn;aE=1;var n=Fy(),e=Rb();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},v={};function E(i){return h.call(v,i)?!0:h.call(m,i)?!1:f.test(i)?v[i]=!0:(m[i]=!0,!1)}function x(i,a,u,p){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function R(i,a,u,p){if(a===null||typeof a>"u"||x(i,a,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function A(i,a,u,p,g,w,C){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=i,this.type=a,this.sanitizeURL=w,this.removeEmptyString=C}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){S[i]=new A(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];S[a]=new A(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){S[i]=new A(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){S[i]=new A(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){S[i]=new A(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){S[i]=new A(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){S[i]=new A(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){S[i]=new A(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){S[i]=new A(i,5,!1,i.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function U(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(M,U);S[a]=new A(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(M,U);S[a]=new A(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(M,U);S[a]=new A(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){S[i]=new A(i,1,!1,i.toLowerCase(),null,!1,!1)}),S.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){S[i]=new A(i,1,!1,i.toLowerCase(),null,!0,!0)});function B(i,a,u,p){var g=S.hasOwnProperty(a)?S[a]:null;(g!==null?g.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(R(a,u,g,p)&&(u=null),p||g===null?E(a)&&(u===null?i.removeAttribute(a):i.setAttribute(a,""+u)):g.mustUseProperty?i[g.propertyName]=u===null?g.type===3?!1:"":u:(a=g.attributeName,p=g.attributeNamespace,u===null?i.removeAttribute(a):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,p?i.setAttributeNS(p,a,u):i.setAttribute(a,u))))}var W=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Y=Symbol.for("react.element"),X=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),j=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),Ce=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),Te=Symbol.for("react.offscreen"),se=Symbol.iterator;function ue(i){return i===null||typeof i!="object"?null:(i=se&&i[se]||i["@@iterator"],typeof i=="function"?i:null)}var ie=Object.assign,z;function J(i){if(z===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);z=a&&a[1]||""}return`
`+z+i}var pe=!1;function Ie(i,a){if(!i||pe)return"";pe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(K){var p=K}Reflect.construct(i,[],a)}else{try{a.call()}catch(K){p=K}i.call(a.prototype)}else{try{throw Error()}catch(K){p=K}i()}}catch(K){if(K&&p&&typeof K.stack=="string"){for(var g=K.stack.split(`
`),w=p.stack.split(`
`),C=g.length-1,O=w.length-1;1<=C&&0<=O&&g[C]!==w[O];)O--;for(;1<=C&&0<=O;C--,O--)if(g[C]!==w[O]){if(C!==1||O!==1)do if(C--,O--,0>O||g[C]!==w[O]){var F=`
`+g[C].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=C&&0<=O);break}}}finally{pe=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?J(i):""}function Ae(i){switch(i.tag){case 5:return J(i.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return i=Ie(i.type,!1),i;case 11:return i=Ie(i.type.render,!1),i;case 1:return i=Ie(i.type,!0),i;default:return""}}function De(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case X:return"Portal";case k:return"Profiler";case b:return"StrictMode";case D:return"Suspense";case le:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case j:return(i.displayName||"Context")+".Consumer";case L:return(i._context.displayName||"Context")+".Provider";case V:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ce:return a=i.displayName||null,a!==null?a:De(i.type)||"Memo";case Re:a=i._payload,i=i._init;try{return De(i(a))}catch{}}return null}function je(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(a);case 8:return a===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Oe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ke(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Rt(i){var a=Ke(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),p=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,w=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(C){p=""+C,w.call(this,C)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(C){p=""+C},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Un(i){i._valueTracker||(i._valueTracker=Rt(i))}function si(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),p="";return i&&(p=Ke(i)?i.checked?"true":"false":i.value),i=p,i!==u?(a.setValue(i),!0):!1}function wr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function vs(i,a){var u=a.checked;return ie({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function ii(i,a){var u=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;u=Oe(a.value!=null?a.value:u),i._wrapperState={initialChecked:p,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function oi(i,a){a=a.checked,a!=null&&B(i,"checked",a,!1)}function ai(i,a){oi(i,a);var u=Oe(a.value),p=a.type;if(u!=null)p==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?li(i,a.type,u):a.hasOwnProperty("defaultValue")&&li(i,a.type,Oe(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function fa(i,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,u||a===i.value||(i.value=a),i.defaultValue=a}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function li(i,a,u){(a!=="number"||wr(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var Qt=Array.isArray;function xn(i,a,u,p){if(i=i.options,a){a={};for(var g=0;g<u.length;g++)a["$"+u[g]]=!0;for(u=0;u<i.length;u++)g=a.hasOwnProperty("$"+i[u].value),i[u].selected!==g&&(i[u].selected=g),g&&p&&(i[u].defaultSelected=!0)}else{for(u=""+Oe(u),a=null,g=0;g<i.length;g++){if(i[g].value===u){i[g].selected=!0,p&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function ui(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function _s(i,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(Qt(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}i._wrapperState={initialValue:Oe(u)}}function qr(i,a){var u=Oe(a.value),p=Oe(a.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),a.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),p!=null&&(i.defaultValue=""+p)}function ci(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function yt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vt(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?yt(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var er,Kl=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,p,g){MSApp.execUnsafeLocalFunction(function(){return i(a,u,p,g)})}:i}(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(er=er||document.createElement("div"),er.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=er.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function di(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var vo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_o=["Webkit","ms","Moz","O"];Object.keys(vo).forEach(function(i){_o.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),vo[a]=vo[i]})});function Ql(i,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||vo.hasOwnProperty(i)&&vo[i]?(""+a).trim():a+"px"}function Yl(i,a){i=i.style;for(var u in a)if(a.hasOwnProperty(u)){var p=u.indexOf("--")===0,g=Ql(u,a[u],p);u==="float"&&(u="cssFloat"),p?i.setProperty(u,g):i[u]=g}}var Xl=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jl(i,a){if(a){if(Xl[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Zl(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wo=null;function pa(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ma=null,tr=null,Hr=null;function ga(i){if(i=Iu(i)){if(typeof ma!="function")throw Error(t(280));var a=i.stateNode;a&&(a=Nd(a),ma(i.stateNode,i.type,a))}}function Gr(i){tr?Hr?Hr.push(i):Hr=[i]:tr=i}function eu(){if(tr){var i=tr,a=Hr;if(Hr=tr=null,ga(i),a)for(i=0;i<a.length;i++)ga(a[i])}}function Eo(i,a){return i(a)}function tu(){}var ws=!1;function nu(i,a,u){if(ws)return i(a,u);ws=!0;try{return Eo(i,a,u)}finally{ws=!1,(tr!==null||Hr!==null)&&(tu(),eu())}}function It(i,a){var u=i.stateNode;if(u===null)return null;var p=Nd(u);if(p===null)return null;u=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var ya=!1;if(c)try{var Er={};Object.defineProperty(Er,"passive",{get:function(){ya=!0}}),window.addEventListener("test",Er,Er),window.removeEventListener("test",Er,Er)}catch{ya=!1}function To(i,a,u,p,g,w,C,O,F){var K=Array.prototype.slice.call(arguments,3);try{a.apply(u,K)}catch(ne){this.onError(ne)}}var Io=!1,va=null,Tr=!1,ru=null,xp={onError:function(i){Io=!0,va=i}};function _a(i,a,u,p,g,w,C,O,F){Io=!1,va=null,To.apply(xp,arguments)}function rd(i,a,u,p,g,w,C,O,F){if(_a.apply(this,arguments),Io){if(Io){var K=va;Io=!1,va=null}else throw Error(t(198));Tr||(Tr=!0,ru=K)}}function Ir(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function xo(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function xr(i){if(Ir(i)!==i)throw Error(t(188))}function sd(i){var a=i.alternate;if(!a){if(a=Ir(i),a===null)throw Error(t(188));return a!==i?null:i}for(var u=i,p=a;;){var g=u.return;if(g===null)break;var w=g.alternate;if(w===null){if(p=g.return,p!==null){u=p;continue}break}if(g.child===w.child){for(w=g.child;w;){if(w===u)return xr(g),i;if(w===p)return xr(g),a;w=w.sibling}throw Error(t(188))}if(u.return!==p.return)u=g,p=w;else{for(var C=!1,O=g.child;O;){if(O===u){C=!0,u=g,p=w;break}if(O===p){C=!0,p=g,u=w;break}O=O.sibling}if(!C){for(O=w.child;O;){if(O===u){C=!0,u=w,p=g;break}if(O===p){C=!0,p=w,u=g;break}O=O.sibling}if(!C)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:a}function su(i){return i=sd(i),i!==null?wa(i):null}function wa(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=wa(i);if(a!==null)return a;i=i.sibling}return null}var Ea=e.unstable_scheduleCallback,iu=e.unstable_cancelCallback,id=e.unstable_shouldYield,Cp=e.unstable_requestPaint,tt=e.unstable_now,od=e.unstable_getCurrentPriorityLevel,Co=e.unstable_ImmediatePriority,hi=e.unstable_UserBlockingPriority,nr=e.unstable_NormalPriority,ou=e.unstable_LowPriority,ad=e.unstable_IdlePriority,So=null,Bn=null;function ld(i){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(So,i,void 0,(i.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:cd,au=Math.log,ud=Math.LN2;function cd(i){return i>>>=0,i===0?32:31-(au(i)/ud|0)|0}var Ta=64,Ia=4194304;function fi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ro(i,a){var u=i.pendingLanes;if(u===0)return 0;var p=0,g=i.suspendedLanes,w=i.pingedLanes,C=u&268435455;if(C!==0){var O=C&~g;O!==0?p=fi(O):(w&=C,w!==0&&(p=fi(w)))}else C=u&~g,C!==0?p=fi(C):w!==0&&(p=fi(w));if(p===0)return 0;if(a!==0&&a!==p&&(a&g)===0&&(g=p&-p,w=a&-a,g>=w||g===16&&(w&4194240)!==0))return a;if((p&4)!==0&&(p|=u&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=p;0<a;)u=31-vn(a),g=1<<u,p|=i[u],a&=~g;return p}function Sp(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Es(i,a){for(var u=i.suspendedLanes,p=i.pingedLanes,g=i.expirationTimes,w=i.pendingLanes;0<w;){var C=31-vn(w),O=1<<C,F=g[C];F===-1?((O&u)===0||(O&p)!==0)&&(g[C]=Sp(O,a)):F<=a&&(i.expiredLanes|=O),w&=~O}}function $n(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Ao(){var i=Ta;return Ta<<=1,(Ta&4194240)===0&&(Ta=64),i}function pi(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function mi(i,a,u){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-vn(a),i[a]=u}function et(i,a){var u=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<u;){var g=31-vn(u),w=1<<g;a[g]=0,p[g]=-1,i[g]=-1,u&=~w}}function gi(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var p=31-vn(u),g=1<<p;g&a|i[p]&a&&(i[p]|=a),u&=~g}}var Fe=0;function yi(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var dd,xa,hd,fd,pd,lu=!1,Kr=[],Yt=null,Cr=null,Sr=null,vi=new Map,rr=new Map,Qr=[],Rp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function md(i,a){switch(i){case"focusin":case"focusout":Yt=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":vi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":rr.delete(a.pointerId)}}function Cn(i,a,u,p,g,w){return i===null||i.nativeEvent!==w?(i={blockedOn:a,domEventName:u,eventSystemFlags:p,nativeEvent:w,targetContainers:[g]},a!==null&&(a=Iu(a),a!==null&&xa(a)),i):(i.eventSystemFlags|=p,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function Ap(i,a,u,p,g){switch(a){case"focusin":return Yt=Cn(Yt,i,a,u,p,g),!0;case"dragenter":return Cr=Cn(Cr,i,a,u,p,g),!0;case"mouseover":return Sr=Cn(Sr,i,a,u,p,g),!0;case"pointerover":var w=g.pointerId;return vi.set(w,Cn(vi.get(w)||null,i,a,u,p,g)),!0;case"gotpointercapture":return w=g.pointerId,rr.set(w,Cn(rr.get(w)||null,i,a,u,p,g)),!0}return!1}function gd(i){var a=Do(i.target);if(a!==null){var u=Ir(a);if(u!==null){if(a=u.tag,a===13){if(a=xo(u),a!==null){i.blockedOn=a,pd(i.priority,function(){hd(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ts(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=Ca(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);wo=p,u.target.dispatchEvent(p),wo=null}else return a=Iu(u),a!==null&&xa(a),i.blockedOn=u,!1;a.shift()}return!0}function Po(i,a,u){Ts(i)&&u.delete(a)}function yd(){lu=!1,Yt!==null&&Ts(Yt)&&(Yt=null),Cr!==null&&Ts(Cr)&&(Cr=null),Sr!==null&&Ts(Sr)&&(Sr=null),vi.forEach(Po),rr.forEach(Po)}function Rr(i,a){i.blockedOn===a&&(i.blockedOn=null,lu||(lu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,yd)))}function Ar(i){function a(g){return Rr(g,i)}if(0<Kr.length){Rr(Kr[0],i);for(var u=1;u<Kr.length;u++){var p=Kr[u];p.blockedOn===i&&(p.blockedOn=null)}}for(Yt!==null&&Rr(Yt,i),Cr!==null&&Rr(Cr,i),Sr!==null&&Rr(Sr,i),vi.forEach(a),rr.forEach(a),u=0;u<Qr.length;u++)p=Qr[u],p.blockedOn===i&&(p.blockedOn=null);for(;0<Qr.length&&(u=Qr[0],u.blockedOn===null);)gd(u),u.blockedOn===null&&Qr.shift()}var Is=W.ReactCurrentBatchConfig,_i=!0;function dt(i,a,u,p){var g=Fe,w=Is.transition;Is.transition=null;try{Fe=1,uu(i,a,u,p)}finally{Fe=g,Is.transition=w}}function Pp(i,a,u,p){var g=Fe,w=Is.transition;Is.transition=null;try{Fe=4,uu(i,a,u,p)}finally{Fe=g,Is.transition=w}}function uu(i,a,u,p){if(_i){var g=Ca(i,a,u,p);if(g===null)Up(i,a,p,bo,u),md(i,p);else if(Ap(g,i,a,u,p))p.stopPropagation();else if(md(i,p),a&4&&-1<Rp.indexOf(i)){for(;g!==null;){var w=Iu(g);if(w!==null&&dd(w),w=Ca(i,a,u,p),w===null&&Up(i,a,p,bo,u),w===g)break;g=w}g!==null&&p.stopPropagation()}else Up(i,a,p,null,u)}}var bo=null;function Ca(i,a,u,p){if(bo=null,i=pa(p),i=Do(i),i!==null)if(a=Ir(i),a===null)i=null;else if(u=a.tag,u===13){if(i=xo(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return bo=i,null}function cu(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(od()){case Co:return 1;case hi:return 4;case nr:case ou:return 16;case ad:return 536870912;default:return 16}default:return 16}}var zn=null,Sa=null,Sn=null;function du(){if(Sn)return Sn;var i,a=Sa,u=a.length,p,g="value"in zn?zn.value:zn.textContent,w=g.length;for(i=0;i<u&&a[i]===g[i];i++);var C=u-i;for(p=1;p<=C&&a[u-p]===g[w-p];p++);return Sn=g.slice(i,1<p?1-p:void 0)}function Ra(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Yr(){return!0}function hu(){return!1}function Xt(i){function a(u,p,g,w,C){this._reactName=u,this._targetInst=g,this.type=p,this.nativeEvent=w,this.target=C,this.currentTarget=null;for(var O in i)i.hasOwnProperty(O)&&(u=i[O],this[O]=u?u(w):w[O]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Yr:hu,this.isPropagationStopped=hu,this}return ie(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Yr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Yr)},persist:function(){},isPersistent:Yr}),a}var Pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Aa=Xt(Pr),Xr=ie({},Pr,{view:0,detail:0}),bp=Xt(Xr),Pa,xs,wi,ko=ie({},Xr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==wi&&(wi&&i.type==="mousemove"?(Pa=i.screenX-wi.screenX,xs=i.screenY-wi.screenY):xs=Pa=0,wi=i),Pa)},movementY:function(i){return"movementY"in i?i.movementY:xs}}),ba=Xt(ko),fu=ie({},ko,{dataTransfer:0}),vd=Xt(fu),ka=ie({},Xr,{relatedTarget:0}),Na=Xt(ka),_d=ie({},Pr,{animationName:0,elapsedTime:0,pseudoElement:0}),Cs=Xt(_d),wd=ie({},Pr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ed=Xt(wd),Td=ie({},Pr,{data:0}),pu=Xt(Td),Da={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Id={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xd(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Id[i])?!!a[i]:!1}function Jr(){return xd}var d=ie({},Xr,{key:function(i){if(i.key){var a=Da[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Ra(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?_n[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jr,charCode:function(i){return i.type==="keypress"?Ra(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ra(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),_=Xt(d),T=ie({},ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),P=Xt(T),q=ie({},Xr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jr}),Q=Xt(q),ae=ie({},Pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xe=Xt(ae),Ot=ie({},ko,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),$e=Xt(Ot),Bt=[9,13,27,32],At=c&&"CompositionEvent"in window,sr=null;c&&"documentMode"in document&&(sr=document.documentMode);var Wn=c&&"TextEvent"in window&&!sr,No=c&&(!At||sr&&8<sr&&11>=sr),Oa=" ",K_=!1;function Q_(i,a){switch(i){case"keyup":return Bt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Y_(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var La=!1;function vP(i,a){switch(i){case"compositionend":return Y_(a);case"keypress":return a.which!==32?null:(K_=!0,Oa);case"textInput":return i=a.data,i===Oa&&K_?null:i;default:return null}}function _P(i,a){if(La)return i==="compositionend"||!At&&Q_(i,a)?(i=du(),Sn=Sa=zn=null,La=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return No&&a.locale!=="ko"?null:a.data;default:return null}}var wP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function X_(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!wP[i.type]:a==="textarea"}function J_(i,a,u,p){Gr(p),a=Pd(a,"onChange"),0<a.length&&(u=new Aa("onChange","change",null,u,p),i.push({event:u,listeners:a}))}var mu=null,gu=null;function EP(i){g0(i,0)}function Cd(i){var a=Ua(i);if(si(a))return i}function TP(i,a){if(i==="change")return a}var Z_=!1;if(c){var kp;if(c){var Np="oninput"in document;if(!Np){var e0=document.createElement("div");e0.setAttribute("oninput","return;"),Np=typeof e0.oninput=="function"}kp=Np}else kp=!1;Z_=kp&&(!document.documentMode||9<document.documentMode)}function t0(){mu&&(mu.detachEvent("onpropertychange",n0),gu=mu=null)}function n0(i){if(i.propertyName==="value"&&Cd(gu)){var a=[];J_(a,gu,i,pa(i)),nu(EP,a)}}function IP(i,a,u){i==="focusin"?(t0(),mu=a,gu=u,mu.attachEvent("onpropertychange",n0)):i==="focusout"&&t0()}function xP(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Cd(gu)}function CP(i,a){if(i==="click")return Cd(a)}function SP(i,a){if(i==="input"||i==="change")return Cd(a)}function RP(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var br=typeof Object.is=="function"?Object.is:RP;function yu(i,a){if(br(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),p=Object.keys(a);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var g=u[p];if(!h.call(a,g)||!br(i[g],a[g]))return!1}return!0}function r0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function s0(i,a){var u=r0(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=a&&p>=a)return{node:u,offset:a-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=r0(u)}}function i0(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?i0(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function o0(){for(var i=window,a=wr();a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=wr(i.document)}return a}function Dp(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function AP(i){var a=o0(),u=i.focusedElem,p=i.selectionRange;if(a!==u&&u&&u.ownerDocument&&i0(u.ownerDocument.documentElement,u)){if(p!==null&&Dp(u)){if(a=p.start,i=p.end,i===void 0&&(i=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(i,u.value.length);else if(i=(a=u.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var g=u.textContent.length,w=Math.min(p.start,g);p=p.end===void 0?w:Math.min(p.end,g),!i.extend&&w>p&&(g=p,p=w,w=g),g=s0(u,w);var C=s0(u,p);g&&C&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==C.node||i.focusOffset!==C.offset)&&(a=a.createRange(),a.setStart(g.node,g.offset),i.removeAllRanges(),w>p?(i.addRange(a),i.extend(C.node,C.offset)):(a.setEnd(C.node,C.offset),i.addRange(a)))}}for(a=[],i=u;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)i=a[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var PP=c&&"documentMode"in document&&11>=document.documentMode,Ma=null,Op=null,vu=null,Lp=!1;function a0(i,a,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Lp||Ma==null||Ma!==wr(p)||(p=Ma,"selectionStart"in p&&Dp(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),vu&&yu(vu,p)||(vu=p,p=Pd(Op,"onSelect"),0<p.length&&(a=new Aa("onSelect","select",null,a,u),i.push({event:a,listeners:p}),a.target=Ma)))}function Sd(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var ja={animationend:Sd("Animation","AnimationEnd"),animationiteration:Sd("Animation","AnimationIteration"),animationstart:Sd("Animation","AnimationStart"),transitionend:Sd("Transition","TransitionEnd")},Mp={},l0={};c&&(l0=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);function Rd(i){if(Mp[i])return Mp[i];if(!ja[i])return i;var a=ja[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in l0)return Mp[i]=a[u];return i}var u0=Rd("animationend"),c0=Rd("animationiteration"),d0=Rd("animationstart"),h0=Rd("transitionend"),f0=new Map,p0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ei(i,a){f0.set(i,a),o(a,[i])}for(var jp=0;jp<p0.length;jp++){var Vp=p0[jp],bP=Vp.toLowerCase(),kP=Vp[0].toUpperCase()+Vp.slice(1);Ei(bP,"on"+kP)}Ei(u0,"onAnimationEnd"),Ei(c0,"onAnimationIteration"),Ei(d0,"onAnimationStart"),Ei("dblclick","onDoubleClick"),Ei("focusin","onFocus"),Ei("focusout","onBlur"),Ei(h0,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NP=new Set("cancel close invalid load scroll toggle".split(" ").concat(_u));function m0(i,a,u){var p=i.type||"unknown-event";i.currentTarget=u,rd(p,a,void 0,i),i.currentTarget=null}function g0(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],g=p.event;p=p.listeners;e:{var w=void 0;if(a)for(var C=p.length-1;0<=C;C--){var O=p[C],F=O.instance,K=O.currentTarget;if(O=O.listener,F!==w&&g.isPropagationStopped())break e;m0(g,O,K),w=F}else for(C=0;C<p.length;C++){if(O=p[C],F=O.instance,K=O.currentTarget,O=O.listener,F!==w&&g.isPropagationStopped())break e;m0(g,O,K),w=F}}}if(Tr)throw i=ru,Tr=!1,ru=null,i}function st(i,a){var u=a[Hp];u===void 0&&(u=a[Hp]=new Set);var p=i+"__bubble";u.has(p)||(y0(a,i,2,!1),u.add(p))}function Fp(i,a,u){var p=0;a&&(p|=4),y0(u,i,p,a)}var Ad="_reactListening"+Math.random().toString(36).slice(2);function wu(i){if(!i[Ad]){i[Ad]=!0,r.forEach(function(u){u!=="selectionchange"&&(NP.has(u)||Fp(u,!1,i),Fp(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Ad]||(a[Ad]=!0,Fp("selectionchange",!1,a))}}function y0(i,a,u,p){switch(cu(a)){case 1:var g=dt;break;case 4:g=Pp;break;default:g=uu}u=g.bind(null,a,u,i),g=void 0,!ya||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),p?g!==void 0?i.addEventListener(a,u,{capture:!0,passive:g}):i.addEventListener(a,u,!0):g!==void 0?i.addEventListener(a,u,{passive:g}):i.addEventListener(a,u,!1)}function Up(i,a,u,p,g){var w=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var C=p.tag;if(C===3||C===4){var O=p.stateNode.containerInfo;if(O===g||O.nodeType===8&&O.parentNode===g)break;if(C===4)for(C=p.return;C!==null;){var F=C.tag;if((F===3||F===4)&&(F=C.stateNode.containerInfo,F===g||F.nodeType===8&&F.parentNode===g))return;C=C.return}for(;O!==null;){if(C=Do(O),C===null)return;if(F=C.tag,F===5||F===6){p=w=C;continue e}O=O.parentNode}}p=p.return}nu(function(){var K=w,ne=pa(u),re=[];e:{var te=f0.get(i);if(te!==void 0){var de=Aa,ge=i;switch(i){case"keypress":if(Ra(u)===0)break e;case"keydown":case"keyup":de=_;break;case"focusin":ge="focus",de=Na;break;case"focusout":ge="blur",de=Na;break;case"beforeblur":case"afterblur":de=Na;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=ba;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=vd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=Q;break;case u0:case c0:case d0:de=Cs;break;case h0:de=Xe;break;case"scroll":de=bp;break;case"wheel":de=$e;break;case"copy":case"cut":case"paste":de=Ed;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=P}var ye=(a&4)!==0,xt=!ye&&i==="scroll",H=ye?te!==null?te+"Capture":null:te;ye=[];for(var $=K,G;$!==null;){G=$;var oe=G.stateNode;if(G.tag===5&&oe!==null&&(G=oe,H!==null&&(oe=It($,H),oe!=null&&ye.push(Eu($,oe,G)))),xt)break;$=$.return}0<ye.length&&(te=new de(te,ge,null,u,ne),re.push({event:te,listeners:ye}))}}if((a&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",de=i==="mouseout"||i==="pointerout",te&&u!==wo&&(ge=u.relatedTarget||u.fromElement)&&(Do(ge)||ge[Ss]))break e;if((de||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,de?(ge=u.relatedTarget||u.toElement,de=K,ge=ge?Do(ge):null,ge!==null&&(xt=Ir(ge),ge!==xt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(de=null,ge=K),de!==ge)){if(ye=ba,oe="onMouseLeave",H="onMouseEnter",$="mouse",(i==="pointerout"||i==="pointerover")&&(ye=P,oe="onPointerLeave",H="onPointerEnter",$="pointer"),xt=de==null?te:Ua(de),G=ge==null?te:Ua(ge),te=new ye(oe,$+"leave",de,u,ne),te.target=xt,te.relatedTarget=G,oe=null,Do(ne)===K&&(ye=new ye(H,$+"enter",ge,u,ne),ye.target=G,ye.relatedTarget=xt,oe=ye),xt=oe,de&&ge)t:{for(ye=de,H=ge,$=0,G=ye;G;G=Va(G))$++;for(G=0,oe=H;oe;oe=Va(oe))G++;for(;0<$-G;)ye=Va(ye),$--;for(;0<G-$;)H=Va(H),G--;for(;$--;){if(ye===H||H!==null&&ye===H.alternate)break t;ye=Va(ye),H=Va(H)}ye=null}else ye=null;de!==null&&v0(re,te,de,ye,!1),ge!==null&&xt!==null&&v0(re,xt,ge,ye,!0)}}e:{if(te=K?Ua(K):window,de=te.nodeName&&te.nodeName.toLowerCase(),de==="select"||de==="input"&&te.type==="file")var ve=TP;else if(X_(te))if(Z_)ve=SP;else{ve=xP;var we=IP}else(de=te.nodeName)&&de.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(ve=CP);if(ve&&(ve=ve(i,K))){J_(re,ve,u,ne);break e}we&&we(i,te,K),i==="focusout"&&(we=te._wrapperState)&&we.controlled&&te.type==="number"&&li(te,"number",te.value)}switch(we=K?Ua(K):window,i){case"focusin":(X_(we)||we.contentEditable==="true")&&(Ma=we,Op=K,vu=null);break;case"focusout":vu=Op=Ma=null;break;case"mousedown":Lp=!0;break;case"contextmenu":case"mouseup":case"dragend":Lp=!1,a0(re,u,ne);break;case"selectionchange":if(PP)break;case"keydown":case"keyup":a0(re,u,ne)}var Ee;if(At)e:{switch(i){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else La?Q_(i,u)&&(Pe="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Pe="onCompositionStart");Pe&&(No&&u.locale!=="ko"&&(La||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&La&&(Ee=du()):(zn=ne,Sa="value"in zn?zn.value:zn.textContent,La=!0)),we=Pd(K,Pe),0<we.length&&(Pe=new pu(Pe,i,null,u,ne),re.push({event:Pe,listeners:we}),Ee?Pe.data=Ee:(Ee=Y_(u),Ee!==null&&(Pe.data=Ee)))),(Ee=Wn?vP(i,u):_P(i,u))&&(K=Pd(K,"onBeforeInput"),0<K.length&&(ne=new pu("onBeforeInput","beforeinput",null,u,ne),re.push({event:ne,listeners:K}),ne.data=Ee))}g0(re,a)})}function Eu(i,a,u){return{instance:i,listener:a,currentTarget:u}}function Pd(i,a){for(var u=a+"Capture",p=[];i!==null;){var g=i,w=g.stateNode;g.tag===5&&w!==null&&(g=w,w=It(i,u),w!=null&&p.unshift(Eu(i,w,g)),w=It(i,a),w!=null&&p.push(Eu(i,w,g))),i=i.return}return p}function Va(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function v0(i,a,u,p,g){for(var w=a._reactName,C=[];u!==null&&u!==p;){var O=u,F=O.alternate,K=O.stateNode;if(F!==null&&F===p)break;O.tag===5&&K!==null&&(O=K,g?(F=It(u,w),F!=null&&C.unshift(Eu(u,F,O))):g||(F=It(u,w),F!=null&&C.push(Eu(u,F,O)))),u=u.return}C.length!==0&&i.push({event:a,listeners:C})}var DP=/\r\n?/g,OP=/\u0000|\uFFFD/g;function _0(i){return(typeof i=="string"?i:""+i).replace(DP,`
`).replace(OP,"")}function bd(i,a,u){if(a=_0(a),_0(i)!==a&&u)throw Error(t(425))}function kd(){}var Bp=null,$p=null;function zp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Wp=typeof setTimeout=="function"?setTimeout:void 0,LP=typeof clearTimeout=="function"?clearTimeout:void 0,w0=typeof Promise=="function"?Promise:void 0,MP=typeof queueMicrotask=="function"?queueMicrotask:typeof w0<"u"?function(i){return w0.resolve(null).then(i).catch(jP)}:Wp;function jP(i){setTimeout(function(){throw i})}function qp(i,a){var u=a,p=0;do{var g=u.nextSibling;if(i.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(p===0){i.removeChild(g),Ar(a);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=g}while(u);Ar(a)}function Ti(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function E0(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}var Fa=Math.random().toString(36).slice(2),Zr="__reactFiber$"+Fa,Tu="__reactProps$"+Fa,Ss="__reactContainer$"+Fa,Hp="__reactEvents$"+Fa,VP="__reactListeners$"+Fa,FP="__reactHandles$"+Fa;function Do(i){var a=i[Zr];if(a)return a;for(var u=i.parentNode;u;){if(a=u[Ss]||u[Zr]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=E0(i);i!==null;){if(u=i[Zr])return u;i=E0(i)}return a}i=u,u=i.parentNode}return null}function Iu(i){return i=i[Zr]||i[Ss],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Ua(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Nd(i){return i[Tu]||null}var Gp=[],Ba=-1;function Ii(i){return{current:i}}function it(i){0>Ba||(i.current=Gp[Ba],Gp[Ba]=null,Ba--)}function nt(i,a){Ba++,Gp[Ba]=i.current,i.current=a}var xi={},rn=Ii(xi),Rn=Ii(!1),Oo=xi;function $a(i,a){var u=i.type.contextTypes;if(!u)return xi;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var g={},w;for(w in u)g[w]=a[w];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=g),g}function An(i){return i=i.childContextTypes,i!=null}function Dd(){it(Rn),it(rn)}function T0(i,a,u){if(rn.current!==xi)throw Error(t(168));nt(rn,a),nt(Rn,u)}function I0(i,a,u){var p=i.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var g in p)if(!(g in a))throw Error(t(108,je(i)||"Unknown",g));return ie({},u,p)}function Od(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||xi,Oo=rn.current,nt(rn,i),nt(Rn,Rn.current),!0}function x0(i,a,u){var p=i.stateNode;if(!p)throw Error(t(169));u?(i=I0(i,a,Oo),p.__reactInternalMemoizedMergedChildContext=i,it(Rn),it(rn),nt(rn,i)):it(Rn),nt(Rn,u)}var Rs=null,Ld=!1,Kp=!1;function C0(i){Rs===null?Rs=[i]:Rs.push(i)}function UP(i){Ld=!0,C0(i)}function Ci(){if(!Kp&&Rs!==null){Kp=!0;var i=0,a=Fe;try{var u=Rs;for(Fe=1;i<u.length;i++){var p=u[i];do p=p(!0);while(p!==null)}Rs=null,Ld=!1}catch(g){throw Rs!==null&&(Rs=Rs.slice(i+1)),Ea(Co,Ci),g}finally{Fe=a,Kp=!1}}return null}var za=[],Wa=0,Md=null,jd=0,ir=[],or=0,Lo=null,As=1,Ps="";function Mo(i,a){za[Wa++]=jd,za[Wa++]=Md,Md=i,jd=a}function S0(i,a,u){ir[or++]=As,ir[or++]=Ps,ir[or++]=Lo,Lo=i;var p=As;i=Ps;var g=32-vn(p)-1;p&=~(1<<g),u+=1;var w=32-vn(a)+g;if(30<w){var C=g-g%5;w=(p&(1<<C)-1).toString(32),p>>=C,g-=C,As=1<<32-vn(a)+g|u<<g|p,Ps=w+i}else As=1<<w|u<<g|p,Ps=i}function Qp(i){i.return!==null&&(Mo(i,1),S0(i,1,0))}function Yp(i){for(;i===Md;)Md=za[--Wa],za[Wa]=null,jd=za[--Wa],za[Wa]=null;for(;i===Lo;)Lo=ir[--or],ir[or]=null,Ps=ir[--or],ir[or]=null,As=ir[--or],ir[or]=null}var qn=null,Hn=null,ht=!1,kr=null;function R0(i,a){var u=cr(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=i,a=i.deletions,a===null?(i.deletions=[u],i.flags|=16):a.push(u)}function A0(i,a){switch(i.tag){case 5:var u=i.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,qn=i,Hn=Ti(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,qn=i,Hn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=Lo!==null?{id:As,overflow:Ps}:null,i.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=cr(18,null,null,0),u.stateNode=a,u.return=i,i.child=u,qn=i,Hn=null,!0):!1;default:return!1}}function Xp(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Jp(i){if(ht){var a=Hn;if(a){var u=a;if(!A0(i,a)){if(Xp(i))throw Error(t(418));a=Ti(u.nextSibling);var p=qn;a&&A0(i,a)?R0(p,u):(i.flags=i.flags&-4097|2,ht=!1,qn=i)}}else{if(Xp(i))throw Error(t(418));i.flags=i.flags&-4097|2,ht=!1,qn=i}}}function P0(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;qn=i}function Vd(i){if(i!==qn)return!1;if(!ht)return P0(i),ht=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!zp(i.type,i.memoizedProps)),a&&(a=Hn)){if(Xp(i))throw b0(),Error(t(418));for(;a;)R0(i,a),a=Ti(a.nextSibling)}if(P0(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(a===0){Hn=Ti(i.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}i=i.nextSibling}Hn=null}}else Hn=qn?Ti(i.stateNode.nextSibling):null;return!0}function b0(){for(var i=Hn;i;)i=Ti(i.nextSibling)}function qa(){Hn=qn=null,ht=!1}function Zp(i){kr===null?kr=[i]:kr.push(i)}var BP=W.ReactCurrentBatchConfig;function xu(i,a,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,i));var g=p,w=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===w?a.ref:(a=function(C){var O=g.refs;C===null?delete O[w]:O[w]=C},a._stringRef=w,a)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function Fd(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function k0(i){var a=i._init;return a(i._payload)}function N0(i){function a(H,$){if(i){var G=H.deletions;G===null?(H.deletions=[$],H.flags|=16):G.push($)}}function u(H,$){if(!i)return null;for(;$!==null;)a(H,$),$=$.sibling;return null}function p(H,$){for(H=new Map;$!==null;)$.key!==null?H.set($.key,$):H.set($.index,$),$=$.sibling;return H}function g(H,$){return H=Di(H,$),H.index=0,H.sibling=null,H}function w(H,$,G){return H.index=G,i?(G=H.alternate,G!==null?(G=G.index,G<$?(H.flags|=2,$):G):(H.flags|=2,$)):(H.flags|=1048576,$)}function C(H){return i&&H.alternate===null&&(H.flags|=2),H}function O(H,$,G,oe){return $===null||$.tag!==6?($=Wm(G,H.mode,oe),$.return=H,$):($=g($,G),$.return=H,$)}function F(H,$,G,oe){var ve=G.type;return ve===N?ne(H,$,G.props.children,oe,G.key):$!==null&&($.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Re&&k0(ve)===$.type)?(oe=g($,G.props),oe.ref=xu(H,$,G),oe.return=H,oe):(oe=uh(G.type,G.key,G.props,null,H.mode,oe),oe.ref=xu(H,$,G),oe.return=H,oe)}function K(H,$,G,oe){return $===null||$.tag!==4||$.stateNode.containerInfo!==G.containerInfo||$.stateNode.implementation!==G.implementation?($=qm(G,H.mode,oe),$.return=H,$):($=g($,G.children||[]),$.return=H,$)}function ne(H,$,G,oe,ve){return $===null||$.tag!==7?($=Wo(G,H.mode,oe,ve),$.return=H,$):($=g($,G),$.return=H,$)}function re(H,$,G){if(typeof $=="string"&&$!==""||typeof $=="number")return $=Wm(""+$,H.mode,G),$.return=H,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case Y:return G=uh($.type,$.key,$.props,null,H.mode,G),G.ref=xu(H,null,$),G.return=H,G;case X:return $=qm($,H.mode,G),$.return=H,$;case Re:var oe=$._init;return re(H,oe($._payload),G)}if(Qt($)||ue($))return $=Wo($,H.mode,G,null),$.return=H,$;Fd(H,$)}return null}function te(H,$,G,oe){var ve=$!==null?$.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return ve!==null?null:O(H,$,""+G,oe);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Y:return G.key===ve?F(H,$,G,oe):null;case X:return G.key===ve?K(H,$,G,oe):null;case Re:return ve=G._init,te(H,$,ve(G._payload),oe)}if(Qt(G)||ue(G))return ve!==null?null:ne(H,$,G,oe,null);Fd(H,G)}return null}function de(H,$,G,oe,ve){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return H=H.get(G)||null,O($,H,""+oe,ve);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case Y:return H=H.get(oe.key===null?G:oe.key)||null,F($,H,oe,ve);case X:return H=H.get(oe.key===null?G:oe.key)||null,K($,H,oe,ve);case Re:var we=oe._init;return de(H,$,G,we(oe._payload),ve)}if(Qt(oe)||ue(oe))return H=H.get(G)||null,ne($,H,oe,ve,null);Fd($,oe)}return null}function ge(H,$,G,oe){for(var ve=null,we=null,Ee=$,Pe=$=0,Wt=null;Ee!==null&&Pe<G.length;Pe++){Ee.index>Pe?(Wt=Ee,Ee=null):Wt=Ee.sibling;var Ge=te(H,Ee,G[Pe],oe);if(Ge===null){Ee===null&&(Ee=Wt);break}i&&Ee&&Ge.alternate===null&&a(H,Ee),$=w(Ge,$,Pe),we===null?ve=Ge:we.sibling=Ge,we=Ge,Ee=Wt}if(Pe===G.length)return u(H,Ee),ht&&Mo(H,Pe),ve;if(Ee===null){for(;Pe<G.length;Pe++)Ee=re(H,G[Pe],oe),Ee!==null&&($=w(Ee,$,Pe),we===null?ve=Ee:we.sibling=Ee,we=Ee);return ht&&Mo(H,Pe),ve}for(Ee=p(H,Ee);Pe<G.length;Pe++)Wt=de(Ee,H,Pe,G[Pe],oe),Wt!==null&&(i&&Wt.alternate!==null&&Ee.delete(Wt.key===null?Pe:Wt.key),$=w(Wt,$,Pe),we===null?ve=Wt:we.sibling=Wt,we=Wt);return i&&Ee.forEach(function(Oi){return a(H,Oi)}),ht&&Mo(H,Pe),ve}function ye(H,$,G,oe){var ve=ue(G);if(typeof ve!="function")throw Error(t(150));if(G=ve.call(G),G==null)throw Error(t(151));for(var we=ve=null,Ee=$,Pe=$=0,Wt=null,Ge=G.next();Ee!==null&&!Ge.done;Pe++,Ge=G.next()){Ee.index>Pe?(Wt=Ee,Ee=null):Wt=Ee.sibling;var Oi=te(H,Ee,Ge.value,oe);if(Oi===null){Ee===null&&(Ee=Wt);break}i&&Ee&&Oi.alternate===null&&a(H,Ee),$=w(Oi,$,Pe),we===null?ve=Oi:we.sibling=Oi,we=Oi,Ee=Wt}if(Ge.done)return u(H,Ee),ht&&Mo(H,Pe),ve;if(Ee===null){for(;!Ge.done;Pe++,Ge=G.next())Ge=re(H,Ge.value,oe),Ge!==null&&($=w(Ge,$,Pe),we===null?ve=Ge:we.sibling=Ge,we=Ge);return ht&&Mo(H,Pe),ve}for(Ee=p(H,Ee);!Ge.done;Pe++,Ge=G.next())Ge=de(Ee,H,Pe,Ge.value,oe),Ge!==null&&(i&&Ge.alternate!==null&&Ee.delete(Ge.key===null?Pe:Ge.key),$=w(Ge,$,Pe),we===null?ve=Ge:we.sibling=Ge,we=Ge);return i&&Ee.forEach(function(wb){return a(H,wb)}),ht&&Mo(H,Pe),ve}function xt(H,$,G,oe){if(typeof G=="object"&&G!==null&&G.type===N&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case Y:e:{for(var ve=G.key,we=$;we!==null;){if(we.key===ve){if(ve=G.type,ve===N){if(we.tag===7){u(H,we.sibling),$=g(we,G.props.children),$.return=H,H=$;break e}}else if(we.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Re&&k0(ve)===we.type){u(H,we.sibling),$=g(we,G.props),$.ref=xu(H,we,G),$.return=H,H=$;break e}u(H,we);break}else a(H,we);we=we.sibling}G.type===N?($=Wo(G.props.children,H.mode,oe,G.key),$.return=H,H=$):(oe=uh(G.type,G.key,G.props,null,H.mode,oe),oe.ref=xu(H,$,G),oe.return=H,H=oe)}return C(H);case X:e:{for(we=G.key;$!==null;){if($.key===we)if($.tag===4&&$.stateNode.containerInfo===G.containerInfo&&$.stateNode.implementation===G.implementation){u(H,$.sibling),$=g($,G.children||[]),$.return=H,H=$;break e}else{u(H,$);break}else a(H,$);$=$.sibling}$=qm(G,H.mode,oe),$.return=H,H=$}return C(H);case Re:return we=G._init,xt(H,$,we(G._payload),oe)}if(Qt(G))return ge(H,$,G,oe);if(ue(G))return ye(H,$,G,oe);Fd(H,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,$!==null&&$.tag===6?(u(H,$.sibling),$=g($,G),$.return=H,H=$):(u(H,$),$=Wm(G,H.mode,oe),$.return=H,H=$),C(H)):u(H,$)}return xt}var Ha=N0(!0),D0=N0(!1),Ud=Ii(null),Bd=null,Ga=null,em=null;function tm(){em=Ga=Bd=null}function nm(i){var a=Ud.current;it(Ud),i._currentValue=a}function rm(i,a,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),i===u)break;i=i.return}}function Ka(i,a){Bd=i,em=Ga=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(Pn=!0),i.firstContext=null)}function ar(i){var a=i._currentValue;if(em!==i)if(i={context:i,memoizedValue:a,next:null},Ga===null){if(Bd===null)throw Error(t(308));Ga=i,Bd.dependencies={lanes:0,firstContext:i}}else Ga=Ga.next=i;return a}var jo=null;function sm(i){jo===null?jo=[i]:jo.push(i)}function O0(i,a,u,p){var g=a.interleaved;return g===null?(u.next=u,sm(a)):(u.next=g.next,g.next=u),a.interleaved=u,bs(i,p)}function bs(i,a){i.lanes|=a;var u=i.alternate;for(u!==null&&(u.lanes|=a),u=i,i=i.return;i!==null;)i.childLanes|=a,u=i.alternate,u!==null&&(u.childLanes|=a),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Si=!1;function im(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function L0(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ks(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function Ri(i,a,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(He&2)!==0){var g=p.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),p.pending=a,bs(i,u)}return g=p.interleaved,g===null?(a.next=a,sm(p)):(a.next=g.next,g.next=a),p.interleaved=a,bs(i,u)}function $d(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var p=a.lanes;p&=i.pendingLanes,u|=p,a.lanes=u,gi(i,u)}}function M0(i,a){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var g=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var C={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};w===null?g=w=C:w=w.next=C,u=u.next}while(u!==null);w===null?g=w=a:w=w.next=a}else g=w=a;u={baseState:p.baseState,firstBaseUpdate:g,lastBaseUpdate:w,shared:p.shared,effects:p.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}function zd(i,a,u,p){var g=i.updateQueue;Si=!1;var w=g.firstBaseUpdate,C=g.lastBaseUpdate,O=g.shared.pending;if(O!==null){g.shared.pending=null;var F=O,K=F.next;F.next=null,C===null?w=K:C.next=K,C=F;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,O=ne.lastBaseUpdate,O!==C&&(O===null?ne.firstBaseUpdate=K:O.next=K,ne.lastBaseUpdate=F))}if(w!==null){var re=g.baseState;C=0,ne=K=F=null,O=w;do{var te=O.lane,de=O.eventTime;if((p&te)===te){ne!==null&&(ne=ne.next={eventTime:de,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var ge=i,ye=O;switch(te=a,de=u,ye.tag){case 1:if(ge=ye.payload,typeof ge=="function"){re=ge.call(de,re,te);break e}re=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=ye.payload,te=typeof ge=="function"?ge.call(de,re,te):ge,te==null)break e;re=ie({},re,te);break e;case 2:Si=!0}}O.callback!==null&&O.lane!==0&&(i.flags|=64,te=g.effects,te===null?g.effects=[O]:te.push(O))}else de={eventTime:de,lane:te,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ne===null?(K=ne=de,F=re):ne=ne.next=de,C|=te;if(O=O.next,O===null){if(O=g.shared.pending,O===null)break;te=O,O=te.next,te.next=null,g.lastBaseUpdate=te,g.shared.pending=null}}while(!0);if(ne===null&&(F=re),g.baseState=F,g.firstBaseUpdate=K,g.lastBaseUpdate=ne,a=g.shared.interleaved,a!==null){g=a;do C|=g.lane,g=g.next;while(g!==a)}else w===null&&(g.shared.lanes=0);Uo|=C,i.lanes=C,i.memoizedState=re}}function j0(i,a,u){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var p=i[a],g=p.callback;if(g!==null){if(p.callback=null,p=u,typeof g!="function")throw Error(t(191,g));g.call(p)}}}var Cu={},es=Ii(Cu),Su=Ii(Cu),Ru=Ii(Cu);function Vo(i){if(i===Cu)throw Error(t(174));return i}function om(i,a){switch(nt(Ru,a),nt(Su,i),nt(es,Cu),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:vt(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=vt(a,i)}it(es),nt(es,a)}function Qa(){it(es),it(Su),it(Ru)}function V0(i){Vo(Ru.current);var a=Vo(es.current),u=vt(a,i.type);a!==u&&(nt(Su,i),nt(es,u))}function am(i){Su.current===i&&(it(es),it(Su))}var mt=Ii(0);function Wd(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var lm=[];function um(){for(var i=0;i<lm.length;i++)lm[i]._workInProgressVersionPrimary=null;lm.length=0}var qd=W.ReactCurrentDispatcher,cm=W.ReactCurrentBatchConfig,Fo=0,gt=null,Lt=null,$t=null,Hd=!1,Au=!1,Pu=0,$P=0;function sn(){throw Error(t(321))}function dm(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!br(i[u],a[u]))return!1;return!0}function hm(i,a,u,p,g,w){if(Fo=w,gt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,qd.current=i===null||i.memoizedState===null?HP:GP,i=u(p,g),Au){w=0;do{if(Au=!1,Pu=0,25<=w)throw Error(t(301));w+=1,$t=Lt=null,a.updateQueue=null,qd.current=KP,i=u(p,g)}while(Au)}if(qd.current=Qd,a=Lt!==null&&Lt.next!==null,Fo=0,$t=Lt=gt=null,Hd=!1,a)throw Error(t(300));return i}function fm(){var i=Pu!==0;return Pu=0,i}function ts(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?gt.memoizedState=$t=i:$t=$t.next=i,$t}function lr(){if(Lt===null){var i=gt.alternate;i=i!==null?i.memoizedState:null}else i=Lt.next;var a=$t===null?gt.memoizedState:$t.next;if(a!==null)$t=a,Lt=i;else{if(i===null)throw Error(t(310));Lt=i,i={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},$t===null?gt.memoizedState=$t=i:$t=$t.next=i}return $t}function bu(i,a){return typeof a=="function"?a(i):a}function pm(i){var a=lr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=Lt,g=p.baseQueue,w=u.pending;if(w!==null){if(g!==null){var C=g.next;g.next=w.next,w.next=C}p.baseQueue=g=w,u.pending=null}if(g!==null){w=g.next,p=p.baseState;var O=C=null,F=null,K=w;do{var ne=K.lane;if((Fo&ne)===ne)F!==null&&(F=F.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),p=K.hasEagerState?K.eagerState:i(p,K.action);else{var re={lane:ne,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};F===null?(O=F=re,C=p):F=F.next=re,gt.lanes|=ne,Uo|=ne}K=K.next}while(K!==null&&K!==w);F===null?C=p:F.next=O,br(p,a.memoizedState)||(Pn=!0),a.memoizedState=p,a.baseState=C,a.baseQueue=F,u.lastRenderedState=p}if(i=u.interleaved,i!==null){g=i;do w=g.lane,gt.lanes|=w,Uo|=w,g=g.next;while(g!==i)}else g===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function mm(i){var a=lr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=u.dispatch,g=u.pending,w=a.memoizedState;if(g!==null){u.pending=null;var C=g=g.next;do w=i(w,C.action),C=C.next;while(C!==g);br(w,a.memoizedState)||(Pn=!0),a.memoizedState=w,a.baseQueue===null&&(a.baseState=w),u.lastRenderedState=w}return[w,p]}function F0(){}function U0(i,a){var u=gt,p=lr(),g=a(),w=!br(p.memoizedState,g);if(w&&(p.memoizedState=g,Pn=!0),p=p.queue,gm(z0.bind(null,u,p,i),[i]),p.getSnapshot!==a||w||$t!==null&&$t.memoizedState.tag&1){if(u.flags|=2048,ku(9,$0.bind(null,u,p,g,a),void 0,null),zt===null)throw Error(t(349));(Fo&30)!==0||B0(u,a,g)}return g}function B0(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=gt.updateQueue,a===null?(a={lastEffect:null,stores:null},gt.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function $0(i,a,u,p){a.value=u,a.getSnapshot=p,W0(a)&&q0(i)}function z0(i,a,u){return u(function(){W0(a)&&q0(i)})}function W0(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!br(i,u)}catch{return!0}}function q0(i){var a=bs(i,1);a!==null&&Lr(a,i,1,-1)}function H0(i){var a=ts();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bu,lastRenderedState:i},a.queue=i,i=i.dispatch=qP.bind(null,gt,i),[a.memoizedState,i]}function ku(i,a,u,p){return i={tag:i,create:a,destroy:u,deps:p,next:null},a=gt.updateQueue,a===null?(a={lastEffect:null,stores:null},gt.updateQueue=a,a.lastEffect=i.next=i):(u=a.lastEffect,u===null?a.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,a.lastEffect=i)),i}function G0(){return lr().memoizedState}function Gd(i,a,u,p){var g=ts();gt.flags|=i,g.memoizedState=ku(1|a,u,void 0,p===void 0?null:p)}function Kd(i,a,u,p){var g=lr();p=p===void 0?null:p;var w=void 0;if(Lt!==null){var C=Lt.memoizedState;if(w=C.destroy,p!==null&&dm(p,C.deps)){g.memoizedState=ku(a,u,w,p);return}}gt.flags|=i,g.memoizedState=ku(1|a,u,w,p)}function K0(i,a){return Gd(8390656,8,i,a)}function gm(i,a){return Kd(2048,8,i,a)}function Q0(i,a){return Kd(4,2,i,a)}function Y0(i,a){return Kd(4,4,i,a)}function X0(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function J0(i,a,u){return u=u!=null?u.concat([i]):null,Kd(4,4,X0.bind(null,a,i),u)}function ym(){}function Z0(i,a){var u=lr();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&dm(a,p[1])?p[0]:(u.memoizedState=[i,a],i)}function ew(i,a){var u=lr();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&dm(a,p[1])?p[0]:(i=i(),u.memoizedState=[i,a],i)}function tw(i,a,u){return(Fo&21)===0?(i.baseState&&(i.baseState=!1,Pn=!0),i.memoizedState=u):(br(u,a)||(u=Ao(),gt.lanes|=u,Uo|=u,i.baseState=!0),a)}function zP(i,a){var u=Fe;Fe=u!==0&&4>u?u:4,i(!0);var p=cm.transition;cm.transition={};try{i(!1),a()}finally{Fe=u,cm.transition=p}}function nw(){return lr().memoizedState}function WP(i,a,u){var p=ki(i);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},rw(i))sw(a,u);else if(u=O0(i,a,u,p),u!==null){var g=En();Lr(u,i,p,g),iw(u,a,p)}}function qP(i,a,u){var p=ki(i),g={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(rw(i))sw(a,g);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=a.lastRenderedReducer,w!==null))try{var C=a.lastRenderedState,O=w(C,u);if(g.hasEagerState=!0,g.eagerState=O,br(O,C)){var F=a.interleaved;F===null?(g.next=g,sm(a)):(g.next=F.next,F.next=g),a.interleaved=g;return}}catch{}finally{}u=O0(i,a,g,p),u!==null&&(g=En(),Lr(u,i,p,g),iw(u,a,p))}}function rw(i){var a=i.alternate;return i===gt||a!==null&&a===gt}function sw(i,a){Au=Hd=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function iw(i,a,u){if((u&4194240)!==0){var p=a.lanes;p&=i.pendingLanes,u|=p,a.lanes=u,gi(i,u)}}var Qd={readContext:ar,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},HP={readContext:ar,useCallback:function(i,a){return ts().memoizedState=[i,a===void 0?null:a],i},useContext:ar,useEffect:K0,useImperativeHandle:function(i,a,u){return u=u!=null?u.concat([i]):null,Gd(4194308,4,X0.bind(null,a,i),u)},useLayoutEffect:function(i,a){return Gd(4194308,4,i,a)},useInsertionEffect:function(i,a){return Gd(4,2,i,a)},useMemo:function(i,a){var u=ts();return a=a===void 0?null:a,i=i(),u.memoizedState=[i,a],i},useReducer:function(i,a,u){var p=ts();return a=u!==void 0?u(a):a,p.memoizedState=p.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},p.queue=i,i=i.dispatch=WP.bind(null,gt,i),[p.memoizedState,i]},useRef:function(i){var a=ts();return i={current:i},a.memoizedState=i},useState:H0,useDebugValue:ym,useDeferredValue:function(i){return ts().memoizedState=i},useTransition:function(){var i=H0(!1),a=i[0];return i=zP.bind(null,i[1]),ts().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,u){var p=gt,g=ts();if(ht){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),zt===null)throw Error(t(349));(Fo&30)!==0||B0(p,a,u)}g.memoizedState=u;var w={value:u,getSnapshot:a};return g.queue=w,K0(z0.bind(null,p,w,i),[i]),p.flags|=2048,ku(9,$0.bind(null,p,w,u,a),void 0,null),u},useId:function(){var i=ts(),a=zt.identifierPrefix;if(ht){var u=Ps,p=As;u=(p&~(1<<32-vn(p)-1)).toString(32)+u,a=":"+a+"R"+u,u=Pu++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=$P++,a=":"+a+"r"+u.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},GP={readContext:ar,useCallback:Z0,useContext:ar,useEffect:gm,useImperativeHandle:J0,useInsertionEffect:Q0,useLayoutEffect:Y0,useMemo:ew,useReducer:pm,useRef:G0,useState:function(){return pm(bu)},useDebugValue:ym,useDeferredValue:function(i){var a=lr();return tw(a,Lt.memoizedState,i)},useTransition:function(){var i=pm(bu)[0],a=lr().memoizedState;return[i,a]},useMutableSource:F0,useSyncExternalStore:U0,useId:nw,unstable_isNewReconciler:!1},KP={readContext:ar,useCallback:Z0,useContext:ar,useEffect:gm,useImperativeHandle:J0,useInsertionEffect:Q0,useLayoutEffect:Y0,useMemo:ew,useReducer:mm,useRef:G0,useState:function(){return mm(bu)},useDebugValue:ym,useDeferredValue:function(i){var a=lr();return Lt===null?a.memoizedState=i:tw(a,Lt.memoizedState,i)},useTransition:function(){var i=mm(bu)[0],a=lr().memoizedState;return[i,a]},useMutableSource:F0,useSyncExternalStore:U0,useId:nw,unstable_isNewReconciler:!1};function Nr(i,a){if(i&&i.defaultProps){a=ie({},a),i=i.defaultProps;for(var u in i)a[u]===void 0&&(a[u]=i[u]);return a}return a}function vm(i,a,u,p){a=i.memoizedState,u=u(p,a),u=u==null?a:ie({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Yd={isMounted:function(i){return(i=i._reactInternals)?Ir(i)===i:!1},enqueueSetState:function(i,a,u){i=i._reactInternals;var p=En(),g=ki(i),w=ks(p,g);w.payload=a,u!=null&&(w.callback=u),a=Ri(i,w,g),a!==null&&(Lr(a,i,g,p),$d(a,i,g))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var p=En(),g=ki(i),w=ks(p,g);w.tag=1,w.payload=a,u!=null&&(w.callback=u),a=Ri(i,w,g),a!==null&&(Lr(a,i,g,p),$d(a,i,g))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=En(),p=ki(i),g=ks(u,p);g.tag=2,a!=null&&(g.callback=a),a=Ri(i,g,p),a!==null&&(Lr(a,i,p,u),$d(a,i,p))}};function ow(i,a,u,p,g,w,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,w,C):a.prototype&&a.prototype.isPureReactComponent?!yu(u,p)||!yu(g,w):!0}function aw(i,a,u){var p=!1,g=xi,w=a.contextType;return typeof w=="object"&&w!==null?w=ar(w):(g=An(a)?Oo:rn.current,p=a.contextTypes,w=(p=p!=null)?$a(i,g):xi),a=new a(u,w),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Yd,i.stateNode=a,a._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=w),a}function lw(i,a,u,p){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,p),a.state!==i&&Yd.enqueueReplaceState(a,a.state,null)}function _m(i,a,u,p){var g=i.stateNode;g.props=u,g.state=i.memoizedState,g.refs={},im(i);var w=a.contextType;typeof w=="object"&&w!==null?g.context=ar(w):(w=An(a)?Oo:rn.current,g.context=$a(i,w)),g.state=i.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(vm(i,a,w,u),g.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&Yd.enqueueReplaceState(g,g.state,null),zd(i,u,g,p),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function Ya(i,a){try{var u="",p=a;do u+=Ae(p),p=p.return;while(p);var g=u}catch(w){g=`
Error generating stack: `+w.message+`
`+w.stack}return{value:i,source:a,stack:g,digest:null}}function wm(i,a,u){return{value:i,source:null,stack:u??null,digest:a??null}}function Em(i,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var QP=typeof WeakMap=="function"?WeakMap:Map;function uw(i,a,u){u=ks(-1,u),u.tag=3,u.payload={element:null};var p=a.value;return u.callback=function(){rh||(rh=!0,Mm=p),Em(i,a)},u}function cw(i,a,u){u=ks(-1,u),u.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var g=a.value;u.payload=function(){return p(g)},u.callback=function(){Em(i,a)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(u.callback=function(){Em(i,a),typeof p!="function"&&(Pi===null?Pi=new Set([this]):Pi.add(this));var C=a.stack;this.componentDidCatch(a.value,{componentStack:C!==null?C:""})}),u}function dw(i,a,u){var p=i.pingCache;if(p===null){p=i.pingCache=new QP;var g=new Set;p.set(a,g)}else g=p.get(a),g===void 0&&(g=new Set,p.set(a,g));g.has(u)||(g.add(u),i=ub.bind(null,i,a,u),a.then(i,i))}function hw(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function fw(i,a,u,p,g){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=ks(-1,1),a.tag=2,Ri(u,a,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var YP=W.ReactCurrentOwner,Pn=!1;function wn(i,a,u,p){a.child=i===null?D0(a,null,u,p):Ha(a,i.child,u,p)}function pw(i,a,u,p,g){u=u.render;var w=a.ref;return Ka(a,g),p=hm(i,a,u,p,w,g),u=fm(),i!==null&&!Pn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,Ns(i,a,g)):(ht&&u&&Qp(a),a.flags|=1,wn(i,a,p,g),a.child)}function mw(i,a,u,p,g){if(i===null){var w=u.type;return typeof w=="function"&&!zm(w)&&w.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=w,gw(i,a,w,p,g)):(i=uh(u.type,null,p,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(w=i.child,(i.lanes&g)===0){var C=w.memoizedProps;if(u=u.compare,u=u!==null?u:yu,u(C,p)&&i.ref===a.ref)return Ns(i,a,g)}return a.flags|=1,i=Di(w,p),i.ref=a.ref,i.return=a,a.child=i}function gw(i,a,u,p,g){if(i!==null){var w=i.memoizedProps;if(yu(w,p)&&i.ref===a.ref)if(Pn=!1,a.pendingProps=p=w,(i.lanes&g)!==0)(i.flags&131072)!==0&&(Pn=!0);else return a.lanes=i.lanes,Ns(i,a,g)}return Tm(i,a,u,p,g)}function yw(i,a,u){var p=a.pendingProps,g=p.children,w=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(Ja,Gn),Gn|=u;else{if((u&1073741824)===0)return i=w!==null?w.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,nt(Ja,Gn),Gn|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:u,nt(Ja,Gn),Gn|=p}else w!==null?(p=w.baseLanes|u,a.memoizedState=null):p=u,nt(Ja,Gn),Gn|=p;return wn(i,a,g,u),a.child}function vw(i,a){var u=a.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function Tm(i,a,u,p,g){var w=An(u)?Oo:rn.current;return w=$a(a,w),Ka(a,g),u=hm(i,a,u,p,w,g),p=fm(),i!==null&&!Pn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,Ns(i,a,g)):(ht&&p&&Qp(a),a.flags|=1,wn(i,a,u,g),a.child)}function _w(i,a,u,p,g){if(An(u)){var w=!0;Od(a)}else w=!1;if(Ka(a,g),a.stateNode===null)Jd(i,a),aw(a,u,p),_m(a,u,p,g),p=!0;else if(i===null){var C=a.stateNode,O=a.memoizedProps;C.props=O;var F=C.context,K=u.contextType;typeof K=="object"&&K!==null?K=ar(K):(K=An(u)?Oo:rn.current,K=$a(a,K));var ne=u.getDerivedStateFromProps,re=typeof ne=="function"||typeof C.getSnapshotBeforeUpdate=="function";re||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(O!==p||F!==K)&&lw(a,C,p,K),Si=!1;var te=a.memoizedState;C.state=te,zd(a,p,C,g),F=a.memoizedState,O!==p||te!==F||Rn.current||Si?(typeof ne=="function"&&(vm(a,u,ne,p),F=a.memoizedState),(O=Si||ow(a,u,O,p,te,F,K))?(re||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(a.flags|=4194308)):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=F),C.props=p,C.state=F,C.context=K,p=O):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{C=a.stateNode,L0(i,a),O=a.memoizedProps,K=a.type===a.elementType?O:Nr(a.type,O),C.props=K,re=a.pendingProps,te=C.context,F=u.contextType,typeof F=="object"&&F!==null?F=ar(F):(F=An(u)?Oo:rn.current,F=$a(a,F));var de=u.getDerivedStateFromProps;(ne=typeof de=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(O!==re||te!==F)&&lw(a,C,p,F),Si=!1,te=a.memoizedState,C.state=te,zd(a,p,C,g);var ge=a.memoizedState;O!==re||te!==ge||Rn.current||Si?(typeof de=="function"&&(vm(a,u,de,p),ge=a.memoizedState),(K=Si||ow(a,u,K,p,te,ge,F)||!1)?(ne||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(p,ge,F),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(p,ge,F)),typeof C.componentDidUpdate=="function"&&(a.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof C.componentDidUpdate!="function"||O===i.memoizedProps&&te===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&te===i.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=ge),C.props=p,C.state=ge,C.context=F,p=K):(typeof C.componentDidUpdate!="function"||O===i.memoizedProps&&te===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&te===i.memoizedState||(a.flags|=1024),p=!1)}return Im(i,a,u,p,w,g)}function Im(i,a,u,p,g,w){vw(i,a);var C=(a.flags&128)!==0;if(!p&&!C)return g&&x0(a,u,!1),Ns(i,a,w);p=a.stateNode,YP.current=a;var O=C&&typeof u.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,i!==null&&C?(a.child=Ha(a,i.child,null,w),a.child=Ha(a,null,O,w)):wn(i,a,O,w),a.memoizedState=p.state,g&&x0(a,u,!0),a.child}function ww(i){var a=i.stateNode;a.pendingContext?T0(i,a.pendingContext,a.pendingContext!==a.context):a.context&&T0(i,a.context,!1),om(i,a.containerInfo)}function Ew(i,a,u,p,g){return qa(),Zp(g),a.flags|=256,wn(i,a,u,p),a.child}var xm={dehydrated:null,treeContext:null,retryLane:0};function Cm(i){return{baseLanes:i,cachePool:null,transitions:null}}function Tw(i,a,u){var p=a.pendingProps,g=mt.current,w=!1,C=(a.flags&128)!==0,O;if((O=C)||(O=i!==null&&i.memoizedState===null?!1:(g&2)!==0),O?(w=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),nt(mt,g&1),i===null)return Jp(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(C=p.children,i=p.fallback,w?(p=a.mode,w=a.child,C={mode:"hidden",children:C},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=C):w=ch(C,p,0,null),i=Wo(i,p,u,null),w.return=a,i.return=a,w.sibling=i,a.child=w,a.child.memoizedState=Cm(u),a.memoizedState=xm,i):Sm(a,C));if(g=i.memoizedState,g!==null&&(O=g.dehydrated,O!==null))return XP(i,a,C,p,O,g,u);if(w){w=p.fallback,C=a.mode,g=i.child,O=g.sibling;var F={mode:"hidden",children:p.children};return(C&1)===0&&a.child!==g?(p=a.child,p.childLanes=0,p.pendingProps=F,a.deletions=null):(p=Di(g,F),p.subtreeFlags=g.subtreeFlags&14680064),O!==null?w=Di(O,w):(w=Wo(w,C,u,null),w.flags|=2),w.return=a,p.return=a,p.sibling=w,a.child=p,p=w,w=a.child,C=i.child.memoizedState,C=C===null?Cm(u):{baseLanes:C.baseLanes|u,cachePool:null,transitions:C.transitions},w.memoizedState=C,w.childLanes=i.childLanes&~u,a.memoizedState=xm,p}return w=i.child,i=w.sibling,p=Di(w,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=u),p.return=a,p.sibling=null,i!==null&&(u=a.deletions,u===null?(a.deletions=[i],a.flags|=16):u.push(i)),a.child=p,a.memoizedState=null,p}function Sm(i,a){return a=ch({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function Xd(i,a,u,p){return p!==null&&Zp(p),Ha(a,i.child,null,u),i=Sm(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function XP(i,a,u,p,g,w,C){if(u)return a.flags&256?(a.flags&=-257,p=wm(Error(t(422))),Xd(i,a,C,p)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(w=p.fallback,g=a.mode,p=ch({mode:"visible",children:p.children},g,0,null),w=Wo(w,g,C,null),w.flags|=2,p.return=a,w.return=a,p.sibling=w,a.child=p,(a.mode&1)!==0&&Ha(a,i.child,null,C),a.child.memoizedState=Cm(C),a.memoizedState=xm,w);if((a.mode&1)===0)return Xd(i,a,C,null);if(g.data==="$!"){if(p=g.nextSibling&&g.nextSibling.dataset,p)var O=p.dgst;return p=O,w=Error(t(419)),p=wm(w,p,void 0),Xd(i,a,C,p)}if(O=(C&i.childLanes)!==0,Pn||O){if(p=zt,p!==null){switch(C&-C){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(p.suspendedLanes|C))!==0?0:g,g!==0&&g!==w.retryLane&&(w.retryLane=g,bs(i,g),Lr(p,i,g,-1))}return $m(),p=wm(Error(t(421))),Xd(i,a,C,p)}return g.data==="$?"?(a.flags|=128,a.child=i.child,a=cb.bind(null,i),g._reactRetry=a,null):(i=w.treeContext,Hn=Ti(g.nextSibling),qn=a,ht=!0,kr=null,i!==null&&(ir[or++]=As,ir[or++]=Ps,ir[or++]=Lo,As=i.id,Ps=i.overflow,Lo=a),a=Sm(a,p.children),a.flags|=4096,a)}function Iw(i,a,u){i.lanes|=a;var p=i.alternate;p!==null&&(p.lanes|=a),rm(i.return,a,u)}function Rm(i,a,u,p,g){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:g}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=u,w.tailMode=g)}function xw(i,a,u){var p=a.pendingProps,g=p.revealOrder,w=p.tail;if(wn(i,a,p.children,u),p=mt.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Iw(i,u,a);else if(i.tag===19)Iw(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(nt(mt,p),(a.mode&1)===0)a.memoizedState=null;else switch(g){case"forwards":for(u=a.child,g=null;u!==null;)i=u.alternate,i!==null&&Wd(i)===null&&(g=u),u=u.sibling;u=g,u===null?(g=a.child,a.child=null):(g=u.sibling,u.sibling=null),Rm(a,!1,g,u,w);break;case"backwards":for(u=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&Wd(i)===null){a.child=g;break}i=g.sibling,g.sibling=u,u=g,g=i}Rm(a,!0,u,null,w);break;case"together":Rm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Jd(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function Ns(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),Uo|=a.lanes,(u&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,u=Di(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=Di(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function JP(i,a,u){switch(a.tag){case 3:ww(a),qa();break;case 5:V0(a);break;case 1:An(a.type)&&Od(a);break;case 4:om(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,g=a.memoizedProps.value;nt(Ud,p._currentValue),p._currentValue=g;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(nt(mt,mt.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?Tw(i,a,u):(nt(mt,mt.current&1),i=Ns(i,a,u),i!==null?i.sibling:null);nt(mt,mt.current&1);break;case 19:if(p=(u&a.childLanes)!==0,(i.flags&128)!==0){if(p)return xw(i,a,u);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),nt(mt,mt.current),p)break;return null;case 22:case 23:return a.lanes=0,yw(i,a,u)}return Ns(i,a,u)}var Cw,Am,Sw,Rw;Cw=function(i,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Am=function(){},Sw=function(i,a,u,p){var g=i.memoizedProps;if(g!==p){i=a.stateNode,Vo(es.current);var w=null;switch(u){case"input":g=vs(i,g),p=vs(i,p),w=[];break;case"select":g=ie({},g,{value:void 0}),p=ie({},p,{value:void 0}),w=[];break;case"textarea":g=ui(i,g),p=ui(i,p),w=[];break;default:typeof g.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=kd)}Jl(u,p);var C;u=null;for(K in g)if(!p.hasOwnProperty(K)&&g.hasOwnProperty(K)&&g[K]!=null)if(K==="style"){var O=g[K];for(C in O)O.hasOwnProperty(C)&&(u||(u={}),u[C]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(s.hasOwnProperty(K)?w||(w=[]):(w=w||[]).push(K,null));for(K in p){var F=p[K];if(O=g!=null?g[K]:void 0,p.hasOwnProperty(K)&&F!==O&&(F!=null||O!=null))if(K==="style")if(O){for(C in O)!O.hasOwnProperty(C)||F&&F.hasOwnProperty(C)||(u||(u={}),u[C]="");for(C in F)F.hasOwnProperty(C)&&O[C]!==F[C]&&(u||(u={}),u[C]=F[C])}else u||(w||(w=[]),w.push(K,u)),u=F;else K==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,O=O?O.__html:void 0,F!=null&&O!==F&&(w=w||[]).push(K,F)):K==="children"?typeof F!="string"&&typeof F!="number"||(w=w||[]).push(K,""+F):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(s.hasOwnProperty(K)?(F!=null&&K==="onScroll"&&st("scroll",i),w||O===F||(w=[])):(w=w||[]).push(K,F))}u&&(w=w||[]).push("style",u);var K=w;(a.updateQueue=K)&&(a.flags|=4)}},Rw=function(i,a,u,p){u!==p&&(a.flags|=4)};function Nu(i,a){if(!ht)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function on(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(a)for(var g=i.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags&14680064,p|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags,p|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=p,i.childLanes=u,a}function ZP(i,a,u){var p=a.pendingProps;switch(Yp(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(a),null;case 1:return An(a.type)&&Dd(),on(a),null;case 3:return p=a.stateNode,Qa(),it(Rn),it(rn),um(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(Vd(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,kr!==null&&(Fm(kr),kr=null))),Am(i,a),on(a),null;case 5:am(a);var g=Vo(Ru.current);if(u=a.type,i!==null&&a.stateNode!=null)Sw(i,a,u,p,g),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(t(166));return on(a),null}if(i=Vo(es.current),Vd(a)){p=a.stateNode,u=a.type;var w=a.memoizedProps;switch(p[Zr]=a,p[Tu]=w,i=(a.mode&1)!==0,u){case"dialog":st("cancel",p),st("close",p);break;case"iframe":case"object":case"embed":st("load",p);break;case"video":case"audio":for(g=0;g<_u.length;g++)st(_u[g],p);break;case"source":st("error",p);break;case"img":case"image":case"link":st("error",p),st("load",p);break;case"details":st("toggle",p);break;case"input":ii(p,w),st("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},st("invalid",p);break;case"textarea":_s(p,w),st("invalid",p)}Jl(u,w),g=null;for(var C in w)if(w.hasOwnProperty(C)){var O=w[C];C==="children"?typeof O=="string"?p.textContent!==O&&(w.suppressHydrationWarning!==!0&&bd(p.textContent,O,i),g=["children",O]):typeof O=="number"&&p.textContent!==""+O&&(w.suppressHydrationWarning!==!0&&bd(p.textContent,O,i),g=["children",""+O]):s.hasOwnProperty(C)&&O!=null&&C==="onScroll"&&st("scroll",p)}switch(u){case"input":Un(p),fa(p,w,!0);break;case"textarea":Un(p),ci(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=kd)}p=g,a.updateQueue=p,p!==null&&(a.flags|=4)}else{C=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=yt(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=C.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=C.createElement(u,{is:p.is}):(i=C.createElement(u),u==="select"&&(C=i,p.multiple?C.multiple=!0:p.size&&(C.size=p.size))):i=C.createElementNS(i,u),i[Zr]=a,i[Tu]=p,Cw(i,a,!1,!1),a.stateNode=i;e:{switch(C=Zl(u,p),u){case"dialog":st("cancel",i),st("close",i),g=p;break;case"iframe":case"object":case"embed":st("load",i),g=p;break;case"video":case"audio":for(g=0;g<_u.length;g++)st(_u[g],i);g=p;break;case"source":st("error",i),g=p;break;case"img":case"image":case"link":st("error",i),st("load",i),g=p;break;case"details":st("toggle",i),g=p;break;case"input":ii(i,p),g=vs(i,p),st("invalid",i);break;case"option":g=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},g=ie({},p,{value:void 0}),st("invalid",i);break;case"textarea":_s(i,p),g=ui(i,p),st("invalid",i);break;default:g=p}Jl(u,g),O=g;for(w in O)if(O.hasOwnProperty(w)){var F=O[w];w==="style"?Yl(i,F):w==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Kl(i,F)):w==="children"?typeof F=="string"?(u!=="textarea"||F!=="")&&di(i,F):typeof F=="number"&&di(i,""+F):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(s.hasOwnProperty(w)?F!=null&&w==="onScroll"&&st("scroll",i):F!=null&&B(i,w,F,C))}switch(u){case"input":Un(i),fa(i,p,!1);break;case"textarea":Un(i),ci(i);break;case"option":p.value!=null&&i.setAttribute("value",""+Oe(p.value));break;case"select":i.multiple=!!p.multiple,w=p.value,w!=null?xn(i,!!p.multiple,w,!1):p.defaultValue!=null&&xn(i,!!p.multiple,p.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=kd)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return on(a),null;case 6:if(i&&a.stateNode!=null)Rw(i,a,i.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(t(166));if(u=Vo(Ru.current),Vo(es.current),Vd(a)){if(p=a.stateNode,u=a.memoizedProps,p[Zr]=a,(w=p.nodeValue!==u)&&(i=qn,i!==null))switch(i.tag){case 3:bd(p.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&bd(p.nodeValue,u,(i.mode&1)!==0)}w&&(a.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[Zr]=a,a.stateNode=p}return on(a),null;case 13:if(it(mt),p=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ht&&Hn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)b0(),qa(),a.flags|=98560,w=!1;else if(w=Vd(a),p!==null&&p.dehydrated!==null){if(i===null){if(!w)throw Error(t(318));if(w=a.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[Zr]=a}else qa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;on(a),w=!1}else kr!==null&&(Fm(kr),kr=null),w=!0;if(!w)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(mt.current&1)!==0?Mt===0&&(Mt=3):$m())),a.updateQueue!==null&&(a.flags|=4),on(a),null);case 4:return Qa(),Am(i,a),i===null&&wu(a.stateNode.containerInfo),on(a),null;case 10:return nm(a.type._context),on(a),null;case 17:return An(a.type)&&Dd(),on(a),null;case 19:if(it(mt),w=a.memoizedState,w===null)return on(a),null;if(p=(a.flags&128)!==0,C=w.rendering,C===null)if(p)Nu(w,!1);else{if(Mt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(C=Wd(i),C!==null){for(a.flags|=128,Nu(w,!1),p=C.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=u,u=a.child;u!==null;)w=u,i=p,w.flags&=14680066,C=w.alternate,C===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=C.childLanes,w.lanes=C.lanes,w.child=C.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=C.memoizedProps,w.memoizedState=C.memoizedState,w.updateQueue=C.updateQueue,w.type=C.type,i=C.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return nt(mt,mt.current&1|2),a.child}i=i.sibling}w.tail!==null&&tt()>Za&&(a.flags|=128,p=!0,Nu(w,!1),a.lanes=4194304)}else{if(!p)if(i=Wd(C),i!==null){if(a.flags|=128,p=!0,u=i.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),Nu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!C.alternate&&!ht)return on(a),null}else 2*tt()-w.renderingStartTime>Za&&u!==1073741824&&(a.flags|=128,p=!0,Nu(w,!1),a.lanes=4194304);w.isBackwards?(C.sibling=a.child,a.child=C):(u=w.last,u!==null?u.sibling=C:a.child=C,w.last=C)}return w.tail!==null?(a=w.tail,w.rendering=a,w.tail=a.sibling,w.renderingStartTime=tt(),a.sibling=null,u=mt.current,nt(mt,p?u&1|2:u&1),a):(on(a),null);case 22:case 23:return Bm(),p=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(Gn&1073741824)!==0&&(on(a),a.subtreeFlags&6&&(a.flags|=8192)):on(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function eb(i,a){switch(Yp(a),a.tag){case 1:return An(a.type)&&Dd(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Qa(),it(Rn),it(rn),um(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return am(a),null;case 13:if(it(mt),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));qa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return it(mt),null;case 4:return Qa(),null;case 10:return nm(a.type._context),null;case 22:case 23:return Bm(),null;case 24:return null;default:return null}}var Zd=!1,an=!1,tb=typeof WeakSet=="function"?WeakSet:Set,me=null;function Xa(i,a){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){_t(i,a,p)}else u.current=null}function Pm(i,a,u){try{u()}catch(p){_t(i,a,p)}}var Aw=!1;function nb(i,a){if(Bp=_i,i=o0(),Dp(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var g=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var C=0,O=-1,F=-1,K=0,ne=0,re=i,te=null;t:for(;;){for(var de;re!==u||g!==0&&re.nodeType!==3||(O=C+g),re!==w||p!==0&&re.nodeType!==3||(F=C+p),re.nodeType===3&&(C+=re.nodeValue.length),(de=re.firstChild)!==null;)te=re,re=de;for(;;){if(re===i)break t;if(te===u&&++K===g&&(O=C),te===w&&++ne===p&&(F=C),(de=re.nextSibling)!==null)break;re=te,te=re.parentNode}re=de}u=O===-1||F===-1?null:{start:O,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for($p={focusedElem:i,selectionRange:u},_i=!1,me=a;me!==null;)if(a=me,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,me=i;else for(;me!==null;){a=me;try{var ge=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var ye=ge.memoizedProps,xt=ge.memoizedState,H=a.stateNode,$=H.getSnapshotBeforeUpdate(a.elementType===a.type?ye:Nr(a.type,ye),xt);H.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var G=a.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){_t(a,a.return,oe)}if(i=a.sibling,i!==null){i.return=a.return,me=i;break}me=a.return}return ge=Aw,Aw=!1,ge}function Du(i,a,u){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var g=p=p.next;do{if((g.tag&i)===i){var w=g.destroy;g.destroy=void 0,w!==void 0&&Pm(a,u,w)}g=g.next}while(g!==p)}}function eh(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&i)===i){var p=u.create;u.destroy=p()}u=u.next}while(u!==a)}}function bm(i){var a=i.ref;if(a!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof a=="function"?a(i):a.current=i}}function Pw(i){var a=i.alternate;a!==null&&(i.alternate=null,Pw(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Zr],delete a[Tu],delete a[Hp],delete a[VP],delete a[FP])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function bw(i){return i.tag===5||i.tag===3||i.tag===4}function kw(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||bw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function km(i,a,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(i,a):u.insertBefore(i,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(i,u)):(a=u,a.appendChild(i)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=kd));else if(p!==4&&(i=i.child,i!==null))for(km(i,a,u),i=i.sibling;i!==null;)km(i,a,u),i=i.sibling}function Nm(i,a,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(Nm(i,a,u),i=i.sibling;i!==null;)Nm(i,a,u),i=i.sibling}var Jt=null,Dr=!1;function Ai(i,a,u){for(u=u.child;u!==null;)Nw(i,a,u),u=u.sibling}function Nw(i,a,u){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(So,u)}catch{}switch(u.tag){case 5:an||Xa(u,a);case 6:var p=Jt,g=Dr;Jt=null,Ai(i,a,u),Jt=p,Dr=g,Jt!==null&&(Dr?(i=Jt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Jt.removeChild(u.stateNode));break;case 18:Jt!==null&&(Dr?(i=Jt,u=u.stateNode,i.nodeType===8?qp(i.parentNode,u):i.nodeType===1&&qp(i,u),Ar(i)):qp(Jt,u.stateNode));break;case 4:p=Jt,g=Dr,Jt=u.stateNode.containerInfo,Dr=!0,Ai(i,a,u),Jt=p,Dr=g;break;case 0:case 11:case 14:case 15:if(!an&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){g=p=p.next;do{var w=g,C=w.destroy;w=w.tag,C!==void 0&&((w&2)!==0||(w&4)!==0)&&Pm(u,a,C),g=g.next}while(g!==p)}Ai(i,a,u);break;case 1:if(!an&&(Xa(u,a),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(O){_t(u,a,O)}Ai(i,a,u);break;case 21:Ai(i,a,u);break;case 22:u.mode&1?(an=(p=an)||u.memoizedState!==null,Ai(i,a,u),an=p):Ai(i,a,u);break;default:Ai(i,a,u)}}function Dw(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new tb),a.forEach(function(p){var g=db.bind(null,i,p);u.has(p)||(u.add(p),p.then(g,g))})}}function Or(i,a){var u=a.deletions;if(u!==null)for(var p=0;p<u.length;p++){var g=u[p];try{var w=i,C=a,O=C;e:for(;O!==null;){switch(O.tag){case 5:Jt=O.stateNode,Dr=!1;break e;case 3:Jt=O.stateNode.containerInfo,Dr=!0;break e;case 4:Jt=O.stateNode.containerInfo,Dr=!0;break e}O=O.return}if(Jt===null)throw Error(t(160));Nw(w,C,g),Jt=null,Dr=!1;var F=g.alternate;F!==null&&(F.return=null),g.return=null}catch(K){_t(g,a,K)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Ow(a,i),a=a.sibling}function Ow(i,a){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Or(a,i),ns(i),p&4){try{Du(3,i,i.return),eh(3,i)}catch(ye){_t(i,i.return,ye)}try{Du(5,i,i.return)}catch(ye){_t(i,i.return,ye)}}break;case 1:Or(a,i),ns(i),p&512&&u!==null&&Xa(u,u.return);break;case 5:if(Or(a,i),ns(i),p&512&&u!==null&&Xa(u,u.return),i.flags&32){var g=i.stateNode;try{di(g,"")}catch(ye){_t(i,i.return,ye)}}if(p&4&&(g=i.stateNode,g!=null)){var w=i.memoizedProps,C=u!==null?u.memoizedProps:w,O=i.type,F=i.updateQueue;if(i.updateQueue=null,F!==null)try{O==="input"&&w.type==="radio"&&w.name!=null&&oi(g,w),Zl(O,C);var K=Zl(O,w);for(C=0;C<F.length;C+=2){var ne=F[C],re=F[C+1];ne==="style"?Yl(g,re):ne==="dangerouslySetInnerHTML"?Kl(g,re):ne==="children"?di(g,re):B(g,ne,re,K)}switch(O){case"input":ai(g,w);break;case"textarea":qr(g,w);break;case"select":var te=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!w.multiple;var de=w.value;de!=null?xn(g,!!w.multiple,de,!1):te!==!!w.multiple&&(w.defaultValue!=null?xn(g,!!w.multiple,w.defaultValue,!0):xn(g,!!w.multiple,w.multiple?[]:"",!1))}g[Tu]=w}catch(ye){_t(i,i.return,ye)}}break;case 6:if(Or(a,i),ns(i),p&4){if(i.stateNode===null)throw Error(t(162));g=i.stateNode,w=i.memoizedProps;try{g.nodeValue=w}catch(ye){_t(i,i.return,ye)}}break;case 3:if(Or(a,i),ns(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{Ar(a.containerInfo)}catch(ye){_t(i,i.return,ye)}break;case 4:Or(a,i),ns(i);break;case 13:Or(a,i),ns(i),g=i.child,g.flags&8192&&(w=g.memoizedState!==null,g.stateNode.isHidden=w,!w||g.alternate!==null&&g.alternate.memoizedState!==null||(Lm=tt())),p&4&&Dw(i);break;case 22:if(ne=u!==null&&u.memoizedState!==null,i.mode&1?(an=(K=an)||ne,Or(a,i),an=K):Or(a,i),ns(i),p&8192){if(K=i.memoizedState!==null,(i.stateNode.isHidden=K)&&!ne&&(i.mode&1)!==0)for(me=i,ne=i.child;ne!==null;){for(re=me=ne;me!==null;){switch(te=me,de=te.child,te.tag){case 0:case 11:case 14:case 15:Du(4,te,te.return);break;case 1:Xa(te,te.return);var ge=te.stateNode;if(typeof ge.componentWillUnmount=="function"){p=te,u=te.return;try{a=p,ge.props=a.memoizedProps,ge.state=a.memoizedState,ge.componentWillUnmount()}catch(ye){_t(p,u,ye)}}break;case 5:Xa(te,te.return);break;case 22:if(te.memoizedState!==null){jw(re);continue}}de!==null?(de.return=te,me=de):jw(re)}ne=ne.sibling}e:for(ne=null,re=i;;){if(re.tag===5){if(ne===null){ne=re;try{g=re.stateNode,K?(w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(O=re.stateNode,F=re.memoizedProps.style,C=F!=null&&F.hasOwnProperty("display")?F.display:null,O.style.display=Ql("display",C))}catch(ye){_t(i,i.return,ye)}}}else if(re.tag===6){if(ne===null)try{re.stateNode.nodeValue=K?"":re.memoizedProps}catch(ye){_t(i,i.return,ye)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===i)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===i)break e;for(;re.sibling===null;){if(re.return===null||re.return===i)break e;ne===re&&(ne=null),re=re.return}ne===re&&(ne=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:Or(a,i),ns(i),p&4&&Dw(i);break;case 21:break;default:Or(a,i),ns(i)}}function ns(i){var a=i.flags;if(a&2){try{e:{for(var u=i.return;u!==null;){if(bw(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var g=p.stateNode;p.flags&32&&(di(g,""),p.flags&=-33);var w=kw(i);Nm(i,w,g);break;case 3:case 4:var C=p.stateNode.containerInfo,O=kw(i);km(i,O,C);break;default:throw Error(t(161))}}catch(F){_t(i,i.return,F)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function rb(i,a,u){me=i,Lw(i)}function Lw(i,a,u){for(var p=(i.mode&1)!==0;me!==null;){var g=me,w=g.child;if(g.tag===22&&p){var C=g.memoizedState!==null||Zd;if(!C){var O=g.alternate,F=O!==null&&O.memoizedState!==null||an;O=Zd;var K=an;if(Zd=C,(an=F)&&!K)for(me=g;me!==null;)C=me,F=C.child,C.tag===22&&C.memoizedState!==null?Vw(g):F!==null?(F.return=C,me=F):Vw(g);for(;w!==null;)me=w,Lw(w),w=w.sibling;me=g,Zd=O,an=K}Mw(i)}else(g.subtreeFlags&8772)!==0&&w!==null?(w.return=g,me=w):Mw(i)}}function Mw(i){for(;me!==null;){var a=me;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:an||eh(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!an)if(u===null)p.componentDidMount();else{var g=a.elementType===a.type?u.memoizedProps:Nr(a.type,u.memoizedProps);p.componentDidUpdate(g,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=a.updateQueue;w!==null&&j0(a,w,p);break;case 3:var C=a.updateQueue;if(C!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}j0(a,C,u)}break;case 5:var O=a.stateNode;if(u===null&&a.flags&4){u=O;var F=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&u.focus();break;case"img":F.src&&(u.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var K=a.alternate;if(K!==null){var ne=K.memoizedState;if(ne!==null){var re=ne.dehydrated;re!==null&&Ar(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}an||a.flags&512&&bm(a)}catch(te){_t(a,a.return,te)}}if(a===i){me=null;break}if(u=a.sibling,u!==null){u.return=a.return,me=u;break}me=a.return}}function jw(i){for(;me!==null;){var a=me;if(a===i){me=null;break}var u=a.sibling;if(u!==null){u.return=a.return,me=u;break}me=a.return}}function Vw(i){for(;me!==null;){var a=me;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{eh(4,a)}catch(F){_t(a,u,F)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var g=a.return;try{p.componentDidMount()}catch(F){_t(a,g,F)}}var w=a.return;try{bm(a)}catch(F){_t(a,w,F)}break;case 5:var C=a.return;try{bm(a)}catch(F){_t(a,C,F)}}}catch(F){_t(a,a.return,F)}if(a===i){me=null;break}var O=a.sibling;if(O!==null){O.return=a.return,me=O;break}me=a.return}}var sb=Math.ceil,th=W.ReactCurrentDispatcher,Dm=W.ReactCurrentOwner,ur=W.ReactCurrentBatchConfig,He=0,zt=null,Pt=null,Zt=0,Gn=0,Ja=Ii(0),Mt=0,Ou=null,Uo=0,nh=0,Om=0,Lu=null,bn=null,Lm=0,Za=1/0,Ds=null,rh=!1,Mm=null,Pi=null,sh=!1,bi=null,ih=0,Mu=0,jm=null,oh=-1,ah=0;function En(){return(He&6)!==0?tt():oh!==-1?oh:oh=tt()}function ki(i){return(i.mode&1)===0?1:(He&2)!==0&&Zt!==0?Zt&-Zt:BP.transition!==null?(ah===0&&(ah=Ao()),ah):(i=Fe,i!==0||(i=window.event,i=i===void 0?16:cu(i.type)),i)}function Lr(i,a,u,p){if(50<Mu)throw Mu=0,jm=null,Error(t(185));mi(i,u,p),((He&2)===0||i!==zt)&&(i===zt&&((He&2)===0&&(nh|=u),Mt===4&&Ni(i,Zt)),kn(i,p),u===1&&He===0&&(a.mode&1)===0&&(Za=tt()+500,Ld&&Ci()))}function kn(i,a){var u=i.callbackNode;Es(i,a);var p=Ro(i,i===zt?Zt:0);if(p===0)u!==null&&iu(u),i.callbackNode=null,i.callbackPriority=0;else if(a=p&-p,i.callbackPriority!==a){if(u!=null&&iu(u),a===1)i.tag===0?UP(Uw.bind(null,i)):C0(Uw.bind(null,i)),MP(function(){(He&6)===0&&Ci()}),u=null;else{switch(yi(p)){case 1:u=Co;break;case 4:u=hi;break;case 16:u=nr;break;case 536870912:u=ad;break;default:u=nr}u=Kw(u,Fw.bind(null,i))}i.callbackPriority=a,i.callbackNode=u}}function Fw(i,a){if(oh=-1,ah=0,(He&6)!==0)throw Error(t(327));var u=i.callbackNode;if(el()&&i.callbackNode!==u)return null;var p=Ro(i,i===zt?Zt:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||a)a=lh(i,p);else{a=p;var g=He;He|=2;var w=$w();(zt!==i||Zt!==a)&&(Ds=null,Za=tt()+500,$o(i,a));do try{ab();break}catch(O){Bw(i,O)}while(!0);tm(),th.current=w,He=g,Pt!==null?a=0:(zt=null,Zt=0,a=Mt)}if(a!==0){if(a===2&&(g=$n(i),g!==0&&(p=g,a=Vm(i,g))),a===1)throw u=Ou,$o(i,0),Ni(i,p),kn(i,tt()),u;if(a===6)Ni(i,p);else{if(g=i.current.alternate,(p&30)===0&&!ib(g)&&(a=lh(i,p),a===2&&(w=$n(i),w!==0&&(p=w,a=Vm(i,w))),a===1))throw u=Ou,$o(i,0),Ni(i,p),kn(i,tt()),u;switch(i.finishedWork=g,i.finishedLanes=p,a){case 0:case 1:throw Error(t(345));case 2:zo(i,bn,Ds);break;case 3:if(Ni(i,p),(p&130023424)===p&&(a=Lm+500-tt(),10<a)){if(Ro(i,0)!==0)break;if(g=i.suspendedLanes,(g&p)!==p){En(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=Wp(zo.bind(null,i,bn,Ds),a);break}zo(i,bn,Ds);break;case 4:if(Ni(i,p),(p&4194240)===p)break;for(a=i.eventTimes,g=-1;0<p;){var C=31-vn(p);w=1<<C,C=a[C],C>g&&(g=C),p&=~w}if(p=g,p=tt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*sb(p/1960))-p,10<p){i.timeoutHandle=Wp(zo.bind(null,i,bn,Ds),p);break}zo(i,bn,Ds);break;case 5:zo(i,bn,Ds);break;default:throw Error(t(329))}}}return kn(i,tt()),i.callbackNode===u?Fw.bind(null,i):null}function Vm(i,a){var u=Lu;return i.current.memoizedState.isDehydrated&&($o(i,a).flags|=256),i=lh(i,a),i!==2&&(a=bn,bn=u,a!==null&&Fm(a)),i}function Fm(i){bn===null?bn=i:bn.push.apply(bn,i)}function ib(i){for(var a=i;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var g=u[p],w=g.getSnapshot;g=g.value;try{if(!br(w(),g))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ni(i,a){for(a&=~Om,a&=~nh,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var u=31-vn(a),p=1<<u;i[u]=-1,a&=~p}}function Uw(i){if((He&6)!==0)throw Error(t(327));el();var a=Ro(i,0);if((a&1)===0)return kn(i,tt()),null;var u=lh(i,a);if(i.tag!==0&&u===2){var p=$n(i);p!==0&&(a=p,u=Vm(i,p))}if(u===1)throw u=Ou,$o(i,0),Ni(i,a),kn(i,tt()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,zo(i,bn,Ds),kn(i,tt()),null}function Um(i,a){var u=He;He|=1;try{return i(a)}finally{He=u,He===0&&(Za=tt()+500,Ld&&Ci())}}function Bo(i){bi!==null&&bi.tag===0&&(He&6)===0&&el();var a=He;He|=1;var u=ur.transition,p=Fe;try{if(ur.transition=null,Fe=1,i)return i()}finally{Fe=p,ur.transition=u,He=a,(He&6)===0&&Ci()}}function Bm(){Gn=Ja.current,it(Ja)}function $o(i,a){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,LP(u)),Pt!==null)for(u=Pt.return;u!==null;){var p=u;switch(Yp(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Dd();break;case 3:Qa(),it(Rn),it(rn),um();break;case 5:am(p);break;case 4:Qa();break;case 13:it(mt);break;case 19:it(mt);break;case 10:nm(p.type._context);break;case 22:case 23:Bm()}u=u.return}if(zt=i,Pt=i=Di(i.current,null),Zt=Gn=a,Mt=0,Ou=null,Om=nh=Uo=0,bn=Lu=null,jo!==null){for(a=0;a<jo.length;a++)if(u=jo[a],p=u.interleaved,p!==null){u.interleaved=null;var g=p.next,w=u.pending;if(w!==null){var C=w.next;w.next=g,p.next=C}u.pending=p}jo=null}return i}function Bw(i,a){do{var u=Pt;try{if(tm(),qd.current=Qd,Hd){for(var p=gt.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}Hd=!1}if(Fo=0,$t=Lt=gt=null,Au=!1,Pu=0,Dm.current=null,u===null||u.return===null){Mt=1,Ou=a,Pt=null;break}e:{var w=i,C=u.return,O=u,F=a;if(a=Zt,O.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var K=F,ne=O,re=ne.tag;if((ne.mode&1)===0&&(re===0||re===11||re===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var de=hw(C);if(de!==null){de.flags&=-257,fw(de,C,O,w,a),de.mode&1&&dw(w,K,a),a=de,F=K;var ge=a.updateQueue;if(ge===null){var ye=new Set;ye.add(F),a.updateQueue=ye}else ge.add(F);break e}else{if((a&1)===0){dw(w,K,a),$m();break e}F=Error(t(426))}}else if(ht&&O.mode&1){var xt=hw(C);if(xt!==null){(xt.flags&65536)===0&&(xt.flags|=256),fw(xt,C,O,w,a),Zp(Ya(F,O));break e}}w=F=Ya(F,O),Mt!==4&&(Mt=2),Lu===null?Lu=[w]:Lu.push(w),w=C;do{switch(w.tag){case 3:w.flags|=65536,a&=-a,w.lanes|=a;var H=uw(w,F,a);M0(w,H);break e;case 1:O=F;var $=w.type,G=w.stateNode;if((w.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Pi===null||!Pi.has(G)))){w.flags|=65536,a&=-a,w.lanes|=a;var oe=cw(w,O,a);M0(w,oe);break e}}w=w.return}while(w!==null)}Ww(u)}catch(ve){a=ve,Pt===u&&u!==null&&(Pt=u=u.return);continue}break}while(!0)}function $w(){var i=th.current;return th.current=Qd,i===null?Qd:i}function $m(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),zt===null||(Uo&268435455)===0&&(nh&268435455)===0||Ni(zt,Zt)}function lh(i,a){var u=He;He|=2;var p=$w();(zt!==i||Zt!==a)&&(Ds=null,$o(i,a));do try{ob();break}catch(g){Bw(i,g)}while(!0);if(tm(),He=u,th.current=p,Pt!==null)throw Error(t(261));return zt=null,Zt=0,Mt}function ob(){for(;Pt!==null;)zw(Pt)}function ab(){for(;Pt!==null&&!id();)zw(Pt)}function zw(i){var a=Gw(i.alternate,i,Gn);i.memoizedProps=i.pendingProps,a===null?Ww(i):Pt=a,Dm.current=null}function Ww(i){var a=i;do{var u=a.alternate;if(i=a.return,(a.flags&32768)===0){if(u=ZP(u,a,Gn),u!==null){Pt=u;return}}else{if(u=eb(u,a),u!==null){u.flags&=32767,Pt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Mt=6,Pt=null;return}}if(a=a.sibling,a!==null){Pt=a;return}Pt=a=i}while(a!==null);Mt===0&&(Mt=5)}function zo(i,a,u){var p=Fe,g=ur.transition;try{ur.transition=null,Fe=1,lb(i,a,u,p)}finally{ur.transition=g,Fe=p}return null}function lb(i,a,u,p){do el();while(bi!==null);if((He&6)!==0)throw Error(t(327));u=i.finishedWork;var g=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var w=u.lanes|u.childLanes;if(et(i,w),i===zt&&(Pt=zt=null,Zt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||sh||(sh=!0,Kw(nr,function(){return el(),null})),w=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||w){w=ur.transition,ur.transition=null;var C=Fe;Fe=1;var O=He;He|=4,Dm.current=null,nb(i,u),Ow(u,i),AP($p),_i=!!Bp,$p=Bp=null,i.current=u,rb(u),Cp(),He=O,Fe=C,ur.transition=w}else i.current=u;if(sh&&(sh=!1,bi=i,ih=g),w=i.pendingLanes,w===0&&(Pi=null),ld(u.stateNode),kn(i,tt()),a!==null)for(p=i.onRecoverableError,u=0;u<a.length;u++)g=a[u],p(g.value,{componentStack:g.stack,digest:g.digest});if(rh)throw rh=!1,i=Mm,Mm=null,i;return(ih&1)!==0&&i.tag!==0&&el(),w=i.pendingLanes,(w&1)!==0?i===jm?Mu++:(Mu=0,jm=i):Mu=0,Ci(),null}function el(){if(bi!==null){var i=yi(ih),a=ur.transition,u=Fe;try{if(ur.transition=null,Fe=16>i?16:i,bi===null)var p=!1;else{if(i=bi,bi=null,ih=0,(He&6)!==0)throw Error(t(331));var g=He;for(He|=4,me=i.current;me!==null;){var w=me,C=w.child;if((me.flags&16)!==0){var O=w.deletions;if(O!==null){for(var F=0;F<O.length;F++){var K=O[F];for(me=K;me!==null;){var ne=me;switch(ne.tag){case 0:case 11:case 15:Du(8,ne,w)}var re=ne.child;if(re!==null)re.return=ne,me=re;else for(;me!==null;){ne=me;var te=ne.sibling,de=ne.return;if(Pw(ne),ne===K){me=null;break}if(te!==null){te.return=de,me=te;break}me=de}}}var ge=w.alternate;if(ge!==null){var ye=ge.child;if(ye!==null){ge.child=null;do{var xt=ye.sibling;ye.sibling=null,ye=xt}while(ye!==null)}}me=w}}if((w.subtreeFlags&2064)!==0&&C!==null)C.return=w,me=C;else e:for(;me!==null;){if(w=me,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:Du(9,w,w.return)}var H=w.sibling;if(H!==null){H.return=w.return,me=H;break e}me=w.return}}var $=i.current;for(me=$;me!==null;){C=me;var G=C.child;if((C.subtreeFlags&2064)!==0&&G!==null)G.return=C,me=G;else e:for(C=$;me!==null;){if(O=me,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:eh(9,O)}}catch(ve){_t(O,O.return,ve)}if(O===C){me=null;break e}var oe=O.sibling;if(oe!==null){oe.return=O.return,me=oe;break e}me=O.return}}if(He=g,Ci(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(So,i)}catch{}p=!0}return p}finally{Fe=u,ur.transition=a}}return!1}function qw(i,a,u){a=Ya(u,a),a=uw(i,a,1),i=Ri(i,a,1),a=En(),i!==null&&(mi(i,1,a),kn(i,a))}function _t(i,a,u){if(i.tag===3)qw(i,i,u);else for(;a!==null;){if(a.tag===3){qw(a,i,u);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Pi===null||!Pi.has(p))){i=Ya(u,i),i=cw(a,i,1),a=Ri(a,i,1),i=En(),a!==null&&(mi(a,1,i),kn(a,i));break}}a=a.return}}function ub(i,a,u){var p=i.pingCache;p!==null&&p.delete(a),a=En(),i.pingedLanes|=i.suspendedLanes&u,zt===i&&(Zt&u)===u&&(Mt===4||Mt===3&&(Zt&130023424)===Zt&&500>tt()-Lm?$o(i,0):Om|=u),kn(i,a)}function Hw(i,a){a===0&&((i.mode&1)===0?a=1:(a=Ia,Ia<<=1,(Ia&130023424)===0&&(Ia=4194304)));var u=En();i=bs(i,a),i!==null&&(mi(i,a,u),kn(i,u))}function cb(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),Hw(i,u)}function db(i,a){var u=0;switch(i.tag){case 13:var p=i.stateNode,g=i.memoizedState;g!==null&&(u=g.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(a),Hw(i,u)}var Gw;Gw=function(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps||Rn.current)Pn=!0;else{if((i.lanes&u)===0&&(a.flags&128)===0)return Pn=!1,JP(i,a,u);Pn=(i.flags&131072)!==0}else Pn=!1,ht&&(a.flags&1048576)!==0&&S0(a,jd,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;Jd(i,a),i=a.pendingProps;var g=$a(a,rn.current);Ka(a,u),g=hm(null,a,p,i,g,u);var w=fm();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,An(p)?(w=!0,Od(a)):w=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,im(a),g.updater=Yd,a.stateNode=g,g._reactInternals=a,_m(a,p,i,u),a=Im(null,a,p,!0,w,u)):(a.tag=0,ht&&w&&Qp(a),wn(null,a,g,u),a=a.child),a;case 16:p=a.elementType;e:{switch(Jd(i,a),i=a.pendingProps,g=p._init,p=g(p._payload),a.type=p,g=a.tag=fb(p),i=Nr(p,i),g){case 0:a=Tm(null,a,p,i,u);break e;case 1:a=_w(null,a,p,i,u);break e;case 11:a=pw(null,a,p,i,u);break e;case 14:a=mw(null,a,p,Nr(p.type,i),u);break e}throw Error(t(306,p,""))}return a;case 0:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:Nr(p,g),Tm(i,a,p,g,u);case 1:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:Nr(p,g),_w(i,a,p,g,u);case 3:e:{if(ww(a),i===null)throw Error(t(387));p=a.pendingProps,w=a.memoizedState,g=w.element,L0(i,a),zd(a,p,null,u);var C=a.memoizedState;if(p=C.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},a.updateQueue.baseState=w,a.memoizedState=w,a.flags&256){g=Ya(Error(t(423)),a),a=Ew(i,a,p,u,g);break e}else if(p!==g){g=Ya(Error(t(424)),a),a=Ew(i,a,p,u,g);break e}else for(Hn=Ti(a.stateNode.containerInfo.firstChild),qn=a,ht=!0,kr=null,u=D0(a,null,p,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(qa(),p===g){a=Ns(i,a,u);break e}wn(i,a,p,u)}a=a.child}return a;case 5:return V0(a),i===null&&Jp(a),p=a.type,g=a.pendingProps,w=i!==null?i.memoizedProps:null,C=g.children,zp(p,g)?C=null:w!==null&&zp(p,w)&&(a.flags|=32),vw(i,a),wn(i,a,C,u),a.child;case 6:return i===null&&Jp(a),null;case 13:return Tw(i,a,u);case 4:return om(a,a.stateNode.containerInfo),p=a.pendingProps,i===null?a.child=Ha(a,null,p,u):wn(i,a,p,u),a.child;case 11:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:Nr(p,g),pw(i,a,p,g,u);case 7:return wn(i,a,a.pendingProps,u),a.child;case 8:return wn(i,a,a.pendingProps.children,u),a.child;case 12:return wn(i,a,a.pendingProps.children,u),a.child;case 10:e:{if(p=a.type._context,g=a.pendingProps,w=a.memoizedProps,C=g.value,nt(Ud,p._currentValue),p._currentValue=C,w!==null)if(br(w.value,C)){if(w.children===g.children&&!Rn.current){a=Ns(i,a,u);break e}}else for(w=a.child,w!==null&&(w.return=a);w!==null;){var O=w.dependencies;if(O!==null){C=w.child;for(var F=O.firstContext;F!==null;){if(F.context===p){if(w.tag===1){F=ks(-1,u&-u),F.tag=2;var K=w.updateQueue;if(K!==null){K=K.shared;var ne=K.pending;ne===null?F.next=F:(F.next=ne.next,ne.next=F),K.pending=F}}w.lanes|=u,F=w.alternate,F!==null&&(F.lanes|=u),rm(w.return,u,a),O.lanes|=u;break}F=F.next}}else if(w.tag===10)C=w.type===a.type?null:w.child;else if(w.tag===18){if(C=w.return,C===null)throw Error(t(341));C.lanes|=u,O=C.alternate,O!==null&&(O.lanes|=u),rm(C,u,a),C=w.sibling}else C=w.child;if(C!==null)C.return=w;else for(C=w;C!==null;){if(C===a){C=null;break}if(w=C.sibling,w!==null){w.return=C.return,C=w;break}C=C.return}w=C}wn(i,a,g.children,u),a=a.child}return a;case 9:return g=a.type,p=a.pendingProps.children,Ka(a,u),g=ar(g),p=p(g),a.flags|=1,wn(i,a,p,u),a.child;case 14:return p=a.type,g=Nr(p,a.pendingProps),g=Nr(p.type,g),mw(i,a,p,g,u);case 15:return gw(i,a,a.type,a.pendingProps,u);case 17:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:Nr(p,g),Jd(i,a),a.tag=1,An(p)?(i=!0,Od(a)):i=!1,Ka(a,u),aw(a,p,g),_m(a,p,g,u),Im(null,a,p,!0,i,u);case 19:return xw(i,a,u);case 22:return yw(i,a,u)}throw Error(t(156,a.tag))};function Kw(i,a){return Ea(i,a)}function hb(i,a,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cr(i,a,u,p){return new hb(i,a,u,p)}function zm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function fb(i){if(typeof i=="function")return zm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===V)return 11;if(i===Ce)return 14}return 2}function Di(i,a){var u=i.alternate;return u===null?(u=cr(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function uh(i,a,u,p,g,w){var C=2;if(p=i,typeof i=="function")zm(i)&&(C=1);else if(typeof i=="string")C=5;else e:switch(i){case N:return Wo(u.children,g,w,a);case b:C=8,g|=8;break;case k:return i=cr(12,u,a,g|2),i.elementType=k,i.lanes=w,i;case D:return i=cr(13,u,a,g),i.elementType=D,i.lanes=w,i;case le:return i=cr(19,u,a,g),i.elementType=le,i.lanes=w,i;case Te:return ch(u,g,w,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case L:C=10;break e;case j:C=9;break e;case V:C=11;break e;case Ce:C=14;break e;case Re:C=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=cr(C,u,a,g),a.elementType=i,a.type=p,a.lanes=w,a}function Wo(i,a,u,p){return i=cr(7,i,p,a),i.lanes=u,i}function ch(i,a,u,p){return i=cr(22,i,p,a),i.elementType=Te,i.lanes=u,i.stateNode={isHidden:!1},i}function Wm(i,a,u){return i=cr(6,i,null,a),i.lanes=u,i}function qm(i,a,u){return a=cr(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function pb(i,a,u,p,g){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pi(0),this.expirationTimes=pi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pi(0),this.identifierPrefix=p,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Hm(i,a,u,p,g,w,C,O,F){return i=new pb(i,a,u,O,F),a===1?(a=1,w===!0&&(a|=8)):a=0,w=cr(3,null,null,a),i.current=w,w.stateNode=i,w.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},im(w),i}function mb(i,a,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:p==null?null:""+p,children:i,containerInfo:a,implementation:u}}function Qw(i){if(!i)return xi;i=i._reactInternals;e:{if(Ir(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(An(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(An(u))return I0(i,u,a)}return a}function Yw(i,a,u,p,g,w,C,O,F){return i=Hm(u,p,!0,i,g,w,C,O,F),i.context=Qw(null),u=i.current,p=En(),g=ki(u),w=ks(p,g),w.callback=a??null,Ri(u,w,g),i.current.lanes=g,mi(i,g,p),kn(i,p),i}function dh(i,a,u,p){var g=a.current,w=En(),C=ki(g);return u=Qw(u),a.context===null?a.context=u:a.pendingContext=u,a=ks(w,C),a.payload={element:i},p=p===void 0?null:p,p!==null&&(a.callback=p),i=Ri(g,a,C),i!==null&&(Lr(i,g,C,w),$d(i,g,C)),C}function hh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Xw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function Gm(i,a){Xw(i,a),(i=i.alternate)&&Xw(i,a)}function gb(){return null}var Jw=typeof reportError=="function"?reportError:function(i){console.error(i)};function Km(i){this._internalRoot=i}fh.prototype.render=Km.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));dh(i,a,null,null)},fh.prototype.unmount=Km.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Bo(function(){dh(null,i,null,null)}),a[Ss]=null}};function fh(i){this._internalRoot=i}fh.prototype.unstable_scheduleHydration=function(i){if(i){var a=fd();i={blockedOn:null,target:i,priority:a};for(var u=0;u<Qr.length&&a!==0&&a<Qr[u].priority;u++);Qr.splice(u,0,i),u===0&&gd(i)}};function Qm(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ph(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Zw(){}function yb(i,a,u,p,g){if(g){if(typeof p=="function"){var w=p;p=function(){var K=hh(C);w.call(K)}}var C=Yw(a,p,i,0,null,!1,!1,"",Zw);return i._reactRootContainer=C,i[Ss]=C.current,wu(i.nodeType===8?i.parentNode:i),Bo(),C}for(;g=i.lastChild;)i.removeChild(g);if(typeof p=="function"){var O=p;p=function(){var K=hh(F);O.call(K)}}var F=Hm(i,0,!1,null,null,!1,!1,"",Zw);return i._reactRootContainer=F,i[Ss]=F.current,wu(i.nodeType===8?i.parentNode:i),Bo(function(){dh(a,F,u,p)}),F}function mh(i,a,u,p,g){var w=u._reactRootContainer;if(w){var C=w;if(typeof g=="function"){var O=g;g=function(){var F=hh(C);O.call(F)}}dh(a,C,i,g)}else C=yb(u,a,i,g,p);return hh(C)}dd=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var u=fi(a.pendingLanes);u!==0&&(gi(a,u|1),kn(a,tt()),(He&6)===0&&(Za=tt()+500,Ci()))}break;case 13:Bo(function(){var p=bs(i,1);if(p!==null){var g=En();Lr(p,i,1,g)}}),Gm(i,1)}},xa=function(i){if(i.tag===13){var a=bs(i,134217728);if(a!==null){var u=En();Lr(a,i,134217728,u)}Gm(i,134217728)}},hd=function(i){if(i.tag===13){var a=ki(i),u=bs(i,a);if(u!==null){var p=En();Lr(u,i,a,p)}Gm(i,a)}},fd=function(){return Fe},pd=function(i,a){var u=Fe;try{return Fe=i,a()}finally{Fe=u}},ma=function(i,a,u){switch(a){case"input":if(ai(i,u),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var p=u[a];if(p!==i&&p.form===i.form){var g=Nd(p);if(!g)throw Error(t(90));si(p),ai(p,g)}}}break;case"textarea":qr(i,u);break;case"select":a=u.value,a!=null&&xn(i,!!u.multiple,a,!1)}},Eo=Um,tu=Bo;var vb={usingClientEntryPoint:!1,Events:[Iu,Ua,Nd,Gr,eu,Um]},ju={findFiberByHostInstance:Do,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_b={bundleType:ju.bundleType,version:ju.version,rendererPackageName:ju.rendererPackageName,rendererConfig:ju.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=su(i),i===null?null:i.stateNode},findFiberByHostInstance:ju.findFiberByHostInstance||gb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gh.isDisabled&&gh.supportsFiber)try{So=gh.inject(_b),Bn=gh}catch{}}return Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vb,Nn.createPortal=function(i,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qm(a))throw Error(t(200));return mb(i,a,null,u)},Nn.createRoot=function(i,a){if(!Qm(i))throw Error(t(299));var u=!1,p="",g=Jw;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),a=Hm(i,1,!1,null,null,u,!1,p,g),i[Ss]=a.current,wu(i.nodeType===8?i.parentNode:i),new Km(a)},Nn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=su(a),i=i===null?null:i.stateNode,i},Nn.flushSync=function(i){return Bo(i)},Nn.hydrate=function(i,a,u){if(!ph(a))throw Error(t(200));return mh(null,i,a,!0,u)},Nn.hydrateRoot=function(i,a,u){if(!Qm(i))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,g=!1,w="",C=Jw;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(C=u.onRecoverableError)),a=Yw(a,null,i,1,u??null,g,!1,w,C),i[Ss]=a.current,wu(i),p)for(i=0;i<p.length;i++)u=p[i],g=u._getVersion,g=g(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,g]:a.mutableSourceEagerHydrationData.push(u,g);return new fh(a)},Nn.render=function(i,a,u){if(!ph(a))throw Error(t(200));return mh(null,i,a,!1,u)},Nn.unmountComponentAtNode=function(i){if(!ph(i))throw Error(t(40));return i._reactRootContainer?(Bo(function(){mh(null,null,i,!1,function(){i._reactRootContainer=null,i[Ss]=null})}),!0):!1},Nn.unstable_batchedUpdates=Um,Nn.unstable_renderSubtreeIntoContainer=function(i,a,u,p){if(!ph(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return mh(i,a,u,!1,p)},Nn.version="18.3.1-next-f1338f8080-20240426",Nn}var lE;function px(){if(lE)return Jm.exports;lE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Jm.exports=Ab(),Jm.exports}var uE;function Pb(){if(uE)return yh;uE=1;var n=px();return yh.createRoot=n.createRoot,yh.hydrateRoot=n.hydrateRoot,yh}var bb=Pb(),Fu={},cE;function kb(){if(cE)return Fu;cE=1,Object.defineProperty(Fu,"__esModule",{value:!0}),Fu.parse=l,Fu.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const E=function(){};return E.prototype=Object.create(null),E})();function l(E,x){const R=new o,A=E.length;if(A<2)return R;const S=(x==null?void 0:x.decode)||m;let M=0;do{const U=E.indexOf("=",M);if(U===-1)break;const B=E.indexOf(";",M),W=B===-1?A:B;if(U>W){M=E.lastIndexOf(";",U-1)+1;continue}const Y=c(E,M,U),X=h(E,U,Y),N=E.slice(Y,X);if(R[N]===void 0){let b=c(E,U+1,W),k=h(E,W,b);const L=S(E.slice(b,k));R[N]=L}M=W+1}while(M<A);return R}function c(E,x,R){do{const A=E.charCodeAt(x);if(A!==32&&A!==9)return x}while(++x<R);return R}function h(E,x,R){for(;x>R;){const A=E.charCodeAt(--x);if(A!==32&&A!==9)return x+1}return R}function f(E,x,R){const A=(R==null?void 0:R.encode)||encodeURIComponent;if(!n.test(E))throw new TypeError(`argument name is invalid: ${E}`);const S=A(x);if(!e.test(S))throw new TypeError(`argument val is invalid: ${x}`);let M=E+"="+S;if(!R)return M;if(R.maxAge!==void 0){if(!Number.isInteger(R.maxAge))throw new TypeError(`option maxAge is invalid: ${R.maxAge}`);M+="; Max-Age="+R.maxAge}if(R.domain){if(!t.test(R.domain))throw new TypeError(`option domain is invalid: ${R.domain}`);M+="; Domain="+R.domain}if(R.path){if(!r.test(R.path))throw new TypeError(`option path is invalid: ${R.path}`);M+="; Path="+R.path}if(R.expires){if(!v(R.expires)||!Number.isFinite(R.expires.valueOf()))throw new TypeError(`option expires is invalid: ${R.expires}`);M+="; Expires="+R.expires.toUTCString()}if(R.httpOnly&&(M+="; HttpOnly"),R.secure&&(M+="; Secure"),R.partitioned&&(M+="; Partitioned"),R.priority)switch(typeof R.priority=="string"?R.priority.toLowerCase():void 0){case"low":M+="; Priority=Low";break;case"medium":M+="; Priority=Medium";break;case"high":M+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${R.priority}`)}if(R.sameSite)switch(typeof R.sameSite=="string"?R.sameSite.toLowerCase():R.sameSite){case!0:case"strict":M+="; SameSite=Strict";break;case"lax":M+="; SameSite=Lax";break;case"none":M+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${R.sameSite}`)}return M}function m(E){if(E.indexOf("%")===-1)return E;try{return decodeURIComponent(E)}catch{return E}}function v(E){return s.call(E)==="[object Date]"}return Fu}kb();var dE="popstate";function Nb(n={}){function e(r,s){let{pathname:o,search:l,hash:c}=r.location;return Mg("",{pathname:o,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:mc(s)}return Ob(e,t,null,n)}function pt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Br(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Db(){return Math.random().toString(36).substring(2,10)}function hE(n,e){return{usr:n.state,key:n.key,idx:e}}function Mg(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Nl(e):e,state:t,key:e&&e.key||r||Db()}}function mc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Nl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function Ob(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,c="POP",h=null,f=m();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function m(){return(l.state||{idx:null}).idx}function v(){c="POP";let S=m(),M=S==null?null:S-f;f=S,h&&h({action:c,location:A.location,delta:M})}function E(S,M){c="PUSH";let U=Mg(A.location,S,M);f=m()+1;let B=hE(U,f),W=A.createHref(U);try{l.pushState(B,"",W)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;s.location.assign(W)}o&&h&&h({action:c,location:A.location,delta:1})}function x(S,M){c="REPLACE";let U=Mg(A.location,S,M);f=m();let B=hE(U,f),W=A.createHref(U);l.replaceState(B,"",W),o&&h&&h({action:c,location:A.location,delta:0})}function R(S){let M=s.location.origin!=="null"?s.location.origin:s.location.href,U=typeof S=="string"?S:mc(S);return U=U.replace(/ $/,"%20"),pt(M,`No window.location.(origin|href) available to create URL for href: ${U}`),new URL(U,M)}let A={get action(){return c},get location(){return n(s,l)},listen(S){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(dE,v),h=S,()=>{s.removeEventListener(dE,v),h=null}},createHref(S){return e(s,S)},createURL:R,encodeLocation(S){let M=R(S);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:E,replace:x,go(S){return l.go(S)}};return A}function mx(n,e,t="/"){return Lb(n,e,t,!1)}function Lb(n,e,t,r){let s=typeof e=="string"?Nl(e):e,o=qs(s.pathname||"/",t);if(o==null)return null;let l=gx(n);Mb(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let f=Gb(o);c=qb(l[h],f,r)}return c}function gx(n,e=[],t=[],r=""){let s=(o,l,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(pt(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length));let f=$s([r,h.relativePath]),m=t.concat(h);o.children&&o.children.length>0&&(pt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),gx(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:zb(f,o.index),routesMeta:m})};return n.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,l);else for(let h of yx(o.path))s(o,l,h)}),e}function yx(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=yx(r.join("/")),c=[];return c.push(...l.map(h=>h===""?o:[o,h].join("/"))),s&&c.push(...l),c.map(h=>n.startsWith("/")&&h===""?"/":h)}function Mb(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Wb(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var jb=/^:[\w-]+$/,Vb=3,Fb=2,Ub=1,Bb=10,$b=-2,fE=n=>n==="*";function zb(n,e){let t=n.split("/"),r=t.length;return t.some(fE)&&(r+=$b),e&&(r+=Fb),t.filter(s=>!fE(s)).reduce((s,o)=>s+(jb.test(o)?Vb:o===""?Ub:Bb),r)}function Wb(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function qb(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",l=[];for(let c=0;c<r.length;++c){let h=r[c],f=c===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",v=Qh({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},m),E=h.route;if(!v&&f&&t&&!r[r.length-1].route.index&&(v=Qh({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},m)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:$s([o,v.pathname]),pathnameBase:Xb($s([o,v.pathnameBase])),route:E}),v.pathnameBase!=="/"&&(o=$s([o,v.pathnameBase]))}return l}function Qh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=Hb(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((f,{paramName:m,isOptional:v},E)=>{if(m==="*"){let R=c[E]||"";l=o.slice(0,o.length-R.length).replace(/(.)\/+$/,"$1")}const x=c[E];return v&&!x?f[m]=void 0:f[m]=(x||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:n}}function Hb(n,e=!1,t=!0){Br(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(r.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Gb(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Br(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function qs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function Kb(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Nl(n):n;return{pathname:t?t.startsWith("/")?t:Qb(t,e):e,search:Jb(r),hash:Zb(s)}}function Qb(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function tg(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Yb(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Uy(n){let e=Yb(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function By(n,e,t,r=!1){let s;typeof n=="string"?s=Nl(n):(s={...n},pt(!s.pathname||!s.pathname.includes("?"),tg("?","pathname","search",s)),pt(!s.pathname||!s.pathname.includes("#"),tg("#","pathname","hash",s)),pt(!s.search||!s.search.includes("#"),tg("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,c;if(l==null)c=t;else{let v=e.length-1;if(!r&&l.startsWith("..")){let E=l.split("/");for(;E[0]==="..";)E.shift(),v-=1;s.pathname=E.join("/")}c=v>=0?e[v]:"/"}let h=Kb(s,c),f=l&&l!=="/"&&l.endsWith("/"),m=(o||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}var $s=n=>n.join("/").replace(/\/\/+/g,"/"),Xb=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Jb=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Zb=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function e2(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var vx=["POST","PUT","PATCH","DELETE"];new Set(vx);var t2=["GET",...vx];new Set(t2);var Dl=I.createContext(null);Dl.displayName="DataRouter";var Nf=I.createContext(null);Nf.displayName="DataRouterState";var _x=I.createContext({isTransitioning:!1});_x.displayName="ViewTransition";var n2=I.createContext(new Map);n2.displayName="Fetchers";var r2=I.createContext(null);r2.displayName="Await";var zr=I.createContext(null);zr.displayName="Navigation";var Dc=I.createContext(null);Dc.displayName="Location";var Wr=I.createContext({outlet:null,matches:[],isDataRoute:!1});Wr.displayName="Route";var $y=I.createContext(null);$y.displayName="RouteError";function s2(n,{relative:e}={}){pt(Ol(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=I.useContext(zr),{hash:s,pathname:o,search:l}=Oc(n,{relative:e}),c=o;return t!=="/"&&(c=o==="/"?t:$s([t,o])),r.createHref({pathname:c,search:l,hash:s})}function Ol(){return I.useContext(Dc)!=null}function ni(){return pt(Ol(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Dc).location}var wx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ex(n){I.useContext(zr).static||I.useLayoutEffect(n)}function Fn(){let{isDataRoute:n}=I.useContext(Wr);return n?y2():i2()}function i2(){pt(Ol(),"useNavigate() may be used only in the context of a <Router> component.");let n=I.useContext(Dl),{basename:e,navigator:t}=I.useContext(zr),{matches:r}=I.useContext(Wr),{pathname:s}=ni(),o=JSON.stringify(Uy(r)),l=I.useRef(!1);return Ex(()=>{l.current=!0}),I.useCallback((h,f={})=>{if(Br(l.current,wx),!l.current)return;if(typeof h=="number"){t.go(h);return}let m=By(h,JSON.parse(o),s,f.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:$s([e,m.pathname])),(f.replace?t.replace:t.push)(m,f.state,f)},[e,t,o,s,n])}I.createContext(null);function Df(){let{matches:n}=I.useContext(Wr),e=n[n.length-1];return e?e.params:{}}function Oc(n,{relative:e}={}){let{matches:t}=I.useContext(Wr),{pathname:r}=ni(),s=JSON.stringify(Uy(t));return I.useMemo(()=>By(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function o2(n,e){return Tx(n,e)}function Tx(n,e,t,r){var U;pt(Ol(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=I.useContext(zr),{matches:l}=I.useContext(Wr),c=l[l.length-1],h=c?c.params:{},f=c?c.pathname:"/",m=c?c.pathnameBase:"/",v=c&&c.route;{let B=v&&v.path||"";Ix(f,!v||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let E=ni(),x;if(e){let B=typeof e=="string"?Nl(e):e;pt(m==="/"||((U=B.pathname)==null?void 0:U.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${B.pathname}" was given in the \`location\` prop.`),x=B}else x=E;let R=x.pathname||"/",A=R;if(m!=="/"){let B=m.replace(/^\//,"").split("/");A="/"+R.replace(/^\//,"").split("/").slice(B.length).join("/")}let S=!o&&t&&t.matches&&t.matches.length>0?t.matches:mx(n,{pathname:A});Br(v||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Br(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=d2(S&&S.map(B=>Object.assign({},B,{params:Object.assign({},h,B.params),pathname:$s([m,s.encodeLocation?s.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?m:$s([m,s.encodeLocation?s.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),l,t,r);return e&&M?I.createElement(Dc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},M):M}function a2(){let n=g2(),e=e2(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:o},"ErrorBoundary")," or"," ",I.createElement("code",{style:o},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),t?I.createElement("pre",{style:s},t):null,l)}var l2=I.createElement(a2,null),u2=class extends I.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?I.createElement(Wr.Provider,{value:this.props.routeContext},I.createElement($y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function c2({routeContext:n,match:e,children:t}){let r=I.useContext(Dl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(Wr.Provider,{value:n},t)}function d2(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t==null?void 0:t.errors;if(o!=null){let h=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);pt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let l=!1,c=-1;if(t)for(let h=0;h<s.length;h++){let f=s[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:m,errors:v}=t,E=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!v||v[f.route.id]===void 0);if(f.route.lazy||E){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((h,f,m)=>{let v,E=!1,x=null,R=null;t&&(v=o&&f.route.id?o[f.route.id]:void 0,x=f.route.errorElement||l2,l&&(c<0&&m===0?(Ix("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,R=null):c===m&&(E=!0,R=f.route.hydrateFallbackElement||null)));let A=e.concat(s.slice(0,m+1)),S=()=>{let M;return v?M=x:E?M=R:f.route.Component?M=I.createElement(f.route.Component,null):f.route.element?M=f.route.element:M=h,I.createElement(c2,{match:f,routeContext:{outlet:h,matches:A,isDataRoute:t!=null},children:M})};return t&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?I.createElement(u2,{location:t.location,revalidation:t.revalidation,component:x,error:v,children:S(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):S()},null)}function zy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function h2(n){let e=I.useContext(Dl);return pt(e,zy(n)),e}function f2(n){let e=I.useContext(Nf);return pt(e,zy(n)),e}function p2(n){let e=I.useContext(Wr);return pt(e,zy(n)),e}function Wy(n){let e=p2(n),t=e.matches[e.matches.length-1];return pt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function m2(){return Wy("useRouteId")}function g2(){var r;let n=I.useContext($y),e=f2("useRouteError"),t=Wy("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function y2(){let{router:n}=h2("useNavigate"),e=Wy("useNavigate"),t=I.useRef(!1);return Ex(()=>{t.current=!0}),I.useCallback(async(s,o={})=>{Br(t.current,wx),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var pE={};function Ix(n,e,t){!e&&!pE[n]&&(pE[n]=!0,Br(!1,t))}I.memo(v2);function v2({routes:n,future:e,state:t}){return Tx(n,void 0,t,e)}function xx({to:n,replace:e,state:t,relative:r}){pt(Ol(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=I.useContext(zr);Br(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=I.useContext(Wr),{pathname:l}=ni(),c=Fn(),h=By(n,Uy(o),l,r==="path"),f=JSON.stringify(h);return I.useEffect(()=>{c(JSON.parse(f),{replace:e,state:t,relative:r})},[c,f,r,e,t]),null}function Ct(n){pt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _2({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1}){pt(!Ol(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=I.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof t=="string"&&(t=Nl(t));let{pathname:h="/",search:f="",hash:m="",state:v=null,key:E="default"}=t,x=I.useMemo(()=>{let R=qs(h,l);return R==null?null:{location:{pathname:R,search:f,hash:m,state:v,key:E},navigationType:r}},[l,h,f,m,v,E,r]);return Br(x!=null,`<Router basename="${l}"> is not able to match the URL "${h}${f}${m}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:I.createElement(zr.Provider,{value:c},I.createElement(Dc.Provider,{children:e,value:x}))}function w2({children:n,location:e}){return o2(jg(n),e)}function jg(n,e=[]){let t=[];return I.Children.forEach(n,(r,s)=>{if(!I.isValidElement(r))return;let o=[...e,s];if(r.type===I.Fragment){t.push.apply(t,jg(r.props.children,o));return}pt(r.type===Ct,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=jg(r.props.children,o)),t.push(l)}),t}var Dh="get",Oh="application/x-www-form-urlencoded";function Of(n){return n!=null&&typeof n.tagName=="string"}function E2(n){return Of(n)&&n.tagName.toLowerCase()==="button"}function T2(n){return Of(n)&&n.tagName.toLowerCase()==="form"}function I2(n){return Of(n)&&n.tagName.toLowerCase()==="input"}function x2(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function C2(n,e){return n.button===0&&(!e||e==="_self")&&!x2(n)}var vh=null;function S2(){if(vh===null)try{new FormData(document.createElement("form"),0),vh=!1}catch{vh=!0}return vh}var R2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ng(n){return n!=null&&!R2.has(n)?(Br(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Oh}"`),null):n}function A2(n,e){let t,r,s,o,l;if(T2(n)){let c=n.getAttribute("action");r=c?qs(c,e):null,t=n.getAttribute("method")||Dh,s=ng(n.getAttribute("enctype"))||Oh,o=new FormData(n)}else if(E2(n)||I2(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||c.getAttribute("action");if(r=h?qs(h,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Dh,s=ng(n.getAttribute("formenctype"))||ng(c.getAttribute("enctype"))||Oh,o=new FormData(c,n),!S2()){let{name:f,type:m,value:v}=n;if(m==="image"){let E=f?`${f}.`:"";o.append(`${E}x`,"0"),o.append(`${E}y`,"0")}else f&&o.append(f,v)}}else{if(Of(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Dh,r=null,s=Oh,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:l}}function qy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function P2(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function b2(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function k2(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await P2(o,t);return l.links?l.links():[]}return[]}));return L2(r.flat(1).filter(b2).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function mE(n,e,t,r,s,o){let l=(h,f)=>t[f]?h.route.id!==t[f].route.id:!0,c=(h,f)=>{var m;return t[f].pathname!==h.pathname||((m=t[f].route.path)==null?void 0:m.endsWith("*"))&&t[f].params["*"]!==h.params["*"]};return o==="assets"?e.filter((h,f)=>l(h,f)||c(h,f)):o==="data"?e.filter((h,f)=>{var v;let m=r.routes[h.route.id];if(!m||!m.hasLoader)return!1;if(l(h,f)||c(h,f))return!0;if(h.route.shouldRevalidate){let E=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function N2(n,e,{includeHydrateFallback:t}={}){return D2(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function D2(n){return[...new Set(n)]}function O2(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function L2(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(O2(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}var M2=new Set([100,101,204,205]);function j2(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&qs(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Cx(){let n=I.useContext(Dl);return qy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function V2(){let n=I.useContext(Nf);return qy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Hy=I.createContext(void 0);Hy.displayName="FrameworkContext";function Sx(){let n=I.useContext(Hy);return qy(n,"You must render this element inside a <HydratedRouter> element"),n}function F2(n,e){let t=I.useContext(Hy),[r,s]=I.useState(!1),[o,l]=I.useState(!1),{onFocus:c,onBlur:h,onMouseEnter:f,onMouseLeave:m,onTouchStart:v}=e,E=I.useRef(null);I.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let A=M=>{M.forEach(U=>{l(U.isIntersecting)})},S=new IntersectionObserver(A,{threshold:.5});return E.current&&S.observe(E.current),()=>{S.disconnect()}}},[n]),I.useEffect(()=>{if(r){let A=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(A)}}},[r]);let x=()=>{s(!0)},R=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,E,{}]:[o,E,{onFocus:Uu(c,x),onBlur:Uu(h,R),onMouseEnter:Uu(f,x),onMouseLeave:Uu(m,R),onTouchStart:Uu(v,x)}]:[!1,E,{}]}function Uu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function U2({page:n,...e}){let{router:t}=Cx(),r=I.useMemo(()=>mx(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?I.createElement($2,{page:n,matches:r,...e}):null}function B2(n){let{manifest:e,routeModules:t}=Sx(),[r,s]=I.useState([]);return I.useEffect(()=>{let o=!1;return k2(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),r}function $2({page:n,matches:e,...t}){let r=ni(),{manifest:s,routeModules:o}=Sx(),{basename:l}=Cx(),{loaderData:c,matches:h}=V2(),f=I.useMemo(()=>mE(n,e,h,s,r,"data"),[n,e,h,s,r]),m=I.useMemo(()=>mE(n,e,h,s,r,"assets"),[n,e,h,s,r]),v=I.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let R=new Set,A=!1;if(e.forEach(M=>{var B;let U=s.routes[M.route.id];!U||!U.hasLoader||(!f.some(W=>W.route.id===M.route.id)&&M.route.id in c&&((B=o[M.route.id])!=null&&B.shouldRevalidate)||U.hasClientLoader?A=!0:R.add(M.route.id))}),R.size===0)return[];let S=j2(n,l);return A&&R.size>0&&S.searchParams.set("_routes",e.filter(M=>R.has(M.route.id)).map(M=>M.route.id).join(",")),[S.pathname+S.search]},[l,c,r,s,f,e,n,o]),E=I.useMemo(()=>N2(m,s),[m,s]),x=B2(m);return I.createElement(I.Fragment,null,v.map(R=>I.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...t})),E.map(R=>I.createElement("link",{key:R,rel:"modulepreload",href:R,...t})),x.map(({key:R,link:A})=>I.createElement("link",{key:R,...A})))}function z2(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Rx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Rx&&(window.__reactRouterVersion="7.5.3")}catch{}function W2({basename:n,children:e,window:t}){let r=I.useRef();r.current==null&&(r.current=Nb({window:t,v5Compat:!0}));let s=r.current,[o,l]=I.useState({action:s.action,location:s.location}),c=I.useCallback(h=>{I.startTransition(()=>l(h))},[l]);return I.useLayoutEffect(()=>s.listen(c),[s,c]),I.createElement(_2,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var Ax=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ft=I.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:c,target:h,to:f,preventScrollReset:m,viewTransition:v,...E},x){let{basename:R}=I.useContext(zr),A=typeof f=="string"&&Ax.test(f),S,M=!1;if(typeof f=="string"&&A&&(S=f,Rx))try{let k=new URL(window.location.href),L=f.startsWith("//")?new URL(k.protocol+f):new URL(f),j=qs(L.pathname,R);L.origin===k.origin&&j!=null?f=j+L.search+L.hash:M=!0}catch{Br(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let U=s2(f,{relative:s}),[B,W,Y]=F2(r,E),X=K2(f,{replace:l,state:c,target:h,preventScrollReset:m,relative:s,viewTransition:v});function N(k){e&&e(k),k.defaultPrevented||X(k)}let b=I.createElement("a",{...E,...Y,href:S||U,onClick:M||o?e:N,ref:z2(x,W),target:h,"data-discover":!A&&t==="render"?"true":void 0});return B&&!A?I.createElement(I.Fragment,null,b,I.createElement(U2,{page:U})):b});ft.displayName="Link";var q2=I.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:c,children:h,...f},m){let v=Oc(l,{relative:f.relative}),E=ni(),x=I.useContext(Nf),{navigator:R,basename:A}=I.useContext(zr),S=x!=null&&Z2(v)&&c===!0,M=R.encodeLocation?R.encodeLocation(v).pathname:v.pathname,U=E.pathname,B=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(U=U.toLowerCase(),B=B?B.toLowerCase():null,M=M.toLowerCase()),B&&A&&(B=qs(B,A)||B);const W=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let Y=U===M||!s&&U.startsWith(M)&&U.charAt(W)==="/",X=B!=null&&(B===M||!s&&B.startsWith(M)&&B.charAt(M.length)==="/"),N={isActive:Y,isPending:X,isTransitioning:S},b=Y?e:void 0,k;typeof r=="function"?k=r(N):k=[r,Y?"active":null,X?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let L=typeof o=="function"?o(N):o;return I.createElement(ft,{...f,"aria-current":b,className:k,ref:m,style:L,to:l,viewTransition:c},typeof h=="function"?h(N):h)});q2.displayName="NavLink";var H2=I.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:l=Dh,action:c,onSubmit:h,relative:f,preventScrollReset:m,viewTransition:v,...E},x)=>{let R=X2(),A=J2(c,{relative:f}),S=l.toLowerCase()==="get"?"get":"post",M=typeof c=="string"&&Ax.test(c),U=B=>{if(h&&h(B),B.defaultPrevented)return;B.preventDefault();let W=B.nativeEvent.submitter,Y=(W==null?void 0:W.getAttribute("formmethod"))||l;R(W||B.currentTarget,{fetcherKey:e,method:Y,navigate:t,replace:s,state:o,relative:f,preventScrollReset:m,viewTransition:v})};return I.createElement("form",{ref:x,method:S,action:A,onSubmit:r?h:U,...E,"data-discover":!M&&n==="render"?"true":void 0})});H2.displayName="Form";function G2(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Px(n){let e=I.useContext(Dl);return pt(e,G2(n)),e}function K2(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:l}={}){let c=Fn(),h=ni(),f=Oc(n,{relative:o});return I.useCallback(m=>{if(C2(m,e)){m.preventDefault();let v=t!==void 0?t:mc(h)===mc(f);c(n,{replace:v,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[h,c,f,t,r,e,n,s,o,l])}var Q2=0,Y2=()=>`__${String(++Q2)}__`;function X2(){let{router:n}=Px("useSubmit"),{basename:e}=I.useContext(zr),t=m2();return I.useCallback(async(r,s={})=>{let{action:o,method:l,encType:c,formData:h,body:f}=A2(r,e);if(s.navigate===!1){let m=s.fetcherKey||Y2();await n.fetch(m,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:h,body:f,formMethod:s.method||l,formEncType:s.encType||c,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:h,body:f,formMethod:s.method||l,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function J2(n,{relative:e}={}){let{basename:t}=I.useContext(zr),r=I.useContext(Wr);pt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...Oc(n||".",{relative:e})},l=ni();if(n==null){o.search=l.search;let c=new URLSearchParams(o.search),h=c.getAll("index");if(h.some(m=>m==="")){c.delete("index"),h.filter(v=>v).forEach(v=>c.append("index",v));let m=c.toString();o.search=m?`?${m}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:$s([t,o.pathname])),mc(o)}function Z2(n,e={}){let t=I.useContext(_x);pt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Px("useViewTransitionState"),s=Oc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=qs(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=qs(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Qh(s.pathname,l)!=null||Qh(s.pathname,o)!=null}new TextEncoder;[...M2];var Gy=px();const ek=Nc(Gy),tk=()=>{};var gE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce=function(n,e){if(!n)throw Ll(e)},Ll=function(n){return new Error("Firebase Database ("+bx.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},nk=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],c=n[t++],h=((s&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Ky={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,c=l?n[s+1]:0,h=s+2<n.length,f=h?n[s+2]:0,m=o>>2,v=(o&3)<<4|c>>4;let E=(c&15)<<2|f>>6,x=f&63;h||(x=64,l||(E=64)),r.push(t[m],t[v],t[E],t[x])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(kx(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):nk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const f=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||c==null||f==null||v==null)throw new rk;const E=o<<2|c>>4;if(r.push(E),f!==64){const x=c<<4&240|f>>2;if(r.push(x),v!==64){const R=f<<6&192|v;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class rk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Nx=function(n){const e=kx(n);return Ky.encodeByteArray(e,!0)},Yh=function(n){return Nx(n).replace(/\./g,"")},Xh=function(n){try{return Ky.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(n){return Dx(void 0,n)}function Dx(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!ik(t)||(n[t]=Dx(n[t],e[t]));return n}function ik(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=()=>ok().__FIREBASE_DEFAULTS__,lk=()=>{if(typeof process>"u"||typeof gE>"u")return;const n=gE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},uk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Xh(n[1]);return e&&JSON.parse(e)},Lf=()=>{try{return tk()||ak()||lk()||uk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ox=n=>{var e,t;return(t=(e=Lf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Qy=n=>{const e=Ox(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Lx=()=>{var n;return(n=Lf())===null||n===void 0?void 0:n.config},Mx=n=>{var e;return(e=Lf())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Yh(JSON.stringify(t)),Yh(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Jy(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yn())}function ck(){var n;const e=(n=Lf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function jx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fk(){const n=yn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function pk(){return bx.NODE_ADMIN===!0}function mk(){return!ck()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gk(){try{return typeof indexedDB=="object"}catch{return!1}}function yk(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="FirebaseError";class ps extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=vk,Object.setPrototypeOf(this,ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lc.prototype.create)}}class Lc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?_k(o,r):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new ps(s,c,r)}}function _k(n,e){return n.replace(wk,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const wk=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(n){return JSON.parse(n)}function en(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=function(n){let e={},t={},r={},s="";try{const o=n.split(".");e=gc(Xh(o[0])||""),t=gc(Xh(o[1])||""),s=o[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:s}},Ek=function(n){const e=Vx(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},Tk=function(n){const e=Vx(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function yl(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Vg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Jh(n,e,t){const r={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=e.call(t,n[s],s,n));return r}function Ji(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],l=e[s];if(yE(o)&&yE(l)){if(!Ji(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function yE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Qu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Yu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)r[v]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let v=0;v<16;v++)r[v]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let v=16;v<80;v++){const E=r[v-3]^r[v-8]^r[v-14]^r[v-16];r[v]=(E<<1|E>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],l=this.chain_[2],c=this.chain_[3],h=this.chain_[4],f,m;for(let v=0;v<80;v++){v<40?v<20?(f=c^o&(l^c),m=1518500249):(f=o^l^c,m=1859775393):v<60?(f=o&l|c&(o|l),m=2400959708):(f=o^l^c,m=3395469782);const E=(s<<5|s>>>27)+f+h+m+r[v]&4294967295;h=c,c=l,l=(o<<30|o>>>2)&4294967295,o=s,s=E}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const r=t-this.blockSize;let s=0;const o=this.buf_;let l=this.inbuf_;for(;s<t;){if(l===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(o[l]=e.charCodeAt(s),++l,++s,l===this.blockSize){this.compress_(o),l=0;break}}else for(;s<t;)if(o[l]=e[s],++l,++s,l===this.blockSize){this.compress_(o),l=0;break}}this.inbuf_=l,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[s]>>o&255,++r;return e}}function xk(n,e){const t=new Ck(n,e);return t.subscribe.bind(t)}class Ck{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Sk(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=rg),s.error===void 0&&(s.error=rg),s.complete===void 0&&(s.complete=rg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Sk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function rg(){}function Rk(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);if(s>=55296&&s<=56319){const o=s-55296;r++,ce(r<n.length,"Surrogate pair missing trail surrogate.");const l=n.charCodeAt(r)-56320;s=65536+(o<<10)+l}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Mf=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(n){return n&&n._delegate?n._delegate:n}class Hs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pk=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Yy;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kk(e))try{this.getOrInitializeService({instanceIdentifier:qo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=qo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qo){return this.instances.has(e)}getOptions(e=qo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bk(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qo){return this.component?this.component.multipleInstances?e:qo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function bk(n){return n===qo?void 0:n}function kk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Pk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const Dk={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},Ok=Me.INFO,Lk={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},Mk=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=Lk[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jf{constructor(e){this.name=e,this._logLevel=Ok,this._logHandler=Mk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const jk=(n,e)=>e.some(t=>n instanceof t);let vE,_E;function Vk(){return vE||(vE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fk(){return _E||(_E=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fx=new WeakMap,Fg=new WeakMap,Ux=new WeakMap,sg=new WeakMap,Zy=new WeakMap;function Uk(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(Wi(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&Fx.set(t,n)}).catch(()=>{}),Zy.set(e,n),e}function Bk(n){if(Fg.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});Fg.set(n,e)}let Ug={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Fg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Ux.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function $k(n){Ug=n(Ug)}function zk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(ig(this),e,...t);return Ux.set(r,e.sort?e.sort():[e]),Wi(r)}:Fk().includes(n)?function(...e){return n.apply(ig(this),e),Wi(Fx.get(this))}:function(...e){return Wi(n.apply(ig(this),e))}}function Wk(n){return typeof n=="function"?zk(n):(n instanceof IDBTransaction&&Bk(n),jk(n,Vk())?new Proxy(n,Ug):n)}function Wi(n){if(n instanceof IDBRequest)return Uk(n);if(sg.has(n))return sg.get(n);const e=Wk(n);return e!==n&&(sg.set(n,e),Zy.set(e,n)),e}const ig=n=>Zy.get(n);function qk(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),c=Wi(l);return r&&l.addEventListener("upgradeneeded",h=>{r(Wi(l.result),h.oldVersion,h.newVersion,Wi(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const Hk=["get","getKey","getAll","getAllKeys","count"],Gk=["put","add","delete","clear"],og=new Map;function wE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(og.get(e))return og.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=Gk.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Hk.includes(t)))return;const o=async function(l,...c){const h=this.transaction(l,s?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(c.shift())),(await Promise.all([f[t](...c),s&&h.done]))[0]};return og.set(e,o),o}$k(n=>({...n,get:(e,t,r)=>wE(e,t)||n.get(e,t,r),has:(e,t)=>!!wE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Qk(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Qk(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bg="@firebase/app",EE="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new jf("@firebase/app"),Yk="@firebase/app-compat",Xk="@firebase/analytics-compat",Jk="@firebase/analytics",Zk="@firebase/app-check-compat",eN="@firebase/app-check",tN="@firebase/auth",nN="@firebase/auth-compat",rN="@firebase/database",sN="@firebase/data-connect",iN="@firebase/database-compat",oN="@firebase/functions",aN="@firebase/functions-compat",lN="@firebase/installations",uN="@firebase/installations-compat",cN="@firebase/messaging",dN="@firebase/messaging-compat",hN="@firebase/performance",fN="@firebase/performance-compat",pN="@firebase/remote-config",mN="@firebase/remote-config-compat",gN="@firebase/storage",yN="@firebase/storage-compat",vN="@firebase/firestore",_N="@firebase/vertexai",wN="@firebase/firestore-compat",EN="firebase",TN="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="[DEFAULT]",IN={[Bg]:"fire-core",[Yk]:"fire-core-compat",[Jk]:"fire-analytics",[Xk]:"fire-analytics-compat",[eN]:"fire-app-check",[Zk]:"fire-app-check-compat",[tN]:"fire-auth",[nN]:"fire-auth-compat",[rN]:"fire-rtdb",[sN]:"fire-data-connect",[iN]:"fire-rtdb-compat",[oN]:"fire-fn",[aN]:"fire-fn-compat",[lN]:"fire-iid",[uN]:"fire-iid-compat",[cN]:"fire-fcm",[dN]:"fire-fcm-compat",[hN]:"fire-perf",[fN]:"fire-perf-compat",[pN]:"fire-rc",[mN]:"fire-rc-compat",[gN]:"fire-gcs",[yN]:"fire-gcs-compat",[vN]:"fire-fst",[wN]:"fire-fst-compat",[_N]:"fire-vertex","fire-js":"fire-js",[EN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh=new Map,xN=new Map,zg=new Map;function TE(n,e){try{n.container.addComponent(e)}catch(t){Gs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Zi(n){const e=n.name;if(zg.has(e))return Gs.debug(`There were multiple attempts to register component ${e}.`),!1;zg.set(e,n);for(const t of Zh.values())TE(t,n);for(const t of xN.values())TE(t,n);return!0}function Mc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function pn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qi=new Lc("app","Firebase",CN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=TN;function Bx(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:$g,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw qi.create("bad-app-name",{appName:String(s)});if(t||(t=Lx()),!t)throw qi.create("no-options");const o=Zh.get(s);if(o){if(Ji(t,o.options)&&Ji(r,o.config))return o;throw qi.create("duplicate-app",{appName:s})}const l=new Nk(s);for(const h of zg.values())l.addComponent(h);const c=new SN(t,r,l);return Zh.set(s,c),c}function Vf(n=$g){const e=Zh.get(n);if(!e&&n===$g&&Lx())return Bx();if(!e)throw qi.create("no-app",{appName:n});return e}function pr(n,e,t){var r;let s=(r=IN[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gs.warn(c.join(" "));return}Zi(new Hs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN="firebase-heartbeat-database",AN=1,yc="firebase-heartbeat-store";let ag=null;function $x(){return ag||(ag=qk(RN,AN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yc)}catch(t){console.warn(t)}}}}).catch(n=>{throw qi.create("idb-open",{originalErrorMessage:n.message})})),ag}async function PN(n){try{const t=(await $x()).transaction(yc),r=await t.objectStore(yc).get(zx(n));return await t.done,r}catch(e){if(e instanceof ps)Gs.warn(e.message);else{const t=qi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gs.warn(t.message)}}}async function IE(n,e){try{const r=(await $x()).transaction(yc,"readwrite");await r.objectStore(yc).put(e,zx(n)),await r.done}catch(t){if(t instanceof ps)Gs.warn(t.message);else{const r=qi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Gs.warn(r.message)}}}function zx(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN=1024,kN=30;class NN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ON(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=xE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>kN){const l=LN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Gs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=xE(),{heartbeatsToSend:r,unsentEntries:s}=DN(this._heartbeatsCache.heartbeats),o=Yh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Gs.warn(t),""}}}function xE(){return new Date().toISOString().substring(0,10)}function DN(n,e=bN){const t=[];let r=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),CE(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),CE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class ON{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gk()?yk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await PN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return IE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return IE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function CE(n){return Yh(JSON.stringify({version:2,heartbeats:n})).length}function LN(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(n){Zi(new Hs("platform-logger",e=>new Kk(e),"PRIVATE")),Zi(new Hs("heartbeat",e=>new NN(e),"PRIVATE")),pr(Bg,EE,n),pr(Bg,EE,"esm2017"),pr("fire-js","")}MN("");function ev(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function Wx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jN=Wx,qx=new Lc("auth","Firebase",Wx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef=new jf("@firebase/auth");function VN(n,...e){ef.logLevel<=Me.WARN&&ef.warn(`Auth (${uo}): ${n}`,...e)}function Lh(n,...e){ef.logLevel<=Me.ERROR&&ef.error(`Auth (${uo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(n,...e){throw nv(n,...e)}function Fr(n,...e){return nv(n,...e)}function tv(n,e,t){const r=Object.assign(Object.assign({},jN()),{[e]:t});return new Lc("auth","Firebase",r).create(e,{appName:n.name})}function as(n){return tv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function FN(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&gr(n,"argument-error"),tv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return qx.create(n,...e)}function xe(n,e,...t){if(!n)throw nv(e,...t)}function js(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Lh(e),new Error(e)}function Ks(n,e){n||js(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function UN(){return SE()==="http:"||SE()==="https:"}function SE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UN()||hk()||"connection"in navigator)?navigator.onLine:!0}function $N(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ks(t>e,"Short delay should be less than long delay!"),this.isMobile=Jy()||jx()}get(){return BN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(n,e){Ks(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;js("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;js("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;js("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=new jc(3e4,6e4);function co(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ms(n,e,t,r,s={}){return Gx(n,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=Ml(Object.assign({key:n.config.apiKey},l)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:h},o);return dk()||(f.referrerPolicy="no-referrer"),Hx.fetch()(Kx(n,n.config.apiHost,t,c),f)})}async function Gx(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},zN),e);try{const s=new HN(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw _h(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,f]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw _h(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw _h(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw _h(n,"user-disabled",l);const m=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw tv(n,m,f);gr(n,m)}}catch(s){if(s instanceof ps)throw s;gr(n,"network-request-failed",{message:String(s)})}}async function Vc(n,e,t,r,s={}){const o=await ms(n,e,t,r,s);return"mfaPendingCredential"in o&&gr(n,"multi-factor-auth-required",{_serverResponse:o}),o}function Kx(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?rv(n.config,s):`${n.config.apiScheme}://${s}`}function qN(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Fr(this.auth,"network-request-failed")),WN.get())})}}function _h(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Fr(n,e,r);return s.customData._tokenResponse=t,s}function RE(n){return n!==void 0&&n.enterprise!==void 0}class GN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return qN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function KN(n,e){return ms(n,"GET","/v2/recaptchaConfig",co(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(n,e){return ms(n,"POST","/v1/accounts:delete",e)}async function Qx(n,e){return ms(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YN(n,e=!1){const t=rt(n),r=await t.getIdToken(e),s=Ff(r);xe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:tc(lg(s.auth_time)),issuedAtTime:tc(lg(s.iat)),expirationTime:tc(lg(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function lg(n){return Number(n)*1e3}function Ff(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Lh("JWT malformed, contained fewer than 3 sections"),null;try{const s=Xh(t);return s?JSON.parse(s):(Lh("Failed to decode base64 JWT payload"),null)}catch(s){return Lh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function AE(n){const e=Ff(n);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ps&&XN(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function XN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tc(this.lastLoginAt),this.creationTime=tc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tf(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Jo(n,Qx(t,{idToken:r}));xe(s==null?void 0:s.users.length,t,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?Yx(o.providerUserInfo):[],c=eD(n.providerData,l),h=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),m=h?f:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new qg(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,v)}async function ZN(n){const e=rt(n);await tf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eD(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Yx(n){return n.map(e=>{var{providerId:t}=e,r=ev(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tD(n,e){const t=await Gx(n,{},async()=>{const r=Ml({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=Kx(n,s,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Hx.fetch()(l,{method:"POST",headers:c,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function nD(n,e){return ms(n,"POST","/v2/accounts:revokeToken",co(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):AE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const t=AE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await tD(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,l=new ll;return r&&(xe(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(xe(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(xe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ll,this.toJSON())}_performRefresh(){return js("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(n,e){xe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Vs{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,o=ev(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new JN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new qg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Jo(this,this.stsTokenManager.getToken(this.auth,e));return xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return YN(this,e)}reload(){return ZN(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Vs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await tf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pn(this.auth.app))return Promise.reject(as(this.auth));const e=await this.getIdToken();return await Jo(this,QN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,o,l,c,h,f,m;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(s=t.email)!==null&&s!==void 0?s:void 0,x=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,R=(l=t.photoURL)!==null&&l!==void 0?l:void 0,A=(c=t.tenantId)!==null&&c!==void 0?c:void 0,S=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,M=(f=t.createdAt)!==null&&f!==void 0?f:void 0,U=(m=t.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:B,emailVerified:W,isAnonymous:Y,providerData:X,stsTokenManager:N}=t;xe(B&&N,e,"internal-error");const b=ll.fromJSON(this.name,N);xe(typeof B=="string",e,"internal-error"),Li(v,e.name),Li(E,e.name),xe(typeof W=="boolean",e,"internal-error"),xe(typeof Y=="boolean",e,"internal-error"),Li(x,e.name),Li(R,e.name),Li(A,e.name),Li(S,e.name),Li(M,e.name),Li(U,e.name);const k=new Vs({uid:B,auth:e,email:E,emailVerified:W,displayName:v,isAnonymous:Y,photoURL:R,phoneNumber:x,tenantId:A,stsTokenManager:b,createdAt:M,lastLoginAt:U});return X&&Array.isArray(X)&&(k.providerData=X.map(L=>Object.assign({},L))),S&&(k._redirectEventId=S),k}static async _fromIdTokenResponse(e,t,r=!1){const s=new ll;s.updateFromServerResponse(t);const o=new Vs({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await tf(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];xe(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?Yx(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),c=new ll;c.updateFromIdToken(r);const h=new Vs({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new qg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=new Map;function Fs(n){Ks(n instanceof Function,"Expected a class definition");let e=PE.get(n);return e?(Ks(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,PE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Xx.type="NONE";const bE=Xx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(n,e,t){return`firebase:${n}:${e}:${t}`}class ul{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Mh(this.userKey,s.apiKey,o),this.fullPersistenceKey=Mh("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ul(Fs(bE),e,r);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||Fs(bE);const l=Mh(r,e.config.apiKey,e.name);let c=null;for(const f of t)try{const m=await f._get(l);if(m){const v=Vs._fromJSON(e,m);f!==o&&(c=v),o=f;break}}catch{}const h=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new ul(o,e,r):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new ul(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Jx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rC(e))return"Blackberry";if(sC(e))return"Webos";if(Zx(e))return"Safari";if((e.includes("chrome/")||eC(e))&&!e.includes("edge/"))return"Chrome";if(nC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Jx(n=yn()){return/firefox\//i.test(n)}function Zx(n=yn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eC(n=yn()){return/crios\//i.test(n)}function tC(n=yn()){return/iemobile/i.test(n)}function nC(n=yn()){return/android/i.test(n)}function rC(n=yn()){return/blackberry/i.test(n)}function sC(n=yn()){return/webos/i.test(n)}function sv(n=yn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function rD(n=yn()){var e;return sv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function sD(){return fk()&&document.documentMode===10}function iC(n=yn()){return sv(n)||nC(n)||sC(n)||rC(n)||/windows phone/i.test(n)||tC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(n,e=[]){let t;switch(n){case"Browser":t=kE(yn());break;case"Worker":t=`${kE(yn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${uo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oD(n,e={}){return ms(n,"GET","/v2/passwordPolicy",co(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=6;class lD{constructor(e){var t,r,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:aD,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,o,l,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(s=h.containsLowercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new NE(this),this.idTokenSubscription=new NE(this),this.beforeStateQueue=new iD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fs(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ul.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Qx(this,{idToken:e}),r=await Vs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(pn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=s==null?void 0:s._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&(h!=null&&h.user)&&(s=h.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await tf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$N()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pn(this.app))return Promise.reject(as(this));const t=e?rt(e):null;return t&&xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pn(this.app)?Promise.reject(as(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pn(this.app)?Promise.reject(as(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oD(this),t=new lD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Lc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await nD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Fs(e)||this._popupRedirectResolver;xe(t,this,"argument-error"),this.redirectPersistenceManager=await ul.create(this,[Fs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,s);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&VN(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ho(n){return rt(n)}class NE{constructor(e){this.auth=e,this.observer=null,this.addObserver=xk(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cD(n){Uf=n}function aC(n){return Uf.loadJS(n)}function dD(){return Uf.recaptchaEnterpriseScript}function hD(){return Uf.gapiScript}function fD(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class pD{constructor(){this.enterprise=new mD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class mD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const gD="recaptcha-enterprise",lC="NO_RECAPTCHA";class yD{constructor(e){this.type=gD,this.auth=ho(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{KN(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new GN(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(h=>{c(h)})})}function s(o,l,c){const h=window.grecaptcha;RE(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(lC)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new pD().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!t&&RE(window.grecaptcha))s(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=dD();h.length!==0&&(h+=c),aC(h).then(()=>{s(c,o,l)}).catch(f=>{l(f)})}}).catch(c=>{l(c)})})}}async function DE(n,e,t,r=!1,s=!1){const o=new yD(n);let l;if(s)l=lC;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const c=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Hg(n,e,t,r,s){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await DE(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await DE(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(n,e){const t=Mc(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(Ji(o,e??{}))return s;gr(s,"already-initialized")}return t.initialize({options:e})}function _D(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Fs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function wD(n,e,t){const r=ho(n);xe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=uC(e),{host:l,port:c}=ED(e),h=c===null?"":`:${c}`,f={url:`${o}//${l}${h}/`},m=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){xe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),xe(Ji(f,r.config.emulator)&&Ji(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,TD()}function uC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ED(n){const e=uC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:OE(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:OE(l)}}}function OE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function TD(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return js("not implemented")}_getIdTokenResponse(e){return js("not implemented")}_linkToIdToken(e,t){return js("not implemented")}_getReauthenticationResolver(e){return js("not implemented")}}async function ID(n,e){return ms(n,"POST","/v1/accounts:update",e)}async function xD(n,e){return ms(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CD(n,e){return Vc(n,"POST","/v1/accounts:signInWithPassword",co(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD(n,e){return Vc(n,"POST","/v1/accounts:signInWithEmailLink",co(n,e))}async function RD(n,e){return Vc(n,"POST","/v1/accounts:signInWithEmailLink",co(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends iv{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new vc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new vc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hg(e,t,"signInWithPassword",CD);case"emailLink":return SD(e,{email:this._email,oobCode:this._password});default:gr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hg(e,r,"signUpPassword",xD);case"emailLink":return RD(e,{idToken:t,email:this._email,oobCode:this._password});default:gr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(n,e){return Vc(n,"POST","/v1/accounts:signInWithIdp",co(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD="http://localhost";class Zo extends iv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Zo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,o=ev(t,["providerId","signInMethod"]);if(!r||!s)return null;const l=new Zo(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return cl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,cl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,cl(e,t)}buildRequest(){const e={requestUri:AD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ml(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bD(n){const e=Qu(Yu(n)).link,t=e?Qu(Yu(e)).deep_link_id:null,r=Qu(Yu(n)).deep_link_id;return(r?Qu(Yu(r)).link:null)||r||t||e||n}class ov{constructor(e){var t,r,s,o,l,c;const h=Qu(Yu(e)),f=(t=h.apiKey)!==null&&t!==void 0?t:null,m=(r=h.oobCode)!==null&&r!==void 0?r:null,v=PD((s=h.mode)!==null&&s!==void 0?s:null);xe(f&&m&&v,"argument-error"),this.apiKey=f,this.operation=v,this.code=m,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=h.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(c=h.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=bD(e);try{return new ov(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this.providerId=jl.PROVIDER_ID}static credential(e,t){return vc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=ov.parseLink(t);return xe(r,"argument-error"),vc._fromEmailAndCode(e,r.code,r.tenantId)}}jl.PROVIDER_ID="password";jl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc extends av{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Fc{constructor(){super("facebook.com")}static credential(e){return Zo._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vi.credential(e.oauthAccessToken)}catch{return null}}}Vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends Fc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Zo._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ss.credential(t,r)}catch{return null}}}ss.GOOGLE_SIGN_IN_METHOD="google.com";ss.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Fc{constructor(){super("github.com")}static credential(e){return Zo._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fi.credential(e.oauthAccessToken)}catch{return null}}}Fi.GITHUB_SIGN_IN_METHOD="github.com";Fi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends Fc{constructor(){super("twitter.com")}static credential(e,t){return Zo._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ui.credential(t,r)}catch{return null}}}Ui.TWITTER_SIGN_IN_METHOD="twitter.com";Ui.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kD(n,e){return Vc(n,"POST","/v1/accounts:signUp",co(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await Vs._fromIdTokenResponse(e,r,s),l=LE(r);return new ea({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=LE(r);return new ea({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function LE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf extends ps{constructor(e,t,r,s){var o;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,nf.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new nf(e,t,r,s)}}function cC(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?nf._fromErrorAndOperation(n,o,e,r):o})}async function ND(n,e,t=!1){const r=await Jo(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ea._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DD(n,e,t=!1){const{auth:r}=n;if(pn(r.app))return Promise.reject(as(r));const s="reauthenticate";try{const o=await Jo(n,cC(r,s,e,n),t);xe(o.idToken,r,"internal-error");const l=Ff(o.idToken);xe(l,r,"internal-error");const{sub:c}=l;return xe(n.uid===c,r,"user-mismatch"),ea._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&gr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dC(n,e,t=!1){if(pn(n.app))return Promise.reject(as(n));const r="signIn",s=await cC(n,r,e),o=await ea._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function OD(n,e){return dC(ho(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hC(n){const e=ho(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function LD(n,e,t){if(pn(n.app))return Promise.reject(as(n));const r=ho(n),l=await Hg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kD).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&hC(n),h}),c=await ea._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function MD(n,e,t){return pn(n.app)?Promise.reject(as(n)):OD(rt(n),jl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&hC(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jD(n,e){return ms(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gg(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=rt(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await Jo(r,jD(r.auth,o));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const c=r.providerData.find(({providerId:h})=>h==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function VD(n,e){const t=rt(n);return pn(t.auth.app)?Promise.reject(as(t.auth)):FD(t,e)}async function FD(n,e,t){const{auth:r}=n,o={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(o.email=e);const l=await Jo(n,ID(r,o));await n._updateTokensIfNecessary(l,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(n){var e,t;if(!n)return null;const{providerId:r}=n,s=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},o=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const l=(t=(e=Ff(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(l){const c=l!=="anonymous"&&l!=="custom"?l:null;return new dl(o,c)}}if(!r)return null;switch(r){case"facebook.com":return new BD(o,s);case"github.com":return new $D(o,s);case"google.com":return new zD(o,s);case"twitter.com":return new WD(o,s,n.screenName||null);case"custom":case"anonymous":return new dl(o,null);default:return new dl(o,r,s)}}class dl{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class fC extends dl{constructor(e,t,r,s){super(e,t,r),this.username=s}}class BD extends dl{constructor(e,t){super(e,"facebook.com",t)}}class $D extends fC{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class zD extends dl{constructor(e,t){super(e,"google.com",t)}}class WD extends fC{constructor(e,t,r){super(e,"twitter.com",t,r)}}function qD(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:UD(t)}function HD(n,e,t,r){return rt(n).onIdTokenChanged(e,t,r)}function GD(n,e,t){return rt(n).beforeAuthStateChanged(e,t)}function pC(n,e,t,r){return rt(n).onAuthStateChanged(e,t,r)}const rf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(rf,"1"),this.storage.removeItem(rf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=1e3,QD=10;class gC extends mC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);sD()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,QD):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},KD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}gC.type="LOCAL";const YD=gC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC extends mC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}yC.type="SESSION";const vC=yC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Bf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(l).map(async f=>f(t.origin,o)),h=await XD(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const f=lv("",20);s.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(v){const E=v;if(E.data.eventId===f)switch(E.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(E.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(){return window}function ZD(n){ls().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(){return typeof ls().WorkerGlobalScope<"u"&&typeof ls().importScripts=="function"}async function eO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tO(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function nO(){return _C()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="firebaseLocalStorageDb",rO=1,sf="firebaseLocalStorage",EC="fbase_key";class Uc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $f(n,e){return n.transaction([sf],e?"readwrite":"readonly").objectStore(sf)}function sO(){const n=indexedDB.deleteDatabase(wC);return new Uc(n).toPromise()}function Kg(){const n=indexedDB.open(wC,rO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(sf,{keyPath:EC})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(sf)?e(r):(r.close(),await sO(),e(await Kg()))})})}async function ME(n,e,t){const r=$f(n,!0).put({[EC]:e,value:t});return new Uc(r).toPromise()}async function iO(n,e){const t=$f(n,!1).get(e),r=await new Uc(t).toPromise();return r===void 0?null:r.value}function jE(n,e){const t=$f(n,!0).delete(e);return new Uc(t).toPromise()}const oO=800,aO=3;class TC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>aO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _C()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bf._getInstance(nO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await eO(),!this.activeServiceWorker)return;this.sender=new JD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kg();return await ME(e,rf,"1"),await jE(e,rf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ME(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>iO(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>jE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=$f(s,!1).getAll();return new Uc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}TC.type="LOCAL";const lO=TC;new jc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(n,e){return e?Fs(e):(xe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv extends iv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return cl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return cl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function uO(n){return dC(n.auth,new uv(n),n.bypassAuthState)}function cO(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),DD(t,new uv(n),n.bypassAuthState)}async function dO(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),ND(t,new uv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uO;case"linkViaPopup":case"linkViaRedirect":return dO;case"reauthViaPopup":case"reauthViaRedirect":return cO;default:gr(this.auth,"internal-error")}}resolve(e){Ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO=new jc(2e3,1e4);async function fO(n,e,t){if(pn(n.app))return Promise.reject(Fr(n,"operation-not-supported-in-this-environment"));const r=ho(n);FN(n,e,av);const s=IC(r,t);return new Go(r,"signInViaPopup",e,s).executeNotNull()}class Go extends xC{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Go.currentPopupAction&&Go.currentPopupAction.cancel(),Go.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){Ks(this.filter.length===1,"Popup operations only handle one event");const e=lv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Go.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hO.get())};e()}}Go.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO="pendingRedirect",jh=new Map;class mO extends xC{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=jh.get(this.auth._key());if(!e){try{const r=await gO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}jh.set(this.auth._key(),e)}return this.bypassAuthState||jh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gO(n,e){const t=_O(e),r=vO(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function yO(n,e){jh.set(n._key(),e)}function vO(n){return Fs(n._redirectPersistence)}function _O(n){return Mh(pO,n.config.apiKey,n.name)}async function wO(n,e,t=!1){if(pn(n.app))return Promise.reject(as(n));const r=ho(n),s=IC(r,e),l=await new mO(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=10*60*1e3;class TO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!CC(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Fr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EO&&this.cachedEventUids.clear(),this.cachedEventUids.has(VE(e))}saveEventToCache(e){this.cachedEventUids.add(VE(e)),this.lastProcessedEventTime=Date.now()}}function VE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function CC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function IO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xO(n,e={}){return ms(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SO=/^https?/;async function RO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await xO(n);for(const t of e)try{if(AO(t))return}catch{}gr(n,"unauthorized-domain")}function AO(n){const e=Wg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!SO.test(t))return!1;if(CO.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=new jc(3e4,6e4);function FE(){const n=ls().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function bO(n){return new Promise((e,t)=>{var r,s,o;function l(){FE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{FE(),t(Fr(n,"network-request-failed"))},timeout:PO.get()})}if(!((s=(r=ls().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=ls().gapi)===null||o===void 0)&&o.load)l();else{const c=fD("iframefcb");return ls()[c]=()=>{gapi.load?l():t(Fr(n,"network-request-failed"))},aC(`${hD()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw Vh=null,e})}let Vh=null;function kO(n){return Vh=Vh||bO(n),Vh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=new jc(5e3,15e3),DO="__/auth/iframe",OO="emulator/auth/iframe",LO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jO(n){const e=n.config;xe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?rv(e,OO):`https://${n.config.authDomain}/${DO}`,r={apiKey:e.apiKey,appName:n.name,v:uo},s=MO.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Ml(r).slice(1)}`}async function VO(n){const e=await kO(n),t=ls().gapi;return xe(t,n,"internal-error"),e.open({where:document.body,url:jO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LO,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Fr(n,"network-request-failed"),c=ls().setTimeout(()=>{o(l)},NO.get());function h(){ls().clearTimeout(c),s(r)}r.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UO=500,BO=600,$O="_blank",zO="http://localhost";class UE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WO(n,e,t,r=UO,s=BO){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h=Object.assign(Object.assign({},FO),{width:r.toString(),height:s.toString(),top:o,left:l}),f=yn().toLowerCase();t&&(c=eC(f)?$O:t),Jx(f)&&(e=e||zO,h.scrollbars="yes");const m=Object.entries(h).reduce((E,[x,R])=>`${E}${x}=${R},`,"");if(rD(f)&&c!=="_self")return qO(e||"",c),new UE(null);const v=window.open(e||"",c,m);xe(v,n,"popup-blocked");try{v.focus()}catch{}return new UE(v)}function qO(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO="__/auth/handler",GO="emulator/auth/handler",KO=encodeURIComponent("fac");async function BE(n,e,t,r,s,o){xe(n.config.authDomain,n,"auth-domain-config-required"),xe(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:uo,eventId:s};if(e instanceof av){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",Vg(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,v]of Object.entries({}))l[m]=v}if(e instanceof Fc){const m=e.getScopes().filter(v=>v!=="");m.length>0&&(l.scopes=m.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const h=await n._getAppCheckToken(),f=h?`#${KO}=${encodeURIComponent(h)}`:"";return`${QO(n)}?${Ml(c).slice(1)}${f}`}function QO({config:n}){return n.emulator?rv(n,GO):`https://${n.authDomain}/${HO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="webStorageSupport";class YO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vC,this._completeRedirectFn=wO,this._overrideRedirectResult=yO}async _openPopup(e,t,r,s){var o;Ks((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await BE(e,t,r,Wg(),s);return WO(e,l,lv())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await BE(e,t,r,Wg(),s);return ZD(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(Ks(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await VO(e),r=new TO(e);return t.register("authEvent",s=>(xe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ug,{type:ug},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[ug];l!==void 0&&t(!!l),gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=RO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return iC()||Zx()||sv()}}const XO=YO;var $E="@firebase/auth",zE="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eL(n){Zi(new Hs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;xe(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oC(n)},f=new uD(r,s,o,h);return _D(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Zi(new Hs("auth-internal",e=>{const t=ho(e.getProvider("auth").getImmediate());return(r=>new JO(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),pr($E,zE,ZO(n)),pr($E,zE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=5*60,nL=Mx("authIdTokenMaxAge")||tL;let WE=null;const rL=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>nL)return;const s=t==null?void 0:t.token;WE!==s&&(WE=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function zf(n=Vf()){const e=Mc(n,"auth");if(e.isInitialized())return e.getImmediate();const t=vD(n,{popupRedirectResolver:XO,persistence:[lO,YD,vC]}),r=Mx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=rL(o.toString());GD(t,l,()=>l(t.currentUser)),HD(t,c=>l(c))}}const s=Ox("auth");return s&&wD(t,`http://${s}`),t}function sL(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}cD({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=Fr("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",sL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eL("Browser");var iL="firebase",oL="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pr(iL,oL,"app");var qE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hi,SC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,b){function k(){}k.prototype=b.prototype,N.D=b.prototype,N.prototype=new k,N.prototype.constructor=N,N.C=function(L,j,V){for(var D=Array(arguments.length-2),le=2;le<arguments.length;le++)D[le-2]=arguments[le];return b.prototype[j].apply(L,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,b,k){k||(k=0);var L=Array(16);if(typeof b=="string")for(var j=0;16>j;++j)L[j]=b.charCodeAt(k++)|b.charCodeAt(k++)<<8|b.charCodeAt(k++)<<16|b.charCodeAt(k++)<<24;else for(j=0;16>j;++j)L[j]=b[k++]|b[k++]<<8|b[k++]<<16|b[k++]<<24;b=N.g[0],k=N.g[1],j=N.g[2];var V=N.g[3],D=b+(V^k&(j^V))+L[0]+3614090360&4294967295;b=k+(D<<7&4294967295|D>>>25),D=V+(j^b&(k^j))+L[1]+3905402710&4294967295,V=b+(D<<12&4294967295|D>>>20),D=j+(k^V&(b^k))+L[2]+606105819&4294967295,j=V+(D<<17&4294967295|D>>>15),D=k+(b^j&(V^b))+L[3]+3250441966&4294967295,k=j+(D<<22&4294967295|D>>>10),D=b+(V^k&(j^V))+L[4]+4118548399&4294967295,b=k+(D<<7&4294967295|D>>>25),D=V+(j^b&(k^j))+L[5]+1200080426&4294967295,V=b+(D<<12&4294967295|D>>>20),D=j+(k^V&(b^k))+L[6]+2821735955&4294967295,j=V+(D<<17&4294967295|D>>>15),D=k+(b^j&(V^b))+L[7]+4249261313&4294967295,k=j+(D<<22&4294967295|D>>>10),D=b+(V^k&(j^V))+L[8]+1770035416&4294967295,b=k+(D<<7&4294967295|D>>>25),D=V+(j^b&(k^j))+L[9]+2336552879&4294967295,V=b+(D<<12&4294967295|D>>>20),D=j+(k^V&(b^k))+L[10]+4294925233&4294967295,j=V+(D<<17&4294967295|D>>>15),D=k+(b^j&(V^b))+L[11]+2304563134&4294967295,k=j+(D<<22&4294967295|D>>>10),D=b+(V^k&(j^V))+L[12]+1804603682&4294967295,b=k+(D<<7&4294967295|D>>>25),D=V+(j^b&(k^j))+L[13]+4254626195&4294967295,V=b+(D<<12&4294967295|D>>>20),D=j+(k^V&(b^k))+L[14]+2792965006&4294967295,j=V+(D<<17&4294967295|D>>>15),D=k+(b^j&(V^b))+L[15]+1236535329&4294967295,k=j+(D<<22&4294967295|D>>>10),D=b+(j^V&(k^j))+L[1]+4129170786&4294967295,b=k+(D<<5&4294967295|D>>>27),D=V+(k^j&(b^k))+L[6]+3225465664&4294967295,V=b+(D<<9&4294967295|D>>>23),D=j+(b^k&(V^b))+L[11]+643717713&4294967295,j=V+(D<<14&4294967295|D>>>18),D=k+(V^b&(j^V))+L[0]+3921069994&4294967295,k=j+(D<<20&4294967295|D>>>12),D=b+(j^V&(k^j))+L[5]+3593408605&4294967295,b=k+(D<<5&4294967295|D>>>27),D=V+(k^j&(b^k))+L[10]+38016083&4294967295,V=b+(D<<9&4294967295|D>>>23),D=j+(b^k&(V^b))+L[15]+3634488961&4294967295,j=V+(D<<14&4294967295|D>>>18),D=k+(V^b&(j^V))+L[4]+3889429448&4294967295,k=j+(D<<20&4294967295|D>>>12),D=b+(j^V&(k^j))+L[9]+568446438&4294967295,b=k+(D<<5&4294967295|D>>>27),D=V+(k^j&(b^k))+L[14]+3275163606&4294967295,V=b+(D<<9&4294967295|D>>>23),D=j+(b^k&(V^b))+L[3]+4107603335&4294967295,j=V+(D<<14&4294967295|D>>>18),D=k+(V^b&(j^V))+L[8]+1163531501&4294967295,k=j+(D<<20&4294967295|D>>>12),D=b+(j^V&(k^j))+L[13]+2850285829&4294967295,b=k+(D<<5&4294967295|D>>>27),D=V+(k^j&(b^k))+L[2]+4243563512&4294967295,V=b+(D<<9&4294967295|D>>>23),D=j+(b^k&(V^b))+L[7]+1735328473&4294967295,j=V+(D<<14&4294967295|D>>>18),D=k+(V^b&(j^V))+L[12]+2368359562&4294967295,k=j+(D<<20&4294967295|D>>>12),D=b+(k^j^V)+L[5]+4294588738&4294967295,b=k+(D<<4&4294967295|D>>>28),D=V+(b^k^j)+L[8]+2272392833&4294967295,V=b+(D<<11&4294967295|D>>>21),D=j+(V^b^k)+L[11]+1839030562&4294967295,j=V+(D<<16&4294967295|D>>>16),D=k+(j^V^b)+L[14]+4259657740&4294967295,k=j+(D<<23&4294967295|D>>>9),D=b+(k^j^V)+L[1]+2763975236&4294967295,b=k+(D<<4&4294967295|D>>>28),D=V+(b^k^j)+L[4]+1272893353&4294967295,V=b+(D<<11&4294967295|D>>>21),D=j+(V^b^k)+L[7]+4139469664&4294967295,j=V+(D<<16&4294967295|D>>>16),D=k+(j^V^b)+L[10]+3200236656&4294967295,k=j+(D<<23&4294967295|D>>>9),D=b+(k^j^V)+L[13]+681279174&4294967295,b=k+(D<<4&4294967295|D>>>28),D=V+(b^k^j)+L[0]+3936430074&4294967295,V=b+(D<<11&4294967295|D>>>21),D=j+(V^b^k)+L[3]+3572445317&4294967295,j=V+(D<<16&4294967295|D>>>16),D=k+(j^V^b)+L[6]+76029189&4294967295,k=j+(D<<23&4294967295|D>>>9),D=b+(k^j^V)+L[9]+3654602809&4294967295,b=k+(D<<4&4294967295|D>>>28),D=V+(b^k^j)+L[12]+3873151461&4294967295,V=b+(D<<11&4294967295|D>>>21),D=j+(V^b^k)+L[15]+530742520&4294967295,j=V+(D<<16&4294967295|D>>>16),D=k+(j^V^b)+L[2]+3299628645&4294967295,k=j+(D<<23&4294967295|D>>>9),D=b+(j^(k|~V))+L[0]+4096336452&4294967295,b=k+(D<<6&4294967295|D>>>26),D=V+(k^(b|~j))+L[7]+1126891415&4294967295,V=b+(D<<10&4294967295|D>>>22),D=j+(b^(V|~k))+L[14]+2878612391&4294967295,j=V+(D<<15&4294967295|D>>>17),D=k+(V^(j|~b))+L[5]+4237533241&4294967295,k=j+(D<<21&4294967295|D>>>11),D=b+(j^(k|~V))+L[12]+1700485571&4294967295,b=k+(D<<6&4294967295|D>>>26),D=V+(k^(b|~j))+L[3]+2399980690&4294967295,V=b+(D<<10&4294967295|D>>>22),D=j+(b^(V|~k))+L[10]+4293915773&4294967295,j=V+(D<<15&4294967295|D>>>17),D=k+(V^(j|~b))+L[1]+2240044497&4294967295,k=j+(D<<21&4294967295|D>>>11),D=b+(j^(k|~V))+L[8]+1873313359&4294967295,b=k+(D<<6&4294967295|D>>>26),D=V+(k^(b|~j))+L[15]+4264355552&4294967295,V=b+(D<<10&4294967295|D>>>22),D=j+(b^(V|~k))+L[6]+2734768916&4294967295,j=V+(D<<15&4294967295|D>>>17),D=k+(V^(j|~b))+L[13]+1309151649&4294967295,k=j+(D<<21&4294967295|D>>>11),D=b+(j^(k|~V))+L[4]+4149444226&4294967295,b=k+(D<<6&4294967295|D>>>26),D=V+(k^(b|~j))+L[11]+3174756917&4294967295,V=b+(D<<10&4294967295|D>>>22),D=j+(b^(V|~k))+L[2]+718787259&4294967295,j=V+(D<<15&4294967295|D>>>17),D=k+(V^(j|~b))+L[9]+3951481745&4294967295,N.g[0]=N.g[0]+b&4294967295,N.g[1]=N.g[1]+(j+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+j&4294967295,N.g[3]=N.g[3]+V&4294967295}r.prototype.u=function(N,b){b===void 0&&(b=N.length);for(var k=b-this.blockSize,L=this.B,j=this.h,V=0;V<b;){if(j==0)for(;V<=k;)s(this,N,V),V+=this.blockSize;if(typeof N=="string"){for(;V<b;)if(L[j++]=N.charCodeAt(V++),j==this.blockSize){s(this,L),j=0;break}}else for(;V<b;)if(L[j++]=N[V++],j==this.blockSize){s(this,L),j=0;break}}this.h=j,this.o+=b},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var b=1;b<N.length-8;++b)N[b]=0;var k=8*this.o;for(b=N.length-8;b<N.length;++b)N[b]=k&255,k/=256;for(this.u(N),N=Array(16),b=k=0;4>b;++b)for(var L=0;32>L;L+=8)N[k++]=this.g[b]>>>L&255;return N};function o(N,b){var k=c;return Object.prototype.hasOwnProperty.call(k,N)?k[N]:k[N]=b(N)}function l(N,b){this.h=b;for(var k=[],L=!0,j=N.length-1;0<=j;j--){var V=N[j]|0;L&&V==b||(k[j]=V,L=!1)}this.g=k}var c={};function h(N){return-128<=N&&128>N?o(N,function(b){return new l([b|0],0>b?-1:0)}):new l([N|0],0>N?-1:0)}function f(N){if(isNaN(N)||!isFinite(N))return v;if(0>N)return S(f(-N));for(var b=[],k=1,L=0;N>=k;L++)b[L]=N/k|0,k*=4294967296;return new l(b,0)}function m(N,b){if(N.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(N.charAt(0)=="-")return S(m(N.substring(1),b));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=f(Math.pow(b,8)),L=v,j=0;j<N.length;j+=8){var V=Math.min(8,N.length-j),D=parseInt(N.substring(j,j+V),b);8>V?(V=f(Math.pow(b,V)),L=L.j(V).add(f(D))):(L=L.j(k),L=L.add(f(D)))}return L}var v=h(0),E=h(1),x=h(16777216);n=l.prototype,n.m=function(){if(A(this))return-S(this).m();for(var N=0,b=1,k=0;k<this.g.length;k++){var L=this.i(k);N+=(0<=L?L:4294967296+L)*b,b*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(R(this))return"0";if(A(this))return"-"+S(this).toString(N);for(var b=f(Math.pow(N,6)),k=this,L="";;){var j=W(k,b).g;k=M(k,j.j(b));var V=((0<k.g.length?k.g[0]:k.h)>>>0).toString(N);if(k=j,R(k))return V+L;for(;6>V.length;)V="0"+V;L=V+L}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function R(N){if(N.h!=0)return!1;for(var b=0;b<N.g.length;b++)if(N.g[b]!=0)return!1;return!0}function A(N){return N.h==-1}n.l=function(N){return N=M(this,N),A(N)?-1:R(N)?0:1};function S(N){for(var b=N.g.length,k=[],L=0;L<b;L++)k[L]=~N.g[L];return new l(k,~N.h).add(E)}n.abs=function(){return A(this)?S(this):this},n.add=function(N){for(var b=Math.max(this.g.length,N.g.length),k=[],L=0,j=0;j<=b;j++){var V=L+(this.i(j)&65535)+(N.i(j)&65535),D=(V>>>16)+(this.i(j)>>>16)+(N.i(j)>>>16);L=D>>>16,V&=65535,D&=65535,k[j]=D<<16|V}return new l(k,k[k.length-1]&-2147483648?-1:0)};function M(N,b){return N.add(S(b))}n.j=function(N){if(R(this)||R(N))return v;if(A(this))return A(N)?S(this).j(S(N)):S(S(this).j(N));if(A(N))return S(this.j(S(N)));if(0>this.l(x)&&0>N.l(x))return f(this.m()*N.m());for(var b=this.g.length+N.g.length,k=[],L=0;L<2*b;L++)k[L]=0;for(L=0;L<this.g.length;L++)for(var j=0;j<N.g.length;j++){var V=this.i(L)>>>16,D=this.i(L)&65535,le=N.i(j)>>>16,Ce=N.i(j)&65535;k[2*L+2*j]+=D*Ce,U(k,2*L+2*j),k[2*L+2*j+1]+=V*Ce,U(k,2*L+2*j+1),k[2*L+2*j+1]+=D*le,U(k,2*L+2*j+1),k[2*L+2*j+2]+=V*le,U(k,2*L+2*j+2)}for(L=0;L<b;L++)k[L]=k[2*L+1]<<16|k[2*L];for(L=b;L<2*b;L++)k[L]=0;return new l(k,0)};function U(N,b){for(;(N[b]&65535)!=N[b];)N[b+1]+=N[b]>>>16,N[b]&=65535,b++}function B(N,b){this.g=N,this.h=b}function W(N,b){if(R(b))throw Error("division by zero");if(R(N))return new B(v,v);if(A(N))return b=W(S(N),b),new B(S(b.g),S(b.h));if(A(b))return b=W(N,S(b)),new B(S(b.g),b.h);if(30<N.g.length){if(A(N)||A(b))throw Error("slowDivide_ only works with positive integers.");for(var k=E,L=b;0>=L.l(N);)k=Y(k),L=Y(L);var j=X(k,1),V=X(L,1);for(L=X(L,2),k=X(k,2);!R(L);){var D=V.add(L);0>=D.l(N)&&(j=j.add(k),V=D),L=X(L,1),k=X(k,1)}return b=M(N,j.j(b)),new B(j,b)}for(j=v;0<=N.l(b);){for(k=Math.max(1,Math.floor(N.m()/b.m())),L=Math.ceil(Math.log(k)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),V=f(k),D=V.j(b);A(D)||0<D.l(N);)k-=L,V=f(k),D=V.j(b);R(V)&&(V=E),j=j.add(V),N=M(N,D)}return new B(j,N)}n.A=function(N){return W(this,N).h},n.and=function(N){for(var b=Math.max(this.g.length,N.g.length),k=[],L=0;L<b;L++)k[L]=this.i(L)&N.i(L);return new l(k,this.h&N.h)},n.or=function(N){for(var b=Math.max(this.g.length,N.g.length),k=[],L=0;L<b;L++)k[L]=this.i(L)|N.i(L);return new l(k,this.h|N.h)},n.xor=function(N){for(var b=Math.max(this.g.length,N.g.length),k=[],L=0;L<b;L++)k[L]=this.i(L)^N.i(L);return new l(k,this.h^N.h)};function Y(N){for(var b=N.g.length+1,k=[],L=0;L<b;L++)k[L]=N.i(L)<<1|N.i(L-1)>>>31;return new l(k,N.h)}function X(N,b){var k=b>>5;b%=32;for(var L=N.g.length-k,j=[],V=0;V<L;V++)j[V]=0<b?N.i(V+k)>>>b|N.i(V+k+1)<<32-b:N.i(V+k);return new l(j,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,SC=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=m,Hi=l}).apply(typeof qE<"u"?qE:typeof self<"u"?self:typeof window<"u"?window:{});var wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RC,Xu,AC,Fh,Qg,PC,bC,kC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,_,T){return d==Array.prototype||d==Object.prototype||(d[_]=T.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof wh=="object"&&wh];for(var _=0;_<d.length;++_){var T=d[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function s(d,_){if(_)e:{var T=r;d=d.split(".");for(var P=0;P<d.length-1;P++){var q=d[P];if(!(q in T))break e;T=T[q]}d=d[d.length-1],P=T[d],_=_(P),_!=P&&_!=null&&e(T,d,{configurable:!0,writable:!0,value:_})}}function o(d,_){d instanceof String&&(d+="");var T=0,P=!1,q={next:function(){if(!P&&T<d.length){var Q=T++;return{value:_(Q,d[Q]),done:!1}}return P=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}s("Array.prototype.values",function(d){return d||function(){return o(this,function(_,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(d){var _=typeof d;return _=_!="object"?_:d?Array.isArray(d)?"array":_:"null",_=="array"||_=="object"&&typeof d.length=="number"}function f(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function m(d,_,T){return d.call.apply(d.bind,arguments)}function v(d,_,T){if(!d)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,P),d.apply(_,q)}}return function(){return d.apply(_,arguments)}}function E(d,_,T){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:v,E.apply(null,arguments)}function x(d,_){var T=Array.prototype.slice.call(arguments,1);return function(){var P=T.slice();return P.push.apply(P,arguments),d.apply(this,P)}}function R(d,_){function T(){}T.prototype=_.prototype,d.aa=_.prototype,d.prototype=new T,d.prototype.constructor=d,d.Qb=function(P,q,Q){for(var ae=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)ae[Xe-2]=arguments[Xe];return _.prototype[q].apply(P,ae)}}function A(d){const _=d.length;if(0<_){const T=Array(_);for(let P=0;P<_;P++)T[P]=d[P];return T}return[]}function S(d,_){for(let T=1;T<arguments.length;T++){const P=arguments[T];if(h(P)){const q=d.length||0,Q=P.length||0;d.length=q+Q;for(let ae=0;ae<Q;ae++)d[q+ae]=P[ae]}else d.push(P)}}class M{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function U(d){return/^[\s\xa0]*$/.test(d)}function B(){var d=c.navigator;return d&&(d=d.userAgent)?d:""}function W(d){return W[" "](d),d}W[" "]=function(){};var Y=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function X(d,_,T){for(const P in d)_.call(T,d[P],P,d)}function N(d,_){for(const T in d)_.call(void 0,d[T],T,d)}function b(d){const _={};for(const T in d)_[T]=d[T];return _}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(d,_){let T,P;for(let q=1;q<arguments.length;q++){P=arguments[q];for(T in P)d[T]=P[T];for(let Q=0;Q<k.length;Q++)T=k[Q],Object.prototype.hasOwnProperty.call(P,T)&&(d[T]=P[T])}}function j(d){var _=1;d=d.split(":");const T=[];for(;0<_&&d.length;)T.push(d.shift()),_--;return d.length&&T.push(d.join(":")),T}function V(d){c.setTimeout(()=>{throw d},0)}function D(){var d=ue;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class le{constructor(){this.h=this.g=null}add(_,T){const P=Ce.get();P.set(_,T),this.h?this.h.next=P:this.g=P,this.h=P}}var Ce=new M(()=>new Re,d=>d.reset());class Re{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,se=!1,ue=new le,ie=()=>{const d=c.Promise.resolve(void 0);Te=()=>{d.then(z)}};var z=()=>{for(var d;d=D();){try{d.h.call(d.g)}catch(T){V(T)}var _=Ce;_.j(d),100>_.h&&(_.h++,d.next=_.g,_.g=d)}se=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var Ie=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const T=()=>{};c.addEventListener("test",T,_),c.removeEventListener("test",T,_)}catch{}return d}();function Ae(d,_){if(pe.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var T=this.type=d.type,P=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget){if(Y){e:{try{W(_.nodeName);var q=!0;break e}catch{}q=!1}q||(_=null)}}else T=="mouseover"?_=d.fromElement:T=="mouseout"&&(_=d.toElement);this.relatedTarget=_,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:De[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ae.aa.h.call(this)}}R(Ae,pe);var De={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),Oe=0;function Ke(d,_,T,P,q){this.listener=d,this.proxy=null,this.src=_,this.type=T,this.capture=!!P,this.ha=q,this.key=++Oe,this.da=this.fa=!1}function Rt(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Un(d){this.src=d,this.g={},this.h=0}Un.prototype.add=function(d,_,T,P,q){var Q=d.toString();d=this.g[Q],d||(d=this.g[Q]=[],this.h++);var ae=wr(d,_,P,q);return-1<ae?(_=d[ae],T||(_.fa=!1)):(_=new Ke(_,this.src,Q,!!P,q),_.fa=T,d.push(_)),_};function si(d,_){var T=_.type;if(T in d.g){var P=d.g[T],q=Array.prototype.indexOf.call(P,_,void 0),Q;(Q=0<=q)&&Array.prototype.splice.call(P,q,1),Q&&(Rt(_),d.g[T].length==0&&(delete d.g[T],d.h--))}}function wr(d,_,T,P){for(var q=0;q<d.length;++q){var Q=d[q];if(!Q.da&&Q.listener==_&&Q.capture==!!T&&Q.ha==P)return q}return-1}var vs="closure_lm_"+(1e6*Math.random()|0),ii={};function oi(d,_,T,P,q){if(Array.isArray(_)){for(var Q=0;Q<_.length;Q++)oi(d,_[Q],T,P,q);return null}return T=ci(T),d&&d[je]?d.K(_,T,f(P)?!!P.capture:!1,q):ai(d,_,T,!1,P,q)}function ai(d,_,T,P,q,Q){if(!_)throw Error("Invalid event type");var ae=f(q)?!!q.capture:!!q,Xe=_s(d);if(Xe||(d[vs]=Xe=new Un(d)),T=Xe.add(_,T,P,ae,Q),T.proxy)return T;if(P=fa(),T.proxy=P,P.src=d,P.listener=T,d.addEventListener)Ie||(q=ae),q===void 0&&(q=!1),d.addEventListener(_.toString(),P,q);else if(d.attachEvent)d.attachEvent(xn(_.toString()),P);else if(d.addListener&&d.removeListener)d.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return T}function fa(){function d(T){return _.call(d.src,d.listener,T)}const _=ui;return d}function li(d,_,T,P,q){if(Array.isArray(_))for(var Q=0;Q<_.length;Q++)li(d,_[Q],T,P,q);else P=f(P)?!!P.capture:!!P,T=ci(T),d&&d[je]?(d=d.i,_=String(_).toString(),_ in d.g&&(Q=d.g[_],T=wr(Q,T,P,q),-1<T&&(Rt(Q[T]),Array.prototype.splice.call(Q,T,1),Q.length==0&&(delete d.g[_],d.h--)))):d&&(d=_s(d))&&(_=d.g[_.toString()],d=-1,_&&(d=wr(_,T,P,q)),(T=-1<d?_[d]:null)&&Qt(T))}function Qt(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[je])si(_.i,d);else{var T=d.type,P=d.proxy;_.removeEventListener?_.removeEventListener(T,P,d.capture):_.detachEvent?_.detachEvent(xn(T),P):_.addListener&&_.removeListener&&_.removeListener(P),(T=_s(_))?(si(T,d),T.h==0&&(T.src=null,_[vs]=null)):Rt(d)}}}function xn(d){return d in ii?ii[d]:ii[d]="on"+d}function ui(d,_){if(d.da)d=!0;else{_=new Ae(_,this);var T=d.listener,P=d.ha||d.src;d.fa&&Qt(d),d=T.call(P,_)}return d}function _s(d){return d=d[vs],d instanceof Un?d:null}var qr="__closure_events_fn_"+(1e9*Math.random()>>>0);function ci(d){return typeof d=="function"?d:(d[qr]||(d[qr]=function(_){return d.handleEvent(_)}),d[qr])}function yt(){J.call(this),this.i=new Un(this),this.M=this,this.F=null}R(yt,J),yt.prototype[je]=!0,yt.prototype.removeEventListener=function(d,_,T,P){li(this,d,_,T,P)};function vt(d,_){var T,P=d.F;if(P)for(T=[];P;P=P.F)T.push(P);if(d=d.M,P=_.type||_,typeof _=="string")_=new pe(_,d);else if(_ instanceof pe)_.target=_.target||d;else{var q=_;_=new pe(P,d),L(_,q)}if(q=!0,T)for(var Q=T.length-1;0<=Q;Q--){var ae=_.g=T[Q];q=er(ae,P,!0,_)&&q}if(ae=_.g=d,q=er(ae,P,!0,_)&&q,q=er(ae,P,!1,_)&&q,T)for(Q=0;Q<T.length;Q++)ae=_.g=T[Q],q=er(ae,P,!1,_)&&q}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var d=this.i,_;for(_ in d.g){for(var T=d.g[_],P=0;P<T.length;P++)Rt(T[P]);delete d.g[_],d.h--}}this.F=null},yt.prototype.K=function(d,_,T,P){return this.i.add(String(d),_,!1,T,P)},yt.prototype.L=function(d,_,T,P){return this.i.add(String(d),_,!0,T,P)};function er(d,_,T,P){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();for(var q=!0,Q=0;Q<_.length;++Q){var ae=_[Q];if(ae&&!ae.da&&ae.capture==T){var Xe=ae.listener,Ot=ae.ha||ae.src;ae.fa&&si(d.i,ae),q=Xe.call(Ot,P)!==!1&&q}}return q&&!P.defaultPrevented}function Kl(d,_,T){if(typeof d=="function")T&&(d=E(d,T));else if(d&&typeof d.handleEvent=="function")d=E(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:c.setTimeout(d,_||0)}function di(d){d.g=Kl(()=>{d.g=null,d.i&&(d.i=!1,di(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class vo extends J{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:di(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _o(d){J.call(this),this.h=d,this.g={}}R(_o,J);var Ql=[];function Yl(d){X(d.g,function(_,T){this.g.hasOwnProperty(T)&&Qt(_)},d),d.g={}}_o.prototype.N=function(){_o.aa.N.call(this),Yl(this)},_o.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xl=c.JSON.stringify,Jl=c.JSON.parse,Zl=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function wo(){}wo.prototype.h=null;function pa(d){return d.h||(d.h=d.i())}function ma(){}var tr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hr(){pe.call(this,"d")}R(Hr,pe);function ga(){pe.call(this,"c")}R(ga,pe);var Gr={},eu=null;function Eo(){return eu=eu||new yt}Gr.La="serverreachability";function tu(d){pe.call(this,Gr.La,d)}R(tu,pe);function ws(d){const _=Eo();vt(_,new tu(_))}Gr.STAT_EVENT="statevent";function nu(d,_){pe.call(this,Gr.STAT_EVENT,d),this.stat=_}R(nu,pe);function It(d){const _=Eo();vt(_,new nu(_,d))}Gr.Ma="timingevent";function ya(d,_){pe.call(this,Gr.Ma,d),this.size=_}R(ya,pe);function Er(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},_)}function To(){this.g=!0}To.prototype.xa=function(){this.g=!1};function Io(d,_,T,P,q,Q){d.info(function(){if(d.g)if(Q)for(var ae="",Xe=Q.split("&"),Ot=0;Ot<Xe.length;Ot++){var $e=Xe[Ot].split("=");if(1<$e.length){var Bt=$e[0];$e=$e[1];var At=Bt.split("_");ae=2<=At.length&&At[1]=="type"?ae+(Bt+"="+$e+"&"):ae+(Bt+"=redacted&")}}else ae=null;else ae=Q;return"XMLHTTP REQ ("+P+") [attempt "+q+"]: "+_+`
`+T+`
`+ae})}function va(d,_,T,P,q,Q,ae){d.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+q+"]: "+_+`
`+T+`
`+Q+" "+ae})}function Tr(d,_,T,P){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+xp(d,T)+(P?" "+P:"")})}function ru(d,_){d.info(function(){return"TIMEOUT: "+_})}To.prototype.info=function(){};function xp(d,_){if(!d.g)return _;if(!_)return null;try{var T=JSON.parse(_);if(T){for(d=0;d<T.length;d++)if(Array.isArray(T[d])){var P=T[d];if(!(2>P.length)){var q=P[1];if(Array.isArray(q)&&!(1>q.length)){var Q=q[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ae=1;ae<q.length;ae++)q[ae]=""}}}}return Xl(T)}catch{return _}}var _a={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ir;function xo(){}R(xo,wo),xo.prototype.g=function(){return new XMLHttpRequest},xo.prototype.i=function(){return{}},Ir=new xo;function xr(d,_,T,P){this.j=d,this.i=_,this.l=T,this.R=P||1,this.U=new _o(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sd}function sd(){this.i=null,this.g="",this.h=!1}var su={},wa={};function Ea(d,_,T){d.L=1,d.v=gi($n(_)),d.m=T,d.P=!0,iu(d,null)}function iu(d,_){d.F=Date.now(),tt(d),d.A=$n(d.v);var T=d.A,P=d.R;Array.isArray(P)||(P=[String(P)]),vi(T.i,"t",P),d.C=0,T=d.j.J,d.h=new sd,d.g=Td(d.j,T?_:null,!d.m),0<d.O&&(d.M=new vo(E(d.Y,d,d.g),d.O)),_=d.U,T=d.g,P=d.ca;var q="readystatechange";Array.isArray(q)||(q&&(Ql[0]=q.toString()),q=Ql);for(var Q=0;Q<q.length;Q++){var ae=oi(T,q[Q],P||_.handleEvent,!1,_.h||_);if(!ae)break;_.g[ae.key]=ae}_=d.H?b(d.H):{},d.m?(d.u||(d.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,_)):(d.u="GET",d.g.ea(d.A,d.u,null,_)),ws(),Io(d.i,d.u,d.A,d.l,d.R,d.m)}xr.prototype.ca=function(d){d=d.target;const _=this.M;_&&Sn(d)==3?_.j():this.Y(d)},xr.prototype.Y=function(d){try{if(d==this.g)e:{const At=Sn(this.g);var _=this.g.Ba();const sr=this.g.Z();if(!(3>At)&&(At!=3||this.g&&(this.h.h||this.g.oa()||du(this.g)))){this.J||At!=4||_==7||(_==8||0>=sr?ws(3):ws(2)),Co(this);var T=this.g.Z();this.X=T;t:if(id(this)){var P=du(this.g);d="";var q=P.length,Q=Sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){nr(this),hi(this);var ae="";break t}this.h.i=new c.TextDecoder}for(_=0;_<q;_++)this.h.h=!0,d+=this.h.i.decode(P[_],{stream:!(Q&&_==q-1)});P.length=0,this.h.g+=d,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=T==200,va(this.i,this.u,this.A,this.l,this.R,At,T),this.o){if(this.T&&!this.K){t:{if(this.g){var Xe,Ot=this.g;if((Xe=Ot.g?Ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(Xe)){var $e=Xe;break t}}$e=null}if(T=$e)Tr(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ou(this,T);else{this.o=!1,this.s=3,It(12),nr(this),hi(this);break e}}if(this.P){T=!0;let Wn;for(;!this.J&&this.C<ae.length;)if(Wn=Cp(this,ae),Wn==wa){At==4&&(this.s=4,It(14),T=!1),Tr(this.i,this.l,null,"[Incomplete Response]");break}else if(Wn==su){this.s=4,It(15),Tr(this.i,this.l,ae,"[Invalid Chunk]"),T=!1;break}else Tr(this.i,this.l,Wn,null),ou(this,Wn);if(id(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),At!=4||ae.length!=0||this.h.h||(this.s=1,It(16),T=!1),this.o=this.o&&T,!T)Tr(this.i,this.l,ae,"[Invalid Chunked Response]"),nr(this),hi(this);else if(0<ae.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),fu(Bt),Bt.M=!0,It(11))}}else Tr(this.i,this.l,ae,null),ou(this,ae);At==4&&nr(this),this.o&&!this.J&&(At==4?Na(this.j,this):(this.o=!1,tt(this)))}else Ra(this.g),T==400&&0<ae.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),nr(this),hi(this)}}}catch{}finally{}};function id(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Cp(d,_){var T=d.C,P=_.indexOf(`
`,T);return P==-1?wa:(T=Number(_.substring(T,P)),isNaN(T)?su:(P+=1,P+T>_.length?wa:(_=_.slice(P,P+T),d.C=P+T,_)))}xr.prototype.cancel=function(){this.J=!0,nr(this)};function tt(d){d.S=Date.now()+d.I,od(d,d.I)}function od(d,_){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Er(E(d.ba,d),_)}function Co(d){d.B&&(c.clearTimeout(d.B),d.B=null)}xr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(ru(this.i,this.A),this.L!=2&&(ws(),It(17)),nr(this),this.s=2,hi(this)):od(this,this.S-d)};function hi(d){d.j.G==0||d.J||Na(d.j,d)}function nr(d){Co(d);var _=d.M;_&&typeof _.ma=="function"&&_.ma(),d.M=null,Yl(d.U),d.g&&(_=d.g,d.g=null,_.abort(),_.ma())}function ou(d,_){try{var T=d.j;if(T.G!=0&&(T.g==d||vn(T.h,d))){if(!d.K&&vn(T.h,d)&&T.G==3){try{var P=T.Da.g.parse(_)}catch{P=null}if(Array.isArray(P)&&P.length==3){var q=P;if(q[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<d.F)ka(T),Pr(T);else break e;ba(T),It(18)}}else T.za=q[1],0<T.za-T.T&&37500>q[2]&&T.F&&T.v==0&&!T.C&&(T.C=Er(E(T.Za,T),6e3));if(1>=ld(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Cs(T,11)}else if((d.K||T.g==d)&&ka(T),!U(_))for(q=T.Da.g.parse(_),_=0;_<q.length;_++){let $e=q[_];if(T.T=$e[0],$e=$e[1],T.G==2)if($e[0]=="c"){T.K=$e[1],T.ia=$e[2];const Bt=$e[3];Bt!=null&&(T.la=Bt,T.j.info("VER="+T.la));const At=$e[4];At!=null&&(T.Aa=At,T.j.info("SVER="+T.Aa));const sr=$e[5];sr!=null&&typeof sr=="number"&&0<sr&&(P=1.5*sr,T.L=P,T.j.info("backChannelRequestTimeoutMs_="+P)),P=T;const Wn=d.g;if(Wn){const No=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(No){var Q=P.h;Q.g||No.indexOf("spdy")==-1&&No.indexOf("quic")==-1&&No.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(au(Q,Q.h),Q.h=null))}if(P.D){const Oa=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Oa&&(P.ya=Oa,et(P.I,P.D,Oa))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-d.F,T.j.info("Handshake RTT: "+T.R+"ms")),P=T;var ae=d;if(P.qa=Ed(P,P.J?P.ia:null,P.W),ae.K){ud(P.h,ae);var Xe=ae,Ot=P.L;Ot&&(Xe.I=Ot),Xe.B&&(Co(Xe),tt(Xe)),P.g=ae}else ko(P);0<T.i.length&&Xr(T)}else $e[0]!="stop"&&$e[0]!="close"||Cs(T,7);else T.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?Cs(T,7):Xt(T):$e[0]!="noop"&&T.l&&T.l.ta($e),T.v=0)}}ws(4)}catch{}}var ad=class{constructor(d,_){this.g=d,this.map=_}};function So(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bn(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ld(d){return d.h?1:d.g?d.g.size:0}function vn(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function au(d,_){d.g?d.g.add(_):d.h=_}function ud(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}So.prototype.cancel=function(){if(this.i=cd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function cd(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const T of d.g.values())_=_.concat(T.D);return _}return A(d.i)}function Ta(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(h(d)){for(var _=[],T=d.length,P=0;P<T;P++)_.push(d[P]);return _}_=[],T=0;for(P in d)_[T++]=d[P];return _}function Ia(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(h(d)||typeof d=="string"){var _=[];d=d.length;for(var T=0;T<d;T++)_.push(T);return _}_=[],T=0;for(const P in d)_[T++]=P;return _}}}function fi(d,_){if(d.forEach&&typeof d.forEach=="function")d.forEach(_,void 0);else if(h(d)||typeof d=="string")Array.prototype.forEach.call(d,_,void 0);else for(var T=Ia(d),P=Ta(d),q=P.length,Q=0;Q<q;Q++)_.call(void 0,P[Q],T&&T[Q],d)}var Ro=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sp(d,_){if(d){d=d.split("&");for(var T=0;T<d.length;T++){var P=d[T].indexOf("="),q=null;if(0<=P){var Q=d[T].substring(0,P);q=d[T].substring(P+1)}else Q=d[T];_(Q,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Es(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Es){this.h=d.h,Ao(this,d.j),this.o=d.o,this.g=d.g,pi(this,d.s),this.l=d.l;var _=d.i,T=new Kr;T.i=_.i,_.g&&(T.g=new Map(_.g),T.h=_.h),mi(this,T),this.m=d.m}else d&&(_=String(d).match(Ro))?(this.h=!1,Ao(this,_[1]||"",!0),this.o=Fe(_[2]||""),this.g=Fe(_[3]||"",!0),pi(this,_[4]),this.l=Fe(_[5]||"",!0),mi(this,_[6]||"",!0),this.m=Fe(_[7]||"")):(this.h=!1,this.i=new Kr(null,this.h))}Es.prototype.toString=function(){var d=[],_=this.j;_&&d.push(yi(_,xa,!0),":");var T=this.g;return(T||_=="file")&&(d.push("//"),(_=this.o)&&d.push(yi(_,xa,!0),"@"),d.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&d.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&d.push("/"),d.push(yi(T,T.charAt(0)=="/"?fd:hd,!0))),(T=this.i.toString())&&d.push("?",T),(T=this.m)&&d.push("#",yi(T,lu)),d.join("")};function $n(d){return new Es(d)}function Ao(d,_,T){d.j=T?Fe(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function pi(d,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);d.s=_}else d.s=null}function mi(d,_,T){_ instanceof Kr?(d.i=_,Qr(d.i,d.h)):(T||(_=yi(_,pd)),d.i=new Kr(_,d.h))}function et(d,_,T){d.i.set(_,T)}function gi(d){return et(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Fe(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function yi(d,_,T){return typeof d=="string"?(d=encodeURI(d).replace(_,dd),T&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function dd(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var xa=/[#\/\?@]/g,hd=/[#\?:]/g,fd=/[#\?]/g,pd=/[#\?@]/g,lu=/#/g;function Kr(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function Yt(d){d.g||(d.g=new Map,d.h=0,d.i&&Sp(d.i,function(_,T){d.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}n=Kr.prototype,n.add=function(d,_){Yt(this),this.i=null,d=rr(this,d);var T=this.g.get(d);return T||this.g.set(d,T=[]),T.push(_),this.h+=1,this};function Cr(d,_){Yt(d),_=rr(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function Sr(d,_){return Yt(d),_=rr(d,_),d.g.has(_)}n.forEach=function(d,_){Yt(this),this.g.forEach(function(T,P){T.forEach(function(q){d.call(_,q,P,this)},this)},this)},n.na=function(){Yt(this);const d=Array.from(this.g.values()),_=Array.from(this.g.keys()),T=[];for(let P=0;P<_.length;P++){const q=d[P];for(let Q=0;Q<q.length;Q++)T.push(_[P])}return T},n.V=function(d){Yt(this);let _=[];if(typeof d=="string")Sr(this,d)&&(_=_.concat(this.g.get(rr(this,d))));else{d=Array.from(this.g.values());for(let T=0;T<d.length;T++)_=_.concat(d[T])}return _},n.set=function(d,_){return Yt(this),this.i=null,d=rr(this,d),Sr(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d?(d=this.V(d),0<d.length?String(d[0]):_):_};function vi(d,_,T){Cr(d,_),0<T.length&&(d.i=null,d.g.set(rr(d,_),A(T)),d.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(var T=0;T<_.length;T++){var P=_[T];const Q=encodeURIComponent(String(P)),ae=this.V(P);for(P=0;P<ae.length;P++){var q=Q;ae[P]!==""&&(q+="="+encodeURIComponent(String(ae[P]))),d.push(q)}}return this.i=d.join("&")};function rr(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function Qr(d,_){_&&!d.j&&(Yt(d),d.i=null,d.g.forEach(function(T,P){var q=P.toLowerCase();P!=q&&(Cr(this,P),vi(this,q,T))},d)),d.j=_}function Rp(d,_){const T=new To;if(c.Image){const P=new Image;P.onload=x(Cn,T,"TestLoadImage: loaded",!0,_,P),P.onerror=x(Cn,T,"TestLoadImage: error",!1,_,P),P.onabort=x(Cn,T,"TestLoadImage: abort",!1,_,P),P.ontimeout=x(Cn,T,"TestLoadImage: timeout",!1,_,P),c.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=d}else _(!1)}function md(d,_){const T=new To,P=new AbortController,q=setTimeout(()=>{P.abort(),Cn(T,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:P.signal}).then(Q=>{clearTimeout(q),Q.ok?Cn(T,"TestPingServer: ok",!0,_):Cn(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(q),Cn(T,"TestPingServer: error",!1,_)})}function Cn(d,_,T,P,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),P(T)}catch{}}function Ap(){this.g=new Zl}function gd(d,_,T){const P=T||"";try{fi(d,function(q,Q){let ae=q;f(q)&&(ae=Xl(q)),_.push(P+Q+"="+encodeURIComponent(ae))})}catch(q){throw _.push(P+"type="+encodeURIComponent("_badmap")),q}}function Ts(d){this.l=d.Ub||null,this.j=d.eb||!1}R(Ts,wo),Ts.prototype.g=function(){return new Po(this.l,this.j)},Ts.prototype.i=function(d){return function(){return d}}({});function Po(d,_){yt.call(this),this.D=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Po,yt),n=Po.prototype,n.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=_,this.readyState=1,Ar(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(_.body=d),(this.D||c).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rr(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ar(this)),this.g&&(this.readyState=3,Ar(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yd(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function yd(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?Rr(this):Ar(this),this.readyState==3&&yd(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Rr(this))},n.Qa=function(d){this.g&&(this.response=d,Rr(this))},n.ga=function(){this.g&&Rr(this)};function Rr(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Ar(d)}n.setRequestHeader=function(d,_){this.u.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,d.push(T[0]+": "+T[1]),T=_.next();return d.join(`\r
`)};function Ar(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Po.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Is(d){let _="";return X(d,function(T,P){_+=P,_+=":",_+=T,_+=`\r
`}),_}function _i(d,_,T){e:{for(P in T){var P=!1;break e}P=!0}P||(T=Is(T),typeof d=="string"?T!=null&&encodeURIComponent(String(T)):et(d,_,T))}function dt(d){yt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(dt,yt);var Pp=/^https?$/i,uu=["POST","PUT"];n=dt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,_,T,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ir.g(),this.v=this.o?pa(this.o):pa(Ir),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(Q){bo(this,Q);return}if(d=T||"",T=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var q in P)T.set(q,P[q]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const Q of P.keys())T.set(Q,P.get(Q));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(T.keys()).find(Q=>Q.toLowerCase()=="content-type"),q=c.FormData&&d instanceof c.FormData,!(0<=Array.prototype.indexOf.call(uu,_,void 0))||P||q||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ae]of T)this.g.setRequestHeader(Q,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Sa(this),this.u=!0,this.g.send(d),this.u=!1}catch(Q){bo(this,Q)}};function bo(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.m=5,Ca(d),zn(d)}function Ca(d){d.A||(d.A=!0,vt(d,"complete"),vt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,vt(this,"complete"),vt(this,"abort"),zn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zn(this,!0)),dt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?cu(this):this.bb())},n.bb=function(){cu(this)};function cu(d){if(d.h&&typeof l<"u"&&(!d.v[1]||Sn(d)!=4||d.Z()!=2)){if(d.u&&Sn(d)==4)Kl(d.Ea,0,d);else if(vt(d,"readystatechange"),Sn(d)==4){d.h=!1;try{const ae=d.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var T;if(!(T=_)){var P;if(P=ae===0){var q=String(d.D).match(Ro)[1]||null;!q&&c.self&&c.self.location&&(q=c.self.location.protocol.slice(0,-1)),P=!Pp.test(q?q.toLowerCase():"")}T=P}if(T)vt(d,"complete"),vt(d,"success");else{d.m=6;try{var Q=2<Sn(d)?d.g.statusText:""}catch{Q=""}d.l=Q+" ["+d.Z()+"]",Ca(d)}}finally{zn(d)}}}}function zn(d,_){if(d.g){Sa(d);const T=d.g,P=d.v[0]?()=>{}:null;d.g=null,d.v=null,_||vt(d,"ready");try{T.onreadystatechange=P}catch{}}}function Sa(d){d.I&&(c.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Sn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Sn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),Jl(_)}};function du(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ra(d){const _={};d=(d.g&&2<=Sn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<d.length;P++){if(U(d[P]))continue;var T=j(d[P]);const q=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Q=_[q]||[];_[q]=Q,Q.push(T)}N(_,function(P){return P.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yr(d,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[d]||_}function hu(d){this.Aa=0,this.i=[],this.j=new To,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yr("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yr("baseRetryDelayMs",5e3,d),this.cb=Yr("retryDelaySeedMs",1e4,d),this.Wa=Yr("forwardChannelMaxRetries",2,d),this.wa=Yr("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new So(d&&d.concurrentRequestLimit),this.Da=new Ap,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=hu.prototype,n.la=8,n.G=1,n.connect=function(d,_,T,P){It(0),this.W=d,this.H=_||{},T&&P!==void 0&&(this.H.OSID=T,this.H.OAID=P),this.F=this.X,this.I=Ed(this,null,this.W),Xr(this)};function Xt(d){if(Aa(d),d.G==3){var _=d.U++,T=$n(d.I);if(et(T,"SID",d.K),et(T,"RID",_),et(T,"TYPE","terminate"),xs(d,T),_=new xr(d,d.j,_),_.L=2,_.v=gi($n(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(_.v.toString(),"")}catch{}!T&&c.Image&&(new Image().src=_.v,T=!0),T||(_.g=Td(_.j,null),_.g.ea(_.v)),_.F=Date.now(),tt(_)}wd(d)}function Pr(d){d.g&&(fu(d),d.g.cancel(),d.g=null)}function Aa(d){Pr(d),d.u&&(c.clearTimeout(d.u),d.u=null),ka(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&c.clearTimeout(d.s),d.s=null)}function Xr(d){if(!Bn(d.h)&&!d.s){d.s=!0;var _=d.Ga;Te||ie(),se||(Te(),se=!0),ue.add(_,d),d.B=0}}function bp(d,_){return ld(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=_.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Er(E(d.Ga,d,_),_d(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const q=new xr(this,this.j,d);let Q=this.o;if(this.S&&(Q?(Q=b(Q),L(Q,this.S)):Q=this.S),this.m!==null||this.O||(q.H=Q,Q=null),this.P)e:{for(var _=0,T=0;T<this.i.length;T++){t:{var P=this.i[T];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(_+=P,4096<_){_=T;break e}if(_===4096||T===this.i.length-1){_=T+1;break e}}_=1e3}else _=1e3;_=wi(this,q,_),T=$n(this.I),et(T,"RID",d),et(T,"CVER",22),this.D&&et(T,"X-HTTP-Session-Id",this.D),xs(this,T),Q&&(this.O?_="headers="+encodeURIComponent(String(Is(Q)))+"&"+_:this.m&&_i(T,this.m,Q)),au(this.h,q),this.Ua&&et(T,"TYPE","init"),this.P?(et(T,"$req",_),et(T,"SID","null"),q.T=!0,Ea(q,T,null)):Ea(q,T,_),this.G=2}}else this.G==3&&(d?Pa(this,d):this.i.length==0||Bn(this.h)||Pa(this))};function Pa(d,_){var T;_?T=_.l:T=d.U++;const P=$n(d.I);et(P,"SID",d.K),et(P,"RID",T),et(P,"AID",d.T),xs(d,P),d.m&&d.o&&_i(P,d.m,d.o),T=new xr(d,d.j,T,d.B+1),d.m===null&&(T.H=d.o),_&&(d.i=_.D.concat(d.i)),_=wi(d,T,1e3),T.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),au(d.h,T),Ea(T,P,_)}function xs(d,_){d.H&&X(d.H,function(T,P){et(_,P,T)}),d.l&&fi({},function(T,P){et(_,P,T)})}function wi(d,_,T){T=Math.min(d.i.length,T);var P=d.l?E(d.l.Na,d.l,d):null;e:{var q=d.i;let Q=-1;for(;;){const ae=["count="+T];Q==-1?0<T?(Q=q[0].g,ae.push("ofs="+Q)):Q=0:ae.push("ofs="+Q);let Xe=!0;for(let Ot=0;Ot<T;Ot++){let $e=q[Ot].g;const Bt=q[Ot].map;if($e-=Q,0>$e)Q=Math.max(0,q[Ot].g-100),Xe=!1;else try{gd(Bt,ae,"req"+$e+"_")}catch{P&&P(Bt)}}if(Xe){P=ae.join("&");break e}}}return d=d.i.splice(0,T),_.D=d,P}function ko(d){if(!d.g&&!d.u){d.Y=1;var _=d.Fa;Te||ie(),se||(Te(),se=!0),ue.add(_,d),d.v=0}}function ba(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Er(E(d.Fa,d),_d(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,vd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Er(E(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),Pr(this),vd(this))};function fu(d){d.A!=null&&(c.clearTimeout(d.A),d.A=null)}function vd(d){d.g=new xr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var _=$n(d.qa);et(_,"RID","rpc"),et(_,"SID",d.K),et(_,"AID",d.T),et(_,"CI",d.F?"0":"1"),!d.F&&d.ja&&et(_,"TO",d.ja),et(_,"TYPE","xmlhttp"),xs(d,_),d.m&&d.o&&_i(_,d.m,d.o),d.L&&(d.g.I=d.L);var T=d.g;d=d.ia,T.L=1,T.v=gi($n(_)),T.m=null,T.P=!0,iu(T,d)}n.Za=function(){this.C!=null&&(this.C=null,Pr(this),ba(this),It(19))};function ka(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function Na(d,_){var T=null;if(d.g==_){ka(d),fu(d),d.g=null;var P=2}else if(vn(d.h,_))T=_.D,ud(d.h,_),P=1;else return;if(d.G!=0){if(_.o)if(P==1){T=_.m?_.m.length:0,_=Date.now()-_.F;var q=d.B;P=Eo(),vt(P,new ya(P,T)),Xr(d)}else ko(d);else if(q=_.s,q==3||q==0&&0<_.X||!(P==1&&bp(d,_)||P==2&&ba(d)))switch(T&&0<T.length&&(_=d.h,_.i=_.i.concat(T)),q){case 1:Cs(d,5);break;case 4:Cs(d,10);break;case 3:Cs(d,6);break;default:Cs(d,2)}}}function _d(d,_){let T=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(T*=2),T*_}function Cs(d,_){if(d.j.info("Error code "+_),_==2){var T=E(d.fb,d),P=d.Xa;const q=!P;P=new Es(P||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ao(P,"https"),gi(P),q?Rp(P.toString(),T):md(P.toString(),T)}else It(2);d.G=0,d.l&&d.l.sa(_),wd(d),Aa(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function wd(d){if(d.G=0,d.ka=[],d.l){const _=cd(d.h);(_.length!=0||d.i.length!=0)&&(S(d.ka,_),S(d.ka,d.i),d.h.i.length=0,A(d.i),d.i.length=0),d.l.ra()}}function Ed(d,_,T){var P=T instanceof Es?$n(T):new Es(T);if(P.g!="")_&&(P.g=_+"."+P.g),pi(P,P.s);else{var q=c.location;P=q.protocol,_=_?_+"."+q.hostname:q.hostname,q=+q.port;var Q=new Es(null);P&&Ao(Q,P),_&&(Q.g=_),q&&pi(Q,q),T&&(Q.l=T),P=Q}return T=d.D,_=d.ya,T&&_&&et(P,T,_),et(P,"VER",d.la),xs(d,P),P}function Td(d,_,T){if(_&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Ca&&!d.pa?new dt(new Ts({eb:T})):new dt(d.pa),_.Ha(d.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function pu(){}n=pu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Da(){}Da.prototype.g=function(d,_){return new _n(d,_)};function _n(d,_){yt.call(this),this.g=new hu(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(d?d["X-WebChannel-Client-Profile"]=_.va:d={"X-WebChannel-Client-Profile":_.va}),this.g.S=d,(d=_&&_.Sb)&&!U(d)&&(this.g.m=d),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!U(_)&&(this.g.D=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new Jr(this)}R(_n,yt),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){Xt(this.g)},_n.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var T={};T.__data__=d,d=T}else this.u&&(T={},T.__data__=Xl(d),d=T);_.i.push(new ad(_.Ya++,d)),_.G==3&&Xr(_)},_n.prototype.N=function(){this.g.l=null,delete this.j,Xt(this.g),delete this.g,_n.aa.N.call(this)};function Id(d){Hr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const T in _){d=T;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}R(Id,Hr);function xd(){ga.call(this),this.status=1}R(xd,ga);function Jr(d){this.g=d}R(Jr,pu),Jr.prototype.ua=function(){vt(this.g,"a")},Jr.prototype.ta=function(d){vt(this.g,new Id(d))},Jr.prototype.sa=function(d){vt(this.g,new xd)},Jr.prototype.ra=function(){vt(this.g,"b")},Da.prototype.createWebChannel=Da.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,kC=function(){return new Da},bC=function(){return Eo()},PC=Gr,Qg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_a.NO_ERROR=0,_a.TIMEOUT=8,_a.HTTP_ERROR=6,Fh=_a,rd.COMPLETE="complete",AC=rd,ma.EventType=tr,tr.OPEN="a",tr.CLOSE="b",tr.ERROR="c",tr.MESSAGE="d",yt.prototype.listen=yt.prototype.K,Xu=ma,dt.prototype.listenOnce=dt.prototype.L,dt.prototype.getLastError=dt.prototype.Ka,dt.prototype.getLastErrorCode=dt.prototype.Ba,dt.prototype.getStatus=dt.prototype.Z,dt.prototype.getResponseJson=dt.prototype.Oa,dt.prototype.getResponseText=dt.prototype.oa,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Ha,RC=dt}).apply(typeof wh<"u"?wh:typeof self<"u"?self:typeof window<"u"?window:{});const HE="@firebase/firestore",GE="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vl="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=new jf("@firebase/firestore");function nl(){return eo.logLevel}function aL(n){eo.setLogLevel(n)}function he(n,...e){if(eo.logLevel<=Me.DEBUG){const t=e.map(cv);eo.debug(`Firestore (${Vl}): ${n}`,...t)}}function Qs(n,...e){if(eo.logLevel<=Me.ERROR){const t=e.map(cv);eo.error(`Firestore (${Vl}): ${n}`,...t)}}function vl(n,...e){if(eo.logLevel<=Me.WARN){const t=e.map(cv);eo.warn(`Firestore (${Vl}): ${n}`,...t)}}function cv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n="Unexpected state"){const e=`FIRESTORE (${Vl}) INTERNAL ASSERTION FAILED: `+n;throw Qs(e),new Error(e)}function Ye(n,e){n||Se()}function ke(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends ps{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(cn.UNAUTHENTICATED))}shutdown(){}}class uL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class cL{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ye(this.o===void 0);let r=this.i;const s=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new zs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new zs,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await s(this.currentUser)})},c=h=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new zs)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ye(typeof r.accessToken=="string"),new NC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string"),new cn(e)}}class dL{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class hL{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new dL(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class KE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fL{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,pn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Ye(this.o===void 0);const r=o=>{o.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,he("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new KE(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ye(typeof t.token=="string"),this.R=t.token,new KE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=pL(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Ue(n,e){return n<e?-1:n>e?1:0}function _l(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=-62135596800,YE=1e6;class Ft{static now(){return Ft.fromMillis(Date.now())}static fromDate(e){return Ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*YE);return new Ft(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<QE)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/YE}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-QE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new Ft(0,0))}static max(){return new be(new Ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="__name__";class rs{constructor(e,t,r){t===void 0?t=0:t>e.length&&Se(),r===void 0?r=e.length-t:r>e.length-t&&Se(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return rs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rs?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=rs.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=rs.isNumericId(e),s=rs.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?rs.extractNumericId(e).compare(rs.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hi.fromString(e.substring(4,e.length-2))}}class ut extends rs{construct(e,t,r){return new ut(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new ut(t)}static emptyPath(){return new ut([])}}const mL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends rs{construct(e,t,r){return new tn(e,t,r)}static isValidIdentifier(e){return mL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===XE}static keyField(){return new tn([XE])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new fe(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new fe(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(r+=c,s++):(o(),s++)}if(o(),l)throw new fe(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(t)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(ut.fromString(e))}static fromName(e){return new _e(ut.fromString(e).popFirst(5))}static empty(){return new _e(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new ut(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=-1;function gL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=be.fromTimestamp(r===1e9?new Ft(t+1,0):new Ft(t,r));return new to(s,_e.empty(),e)}function yL(n){return new to(n.readTime,n.key,_c)}class to{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new to(be.min(),_e.empty(),_c)}static max(){return new to(be.max(),_e.empty(),_c)}}function vL(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Ue(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fl(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==_L)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,r)=>{t(e)})}static reject(e){return new ee((t,r)=>{r(e)})}static waitFor(e){return new ee((t,r)=>{let s=0,o=0,l=!1;e.forEach(c=>{++s,c.next(()=>{++o,l&&o===s&&t()},h=>r(h))}),l=!0,o===s&&t()})}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next(s=>s?ee.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,o)=>{r.push(t.call(this,s,o))}),this.waitFor(r)}static mapArray(e,t){return new ee((r,s)=>{const o=e.length,l=new Array(o);let c=0;for(let h=0;h<o;h++){const f=h;t(e[f]).next(m=>{l[f]=m,++c,c===o&&r(l)},m=>s(m))}})}static doWhile(e,t){return new ee((r,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):r()};o()})}}function EL(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ul(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Wf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=-1;function qf(n){return n==null}function of(n){return n===0&&1/n==-1/0}function TL(n){return typeof n=="number"&&Number.isInteger(n)&&!of(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="";function IL(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=JE(e)),e=xL(n.get(t),e);return JE(e)}function xL(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case OC:t+="";break;default:t+=o}}return t}function JE(n){return n+OC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function LC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nt=class Yg{constructor(e,t){this.comparator=e,this.root=t||Gi.EMPTY}insert(e,t){return new Yg(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gi.BLACK,null,null))}remove(e){return new Yg(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eh(this.root,e,this.comparator,!0)}},Eh=class{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Gi=class Ms{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??Ms.RED,this.left=s??Ms.EMPTY,this.right=o??Ms.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new Ms(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ms.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Ms.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ms.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ms.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Se();const e=this.left.check();if(e!==this.right.check())throw Se();return e+(this.isRed()?0:1)}};Gi.EMPTY=null,Gi.RED=!0,Gi.BLACK=!1;Gi.EMPTY=new class{constructor(){this.size=0}get key(){throw Se()}get value(){throw Se()}get color(){throw Se()}get left(){throw Se()}get right(){throw Se()}copy(e,t,r,s,o){return this}insert(e,t,r){return new Gi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new eT(this.data.getIterator())}getIteratorFrom(e){return new eT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class eT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new Yn([])}unionWith(e){let t=new Ut(tn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _l(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new MC("Invalid base64 string: "+o):o}}(e);return new nn(t)}static fromUint8Array(e){const t=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const CL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function no(n){if(Ye(!!n),typeof n=="string"){let e=0;const t=CL.exec(n);if(Ye(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ro(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC="server_timestamp",VC="__type__",FC="__previous_value__",UC="__local_write_time__";function hv(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[VC])===null||t===void 0?void 0:t.stringValue)===jC}function Hf(n){const e=n.mapValue.fields[FC];return hv(e)?Hf(e):e}function wc(n){const e=no(n.mapValue.fields[UC].timestampValue);return new Ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e,t,r,s,o,l,c,h,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=f}}const af="(default)";class Ec{constructor(e,t){this.projectId=e,this.database=t||af}static empty(){return new Ec("","")}get isDefaultDatabase(){return this.database===af}isEqual(e){return e instanceof Ec&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="__type__",RL="__max__",Th={mapValue:{}},$C="__vector__",lf="value";function so(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hv(n)?4:PL(n)?9007199254740991:AL(n)?10:11:Se()}function fs(n,e){if(n===e)return!0;const t=so(n);if(t!==so(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return wc(n).isEqual(wc(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=no(s.timestampValue),c=no(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return ro(s.bytesValue).isEqual(ro(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return St(s.geoPointValue.latitude)===St(o.geoPointValue.latitude)&&St(s.geoPointValue.longitude)===St(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return St(s.integerValue)===St(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=St(s.doubleValue),c=St(o.doubleValue);return l===c?of(l)===of(c):isNaN(l)&&isNaN(c)}return!1}(n,e);case 9:return _l(n.arrayValue.values||[],e.arrayValue.values||[],fs);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},c=o.mapValue.fields||{};if(ZE(l)!==ZE(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!fs(l[h],c[h])))return!1;return!0}(n,e);default:return Se()}}function Tc(n,e){return(n.values||[]).find(t=>fs(t,e))!==void 0}function wl(n,e){if(n===e)return 0;const t=so(n),r=so(e);if(t!==r)return Ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(n.booleanValue,e.booleanValue);case 2:return function(o,l){const c=St(o.integerValue||o.doubleValue),h=St(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return tT(n.timestampValue,e.timestampValue);case 4:return tT(wc(n),wc(e));case 5:return Ue(n.stringValue,e.stringValue);case 6:return function(o,l){const c=ro(o),h=ro(l);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),h=l.split("/");for(let f=0;f<c.length&&f<h.length;f++){const m=Ue(c[f],h[f]);if(m!==0)return m}return Ue(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const c=Ue(St(o.latitude),St(l.latitude));return c!==0?c:Ue(St(o.longitude),St(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return nT(n.arrayValue,e.arrayValue);case 10:return function(o,l){var c,h,f,m;const v=o.fields||{},E=l.fields||{},x=(c=v[lf])===null||c===void 0?void 0:c.arrayValue,R=(h=E[lf])===null||h===void 0?void 0:h.arrayValue,A=Ue(((f=x==null?void 0:x.values)===null||f===void 0?void 0:f.length)||0,((m=R==null?void 0:R.values)===null||m===void 0?void 0:m.length)||0);return A!==0?A:nT(x,R)}(n.mapValue,e.mapValue);case 11:return function(o,l){if(o===Th.mapValue&&l===Th.mapValue)return 0;if(o===Th.mapValue)return 1;if(l===Th.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),f=l.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let v=0;v<h.length&&v<m.length;++v){const E=Ue(h[v],m[v]);if(E!==0)return E;const x=wl(c[h[v]],f[m[v]]);if(x!==0)return x}return Ue(h.length,m.length)}(n.mapValue,e.mapValue);default:throw Se()}}function tT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ue(n,e);const t=no(n),r=no(e),s=Ue(t.seconds,r.seconds);return s!==0?s:Ue(t.nanos,r.nanos)}function nT(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=wl(t[s],r[s]);if(o)return o}return Ue(t.length,r.length)}function El(n){return Xg(n)}function Xg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=no(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ro(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return _e.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=Xg(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${Xg(t.fields[l])}`;return s+"}"}(n.mapValue):Se()}function Uh(n){switch(so(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hf(n);return e?16+Uh(e):16;case 5:return 2*n.stringValue.length;case 6:return ro(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+Uh(o),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return fo(r.fields,(o,l)=>{s+=o.length+Uh(l)}),s}(n.mapValue);default:throw Se()}}function rT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Jg(n){return!!n&&"integerValue"in n}function fv(n){return!!n&&"arrayValue"in n}function sT(n){return!!n&&"nullValue"in n}function iT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bh(n){return!!n&&"mapValue"in n}function AL(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[BC])===null||t===void 0?void 0:t.stringValue)===$C}function nc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return fo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=nc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function PL(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===RL}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Bh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nc(t)}setAll(e){let t=tn.emptyPath(),r={},s=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,s),r={},s=[],t=c.popLast()}l?r[c.lastSegment()]=nc(l):s.push(c.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());Bh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Bh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){fo(t,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new On(nc(this.value))}}function zC(n){const e=[];return fo(n.fields,(t,r)=>{const s=new tn([t]);if(Bh(r)){const o=zC(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t,r,s,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new dn(e,0,be.min(),be.min(),be.min(),On.empty(),0)}static newFoundDocument(e,t,r,s){return new dn(e,1,t,be.min(),r,s,0)}static newNoDocument(e,t){return new dn(e,2,t,be.min(),be.min(),On.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,be.min(),be.min(),On.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,t){this.position=e,this.inclusive=t}}function oT(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?r=_e.comparator(_e.fromName(l.referenceValue),t.key):r=wl(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function aT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t="asc"){this.field=e,this.dir=t}}function bL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{}class kt extends WC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new NL(e,t,r):t==="array-contains"?new LL(e,r):t==="in"?new ML(e,r):t==="not-in"?new jL(e,r):t==="array-contains-any"?new VL(e,r):new kt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new DL(e,r):new OL(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(wl(t,this.value)):t!==null&&so(this.value)===so(t)&&this.matchesComparison(wl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $r extends WC{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new $r(e,t)}matches(e){return qC(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function qC(n){return n.op==="and"}function HC(n){return kL(n)&&qC(n)}function kL(n){for(const e of n.filters)if(e instanceof $r)return!1;return!0}function Zg(n){if(n instanceof kt)return n.field.canonicalString()+n.op.toString()+El(n.value);if(HC(n))return n.filters.map(e=>Zg(e)).join(",");{const e=n.filters.map(t=>Zg(t)).join(",");return`${n.op}(${e})`}}function GC(n,e){return n instanceof kt?function(r,s){return s instanceof kt&&r.op===s.op&&r.field.isEqual(s.field)&&fs(r.value,s.value)}(n,e):n instanceof $r?function(r,s){return s instanceof $r&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,l,c)=>o&&GC(l,s.filters[c]),!0):!1}(n,e):void Se()}function KC(n){return n instanceof kt?function(t){return`${t.field.canonicalString()} ${t.op} ${El(t.value)}`}(n):n instanceof $r?function(t){return t.op.toString()+" {"+t.getFilters().map(KC).join(" ,")+"}"}(n):"Filter"}class NL extends kt{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class DL extends kt{constructor(e,t){super(e,"in",t),this.keys=QC("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class OL extends kt{constructor(e,t){super(e,"not-in",t),this.keys=QC("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function QC(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>_e.fromName(r.referenceValue))}class LL extends kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fv(t)&&Tc(t.arrayValue,this.value)}}class ML extends kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Tc(this.value.arrayValue,t)}}class jL extends kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Tc(this.value.arrayValue,t)}}class VL extends kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Tc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e,t=null,r=[],s=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=c,this.le=null}}function lT(n,e=null,t=[],r=[],s=null,o=null,l=null){return new FL(n,e,t,r,s,o,l)}function pv(n){const e=ke(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Zg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),qf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>El(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>El(r)).join(",")),e.le=t}return e.le}function mv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!bL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!GC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!aT(n.startAt,e.startAt)&&aT(n.endAt,e.endAt)}function ey(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,t=null,r=[],s=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function UL(n,e,t,r,s,o,l,c){return new Bl(n,e,t,r,s,o,l,c)}function Gf(n){return new Bl(n)}function uT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function YC(n){return n.collectionGroup!==null}function rc(n){const e=ke(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Ut(tn.comparator);return l.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new Ic(o,r))}),t.has(tn.keyField().canonicalString())||e.he.push(new Ic(tn.keyField(),r))}return e.he}function us(n){const e=ke(n);return e.Pe||(e.Pe=BL(e,rc(n))),e.Pe}function BL(n,e){if(n.limitType==="F")return lT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Ic(s.field,o)});const t=n.endAt?new uf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new uf(n.startAt.position,n.startAt.inclusive):null;return lT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ty(n,e){const t=n.filters.concat([e]);return new Bl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ny(n,e,t){return new Bl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kf(n,e){return mv(us(n),us(e))&&n.limitType===e.limitType}function XC(n){return`${pv(us(n))}|lt:${n.limitType}`}function rl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>KC(s)).join(", ")}]`),qf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>El(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>El(s)).join(",")),`Target(${r})`}(us(n))}; limitType=${n.limitType})`}function Qf(n,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):_e.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,s){for(const o of rc(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(l,c,h){const f=oT(l,c,h);return l.inclusive?f<=0:f<0}(r.startAt,rc(r),s)||r.endAt&&!function(l,c,h){const f=oT(l,c,h);return l.inclusive?f>=0:f>0}(r.endAt,rc(r),s))}(n,e)}function $L(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function JC(n){return(e,t)=>{let r=!1;for(const s of rc(n)){const o=zL(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function zL(n,e,t){const r=n.field.isKeyField()?_e.comparator(e.key,t.key):function(o,l,c){const h=l.data.field(o),f=c.data.field(o);return h!==null&&f!==null?wl(h,f):Se()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){fo(this.inner,(t,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return LC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL=new Nt(_e.comparator);function Ys(){return WL}const ZC=new Nt(_e.comparator);function Ju(...n){let e=ZC;for(const t of n)e=e.insert(t.key,t);return e}function eS(n){let e=ZC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ko(){return sc()}function tS(){return sc()}function sc(){return new la(n=>n.toString(),(n,e)=>n.isEqual(e))}const qL=new Nt(_e.comparator),HL=new Ut(_e.comparator);function Ve(...n){let e=HL;for(const t of n)e=e.add(t);return e}const GL=new Ut(Ue);function KL(){return GL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:of(e)?"-0":e}}function nS(n){return{integerValue:""+n}}function QL(n,e){return TL(e)?nS(e):gv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(){this._=void 0}}function YL(n,e,t){return n instanceof xc?function(s,o){const l={fields:{[VC]:{stringValue:jC},[UC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&hv(o)&&(o=Hf(o)),o&&(l.fields[FC]=o),{mapValue:l}}(t,e):n instanceof Cc?sS(n,e):n instanceof Sc?iS(n,e):function(s,o){const l=rS(s,o),c=cT(l)+cT(s.Ie);return Jg(l)&&Jg(s.Ie)?nS(c):gv(s.serializer,c)}(n,e)}function XL(n,e,t){return n instanceof Cc?sS(n,e):n instanceof Sc?iS(n,e):t}function rS(n,e){return n instanceof cf?function(r){return Jg(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class xc extends Yf{}class Cc extends Yf{constructor(e){super(),this.elements=e}}function sS(n,e){const t=oS(e);for(const r of n.elements)t.some(s=>fs(s,r))||t.push(r);return{arrayValue:{values:t}}}class Sc extends Yf{constructor(e){super(),this.elements=e}}function iS(n,e){let t=oS(e);for(const r of n.elements)t=t.filter(s=>!fs(s,r));return{arrayValue:{values:t}}}class cf extends Yf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function cT(n){return St(n.integerValue||n.doubleValue)}function oS(n){return fv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e,t){this.field=e,this.transform=t}}function ZL(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Cc&&s instanceof Cc||r instanceof Sc&&s instanceof Sc?_l(r.elements,s.elements,fs):r instanceof cf&&s instanceof cf?fs(r.Ie,s.Ie):r instanceof xc&&s instanceof xc}(n.transform,e.transform)}class eM{constructor(e,t){this.version=e,this.transformResults=t}}class mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mr}static exists(e){return new mr(void 0,e)}static updateTime(e){return new mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $h(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Xf{}function aS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new yv(n.key,mr.none()):new Bc(n.key,n.data,mr.none());{const t=n.data,r=On.empty();let s=new Ut(tn.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new po(n.key,r,new Yn(s.toArray()),mr.none())}}function tM(n,e,t){n instanceof Bc?function(s,o,l){const c=s.value.clone(),h=hT(s.fieldTransforms,o,l.transformResults);c.setAll(h),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,e,t):n instanceof po?function(s,o,l){if(!$h(s.precondition,o))return void o.convertToUnknownDocument(l.version);const c=hT(s.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(lS(s)),h.setAll(c),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function ic(n,e,t,r){return n instanceof Bc?function(o,l,c,h){if(!$h(o.precondition,l))return c;const f=o.value.clone(),m=fT(o.fieldTransforms,h,l);return f.setAll(m),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof po?function(o,l,c,h){if(!$h(o.precondition,l))return c;const f=fT(o.fieldTransforms,h,l),m=l.data;return m.setAll(lS(o)),m.setAll(f),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(o,l,c){return $h(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(n,e,t)}function nM(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=rS(r.transform,s||null);o!=null&&(t===null&&(t=On.empty()),t.set(r.field,o))}return t||null}function dT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&_l(r,s,(o,l)=>ZL(o,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Bc extends Xf{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class po extends Xf{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function lS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function hT(n,e,t){const r=new Map;Ye(n.length===t.length);for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,c=e.data.field(o.field);r.set(o.field,XL(l,c,t[s]))}return r}function fT(n,e,t){const r=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);r.set(s.field,YL(o,l,e))}return r}class yv extends Xf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rM extends Xf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&tM(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ic(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ic(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=tS();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(s.key)?null:c;const h=aS(l,c);h!==null&&r.set(s.key,h),l.isValidDocument()||l.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ve())}isEqual(e){return this.batchId===e.batchId&&_l(this.mutations,e.mutations,(t,r)=>dT(t,r))&&_l(this.baseMutations,e.baseMutations,(t,r)=>dT(t,r))}}class vv{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ye(e.mutations.length===r.length);let s=function(){return qL}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new vv(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,ze;function aM(n){switch(n){case Z.OK:return Se();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Se()}}function uS(n){if(n===void 0)return Qs("GRPC error has no .code"),Z.UNKNOWN;switch(n){case bt.OK:return Z.OK;case bt.CANCELLED:return Z.CANCELLED;case bt.UNKNOWN:return Z.UNKNOWN;case bt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case bt.INTERNAL:return Z.INTERNAL;case bt.UNAVAILABLE:return Z.UNAVAILABLE;case bt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case bt.NOT_FOUND:return Z.NOT_FOUND;case bt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case bt.ABORTED:return Z.ABORTED;case bt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case bt.DATA_LOSS:return Z.DATA_LOSS;default:return Se()}}(ze=bt||(bt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=new Hi([4294967295,4294967295],0);function pT(n){const e=lM().encode(n),t=new SC;return t.update(e),new Uint8Array(t.digest())}function mT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Hi([t,r],0),new Hi([s,o],0)]}class _v{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Zu(`Invalid padding: ${t}`);if(r<0)throw new Zu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Zu(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Hi.fromNumber(this.Ee)}Ae(e,t,r){let s=e.add(t.multiply(Hi.fromNumber(r)));return s.compare(uM)===1&&(s=new Hi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=pT(e),[r,s]=mT(t);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,s,o);if(!this.Re(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new _v(o,s,t);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.Ee===0)return;const t=pT(e),[r,s]=mT(t);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,s,o);this.Ve(l)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Zu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,$c.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Jf(be.min(),s,new Nt(Ue),Ys(),Ve())}}class $c{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new $c(r,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,t,r,s){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=s}}class cS{constructor(e,t){this.targetId=e,this.ge=t}}class dS{constructor(e,t,r=nn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class gT{constructor(){this.pe=0,this.ye=yT(),this.we=nn.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Ve(),t=Ve(),r=Ve();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Se()}}),new $c(this.we,this.be,e,t,r)}Me(){this.Se=!1,this.ye=yT()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ye(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class cM{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ys(),this.$e=Ih(),this.Ke=Ih(),this.Ue=new Nt(Ue)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Se()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,s)=>{this.Je(s)&&t(s)})}Ze(e){const t=e.targetId,r=e.ge.count,s=this.Xe(t);if(s){const o=s.target;if(ey(o))if(r===0){const l=new _e(o.path);this.ze(t,l,dn.newNoDocument(l,be.min()))}else Ye(r===1);else{const l=this.et(t);if(l!==r){const c=this.tt(e),h=c?this.nt(c,e,l):1;if(h!==0){this.Ye(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,f)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let l,c;try{l=ro(r).toUint8Array()}catch(h){if(h instanceof MC)return vl("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new _v(l,s,o)}catch(h){return vl(h instanceof Zu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.Ee===0?null:c}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let s=0;return r.forEach(o=>{const l=this.ke.it(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.ze(t,o,null),s++)}),s}ot(e){const t=new Map;this.qe.forEach((o,l)=>{const c=this.Xe(l);if(c){if(o.current&&ey(c.target)){const h=new _e(c.target.path);this._t(h).has(l)||this.ut(l,h)||this.ze(l,h,dn.newNoDocument(h,e))}o.ve&&(t.set(l,o.Fe()),o.Me())}});let r=Ve();this.Ke.forEach((o,l)=>{let c=!0;l.forEachWhile(h=>{const f=this.Xe(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.Qe.forEach((o,l)=>l.setReadTime(e));const s=new Jf(e,t,this.Ue,this.Qe,r);return this.Qe=Ys(),this.$e=Ih(),this.Ke=Ih(),this.Ue=new Nt(Ue),s}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new gT,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new Ut(Ue),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Ut(Ue),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new gT),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Ih(){return new Nt(_e.comparator)}function yT(){return new Nt(_e.comparator)}const dM={asc:"ASCENDING",desc:"DESCENDING"},hM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fM={and:"AND",or:"OR"};class pM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ry(n,e){return n.useProto3Json||qf(e)?e:{value:e}}function df(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function mM(n,e){return df(n,e.toTimestamp())}function cs(n){return Ye(!!n),be.fromTimestamp(function(t){const r=no(t);return new Ft(r.seconds,r.nanos)}(n))}function wv(n,e){return sy(n,e).canonicalString()}function sy(n,e){const t=function(s){return new ut(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function fS(n){const e=ut.fromString(n);return Ye(vS(e)),e}function iy(n,e){return wv(n.databaseId,e.path)}function cg(n,e){const t=fS(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(mS(t))}function pS(n,e){return wv(n.databaseId,e)}function gM(n){const e=fS(n);return e.length===4?ut.emptyPath():mS(e)}function oy(n){return new ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function mS(n){return Ye(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function vT(n,e,t){return{name:iy(n,e),fields:t.value.mapValue.fields}}function yM(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Se()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(Ye(m===void 0||typeof m=="string"),nn.fromBase64String(m||"")):(Ye(m===void 0||m instanceof Buffer||m instanceof Uint8Array),nn.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(f){const m=f.code===void 0?Z.UNKNOWN:uS(f.code);return new fe(m,f.message||"")}(l);t=new dS(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=cg(n,r.document.name),o=cs(r.document.updateTime),l=r.document.createTime?cs(r.document.createTime):be.min(),c=new On({mapValue:{fields:r.document.fields}}),h=dn.newFoundDocument(s,o,l,c),f=r.targetIds||[],m=r.removedTargetIds||[];t=new zh(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=cg(n,r.document),o=r.readTime?cs(r.readTime):be.min(),l=dn.newNoDocument(s,o),c=r.removedTargetIds||[];t=new zh([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=cg(n,r.document),o=r.removedTargetIds||[];t=new zh([],o,s,null)}else{if(!("filter"in e))return Se();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new oM(s,o),c=r.targetId;t=new cS(c,l)}}return t}function vM(n,e){let t;if(e instanceof Bc)t={update:vT(n,e.key,e.value)};else if(e instanceof yv)t={delete:iy(n,e.key)};else if(e instanceof po)t={update:vT(n,e.key,e.data),updateMask:RM(e.fieldMask)};else{if(!(e instanceof rM))return Se();t={verify:iy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof xc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Cc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Sc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof cf)return{fieldPath:l.field.canonicalString(),increment:c.Ie};throw Se()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:mM(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Se()}(n,e.precondition)),t}function _M(n,e){return n&&n.length>0?(Ye(e!==void 0),n.map(t=>function(s,o){let l=s.updateTime?cs(s.updateTime):cs(o);return l.isEqual(be.min())&&(l=cs(o)),new eM(l,s.transformResults||[])}(t,e))):[]}function wM(n,e){return{documents:[pS(n,e.path)]}}function EM(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=pS(n,s);const o=function(f){if(f.length!==0)return yS($r.create(f,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(f){if(f.length!==0)return f.map(m=>function(E){return{field:sl(E.field),direction:xM(E.dir)}}(m))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=ry(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ht:t,parent:s}}function TM(n){let e=gM(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ye(r===1);const m=t.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=function(v){const E=gS(v);return E instanceof $r&&HC(E)?E.getFilters():[E]}(t.where));let l=[];t.orderBy&&(l=function(v){return v.map(E=>function(R){return new Ic(il(R.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(E))}(t.orderBy));let c=null;t.limit&&(c=function(v){let E;return E=typeof v=="object"?v.value:v,qf(E)?null:E}(t.limit));let h=null;t.startAt&&(h=function(v){const E=!!v.before,x=v.values||[];return new uf(x,E)}(t.startAt));let f=null;return t.endAt&&(f=function(v){const E=!v.before,x=v.values||[];return new uf(x,E)}(t.endAt)),UL(e,s,l,o,c,"F",h,f)}function IM(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function gS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=il(t.unaryFilter.field);return kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=il(t.unaryFilter.field);return kt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=il(t.unaryFilter.field);return kt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=il(t.unaryFilter.field);return kt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Se()}}(n):n.fieldFilter!==void 0?function(t){return kt.create(il(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Se()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return $r.create(t.compositeFilter.filters.map(r=>gS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Se()}}(t.compositeFilter.op))}(n):Se()}function xM(n){return dM[n]}function CM(n){return hM[n]}function SM(n){return fM[n]}function sl(n){return{fieldPath:n.canonicalString()}}function il(n){return tn.fromServerFormat(n.fieldPath)}function yS(n){return n instanceof kt?function(t){if(t.op==="=="){if(iT(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NAN"}};if(sT(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(iT(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NAN"}};if(sT(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sl(t.field),op:CM(t.op),value:t.value}}}(n):n instanceof $r?function(t){const r=t.getFilters().map(s=>yS(s));return r.length===1?r[0]:{compositeFilter:{op:SM(t.op),filters:r}}}(n):Se()}function RM(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function vS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,t,r,s,o=be.min(),l=be.min(),c=nn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new $i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e){this.Tt=e}}function PM(n){const e=TM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ny(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(){this.Tn=new kM}addToCollectionParentIndex(e,t){return this.Tn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(to.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(to.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class kM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Ut(ut.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ut(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_S=41943040;class Dn{static withCacheSize(e){return new Dn(e,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(_S,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Tl(0)}static Un(){return new Tl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="LruGarbageCollector",NM=1048576;function ET([n,e],[t,r]){const s=Ue(n,t);return s===0?Ue(e,r):s}class DM{constructor(e){this.Hn=e,this.buffer=new Ut(ET),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ET(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class OM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){he(wT,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ul(t)?he(wT,"Ignoring IndexedDB error during garbage collection: ",t):await Fl(t)}await this.er(3e5)})}}class LM{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(Wf.ae);const r=new DM(t);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(_T)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_T):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,s,o,l,c,h,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,c=Date.now(),this.removeTargets(e,r,t))).next(v=>(o=v,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(f=Date.now(),nl()<=Me.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${v} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v})))}}function MM(n,e){return new LM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(){this.changes=new la(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&ic(r.mutation,s,Yn.empty(),Ft.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ve()){const s=Ko();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(o=>{let l=Ju();return o.forEach((c,h)=>{l=l.insert(c,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Ko();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ve()))}populateOverlays(e,t,r){const s=[];return r.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,r,s){let o=Ys();const l=sc(),c=function(){return sc()}();return t.forEach((h,f)=>{const m=r.get(f.key);s.has(f.key)&&(m===void 0||m.mutation instanceof po)?o=o.insert(f.key,f):m!==void 0?(l.set(f.key,m.mutation.getFieldMask()),ic(m.mutation,f,m.mutation.getFieldMask(),Ft.now())):l.set(f.key,Yn.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,m)=>l.set(f,m)),t.forEach((f,m)=>{var v;return c.set(f,new VM(m,(v=l.get(f))!==null&&v!==void 0?v:null))}),c))}recalculateAndSaveOverlays(e,t){const r=sc();let s=new Nt((l,c)=>l-c),o=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(h=>{const f=t.get(h);if(f===null)return;let m=r.get(h)||Yn.empty();m=c.applyToLocalView(f,m),r.set(h,m);const v=(s.get(c.batchId)||Ve()).add(h);s=s.insert(c.batchId,v)})}).next(()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),f=h.key,m=h.value,v=tS();m.forEach(E=>{if(!o.has(E)){const x=aS(t.get(E),r.get(E));x!==null&&v.set(E,x),o=o.add(E)}}),l.push(this.documentOverlayCache.saveOverlays(e,f,v))}return ee.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(l){return _e.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):YC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):ee.resolve(Ko());let c=_c,h=o;return l.next(f=>ee.forEach(f,(m,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),o.get(m)?ee.resolve():this.remoteDocumentCache.getEntry(e,m).next(E=>{h=h.insert(m,E)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,Ve())).next(m=>({batchId:c,changes:eS(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next(r=>{let s=Ju();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let l=Ju();return this.indexManager.getCollectionParents(e,o).next(c=>ee.forEach(c,h=>{const f=function(v,E){return new Bl(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next(m=>{m.forEach((v,E)=>{l=l.insert(v,E)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s))).next(l=>{o.forEach((h,f)=>{const m=f.getKey();l.get(m)===null&&(l=l.insert(m,dn.newInvalidDocument(m)))});let c=Ju();return l.forEach((h,f)=>{const m=o.get(h);m!==void 0&&ic(m.mutation,f,Yn.empty(),Ft.now()),Qf(t,f)&&(c=c.insert(h,f))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ee.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:cs(s.createTime)}}(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(s){return{name:s.name,query:PM(s.bundledQuery),readTime:cs(s.readTime)}}(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(){this.overlays=new Nt(_e.comparator),this.Rr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ko();return ee.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,o)=>{this.Et(e,t,o)}),ee.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const s=Ko(),o=t.length+1,l=new _e(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&s.set(h.getKey(),h)}return ee.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new Nt((f,m)=>f-m);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let m=o.get(f.largestBatchId);m===null&&(m=Ko(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const c=Ko(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>c.set(f,m)),!(c.size()>=s)););return ee.resolve(c)}Et(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new iM(t,r));let o=this.Rr.get(t);o===void 0&&(o=Ve(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(){this.Vr=new Ut(Ht.mr),this.gr=new Ut(Ht.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new Ht(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new Ht(e,t))}br(e,t){e.forEach(r=>this.removeReference(r,t))}Sr(e){const t=new _e(new ut([])),r=new Ht(t,e),s=new Ht(t,e+1),o=[];return this.gr.forEachInRange([r,s],l=>{this.wr(l),o.push(l.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new _e(new ut([])),r=new Ht(t,e),s=new Ht(t,e+1);let o=Ve();return this.gr.forEachInRange([r,s],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new Ht(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ht{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return _e.comparator(e.key,t.key)||Ue(e.Cr,t.Cr)}static pr(e,t){return Ue(e.Cr,t.Cr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Ut(Ht.mr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new sM(o,t,r,s);this.mutationQueue.push(l);for(const c of s)this.Mr=this.Mr.add(new Ht(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ee.resolve(l)}lookupMutationBatch(e,t){return ee.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Nr(r),o=s<0?0:s;return ee.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?dv:this.Fr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ht(t,0),s=new Ht(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,s],l=>{const c=this.Or(l.Cr);o.push(c)}),ee.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ut(Ue);return t.forEach(s=>{const o=new Ht(s,0),l=new Ht(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,l],c=>{r=r.add(c.Cr)})}),ee.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;_e.isDocumentKey(o)||(o=o.child(""));const l=new Ht(new _e(o),0);let c=new Ut(Ue);return this.Mr.forEachWhile(h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(c=c.add(h.Cr)),!0)},l),ee.resolve(this.Br(c))}Br(e){const t=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Ye(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return ee.forEach(t.mutations,s=>{const o=new Ht(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new Ht(t,0),s=this.Mr.firstAfterOrEqual(r);return ee.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e){this.kr=e,this.docs=function(){return new Nt(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,l=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let r=Ys();return t.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():dn.newInvalidDocument(s))}),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=Ys();const l=t.path,c=new _e(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||vL(yL(m),r)<=0||(s.has(m.key)||Qf(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return ee.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Se()}qr(e,t){return ee.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new qM(this)}getSize(e){return ee.resolve(this.size)}}class qM extends jM{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),ee.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.persistence=e,this.Qr=new la(t=>pv(t),mv),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Ev,this.targetCount=0,this.Ur=Tl.Kn()}forEachTarget(e,t){return this.Qr.forEach((r,s)=>t(s)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),ee.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new Tl(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.zn(t),ee.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.Qr.forEach((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Qr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),ee.waitFor(o).next(()=>s)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.Kr.yr(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.Kr.br(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),ee.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Kr.vr(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Wf(0),this.zr=!1,this.zr=!0,this.jr=new $M,this.referenceDelegate=e(this),this.Hr=new HM(this),this.indexManager=new bM,this.remoteDocumentCache=function(s){return new WM(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new AM(t),this.Yr=new UM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new BM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new zM(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){he("MemoryPersistence","Starting transaction:",e);const s=new GM(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,t){return ee.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class GM extends wL{constructor(e){super(),this.currentSequenceNumber=e}}class Tv{constructor(e){this.persistence=e,this.ti=new Ev,this.ni=null}static ri(e){return new Tv(e)}get ii(){if(this.ni)return this.ni;throw Se()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ee.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.ii,r=>{const s=_e.fromPath(r);return this.si(e,s).next(o=>{o||t.removeEntry(s,be.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ee.or([()=>ee.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class hf{constructor(e,t){this.persistence=e,this.oi=new la(r=>IL(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=MM(this,t)}static ri(e,t){return new hf(e,t)}Zr(){}Xr(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return ee.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(o=>o?ee.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,l=>this.ar(e,l,t).next(c=>{c||(r++,o.removeEntry(l,be.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ee.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Uh(e.data.value)),t}ar(e,t,r){return ee.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return ee.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=s}static Yi(e,t){let r=Ve(),s=Ve();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Iv(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return mk()?8:EL(yn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.rs(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ss(e,t,s,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new KM;return this._s(e,t,l).next(c=>{if(o.result=c,this.Xi)return this.us(e,t,l,c.size)})}).next(()=>o.result)}us(e,t,r,s){return r.documentReadCount<this.es?(nl()<=Me.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",rl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ee.resolve()):(nl()<=Me.DEBUG&&he("QueryEngine","Query:",rl(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(nl()<=Me.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",rl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,us(t))):ee.resolve())}rs(e,t){if(uT(t))return ee.resolve(null);let r=us(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=ny(t,null,"F"),r=us(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Ve(...o);return this.ns.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(h=>{const f=this.cs(t,c);return this.ls(t,f,l,h.readTime)?this.rs(e,ny(t,null,"F")):this.hs(e,f,t,h)}))})))}ss(e,t,r,s){return uT(t)||s.isEqual(be.min())?ee.resolve(null):this.ns.getDocuments(e,r).next(o=>{const l=this.cs(t,o);return this.ls(t,l,r,s)?ee.resolve(null):(nl()<=Me.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),rl(t)),this.hs(e,l,t,gL(s,_c)).next(c=>c))})}cs(e,t){let r=new Ut(JC(e));return t.forEach((s,o)=>{Qf(e,o)&&(r=r.add(o))}),r}ls(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,t,r){return nl()<=Me.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",rl(t)),this.ns.getDocumentsMatchingQuery(e,t,to.min(),r)}hs(e,t,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="LocalStore",YM=3e8;class XM{constructor(e,t,r,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new Nt(Ue),this.Is=new la(o=>pv(o),mv),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FM(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function JM(n,e,t,r){return new XM(n,e,t,r)}async function ES(n,e){const t=ke(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let h=Ve();for(const f of s){l.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of o){c.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return t.localDocuments.getDocuments(r,h).next(f=>({Rs:f,removedBatchIds:l,addedBatchIds:c}))})})}function ZM(n,e){const t=ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(c,h,f,m){const v=f.batch,E=v.keys();let x=ee.resolve();return E.forEach(R=>{x=x.next(()=>m.getEntry(h,R)).next(A=>{const S=f.docVersions.get(R);Ye(S!==null),A.version.compareTo(S)<0&&(v.applyToRemoteDocument(A,f),A.isValidDocument()&&(A.setReadTime(f.commitVersion),m.addEntry(A)))})}),x.next(()=>c.mutationQueue.removeMutationBatch(h,v))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=Ve();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(h=h.add(c.batch.mutations[f].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function TS(n){const e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function e4(n,e){const t=ke(n),r=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const c=[];e.targetChanges.forEach((m,v)=>{const E=s.get(v);if(!E)return;c.push(t.Hr.removeMatchingKeys(o,m.removedDocuments,v).next(()=>t.Hr.addMatchingKeys(o,m.addedDocuments,v)));let x=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?x=x.withResumeToken(nn.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):m.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(m.resumeToken,r)),s=s.insert(v,x),function(A,S,M){return A.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=YM?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(E,x,m)&&c.push(t.Hr.updateTargetData(o,x))});let h=Ys(),f=Ve();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(t4(o,l,e.documentUpdates).next(m=>{h=m.Vs,f=m.fs})),!r.isEqual(be.min())){const m=t.Hr.getLastRemoteSnapshotVersion(o).next(v=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(m)}return ee.waitFor(c).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(t.Ts=s,o))}function t4(n,e,t){let r=Ve(),s=Ve();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=Ys();return t.forEach((c,h)=>{const f=o.get(c);h.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(c)),h.isNoDocument()&&h.version.isEqual(be.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):he(xv,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",h.version)}),{Vs:l,fs:s}})}function n4(n,e){const t=ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=dv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function r4(n,e){const t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Hr.getTargetData(r,e).next(o=>o?(s=o,ee.resolve(s)):t.Hr.allocateTargetId(r).next(l=>(s=new $i(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function ay(n,e,t){const r=ke(n),s=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Ul(l))throw l;he(xv,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function TT(n,e,t){const r=ke(n);let s=be.min(),o=Ve();return r.persistence.runTransaction("Execute query","readwrite",l=>function(h,f,m){const v=ke(h),E=v.Is.get(m);return E!==void 0?ee.resolve(v.Ts.get(E)):v.Hr.getTargetData(f,m)}(r,l,us(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(l,c.targetId).next(h=>{o=h})}).next(()=>r.Ps.getDocumentsMatchingQuery(l,e,t?s:be.min(),t?o:Ve())).next(c=>(s4(r,$L(e),c),{documents:c,gs:o})))}function s4(n,e,t){let r=n.Es.get(e)||be.min();t.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}class IT{constructor(){this.activeTargetIds=KL()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class i4{constructor(){this.ho=new IT,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new IT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="ConnectivityMonitor";class CT{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){he(xT,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){he(xT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xh=null;function ly(){return xh===null?xh=function(){return 268435456+Math.round(2147483648*Math.random())}():xh++,"0x"+xh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="RestConnection",a4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class l4{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===af?`project_id=${r}`:`project_id=${r}&database_id=${s}`}bo(e,t,r,s,o){const l=ly(),c=this.So(e,t.toUriEncodedString());he(dg,`Sending RPC '${e}' ${l}:`,c,r);const h={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(h,s,o),this.vo(e,c,h,r).then(f=>(he(dg,`Received RPC '${e}' ${l}: `,f),f),f=>{throw vl(dg,`RPC '${e}' ${l} failed with error: `,f,"url: ",c,"request:",r),f})}Co(e,t,r,s,o,l){return this.bo(e,t,r,s,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Vl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}So(e,t){const r=a4[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class c4 extends l4{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,s){const o=ly();return new Promise((l,c)=>{const h=new RC;h.setWithCredentials(!0),h.listenOnce(AC.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Fh.NO_ERROR:const m=h.getResponseJson();he(ln,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case Fh.TIMEOUT:he(ln,`RPC '${e}' ${o} timed out`),c(new fe(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Fh.HTTP_ERROR:const v=h.getStatus();if(he(ln,`RPC '${e}' ${o} failed with status:`,v,"response text:",h.getResponseText()),v>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const x=E==null?void 0:E.error;if(x&&x.status&&x.message){const R=function(S){const M=S.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(M)>=0?M:Z.UNKNOWN}(x.status);c(new fe(R,x.message))}else c(new fe(Z.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new fe(Z.UNAVAILABLE,"Connection failed."));break;default:Se()}}finally{he(ln,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);he(ln,`RPC '${e}' ${o} sending request:`,s),h.send(t,"POST",f,r,15)})}Wo(e,t,r){const s=ly(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=kC(),c=bC(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Do(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const m=o.join("");he(ln,`Creating RPC '${e}' stream ${s}: ${m}`,h);const v=l.createWebChannel(m,h);let E=!1,x=!1;const R=new u4({Fo:S=>{x?he(ln,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(E||(he(ln,`Opening RPC '${e}' stream ${s} transport.`),v.open(),E=!0),he(ln,`RPC '${e}' stream ${s} sending:`,S),v.send(S))},Mo:()=>v.close()}),A=(S,M,U)=>{S.listen(M,B=>{try{U(B)}catch(W){setTimeout(()=>{throw W},0)}})};return A(v,Xu.EventType.OPEN,()=>{x||(he(ln,`RPC '${e}' stream ${s} transport opened.`),R.Qo())}),A(v,Xu.EventType.CLOSE,()=>{x||(x=!0,he(ln,`RPC '${e}' stream ${s} transport closed`),R.Ko())}),A(v,Xu.EventType.ERROR,S=>{x||(x=!0,vl(ln,`RPC '${e}' stream ${s} transport errored:`,S),R.Ko(new fe(Z.UNAVAILABLE,"The operation could not be completed")))}),A(v,Xu.EventType.MESSAGE,S=>{var M;if(!x){const U=S.data[0];Ye(!!U);const B=U,W=(B==null?void 0:B.error)||((M=B[0])===null||M===void 0?void 0:M.error);if(W){he(ln,`RPC '${e}' stream ${s} received error:`,W);const Y=W.status;let X=function(k){const L=bt[k];if(L!==void 0)return uS(L)}(Y),N=W.message;X===void 0&&(X=Z.INTERNAL,N="Unknown error status: "+Y+" with message "+W.message),x=!0,R.Ko(new fe(X,N)),v.close()}else he(ln,`RPC '${e}' stream ${s} received:`,U),R.Uo(U)}}),A(c,PC.STAT_EVENT,S=>{S.stat===Qg.PROXY?he(ln,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===Qg.NOPROXY&&he(ln,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.$o()},0),R}}function hg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(n){return new pM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-r);s>0&&he("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="PersistentStream";class xS{constructor(e,t,r,s,o,l,c,h){this.Ti=e,this.n_=r,this.r_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new IS(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Qs(t.toString()),Qs("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===t&&this.V_(r,s)},r=>{e(()=>{const s=new fe(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return he(ST,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(he(ST,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class d4 extends xS{constructor(e,t,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=yM(this.serializer,e),r=function(o){if(!("targetChange"in o))return be.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?be.min():l.readTime?cs(l.readTime):be.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=oy(this.serializer),t.addTarget=function(o,l){let c;const h=l.target;if(c=ey(h)?{documents:wM(o,h)}:{query:EM(o,h).ht},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=hS(o,l.resumeToken);const f=ry(o,l.expectedCount);f!==null&&(c.expectedCount=f)}else if(l.snapshotVersion.compareTo(be.min())>0){c.readTime=df(o,l.snapshotVersion.toTimestamp());const f=ry(o,l.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);const r=IM(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=oy(this.serializer),t.removeTarget=e,this.I_(t)}}class h4 extends xS{constructor(e,t,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Ye(!!e.streamToken),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=_M(e.writeResults,e.commitTime),r=cs(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=oy(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>vM(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{}class p4 extends f4{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.bo(e,sy(t,r),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(Z.UNKNOWN,o.toString())})}Co(e,t,r,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Co(e,sy(t,r),s,l,c,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(Z.UNKNOWN,l.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class m4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Qs(t),this.N_=!1):he("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="RemoteStore";class g4{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(l=>{r.enqueueAndForget(async()=>{ua(this)&&(he(ta,"Restarting streams for network reachability change."),await async function(h){const f=ke(h);f.W_.add(4),await zc(f),f.j_.set("Unknown"),f.W_.delete(4),await ep(f)}(this))})}),this.j_=new m4(r,s)}}async function ep(n){if(ua(n))for(const e of n.G_)await e(!0)}async function zc(n){for(const e of n.G_)await e(!1)}function CS(n,e){const t=ke(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),Av(t)?Rv(t):$l(t).c_()&&Sv(t,e))}function Cv(n,e){const t=ke(n),r=$l(t);t.U_.delete(e),r.c_()&&SS(t,e),t.U_.size===0&&(r.c_()?r.P_():ua(t)&&t.j_.set("Unknown"))}function Sv(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$l(n).y_(e)}function SS(n,e){n.H_.Ne(e),$l(n).w_(e)}function Rv(n){n.H_=new cM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),$l(n).start(),n.j_.B_()}function Av(n){return ua(n)&&!$l(n).u_()&&n.U_.size>0}function ua(n){return ke(n).W_.size===0}function RS(n){n.H_=void 0}async function y4(n){n.j_.set("Online")}async function v4(n){n.U_.forEach((e,t)=>{Sv(n,e)})}async function _4(n,e){RS(n),Av(n)?(n.j_.q_(e),Rv(n)):n.j_.set("Unknown")}async function w4(n,e,t){if(n.j_.set("Online"),e instanceof dS&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const c of o.targetIds)s.U_.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.U_.delete(c),s.H_.removeTarget(c))}(n,e)}catch(r){he(ta,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ff(n,r)}else if(e instanceof zh?n.H_.We(e):e instanceof cS?n.H_.Ze(e):n.H_.je(e),!t.isEqual(be.min()))try{const r=await TS(n.localStore);t.compareTo(r)>=0&&await function(o,l){const c=o.H_.ot(l);return c.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.U_.get(f);m&&o.U_.set(f,m.withResumeToken(h.resumeToken,l))}}),c.targetMismatches.forEach((h,f)=>{const m=o.U_.get(h);if(!m)return;o.U_.set(h,m.withResumeToken(nn.EMPTY_BYTE_STRING,m.snapshotVersion)),SS(o,h);const v=new $i(m.target,h,f,m.sequenceNumber);Sv(o,v)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){he(ta,"Failed to raise snapshot:",r),await ff(n,r)}}async function ff(n,e,t){if(!Ul(e))throw e;n.W_.add(1),await zc(n),n.j_.set("Offline"),t||(t=()=>TS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{he(ta,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await ep(n)})}function AS(n,e){return e().catch(t=>ff(n,t,e))}async function tp(n){const e=ke(n),t=io(e);let r=e.K_.length>0?e.K_[e.K_.length-1].batchId:dv;for(;E4(e);)try{const s=await n4(e.localStore,r);if(s===null){e.K_.length===0&&t.P_();break}r=s.batchId,T4(e,s)}catch(s){await ff(e,s)}PS(e)&&bS(e)}function E4(n){return ua(n)&&n.K_.length<10}function T4(n,e){n.K_.push(e);const t=io(n);t.c_()&&t.b_&&t.S_(e.mutations)}function PS(n){return ua(n)&&!io(n).u_()&&n.K_.length>0}function bS(n){io(n).start()}async function I4(n){io(n).C_()}async function x4(n){const e=io(n);for(const t of n.K_)e.S_(t.mutations)}async function C4(n,e,t){const r=n.K_.shift(),s=vv.from(r,e,t);await AS(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await tp(n)}async function S4(n,e){e&&io(n).b_&&await async function(r,s){if(function(l){return aM(l)&&l!==Z.ABORTED}(s.code)){const o=r.K_.shift();io(r).h_(),await AS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await tp(r)}}(n,e),PS(n)&&bS(n)}async function RT(n,e){const t=ke(n);t.asyncQueue.verifyOperationInProgress(),he(ta,"RemoteStore received new credentials");const r=ua(t);t.W_.add(3),await zc(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await ep(t)}async function R4(n,e){const t=ke(n);e?(t.W_.delete(2),await ep(t)):e||(t.W_.add(2),await zc(t),t.j_.set("Unknown"))}function $l(n){return n.J_||(n.J_=function(t,r,s){const o=ke(t);return o.M_(),new d4(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:y4.bind(null,n),No:v4.bind(null,n),Lo:_4.bind(null,n),p_:w4.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),Av(n)?Rv(n):n.j_.set("Unknown")):(await n.J_.stop(),RS(n))})),n.J_}function io(n){return n.Y_||(n.Y_=function(t,r,s){const o=ke(t);return o.M_(),new h4(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:I4.bind(null,n),Lo:S4.bind(null,n),D_:x4.bind(null,n),v_:C4.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await tp(n)):(await n.Y_.stop(),n.K_.length>0&&(he(ta,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new zs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const l=Date.now()+r,c=new Pv(e,t,l,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bv(n,e){if(Qs("AsyncQueue",`${e}: ${n}`),Ul(n))return new fe(Z.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{static emptySet(e){return new hl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=Ju(),this.sortedSet=new Nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new hl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(){this.Z_=new Nt(_e.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Se():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Il{constructor(e,t,r,s,o,l,c,h,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,s,o){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new Il(e,t,hl.emptySet(t),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class P4{constructor(){this.queries=PT(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const s=ke(t),o=s.queries;s.queries=PT(),o.forEach((l,c)=>{for(const h of c.ta)h.onError(r)})})(this,new fe(Z.ABORTED,"Firestore shutting down"))}}function PT(){return new la(n=>XC(n),Kf)}async function kv(n,e){const t=ke(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.na()&&e.ra()&&(r=2):(o=new A4,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await t.onListen(s,!0);break;case 1:o.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const c=bv(l,`Initialization of query '${rl(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&Dv(t)}async function Nv(n,e){const t=ke(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const l=o.ta.indexOf(e);l>=0&&(o.ta.splice(l,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function b4(n,e){const t=ke(n);let r=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const c of l.ta)c.oa(s)&&(r=!0);l.ea=s}}r&&Dv(t)}function k4(n,e,t){const r=ke(n),s=r.queries.get(e);if(s)for(const o of s.ta)o.onError(t);r.queries.delete(e)}function Dv(n){n.ia.forEach(e=>{e.next()})}var uy,bT;(bT=uy||(uy={}))._a="default",bT.Cache="cache";class Ov{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Il(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==uy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e){this.key=e}}class NS{constructor(e){this.key=e}}class N4{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ve(),this.mutatedKeys=Ve(),this.ya=JC(e),this.wa=new hl(this.ya)}get ba(){return this.fa}Sa(e,t){const r=t?t.Da:new AT,s=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,c=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,v)=>{const E=s.get(m),x=Qf(this.query,v)?v:null,R=!!E&&this.mutatedKeys.has(E.key),A=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let S=!1;E&&x?E.data.isEqual(x.data)?R!==A&&(r.track({type:3,doc:x}),S=!0):this.va(E,x)||(r.track({type:2,doc:x}),S=!0,(h&&this.ya(x,h)>0||f&&this.ya(x,f)<0)&&(c=!0)):!E&&x?(r.track({type:0,doc:x}),S=!0):E&&!x&&(r.track({type:1,doc:E}),S=!0,(h||f)&&(c=!0)),S&&(x?(l=l.add(x),o=A?o.add(m):o.delete(m)):(l=l.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{wa:l,Da:r,ls:c,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const l=e.Da.X_();l.sort((m,v)=>function(x,R){const A=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se()}};return A(x)-A(R)}(m.type,v.type)||this.ya(m.doc,v.doc)),this.Ca(r),s=s!=null&&s;const c=t&&!s?this.Fa():[],h=this.pa.size===0&&this.current&&!s?1:0,f=h!==this.ga;return this.ga=h,l.length!==0||f?{snapshot:new Il(this.query,e.wa,o,l,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:c}:{Ma:c}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new AT,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ve(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new NS(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new kS(r))}),t}Oa(e){this.fa=e.gs,this.pa=Ve();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return Il.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Lv="SyncEngine";class D4{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class O4{constructor(e){this.key=e,this.Ba=!1}}class L4{constructor(e,t,r,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.La={},this.ka=new la(c=>XC(c),Kf),this.qa=new Map,this.Qa=new Set,this.$a=new Nt(_e.comparator),this.Ka=new Map,this.Ua=new Ev,this.Wa={},this.Ga=new Map,this.za=Tl.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function M4(n,e,t=!0){const r=VS(n);let s;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await DS(r,e,t,!0),s}async function j4(n,e){const t=VS(n);await DS(t,e,!0,!1)}async function DS(n,e,t,r){const s=await r4(n.localStore,us(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await V4(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&CS(n.remoteStore,s),c}async function V4(n,e,t,r,s){n.Ha=(v,E,x)=>async function(A,S,M,U){let B=S.view.Sa(M);B.ls&&(B=await TT(A.localStore,S.query,!1).then(({documents:N})=>S.view.Sa(N,B)));const W=U&&U.targetChanges.get(S.targetId),Y=U&&U.targetMismatches.get(S.targetId)!=null,X=S.view.applyChanges(B,A.isPrimaryClient,W,Y);return NT(A,S.targetId,X.Ma),X.snapshot}(n,v,E,x);const o=await TT(n.localStore,e,!0),l=new N4(e,o.gs),c=l.Sa(o.documents),h=$c.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),f=l.applyChanges(c,n.isPrimaryClient,h);NT(n,t,f.Ma);const m=new D4(e,t,l);return n.ka.set(e,m),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),f.snapshot}async function F4(n,e,t){const r=ke(n),s=r.ka.get(e),o=r.qa.get(s.targetId);if(o.length>1)return r.qa.set(s.targetId,o.filter(l=>!Kf(l,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ay(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Cv(r.remoteStore,s.targetId),cy(r,s.targetId)}).catch(Fl)):(cy(r,s.targetId),await ay(r.localStore,s.targetId,!0))}async function U4(n,e){const t=ke(n),r=t.ka.get(e),s=t.qa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Cv(t.remoteStore,r.targetId))}async function B4(n,e,t){const r=K4(n);try{const s=await function(l,c){const h=ke(l),f=Ft.now(),m=c.reduce((x,R)=>x.add(R.key),Ve());let v,E;return h.persistence.runTransaction("Locally write mutations","readwrite",x=>{let R=Ys(),A=Ve();return h.ds.getEntries(x,m).next(S=>{R=S,R.forEach((M,U)=>{U.isValidDocument()||(A=A.add(M))})}).next(()=>h.localDocuments.getOverlayedDocuments(x,R)).next(S=>{v=S;const M=[];for(const U of c){const B=nM(U,v.get(U.key).overlayedDocument);B!=null&&M.push(new po(U.key,B,zC(B.value.mapValue),mr.exists(!0)))}return h.mutationQueue.addMutationBatch(x,f,M,c)}).next(S=>{E=S;const M=S.applyToLocalDocumentSet(v,A);return h.documentOverlayCache.saveOverlays(x,S.batchId,M)})}).then(()=>({batchId:E.batchId,changes:eS(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,c,h){let f=l.Wa[l.currentUser.toKey()];f||(f=new Nt(Ue)),f=f.insert(c,h),l.Wa[l.currentUser.toKey()]=f}(r,s.batchId,t),await Wc(r,s.changes),await tp(r.remoteStore)}catch(s){const o=bv(s,"Failed to persist write");t.reject(o)}}async function OS(n,e){const t=ke(n);try{const r=await e4(t.localStore,e);e.targetChanges.forEach((s,o)=>{const l=t.Ka.get(o);l&&(Ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.Ba=!0:s.modifiedDocuments.size>0?Ye(l.Ba):s.removedDocuments.size>0&&(Ye(l.Ba),l.Ba=!1))}),await Wc(t,r,e)}catch(r){await Fl(r)}}function kT(n,e,t){const r=ke(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.ka.forEach((o,l)=>{const c=l.view.sa(e);c.snapshot&&s.push(c.snapshot)}),function(l,c){const h=ke(l);h.onlineState=c;let f=!1;h.queries.forEach((m,v)=>{for(const E of v.ta)E.sa(c)&&(f=!0)}),f&&Dv(h)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $4(n,e,t){const r=ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Ka.get(e),o=s&&s.key;if(o){let l=new Nt(_e.comparator);l=l.insert(o,dn.newNoDocument(o,be.min()));const c=Ve().add(o),h=new Jf(be.min(),new Map,new Nt(Ue),l,c);await OS(r,h),r.$a=r.$a.remove(o),r.Ka.delete(e),Mv(r)}else await ay(r.localStore,e,!1).then(()=>cy(r,e,t)).catch(Fl)}async function z4(n,e){const t=ke(n),r=e.batch.batchId;try{const s=await ZM(t.localStore,e);MS(t,r,null),LS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Wc(t,s)}catch(s){await Fl(s)}}async function W4(n,e,t){const r=ke(n);try{const s=await function(l,c){const h=ke(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,c).next(v=>(Ye(v!==null),m=v.keys(),h.mutationQueue.removeMutationBatch(f,v))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(r.localStore,e);MS(r,e,t),LS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Wc(r,s)}catch(s){await Fl(s)}}function LS(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function MS(n,e,t){const r=ke(n);let s=r.Wa[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function cy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(r=>{n.Ua.containsKey(r)||jS(n,r)})}function jS(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(Cv(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),Mv(n))}function NT(n,e,t){for(const r of t)r instanceof kS?(n.Ua.addReference(r.key,e),q4(n,r)):r instanceof NS?(he(Lv,"Document no longer in limbo: "+r.key),n.Ua.removeReference(r.key,e),n.Ua.containsKey(r.key)||jS(n,r.key)):Se()}function q4(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(he(Lv,"New document in limbo: "+t),n.Qa.add(r),Mv(n))}function Mv(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new _e(ut.fromString(e)),r=n.za.next();n.Ka.set(r,new O4(t)),n.$a=n.$a.insert(t,r),CS(n.remoteStore,new $i(us(Gf(t.path)),r,"TargetPurposeLimboResolution",Wf.ae))}}async function Wc(n,e,t){const r=ke(n),s=[],o=[],l=[];r.ka.isEmpty()||(r.ka.forEach((c,h)=>{l.push(r.Ha(h,e,t).then(f=>{var m;if((f||t)&&r.isPrimaryClient){const v=f?!f.fromCache:(m=t==null?void 0:t.targetChanges.get(h.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(h.targetId,v?"current":"not-current")}if(f){s.push(f);const v=Iv.Yi(h.targetId,f);o.push(v)}}))}),await Promise.all(l),r.La.p_(s),await async function(h,f){const m=ke(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>ee.forEach(f,E=>ee.forEach(E.Hi,x=>m.persistence.referenceDelegate.addReference(v,E.targetId,x)).next(()=>ee.forEach(E.Ji,x=>m.persistence.referenceDelegate.removeReference(v,E.targetId,x)))))}catch(v){if(!Ul(v))throw v;he(xv,"Failed to update sequence numbers: "+v)}for(const v of f){const E=v.targetId;if(!v.fromCache){const x=m.Ts.get(E),R=x.snapshotVersion,A=x.withLastLimboFreeSnapshotVersion(R);m.Ts=m.Ts.insert(E,A)}}}(r.localStore,o))}async function H4(n,e){const t=ke(n);if(!t.currentUser.isEqual(e)){he(Lv,"User change. New user:",e.toKey());const r=await ES(t.localStore,e);t.currentUser=e,function(o,l){o.Ga.forEach(c=>{c.forEach(h=>{h.reject(new fe(Z.CANCELLED,l))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Wc(t,r.Rs)}}function G4(n,e){const t=ke(n),r=t.Ka.get(e);if(r&&r.Ba)return Ve().add(r.key);{let s=Ve();const o=t.qa.get(e);if(!o)return s;for(const l of o){const c=t.ka.get(l);s=s.unionWith(c.view.ba)}return s}}function VS(n){const e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=OS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=G4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$4.bind(null,e),e.La.p_=b4.bind(null,e.eventManager),e.La.Ja=k4.bind(null,e.eventManager),e}function K4(n){const e=ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=z4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=W4.bind(null,e),e}class pf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return JM(this.persistence,new QM,e.initialUser,this.serializer)}Xa(e){return new wS(Tv.ri,this.serializer)}Za(e){return new i4}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pf.provider={build:()=>new pf};class Q4 extends pf{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Ye(this.persistence.referenceDelegate instanceof hf);const r=this.persistence.referenceDelegate.garbageCollector;return new OM(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new wS(r=>hf.ri(r,t),this.serializer)}}class dy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>kT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=H4.bind(null,this.syncEngine),await R4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new P4}()}createDatastore(e){const t=Zf(e.databaseInfo.databaseId),r=function(o){return new c4(o)}(e.databaseInfo);return function(o,l,c,h){return new p4(o,l,c,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,o,l,c){return new g4(r,s,o,l,c)}(this.localStore,this.datastore,e.asyncQueue,t=>kT(this.syncEngine,t,0),function(){return CT.D()?new CT:new o4}())}createSyncEngine(e,t){return function(s,o,l,c,h,f,m){const v=new L4(s,o,l,c,h,f);return m&&(v.ja=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const o=ke(s);he(ta,"RemoteStore shutting down."),o.W_.add(5),await zc(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}dy.provider={build:()=>new dy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Qs("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="FirestoreClient";class Y4{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=cn.UNAUTHENTICATED,this.clientId=DC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{he(oo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(he(oo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=bv(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function fg(n,e){n.asyncQueue.verifyOperationInProgress(),he(oo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await ES(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function DT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await X4(n);he(oo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>RT(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>RT(e.remoteStore,s)),n._onlineComponents=e}async function X4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(oo,"Using user provided OfflineComponentProvider");try{await fg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===Z.FAILED_PRECONDITION||s.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;vl("Error using user provided cache. Falling back to memory cache: "+t),await fg(n,new pf)}}else he(oo,"Using default OfflineComponentProvider"),await fg(n,new Q4(void 0));return n._offlineComponents}async function FS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(oo,"Using user provided OnlineComponentProvider"),await DT(n,n._uninitializedComponentsProvider._online)):(he(oo,"Using default OnlineComponentProvider"),await DT(n,new dy))),n._onlineComponents}function J4(n){return FS(n).then(e=>e.syncEngine)}async function mf(n){const e=await FS(n),t=e.eventManager;return t.onListen=M4.bind(null,e.syncEngine),t.onUnlisten=F4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=j4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=U4.bind(null,e.syncEngine),t}function Z4(n,e,t={}){const r=new zs;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,h,f){const m=new jv({next:E=>{m.su(),l.enqueueAndForget(()=>Nv(o,v));const x=E.docs.has(c);!x&&E.fromCache?f.reject(new fe(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&E.fromCache&&h&&h.source==="server"?f.reject(new fe(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(E)},error:E=>f.reject(E)}),v=new Ov(Gf(c.path),m,{includeMetadataChanges:!0,Ta:!0});return kv(o,v)}(await mf(n),n.asyncQueue,e,t,r)),r.promise}function ej(n,e,t={}){const r=new zs;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,h,f){const m=new jv({next:E=>{m.su(),l.enqueueAndForget(()=>Nv(o,v)),E.fromCache&&h.source==="server"?f.reject(new fe(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),v=new Ov(c,m,{includeMetadataChanges:!0,Ta:!0});return kv(o,v)}(await mf(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(n,e,t){if(!t)throw new fe(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function tj(n,e,t,r){if(e===!0&&r===!0)throw new fe(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function LT(n){if(!_e.isDocumentKey(n))throw new fe(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function MT(n){if(_e.isDocumentKey(n))throw new fe(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function np(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se()}function Mn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=np(n);throw new fe(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="firestore.googleapis.com",jT=!0;class VT{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$S,this.ssl=jT}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:jT;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_S;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NM)throw new fe(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=US((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rp{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lL;switch(r.type){case"firstParty":return new hL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=OT.get(t);r&&(he("ComponentProvider","Removing Datastore"),OT.delete(t),r.terminate())}(this),Promise.resolve()}}function nj(n,e,t,r={}){var s;const o=(n=Mn(n,rp))._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o.host!==$S&&o.host!==c&&vl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},o),{host:c,ssl:!1,emulatorOptions:r});if(!Ji(h,l)&&(n._setSettings(h),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=cn.MOCK_USER;else{f=Xy(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new fe(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new cn(v)}n._authCredentials=new uL(new NC(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mo(this.firestore,e,this._query)}}class gn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}}class Ki extends mo{constructor(e,t,r){super(e,t,Gf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new _e(e))}withConverter(e){return new Ki(this.firestore,e,this._path)}}function Us(n,e,...t){if(n=rt(n),BS("collection","path",e),n instanceof rp){const r=ut.fromString(e,...t);return MT(r),new Ki(n,null,r)}{if(!(n instanceof gn||n instanceof Ki))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ut.fromString(e,...t));return MT(r),new Ki(n.firestore,null,r)}}function jt(n,e,...t){if(n=rt(n),arguments.length===1&&(e=DC.newId()),BS("doc","path",e),n instanceof rp){const r=ut.fromString(e,...t);return LT(r),new gn(n,null,new _e(r))}{if(!(n instanceof gn||n instanceof Ki))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ut.fromString(e,...t));return LT(r),new gn(n.firestore,n instanceof Ki?n.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="AsyncQueue";class UT{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new IS(this,"async_queue_retry"),this.bu=()=>{const r=hg();r&&he(FT,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=e;const t=hg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=hg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new zs;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Ul(e))throw e;he(FT,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),c}(r);throw Qs("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.Su=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=Pv.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&Se()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function BT(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1}(n,["next","error","complete"])}class Xs extends rp{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new UT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new UT(e),this._firestoreClient=void 0,await e}}}function qc(n,e){const t=typeof n=="object"?n:Vf(),r=typeof n=="string"?n:af,s=Mc(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=Qy("firestore");o&&nj(s,...o)}return s}function sp(n){if(n._terminated)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||rj(n),n._firestoreClient}function rj(n){var e,t,r;const s=n._freezeSettings(),o=function(c,h,f,m){return new SL(c,h,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,US(m.experimentalLongPollingOptions),m.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new Y4(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xl(nn.fromBase64String(e))}catch(t){throw new fe(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xl(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj=/^__.*__$/;class ij{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new po(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bc(e,this.data,t,this.fieldTransforms)}}class zS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new po(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function WS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se()}}class Uv{constructor(e,t,r,s,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Uv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Ku(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return gf(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(WS(this.Lu)&&sj.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class oj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Zf(e)}ju(e,t,r,s=!1){return new Uv({Lu:e,methodName:t,zu:r,path:tn.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ap(n){const e=n._freezeSettings(),t=Zf(n._databaseId);return new oj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qS(n,e,t,r,s,o={}){const l=n.ju(o.merge||o.mergeFields?2:0,e,t,s);$v("Data must be an object, but it was:",l,r);const c=HS(r,l);let h,f;if(o.merge)h=new Yn(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const m=[];for(const v of o.mergeFields){const E=hy(e,v,t);if(!l.contains(E))throw new fe(Z.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);KS(m,E)||m.push(E)}h=new Yn(m),f=l.fieldTransforms.filter(v=>h.covers(v.field))}else h=null,f=l.fieldTransforms;return new ij(new On(c),h,f)}class lp extends op{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lp}}class Bv extends op{_toFieldTransform(e){return new JL(e.path,new xc)}isEqual(e){return e instanceof Bv}}function aj(n,e,t,r){const s=n.ju(1,e,t);$v("Data must be an object, but it was:",s,r);const o=[],l=On.empty();fo(r,(h,f)=>{const m=zv(e,h,t);f=rt(f);const v=s.Ku(m);if(f instanceof lp)o.push(m);else{const E=Hc(f,v);E!=null&&(o.push(m),l.set(m,E))}});const c=new Yn(o);return new zS(l,c,s.fieldTransforms)}function lj(n,e,t,r,s,o){const l=n.ju(1,e,t),c=[hy(e,r,t)],h=[s];if(o.length%2!=0)throw new fe(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)c.push(hy(e,o[E])),h.push(o[E+1]);const f=[],m=On.empty();for(let E=c.length-1;E>=0;--E)if(!KS(f,c[E])){const x=c[E];let R=h[E];R=rt(R);const A=l.Ku(x);if(R instanceof lp)f.push(x);else{const S=Hc(R,A);S!=null&&(f.push(x),m.set(x,S))}}const v=new Yn(f);return new zS(m,v,l.fieldTransforms)}function uj(n,e,t,r=!1){return Hc(t,n.ju(r?4:3,e))}function Hc(n,e){if(GS(n=rt(n)))return $v("Unsupported field value:",e,n),HS(n,e);if(n instanceof op)return function(r,s){if(!WS(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const o=[];let l=0;for(const c of r){let h=Hc(c,s.Uu(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}}(n,e)}return function(r,s){if((r=rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QL(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ft.fromDate(r);return{timestampValue:df(s.serializer,o)}}if(r instanceof Ft){const o=new Ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:df(s.serializer,o)}}if(r instanceof Vv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xl)return{bytesValue:hS(s.serializer,r._byteString)};if(r instanceof gn){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Wu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:wv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Fv)return function(l,c){return{mapValue:{fields:{[BC]:{stringValue:$C},[lf]:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw c.Wu("VectorValues must only contain numeric values.");return gv(c.serializer,f)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${np(r)}`)}(n,e)}function HS(n,e){const t={};return LC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fo(n,(r,s)=>{const o=Hc(s,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function GS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ft||n instanceof Vv||n instanceof xl||n instanceof gn||n instanceof op||n instanceof Fv)}function $v(n,e,t){if(!GS(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=np(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function hy(n,e,t){if((e=rt(e))instanceof ip)return e._internalPath;if(typeof e=="string")return zv(n,e);throw gf("Field path arguments must be of type string or ",n,!1,void 0,t)}const cj=new RegExp("[~\\*/\\[\\]]");function zv(n,e,t){if(e.search(cj)>=0)throw gf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ip(...e.split("."))._internalPath}catch{throw gf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gf(n,e,t,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${r}`),l&&(h+=` in document ${s}`),h+=")"),new fe(Z.INVALID_ARGUMENT,c+n+h)}function KS(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(up("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class dj extends QS{data(){return super.data()}}function up(n,e){return typeof e=="string"?zv(n,e):e instanceof ip?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wv{}class XS extends Wv{}function zi(n,e,...t){let r=[];e instanceof Wv&&r.push(e),r=r.concat(t),function(o){const l=o.filter(h=>h instanceof qv).length,c=o.filter(h=>h instanceof cp).length;if(l>1||l>0&&c>0)throw new fe(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class cp extends XS{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new cp(e,t,r)}_apply(e){const t=this._parse(e);return JS(e._query,t),new mo(e.firestore,e.converter,ty(e._query,t))}_parse(e){const t=ap(e.firestore);return function(o,l,c,h,f,m,v){let E;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){zT(v,m);const R=[];for(const A of v)R.push($T(h,o,A));E={arrayValue:{values:R}}}else E=$T(h,o,v)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||zT(v,m),E=uj(c,l,v,m==="in"||m==="not-in");return kt.create(f,m,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function dr(n,e,t){const r=e,s=up("where",n);return cp._create(s,r,t)}class qv extends Wv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:$r.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,o){let l=s;const c=o.getFlattenedFilters();for(const h of c)JS(l,h),l=ty(l,h)}(e._query,t),new mo(e.firestore,e.converter,ty(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hv extends XS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Hv(e,t)}_apply(e){const t=function(s,o,l){if(s.startAt!==null)throw new fe(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new fe(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ic(o,l)}(e._query,this._field,this._direction);return new mo(e.firestore,e.converter,function(s,o){const l=s.explicitOrderBy.concat([o]);return new Bl(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function OB(n,e="asc"){const t=e,r=up("orderBy",n);return Hv._create(r,t)}function $T(n,e,t){if(typeof(t=rt(t))=="string"){if(t==="")throw new fe(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!YC(e)&&t.indexOf("/")!==-1)throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ut.fromString(t));if(!_e.isDocumentKey(r))throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rT(n,new _e(r))}if(t instanceof gn)return rT(n,t._key);throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${np(t)}.`)}function zT(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JS(n,e){const t=function(s,o){for(const l of s)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class hj{convertValue(e,t="none"){switch(so(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ro(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return fo(e,(s,o)=>{r[s]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,s;const o=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[lf].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(l=>St(l.doubleValue));return new Fv(o)}convertGeoPoint(e){return new Vv(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Hf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(wc(e));default:return null}}convertTimestamp(e){const t=no(e);return new Ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ut.fromString(e);Ye(vS(r));const s=new Ec(r.get(1),r.get(3)),o=new _e(r.popFirst(5));return s.isEqual(t)||Qs(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eR extends QS{constructor(e,t,r,s,o,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(up("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Wh extends eR{data(e={}){return super.data(e)}}class tR{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new ec(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Wh(this._firestore,this._userDataWriter,r.key,r,new ec(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(c=>{const h=new Wh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ec(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const h=new Wh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ec(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,m=-1;return c.type!==0&&(f=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),m=l.indexOf(c.doc.key)),{type:fj(c.type),doc:h,oldIndex:f,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(n){n=Mn(n,gn);const e=Mn(n.firestore,Xs);return Z4(sp(e),n._key).then(t=>rR(e,n,t))}class Gv extends hj{constructor(e){super(),this.firestore=e}convertBytes(e){return new xl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,t)}}function hr(n){n=Mn(n,mo);const e=Mn(n.firestore,Xs),t=sp(e),r=new Gv(e);return YS(n._query),ej(t,n._query).then(s=>new tR(e,r,n,s))}function Kv(n,e,t){n=Mn(n,gn);const r=Mn(n.firestore,Xs),s=ZS(n.converter,e,t);return dp(r,[qS(ap(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,mr.none())])}function Qi(n,e,t,...r){n=Mn(n,gn);const s=Mn(n.firestore,Xs),o=ap(s);let l;return l=typeof(e=rt(e))=="string"||e instanceof ip?lj(o,"updateDoc",n._key,e,t,r):aj(o,"updateDoc",n._key,e),dp(s,[l.toMutation(n._key,mr.exists(!0))])}function LB(n){return dp(Mn(n.firestore,Xs),[new yv(n._key,mr.none())])}function MB(n,e){const t=Mn(n.firestore,Xs),r=jt(n),s=ZS(n.converter,e);return dp(t,[qS(ap(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,mr.exists(!1))]).then(()=>r)}function nR(n,...e){var t,r,s;n=rt(n);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||BT(e[l])||(o=e[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(BT(e[l])){const v=e[l];e[l]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[l+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[l+2]=(s=v.complete)===null||s===void 0?void 0:s.bind(v)}let h,f,m;if(n instanceof gn)f=Mn(n.firestore,Xs),m=Gf(n._key.path),h={next:v=>{e[l]&&e[l](rR(f,n,v))},error:e[l+1],complete:e[l+2]};else{const v=Mn(n,mo);f=Mn(v.firestore,Xs),m=v._query;const E=new Gv(f);h={next:x=>{e[l]&&e[l](new tR(f,E,v,x))},error:e[l+1],complete:e[l+2]},YS(n._query)}return function(E,x,R,A){const S=new jv(A),M=new Ov(x,S,R);return E.asyncQueue.enqueueAndForget(async()=>kv(await mf(E),M)),()=>{S.su(),E.asyncQueue.enqueueAndForget(async()=>Nv(await mf(E),M))}}(sp(f),m,c,h)}function dp(n,e){return function(r,s){const o=new zs;return r.asyncQueue.enqueueAndForget(async()=>B4(await J4(r),s,o)),o.promise}(sp(n),e)}function rR(n,e,t){const r=t.docs.get(e._key),s=new Gv(n);return new eR(n,s,e._key,r,new ec(t.hasPendingWrites,t.fromCache),e.converter)}function pj(){return new Bv("serverTimestamp")}(function(e,t=!0){(function(s){Vl=s})(uo),Zi(new Hs("firestore",(r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new Xs(new cL(r.getProvider("auth-internal")),new fL(l,r.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new fe(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ec(f.options.projectId,m)}(l,s),l);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),pr(HE,GE,e),pr(HE,GE,"esm2017")})();var WT={};const qT="@firebase/database",HT="1.0.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sR="";function mj(n){sR=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),en(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:gc(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return ri(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new gj(e)}}catch{}return new yj},Qo=iR("localStorage"),vj=iR("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=new jf("@firebase/database"),_j=function(){let n=1;return function(){return n++}}(),oR=function(n){const e=Ak(n),t=new Ik;t.update(e);const r=t.digest();return Ky.encodeByteArray(r)},Gc=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Gc.apply(null,r):typeof r=="object"?e+=en(r):e+=r,e+=" "}return e};let oc=null,GT=!0;const wj=function(n,e){ce(!0,"Can't turn on custom loggers persistently."),fl.logLevel=Me.VERBOSE,oc=fl.log.bind(fl)},hn=function(...n){if(GT===!0&&(GT=!1,oc===null&&vj.get("logging_enabled")===!0&&wj()),oc){const e=Gc.apply(null,n);oc(e)}},Kc=function(n){return function(...e){hn(n,...e)}},fy=function(...n){const e="FIREBASE INTERNAL ERROR: "+Gc(...n);fl.error(e)},Js=function(...n){const e=`FIREBASE FATAL ERROR: ${Gc(...n)}`;throw fl.error(e),new Error(e)},Jn=function(...n){const e="FIREBASE WARNING: "+Gc(...n);fl.warn(e)},Ej=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Jn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},aR=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Tj=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Cl="[MIN_NAME]",na="[MAX_NAME]",zl=function(n,e){if(n===e)return 0;if(n===Cl||e===na)return-1;if(e===Cl||n===na)return 1;{const t=KT(n),r=KT(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},Ij=function(n,e){return n===e?0:n<e?-1:1},Bu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+en(e))},Qv=function(n){if(typeof n!="object"||n===null)return en(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=en(e[r]),t+=":",t+=Qv(n[e[r]]);return t+="}",t},lR=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let s=0;s<t;s+=e)s+e>t?r.push(n.substring(s,t)):r.push(n.substring(s,s+e));return r};function yr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const uR=function(n){ce(!aR(n),"Invalid JSON number");const e=11,t=52,r=(1<<e-1)-1;let s,o,l,c,h;n===0?(o=0,l=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=c+r,l=Math.round(n*Math.pow(2,t-c)-Math.pow(2,t))):(o=0,l=Math.round(n/Math.pow(2,1-r-t))));const f=[];for(h=t;h;h-=1)f.push(l%2?1:0),l=Math.floor(l/2);for(h=e;h;h-=1)f.push(o%2?1:0),o=Math.floor(o/2);f.push(s?1:0),f.reverse();const m=f.join("");let v="";for(h=0;h<64;h+=8){let E=parseInt(m.substr(h,8),2).toString(16);E.length===1&&(E="0"+E),v=v+E}return v.toLowerCase()},xj=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Cj=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},Sj=new RegExp("^-?(0*)\\d{1,10}$"),Rj=-2147483648,Aj=2147483647,KT=function(n){if(Sj.test(n)){const e=Number(n);if(e>=Rj&&e<=Aj)return e}return null},Qc=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Jn("Exception was thrown by user callback.",t),e},Math.floor(0))}},Pj=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ac=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,pn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Jn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(hn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Jn(e)}}class qh{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}qh.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="5",cR="v",dR="s",hR="r",fR="f",pR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,mR="ls",gR="p",py="ac",yR="websocket",vR="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,t,r,s,o=!1,l="",c=!1,h=!1,f=null){this.secure=t,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=h,this.emulatorOptions=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Qo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Qo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Nj(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function wR(n,e,t){ce(typeof e=="string","typeof type must == string"),ce(typeof t=="object","typeof params must == object");let r;if(e===yR)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===vR)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Nj(n)&&(t.ns=n.namespace);const s=[];return yr(t,(o,l)=>{s.push(o+"="+l)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(){this.counters_={}}incrementCounter(e,t=1){ri(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return sk(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg={},mg={};function Xv(n){const e=n.toString();return pg[e]||(pg[e]=new Dj),pg[e]}function Oj(n,e){const t=n.toString();return mg[t]||(mg[t]=e()),mg[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Qc(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="start",Mj="close",jj="pLPCommand",Vj="pRTLPCB",ER="id",TR="pw",IR="ser",Fj="cb",Uj="seg",Bj="ts",$j="d",zj="dframe",xR=1870,CR=30,Wj=xR-CR,qj=25e3,Hj=3e4;class ol{constructor(e,t,r,s,o,l,c){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.transportSessionId=l,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Kc(e),this.stats_=Xv(t),this.urlFn=h=>(this.appCheckToken&&(h[py]=this.appCheckToken),wR(t,vR,h))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Lj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Hj)),Tj(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Jv((...o)=>{const[l,c,h,f,m]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===QT)this.id=c,this.password=h;else if(l===Mj)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...o)=>{const[l,c]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,c)},()=>{this.onClosed_()},this.urlFn);const r={};r[QT]="t",r[IR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Fj]=this.scriptTagHolder.uniqueCallbackIdentifier),r[cR]=Yv,this.transportSessionId&&(r[dR]=this.transportSessionId),this.lastSessionId&&(r[mR]=this.lastSessionId),this.applicationId&&(r[gR]=this.applicationId),this.appCheckToken&&(r[py]=this.appCheckToken),typeof location<"u"&&location.hostname&&pR.test(location.hostname)&&(r[hR]=fR);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ol.forceAllow_=!0}static forceDisallow(){ol.forceDisallow_=!0}static isAvailable(){return ol.forceAllow_?!0:!ol.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!xj()&&!Cj()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=en(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=Nx(t),s=lR(r,Wj);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={};r[zj]="t",r[ER]=e,r[TR]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=en(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Jv{constructor(e,t,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=_j(),window[jj+this.uniqueCallbackIdentifier]=e,window[Vj+this.uniqueCallbackIdentifier]=t,this.myIFrame=Jv.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(c){hn("frame writing exception"),c.stack&&hn(c.stack),hn(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||hn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[ER]=this.myID,e[TR]=this.myPW,e[IR]=this.currentSerial;let t=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+CR+r.length<=xR;){const l=this.pendingSegs.shift();r=r+"&"+Uj+s+"="+l.seg+"&"+Bj+s+"="+l.ts+"&"+$j+s+"="+l.d,s++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(r,Math.floor(qj)),o=()=>{clearTimeout(s),r()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{hn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=16384,Kj=45e3;let yf=null;typeof MozWebSocket<"u"?yf=MozWebSocket:typeof WebSocket<"u"&&(yf=WebSocket);class Mr{constructor(e,t,r,s,o,l,c){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Kc(this.connId),this.stats_=Xv(t),this.connURL=Mr.connectionURL_(t,l,c,s,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,s,o){const l={};return l[cR]=Yv,typeof location<"u"&&location.hostname&&pR.test(location.hostname)&&(l[hR]=fR),t&&(l[dR]=t),r&&(l[mR]=r),s&&(l[py]=s),o&&(l[gR]=o),wR(e,yR,l)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Qo.set("previous_websocket_failure",!0);try{let r;pk(),this.mySock=new yf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Mr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&yf!==null&&!Mr.forceDisallow_}static previouslyFailed(){return Qo.isInMemoryStorage||Qo.get("previous_websocket_failure")===!0}markConnectionHealthy(){Qo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=gc(t);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ce(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const t=en(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=lR(t,Gj);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Kj))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Mr.responsesRequiredToBeHealthy=2;Mr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{static get ALL_TRANSPORTS(){return[ol,Mr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Mr&&Mr.isAvailable();let r=t&&!Mr.previouslyFailed();if(e.webSocketOnly&&(t||Jn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Mr];else{const s=this.transports_=[];for(const o of Rc.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);Rc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Rc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=6e4,Yj=5e3,Xj=10*1024,Jj=100*1024,gg="t",YT="d",Zj="s",XT="r",eV="e",JT="o",ZT="a",eI="n",tI="p",tV="h";class nV{constructor(e,t,r,s,o,l,c,h,f,m){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=l,this.onReady_=c,this.onDisconnect_=h,this.onKill_=f,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Kc("c:"+this.id+":"),this.transportManager_=new Rc(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=ac(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Jj?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Xj?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(gg in e){const t=e[gg];t===ZT?this.upgradeIfSecondaryHealthy_():t===XT?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===JT&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Bu("t",e),r=Bu("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:tI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ZT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:eI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Bu("t",e),r=Bu("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Bu(gg,e);if(YT in e){const r=e[YT];if(t===tV){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===eI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===Zj?this.onConnectionShutdown_(r):t===XT?this.onReset_(r):t===eV?fy("Server Error: "+r):t===JT?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):fy("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Yv!==r&&Jn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),ac(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Qj))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ac(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Yj))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:tI,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Qo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{put(e,t,r,s){}merge(e,t,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.allowedEvents_=e,this.listeners_={},ce(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const s=this.getInitialEvent(e);s&&t.apply(r,s)}off(e,t,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let o=0;o<s.length;o++)if(s[o].callback===t&&(!r||r===s[o].context)){s.splice(o,1);return}}validateEventType_(e){ce(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf extends RR{static getInstance(){return new vf}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Jy()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ce(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=32,rI=768;class ct{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function Ze(){return new ct("")}function We(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ao(n){return n.pieces_.length-n.pieceNum_}function lt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ct(n.pieces_,e)}function AR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function rV(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function PR(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function bR(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ct(e,0)}function Kt(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof ct)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&t.push(r[s])}return new ct(t,0)}function Be(n){return n.pieceNum_>=n.pieces_.length}function fr(n,e){const t=We(n),r=We(e);if(t===null)return e;if(t===r)return fr(lt(n),lt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function kR(n,e){if(ao(n)!==ao(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Vr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(ao(n)>ao(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class sV{constructor(e,t){this.errorPrefix_=t,this.parts_=PR(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Mf(this.parts_[r]);NR(this)}}function iV(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Mf(e),NR(n)}function oV(n){const e=n.parts_.pop();n.byteLength_-=Mf(e),n.parts_.length>0&&(n.byteLength_-=1)}function NR(n){if(n.byteLength_>rI)throw new Error(n.errorPrefix_+"has a key path longer than "+rI+" bytes ("+n.byteLength_+").");if(n.parts_.length>nI)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+nI+") or object contains a cycle "+Ho(n))}function Ho(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv extends RR{static getInstance(){return new Zv}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return ce(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u=1e3,aV=60*5*1e3,sI=30*1e3,lV=1.3,uV=3e4,cV="server_kill",iI=3;class Ws extends SR{constructor(e,t,r,s,o,l,c,h){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=l,this.appCheckTokenProvider_=c,this.authOverride_=h,this.id=Ws.nextPersistentConnectionId_++,this.log_=Kc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=$u,this.maxReconnectDelay_=aV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Zv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&vf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const s=++this.requestNumber_,o={r:s,a:e,b:t};this.log_(en(o)),ce(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const t=new Yy,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const c=l.d;l.s==="ok"?t.resolve(c):t.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,r,s){this.initConnection_();const o=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ce(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:t,query:e,tag:r};this.listens.get(l).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(e){const t=e.query,r=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r},l="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(l,o,c=>{const h=c.d,f=c.s;Ws.warnOnListenWarnings_(h,t),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",c),f!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(f,h))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&ri(e,"w")){const r=yl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();Jn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Tk(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=sI)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=Ek(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(t,r,s=>{const o=s.s,l=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,r=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(e,t){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,t)}sendUnlisten_(e,t,r,s){this.log_("Unlisten on "+e+" for "+t);const o={p:e},l="n";s&&(o.q=r,o.t=s),this.sendRequest(l,o)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,s){const o={p:t,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,l=>{s&&setTimeout(()=>{s(l.s,l.d)},Math.floor(0))})}put(e,t,r,s){this.putInternal("p",e,t,r,s)}merge(e,t,r,s){this.putInternal("m",e,t,r,s)}putInternal(e,t,r,s,o){this.initConnection_();const l={p:t,d:r};o!==void 0&&(l.h=o),this.outstandingPuts_.push({action:e,request:l,onComplete:s}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,r=>{if(r.s!=="ok"){const o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+en(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):fy("Unrecognized action received from server: "+en(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ce(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$u,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=$u,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>uV&&(this.reconnectDelay_=$u),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*lV)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Ws.nextConnectionId_++,o=this.lastSessionId;let l=!1,c=null;const h=function(){c?c.close():(l=!0,r())},f=function(v){ce(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(v)};this.realtime_={close:h,sendRequest:f};const m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,E]=await Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);l?hn("getToken() completed but was canceled"):(hn("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=E&&E.token,c=new nV(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,x=>{Jn(x+" ("+this.repoInfo_.toString()+")"),this.interrupt(cV)},o))}catch(v){this.log_("Failed to get token: "+v),l||(this.repoInfo_.nodeAdmin&&Jn(v),h())}}}interrupt(e){hn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){hn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Vg(this.interruptReasons_)&&(this.reconnectDelay_=$u,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;t?r=t.map(o=>Qv(o)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const r=new ct(e).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(t),o.delete(t),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,t){hn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=iI&&(this.reconnectDelay_=sI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){hn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=iI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+sR.replace(/\./g,"-")]=1,Jy()?e["framework.cordova"]=1:jx()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=vf.getInstance().currentlyOnline();return Vg(this.interruptReasons_)&&e}}Ws.nextPersistentConnectionId_=0;Ws.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new qe(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new qe(Cl,e),s=new qe(Cl,t);return this.compare(r,s)!==0}minPost(){return qe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ch;class DR extends hp{static get __EMPTY_NODE(){return Ch}static set __EMPTY_NODE(e){Ch=e}compare(e,t){return zl(e.name,t.name)}isDefinedOn(e){throw Ll("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return qe.MIN}maxPost(){return new qe(na,Ch)}makePost(e,t){return ce(typeof e=="string","KeyIndex indexValue must always be a string."),new qe(e,Ch)}toString(){return".key"}}const pl=new DR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,t,r,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,s&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Gt{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??Gt.RED,this.left=s??Ln.EMPTY_NODE,this.right=o??Ln.EMPTY_NODE}copy(e,t,r,s,o){return new Gt(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s=s.copy(null,t,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ln.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,s;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return Ln.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Gt.RED=!0;Gt.BLACK=!1;class dV{copy(e,t,r,s,o){return this}insert(e,t,r){return new Gt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ln{constructor(e,t=Ln.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ln(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Gt.BLACK,null,null))}remove(e){return new Ln(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Gt.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,s=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Sh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Sh(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Sh(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Sh(this.root_,null,this.comparator_,!0,e)}}Ln.EMPTY_NODE=new dV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(n,e){return zl(n.name,e.name)}function e_(n,e){return zl(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let my;function fV(n){my=n}const OR=function(n){return typeof n=="number"?"number:"+uR(n):"string:"+n},LR=function(n){if(n.isLeafNode()){const e=n.val();ce(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ri(e,".sv"),"Priority must be a string or number.")}else ce(n===my||n.isEmpty(),"priority of unexpected type.");ce(n===my||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oI;class qt{static set __childrenNodeConstructor(e){oI=e}static get __childrenNodeConstructor(){return oI}constructor(e,t=qt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ce(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),LR(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new qt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:qt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Be(e)?this:We(e)===".priority"?this.priorityNode_:qt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:qt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=We(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(ce(r!==".priority"||ao(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,qt.__childrenNodeConstructor.EMPTY_NODE.updateChild(lt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+OR(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=uR(this.value_):e+=this.value_,this.lazyHash_=oR(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===qt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof qt.__childrenNodeConstructor?-1:(ce(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,s=qt.VALUE_TYPE_ORDER.indexOf(t),o=qt.VALUE_TYPE_ORDER.indexOf(r);return ce(s>=0,"Unknown leaf type: "+t),ce(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}qt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MR,jR;function pV(n){MR=n}function mV(n){jR=n}class gV extends hp{compare(e,t){const r=e.node.getPriority(),s=t.node.getPriority(),o=r.compareTo(s);return o===0?zl(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return qe.MIN}maxPost(){return new qe(na,new qt("[PRIORITY-POST]",jR))}makePost(e,t){const r=MR(e);return new qe(t,new qt("[PRIORITY-POST]",r))}toString(){return".priority"}}const mn=new gV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV=Math.log(2);class vV{constructor(e){const t=o=>parseInt(Math.log(o)/yV,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const _f=function(n,e,t,r){n.sort(e);const s=function(h,f){const m=f-h;let v,E;if(m===0)return null;if(m===1)return v=n[h],E=t?t(v):v,new Gt(E,v.node,Gt.BLACK,null,null);{const x=parseInt(m/2,10)+h,R=s(h,x),A=s(x+1,f);return v=n[x],E=t?t(v):v,new Gt(E,v.node,Gt.BLACK,R,A)}},o=function(h){let f=null,m=null,v=n.length;const E=function(R,A){const S=v-R,M=v;v-=R;const U=s(S+1,M),B=n[S],W=t?t(B):B;x(new Gt(W,B.node,A,null,U))},x=function(R){f?(f.left=R,f=R):(m=R,f=R)};for(let R=0;R<h.count;++R){const A=h.nextBitIsOne(),S=Math.pow(2,h.count-(R+1));A?E(S,Gt.BLACK):(E(S,Gt.BLACK),E(S,Gt.RED))}return m},l=new vV(n.length),c=o(l);return new Ln(r||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yg;const tl={};class Bs{static get Default(){return ce(tl&&mn,"ChildrenNode.ts has not been loaded"),yg=yg||new Bs({".priority":tl},{".priority":mn}),yg}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=yl(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ln?t:null}hasIndex(e){return ri(this.indexSet_,e.toString())}addIndex(e,t){ce(e!==pl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const o=t.getIterator(qe.Wrap);let l=o.getNext();for(;l;)s=s||e.isDefinedOn(l.node),r.push(l),l=o.getNext();let c;s?c=_f(r,e.getCompare()):c=tl;const h=e.toString(),f=Object.assign({},this.indexSet_);f[h]=e;const m=Object.assign({},this.indexes_);return m[h]=c,new Bs(m,f)}addToIndexes(e,t){const r=Jh(this.indexes_,(s,o)=>{const l=yl(this.indexSet_,o);if(ce(l,"Missing index implementation for "+o),s===tl)if(l.isDefinedOn(e.node)){const c=[],h=t.getIterator(qe.Wrap);let f=h.getNext();for(;f;)f.name!==e.name&&c.push(f),f=h.getNext();return c.push(e),_f(c,l.getCompare())}else return tl;else{const c=t.get(e.name);let h=s;return c&&(h=h.remove(new qe(e.name,c))),h.insert(e,e.node)}});return new Bs(r,this.indexSet_)}removeFromIndexes(e,t){const r=Jh(this.indexes_,s=>{if(s===tl)return s;{const o=t.get(e.name);return o?s.remove(new qe(e.name,o)):s}});return new Bs(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zu;class Qe{static get EMPTY_NODE(){return zu||(zu=new Qe(new Ln(e_),null,Bs.Default))}constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&LR(this.priorityNode_),this.children_.isEmpty()&&ce(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||zu}updatePriority(e){return this.children_.isEmpty()?this:new Qe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?zu:t}}getChild(e){const t=We(e);return t===null?this:this.getImmediateChild(t).getChild(lt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ce(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const r=new qe(e,t);let s,o;t.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(r,this.children_));const l=s.isEmpty()?zu:this.priorityNode_;return new Qe(s,l,o)}}updateChild(e,t){const r=We(e);if(r===null)return t;{ce(We(e)!==".priority"||ao(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(lt(e),t);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,s=0,o=!0;if(this.forEachChild(mn,(l,c)=>{t[l]=c.val(e),r++,o&&Qe.INTEGER_REGEXP_.test(l)?s=Math.max(s,Number(l)):o=!1}),!e&&o&&s<2*r){const l=[];for(const c in t)l[c]=t[c];return l}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+OR(this.getPriority().val())+":"),this.forEachChild(mn,(t,r)=>{const s=r.hash();s!==""&&(e+=":"+t+":"+s)}),this.lazyHash_=e===""?"":oR(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new qe(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new qe(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new qe(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,qe.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,qe.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Yc?-1:0}withIndex(e){if(e===pl||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Qe(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===pl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const r=this.getIterator(mn),s=t.getIterator(mn);let o=r.getNext(),l=s.getNext();for(;o&&l;){if(o.name!==l.name||!o.node.equals(l.node))return!1;o=r.getNext(),l=s.getNext()}return o===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===pl?null:this.indexMap_.get(e.toString())}}Qe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class _V extends Qe{constructor(){super(new Ln(e_),Qe.EMPTY_NODE,Bs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Qe.EMPTY_NODE}isEmpty(){return!1}}const Yc=new _V;Object.defineProperties(qe,{MIN:{value:new qe(Cl,Qe.EMPTY_NODE)},MAX:{value:new qe(na,Yc)}});DR.__EMPTY_NODE=Qe.EMPTY_NODE;qt.__childrenNodeConstructor=Qe;fV(Yc);mV(Yc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV=!0;function fn(n,e=null){if(n===null)return Qe.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ce(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new qt(t,fn(e))}if(!(n instanceof Array)&&wV){const t=[];let r=!1;if(yr(n,(l,c)=>{if(l.substring(0,1)!=="."){const h=fn(c);h.isEmpty()||(r=r||!h.getPriority().isEmpty(),t.push(new qe(l,h)))}}),t.length===0)return Qe.EMPTY_NODE;const o=_f(t,hV,l=>l.name,e_);if(r){const l=_f(t,mn.getCompare());return new Qe(o,fn(e),new Bs({".priority":l},{".priority":mn}))}else return new Qe(o,fn(e),Bs.Default)}else{let t=Qe.EMPTY_NODE;return yr(n,(r,s)=>{if(ri(n,r)&&r.substring(0,1)!=="."){const o=fn(s);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(fn(e))}}pV(fn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV extends hp{constructor(e){super(),this.indexPath_=e,ce(!Be(e)&&We(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),s=this.extractChild(t.node),o=r.compareTo(s);return o===0?zl(e.name,t.name):o}makePost(e,t){const r=fn(e),s=Qe.EMPTY_NODE.updateChild(this.indexPath_,r);return new qe(t,s)}maxPost(){const e=Qe.EMPTY_NODE.updateChild(this.indexPath_,Yc);return new qe(na,e)}toString(){return PR(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV extends hp{compare(e,t){const r=e.node.compareTo(t.node);return r===0?zl(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return qe.MIN}maxPost(){return qe.MAX}makePost(e,t){const r=fn(e);return new qe(t,r)}toString(){return".value"}}const IV=new TV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(n){return{type:"value",snapshotNode:n}}function CV(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function SV(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function aI(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function RV(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=mn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ce(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ce(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Cl}hasEnd(){return this.endSet_}getIndexEndValue(){return ce(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ce(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:na}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ce(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===mn}copy(){const e=new t_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function lI(n){const e={};if(n.isDefault())return e;let t;if(n.index_===mn?t="$priority":n.index_===IV?t="$value":n.index_===pl?t="$key":(ce(n.index_ instanceof EV,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=en(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=en(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+en(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=en(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+en(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function uI(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==mn&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf extends SR{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ce(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Kc("p:rest:"),this.listens_={}}listen(e,t,r,s){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=wf.getListenId_(e,r),c={};this.listens_[l]=c;const h=lI(e._queryParams);this.restRequest_(o+".json",h,(f,m)=>{let v=m;if(f===404&&(v=null,f=null),f===null&&this.onDataUpdate_(o,v,!1,r),yl(this.listens_,l)===c){let E;f?f===401?E="permission_denied":E="rest_error:"+f:E="ok",s(E,null)}})}unlisten(e,t){const r=wf.getListenId_(e,t);delete this.listens_[r]}get(e){const t=lI(e._queryParams),r=e._path.toString(),s=new Yy;return this.restRequest_(r+".json",t,(o,l)=>{let c=l;o===404&&(c=null,o=null),o===null?(this.onDataUpdate_(r,c,!1,null),s.resolve(c)):s.reject(new Error(c))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(t.auth=s.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ml(t);this.log_("Sending REST request for "+l);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&c.readyState===4){this.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);let h=null;if(c.status>=200&&c.status<300){try{h=gc(c.responseText)}catch{Jn("Failed to parse JSON response for "+l+": "+c.responseText)}r(null,h)}else c.status!==401&&c.status!==404&&Jn("Got unsuccessful REST response for "+l+" Status: "+c.status),r(c.status);r=null}},c.open("GET",l,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(){this.rootNode_=Qe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(){return{value:null,children:new Map}}function VR(n,e,t){if(Be(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const r=We(e);n.children.has(r)||n.children.set(r,Ef());const s=n.children.get(r);e=lt(e),VR(s,e,t)}}function gy(n,e,t){n.value!==null?t(e,n.value):PV(n,(r,s)=>{const o=new ct(e.toString()+"/"+r);gy(s,o,t)})}function PV(n,e){n.children.forEach((t,r)=>{e(r,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&yr(this.last_,(r,s)=>{t[r]=t[r]-s}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=10*1e3,kV=30*1e3,NV=5*60*1e3;class DV{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new bV(e);const r=cI+(kV-cI)*Math.random();ac(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;yr(e,(s,o)=>{o>0&&ri(this.statsToReport_,s)&&(t[s]=o,r=!0)}),r&&this.server_.reportStats(t),ac(this.reportStats_.bind(this),Math.floor(Math.random()*2*NV))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var is;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(is||(is={}));function FR(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function UR(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function BR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=is.ACK_USER_WRITE,this.source=FR()}operationForChild(e){if(Be(this.path)){if(this.affectedTree.value!=null)return ce(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ct(e));return new Tf(Ze(),t,this.revert)}}else return ce(We(this.path)===e,"operationForChild called for unrelated child."),new Tf(lt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=is.OVERWRITE}operationForChild(e){return Be(this.path)?new ra(this.source,Ze(),this.snap.getImmediateChild(e)):new ra(this.source,lt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=is.MERGE}operationForChild(e){if(Be(this.path)){const t=this.children.subtree(new ct(e));return t.isEmpty()?null:t.value?new ra(this.source,Ze(),t.value):new Ac(this.source,Ze(),t)}else return ce(We(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ac(this.source,lt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Be(e))return this.isFullyInitialized()&&!this.filtered_;const t=We(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function OV(n,e,t,r){const s=[],o=[];return e.forEach(l=>{l.type==="child_changed"&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(RV(l.childName,l.snapshotNode))}),Wu(n,s,"child_removed",e,r,t),Wu(n,s,"child_added",e,r,t),Wu(n,s,"child_moved",o,r,t),Wu(n,s,"child_changed",e,r,t),Wu(n,s,"value",e,r,t),s}function Wu(n,e,t,r,s,o){const l=r.filter(c=>c.type===t);l.sort((c,h)=>MV(n,c,h)),l.forEach(c=>{const h=LV(n,c,o);s.forEach(f=>{f.respondsTo(c.type)&&e.push(f.createEvent(h,n.query_))})})}function LV(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function MV(n,e,t){if(e.childName==null||t.childName==null)throw Ll("Should only compare child_ events.");const r=new qe(e.childName,e.snapshotNode),s=new qe(t.childName,t.snapshotNode);return n.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(n,e){return{eventCache:n,serverCache:e}}function lc(n,e,t,r){return $R(new n_(e,t,r),n.serverCache)}function zR(n,e,t,r){return $R(n.eventCache,new n_(e,t,r))}function yy(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function sa(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vg;const jV=()=>(vg||(vg=new Ln(Ij)),vg);class at{static fromObject(e){let t=new at(null);return yr(e,(r,s)=>{t=t.set(new ct(r),s)}),t}constructor(e,t=jV()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Ze(),value:this.value};if(Be(e))return null;{const r=We(e),s=this.children.get(r);if(s!==null){const o=s.findRootMostMatchingPathAndValue(lt(e),t);return o!=null?{path:Kt(new ct(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Be(e))return this;{const t=We(e),r=this.children.get(t);return r!==null?r.subtree(lt(e)):new at(null)}}set(e,t){if(Be(e))return new at(t,this.children);{const r=We(e),o=(this.children.get(r)||new at(null)).set(lt(e),t),l=this.children.insert(r,o);return new at(this.value,l)}}remove(e){if(Be(e))return this.children.isEmpty()?new at(null):new at(null,this.children);{const t=We(e),r=this.children.get(t);if(r){const s=r.remove(lt(e));let o;return s.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,s),this.value===null&&o.isEmpty()?new at(null):new at(this.value,o)}else return this}}get(e){if(Be(e))return this.value;{const t=We(e),r=this.children.get(t);return r?r.get(lt(e)):null}}setTree(e,t){if(Be(e))return t;{const r=We(e),o=(this.children.get(r)||new at(null)).setTree(lt(e),t);let l;return o.isEmpty()?l=this.children.remove(r):l=this.children.insert(r,o),new at(this.value,l)}}fold(e){return this.fold_(Ze(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((s,o)=>{r[s]=o.fold_(Kt(e,s),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Ze(),t)}findOnPath_(e,t,r){const s=this.value?r(t,this.value):!1;if(s)return s;if(Be(e))return null;{const o=We(e),l=this.children.get(o);return l?l.findOnPath_(lt(e),Kt(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ze(),t)}foreachOnPath_(e,t,r){if(Be(e))return this;{this.value&&r(t,this.value);const s=We(e),o=this.children.get(s);return o?o.foreachOnPath_(lt(e),Kt(t,s),r):new at(null)}}foreach(e){this.foreach_(Ze(),e)}foreach_(e,t){this.children.inorderTraversal((r,s)=>{s.foreach_(Kt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.writeTree_=e}static empty(){return new Ur(new at(null))}}function uc(n,e,t){if(Be(e))return new Ur(new at(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let o=r.value;const l=fr(s,e);return o=o.updateChild(l,t),new Ur(n.writeTree_.set(s,o))}else{const s=new at(t),o=n.writeTree_.setTree(e,s);return new Ur(o)}}}function dI(n,e,t){let r=n;return yr(t,(s,o)=>{r=uc(r,Kt(e,s),o)}),r}function hI(n,e){if(Be(e))return Ur.empty();{const t=n.writeTree_.setTree(e,new at(null));return new Ur(t)}}function vy(n,e){return ca(n,e)!=null}function ca(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(fr(t.path,e)):null}function fI(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(mn,(r,s)=>{e.push(new qe(r,s))}):n.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new qe(r,s.value))}),e}function Yi(n,e){if(Be(e))return n;{const t=ca(n,e);return t!=null?new Ur(new at(t)):new Ur(n.writeTree_.subtree(e))}}function _y(n){return n.writeTree_.isEmpty()}function Sl(n,e){return WR(Ze(),n.writeTree_,e)}function WR(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((s,o)=>{s===".priority"?(ce(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=WR(Kt(n,s),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Kt(n,".priority"),r)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(n,e){return YR(e,n)}function VV(n,e,t,r,s){ce(r>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:s}),s&&(n.visibleWrites=uc(n.visibleWrites,e,t)),n.lastWriteId=r}function FV(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}function UV(n,e){const t=n.allWrites.findIndex(c=>c.writeId===e);ce(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let s=r.visible,o=!1,l=n.allWrites.length-1;for(;s&&l>=0;){const c=n.allWrites[l];c.visible&&(l>=t&&BV(c,r.path)?s=!1:Vr(r.path,c.path)&&(o=!0)),l--}if(s){if(o)return $V(n),!0;if(r.snap)n.visibleWrites=hI(n.visibleWrites,r.path);else{const c=r.children;yr(c,h=>{n.visibleWrites=hI(n.visibleWrites,Kt(r.path,h))})}return!0}else return!1}function BV(n,e){if(n.snap)return Vr(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Vr(Kt(n.path,t),e))return!0;return!1}function $V(n){n.visibleWrites=HR(n.allWrites,zV,Ze()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function zV(n){return n.visible}function HR(n,e,t){let r=Ur.empty();for(let s=0;s<n.length;++s){const o=n[s];if(e(o)){const l=o.path;let c;if(o.snap)Vr(t,l)?(c=fr(t,l),r=uc(r,c,o.snap)):Vr(l,t)&&(c=fr(l,t),r=uc(r,Ze(),o.snap.getChild(c)));else if(o.children){if(Vr(t,l))c=fr(t,l),r=dI(r,c,o.children);else if(Vr(l,t))if(c=fr(l,t),Be(c))r=dI(r,Ze(),o.children);else{const h=yl(o.children,We(c));if(h){const f=h.getChild(lt(c));r=uc(r,Ze(),f)}}}else throw Ll("WriteRecord should have .snap or .children")}}return r}function GR(n,e,t,r,s){if(!r&&!s){const o=ca(n.visibleWrites,e);if(o!=null)return o;{const l=Yi(n.visibleWrites,e);if(_y(l))return t;if(t==null&&!vy(l,Ze()))return null;{const c=t||Qe.EMPTY_NODE;return Sl(l,c)}}}else{const o=Yi(n.visibleWrites,e);if(!s&&_y(o))return t;if(!s&&t==null&&!vy(o,Ze()))return null;{const l=function(f){return(f.visible||s)&&(!r||!~r.indexOf(f.writeId))&&(Vr(f.path,e)||Vr(e,f.path))},c=HR(n.allWrites,l,e),h=t||Qe.EMPTY_NODE;return Sl(c,h)}}}function WV(n,e,t){let r=Qe.EMPTY_NODE;const s=ca(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(mn,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(t){const o=Yi(n.visibleWrites,e);return t.forEachChild(mn,(l,c)=>{const h=Sl(Yi(o,new ct(l)),c);r=r.updateImmediateChild(l,h)}),fI(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}else{const o=Yi(n.visibleWrites,e);return fI(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}}function qV(n,e,t,r,s){ce(r||s,"Either existingEventSnap or existingServerSnap must exist");const o=Kt(e,t);if(vy(n.visibleWrites,o))return null;{const l=Yi(n.visibleWrites,o);return _y(l)?s.getChild(t):Sl(l,s.getChild(t))}}function HV(n,e,t,r){const s=Kt(e,t),o=ca(n.visibleWrites,s);if(o!=null)return o;if(r.isCompleteForChild(t)){const l=Yi(n.visibleWrites,s);return Sl(l,r.getNode().getImmediateChild(t))}else return null}function GV(n,e){return ca(n.visibleWrites,e)}function KV(n,e,t,r,s,o,l){let c;const h=Yi(n.visibleWrites,e),f=ca(h,Ze());if(f!=null)c=f;else if(t!=null)c=Sl(h,t);else return[];if(c=c.withIndex(l),!c.isEmpty()&&!c.isLeafNode()){const m=[],v=l.getCompare(),E=o?c.getReverseIteratorFrom(r,l):c.getIteratorFrom(r,l);let x=E.getNext();for(;x&&m.length<s;)v(x,r)!==0&&m.push(x),x=E.getNext();return m}else return[]}function QV(){return{visibleWrites:Ur.empty(),allWrites:[],lastWriteId:-1}}function wy(n,e,t,r){return GR(n.writeTree,n.treePath,e,t,r)}function KR(n,e){return WV(n.writeTree,n.treePath,e)}function pI(n,e,t,r){return qV(n.writeTree,n.treePath,e,t,r)}function If(n,e){return GV(n.writeTree,Kt(n.treePath,e))}function YV(n,e,t,r,s,o){return KV(n.writeTree,n.treePath,e,t,r,s,o)}function r_(n,e,t){return HV(n.writeTree,n.treePath,e,t)}function QR(n,e){return YR(Kt(n.treePath,e),n.writeTree)}function YR(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;ce(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ce(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const o=s.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,aI(r,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,SV(r,s.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,CV(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,aI(r,e.snapshotNode,s.oldSnap));else throw Ll("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}}const XR=new JV;class s_{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new n_(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return r_(this.writes_,e,r)}}getChildAfterChild(e,t,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:sa(this.viewCache_),o=YV(this.writes_,s,t,1,r,e);return o.length===0?null:o[0]}}function ZV(n,e){ce(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ce(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function e3(n,e,t,r,s){const o=new XV;let l,c;if(t.type===is.OVERWRITE){const f=t;f.source.fromUser?l=Ey(n,e,f.path,f.snap,r,s,o):(ce(f.source.fromServer,"Unknown source."),c=f.source.tagged||e.serverCache.isFiltered()&&!Be(f.path),l=xf(n,e,f.path,f.snap,r,s,c,o))}else if(t.type===is.MERGE){const f=t;f.source.fromUser?l=n3(n,e,f.path,f.children,r,s,o):(ce(f.source.fromServer,"Unknown source."),c=f.source.tagged||e.serverCache.isFiltered(),l=Ty(n,e,f.path,f.children,r,s,c,o))}else if(t.type===is.ACK_USER_WRITE){const f=t;f.revert?l=i3(n,e,f.path,r,s,o):l=r3(n,e,f.path,f.affectedTree,r,s,o)}else if(t.type===is.LISTEN_COMPLETE)l=s3(n,e,t.path,r,o);else throw Ll("Unknown operation type: "+t.type);const h=o.getChanges();return t3(e,l,h),{viewCache:l,changes:h}}function t3(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=yy(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(xV(yy(e)))}}function JR(n,e,t,r,s,o){const l=e.eventCache;if(If(r,t)!=null)return e;{let c,h;if(Be(t))if(ce(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const f=sa(e),m=f instanceof Qe?f:Qe.EMPTY_NODE,v=KR(r,m);c=n.filter.updateFullNode(e.eventCache.getNode(),v,o)}else{const f=wy(r,sa(e));c=n.filter.updateFullNode(e.eventCache.getNode(),f,o)}else{const f=We(t);if(f===".priority"){ce(ao(t)===1,"Can't have a priority with additional path components");const m=l.getNode();h=e.serverCache.getNode();const v=pI(r,t,m,h);v!=null?c=n.filter.updatePriority(m,v):c=l.getNode()}else{const m=lt(t);let v;if(l.isCompleteForChild(f)){h=e.serverCache.getNode();const E=pI(r,t,l.getNode(),h);E!=null?v=l.getNode().getImmediateChild(f).updateChild(m,E):v=l.getNode().getImmediateChild(f)}else v=r_(r,f,e.serverCache);v!=null?c=n.filter.updateChild(l.getNode(),f,v,m,s,o):c=l.getNode()}}return lc(e,c,l.isFullyInitialized()||Be(t),n.filter.filtersNodes())}}function xf(n,e,t,r,s,o,l,c){const h=e.serverCache;let f;const m=l?n.filter:n.filter.getIndexedFilter();if(Be(t))f=m.updateFullNode(h.getNode(),r,null);else if(m.filtersNodes()&&!h.isFiltered()){const x=h.getNode().updateChild(t,r);f=m.updateFullNode(h.getNode(),x,null)}else{const x=We(t);if(!h.isCompleteForPath(t)&&ao(t)>1)return e;const R=lt(t),S=h.getNode().getImmediateChild(x).updateChild(R,r);x===".priority"?f=m.updatePriority(h.getNode(),S):f=m.updateChild(h.getNode(),x,S,R,XR,null)}const v=zR(e,f,h.isFullyInitialized()||Be(t),m.filtersNodes()),E=new s_(s,v,o);return JR(n,v,t,s,E,c)}function Ey(n,e,t,r,s,o,l){const c=e.eventCache;let h,f;const m=new s_(s,e,o);if(Be(t))f=n.filter.updateFullNode(e.eventCache.getNode(),r,l),h=lc(e,f,!0,n.filter.filtersNodes());else{const v=We(t);if(v===".priority")f=n.filter.updatePriority(e.eventCache.getNode(),r),h=lc(e,f,c.isFullyInitialized(),c.isFiltered());else{const E=lt(t),x=c.getNode().getImmediateChild(v);let R;if(Be(E))R=r;else{const A=m.getCompleteChild(v);A!=null?AR(E)===".priority"&&A.getChild(bR(E)).isEmpty()?R=A:R=A.updateChild(E,r):R=Qe.EMPTY_NODE}if(x.equals(R))h=e;else{const A=n.filter.updateChild(c.getNode(),v,R,E,m,l);h=lc(e,A,c.isFullyInitialized(),n.filter.filtersNodes())}}}return h}function mI(n,e){return n.eventCache.isCompleteForChild(e)}function n3(n,e,t,r,s,o,l){let c=e;return r.foreach((h,f)=>{const m=Kt(t,h);mI(e,We(m))&&(c=Ey(n,c,m,f,s,o,l))}),r.foreach((h,f)=>{const m=Kt(t,h);mI(e,We(m))||(c=Ey(n,c,m,f,s,o,l))}),c}function gI(n,e,t){return t.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function Ty(n,e,t,r,s,o,l,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h=e,f;Be(t)?f=r:f=new at(null).setTree(t,r);const m=e.serverCache.getNode();return f.children.inorderTraversal((v,E)=>{if(m.hasChild(v)){const x=e.serverCache.getNode().getImmediateChild(v),R=gI(n,x,E);h=xf(n,h,new ct(v),R,s,o,l,c)}}),f.children.inorderTraversal((v,E)=>{const x=!e.serverCache.isCompleteForChild(v)&&E.value===null;if(!m.hasChild(v)&&!x){const R=e.serverCache.getNode().getImmediateChild(v),A=gI(n,R,E);h=xf(n,h,new ct(v),A,s,o,l,c)}}),h}function r3(n,e,t,r,s,o,l){if(If(s,t)!=null)return e;const c=e.serverCache.isFiltered(),h=e.serverCache;if(r.value!=null){if(Be(t)&&h.isFullyInitialized()||h.isCompleteForPath(t))return xf(n,e,t,h.getNode().getChild(t),s,o,c,l);if(Be(t)){let f=new at(null);return h.getNode().forEachChild(pl,(m,v)=>{f=f.set(new ct(m),v)}),Ty(n,e,t,f,s,o,c,l)}else return e}else{let f=new at(null);return r.foreach((m,v)=>{const E=Kt(t,m);h.isCompleteForPath(E)&&(f=f.set(m,h.getNode().getChild(E)))}),Ty(n,e,t,f,s,o,c,l)}}function s3(n,e,t,r,s){const o=e.serverCache,l=zR(e,o.getNode(),o.isFullyInitialized()||Be(t),o.isFiltered());return JR(n,l,t,r,XR,s)}function i3(n,e,t,r,s,o){let l;if(If(r,t)!=null)return e;{const c=new s_(r,e,s),h=e.eventCache.getNode();let f;if(Be(t)||We(t)===".priority"){let m;if(e.serverCache.isFullyInitialized())m=wy(r,sa(e));else{const v=e.serverCache.getNode();ce(v instanceof Qe,"serverChildren would be complete if leaf node"),m=KR(r,v)}m=m,f=n.filter.updateFullNode(h,m,o)}else{const m=We(t);let v=r_(r,m,e.serverCache);v==null&&e.serverCache.isCompleteForChild(m)&&(v=h.getImmediateChild(m)),v!=null?f=n.filter.updateChild(h,m,v,lt(t),c,o):e.eventCache.getNode().hasChild(m)?f=n.filter.updateChild(h,m,Qe.EMPTY_NODE,lt(t),c,o):f=h,f.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=wy(r,sa(e)),l.isLeafNode()&&(f=n.filter.updateFullNode(f,l,o)))}return l=e.serverCache.isFullyInitialized()||If(r,Ze())!=null,lc(e,f,l,n.filter.filtersNodes())}}function o3(n,e){const t=sa(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Be(e)&&!t.getImmediateChild(We(e)).isEmpty())?t.getChild(e):null}function yI(n,e,t,r){e.type===is.MERGE&&e.source.queryId!==null&&(ce(sa(n.viewCache_),"We should always have a full cache before handling merges"),ce(yy(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,o=e3(n.processor_,s,e,t,r);return ZV(n.processor_,o.viewCache),ce(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,a3(n,o.changes,o.viewCache.eventCache.getNode())}function a3(n,e,t,r){const s=n.eventRegistrations_;return OV(n.eventGenerator_,e,t,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vI;function l3(n){ce(!vI,"__referenceConstructor has already been defined"),vI=n}function i_(n,e,t,r){const s=e.source.queryId;if(s!==null){const o=n.views.get(s);return ce(o!=null,"SyncTree gave us an op for an invalid query."),yI(o,e,t,r)}else{let o=[];for(const l of n.views.values())o=o.concat(yI(l,e,t,r));return o}}function o_(n,e){let t=null;for(const r of n.views.values())t=t||o3(r,e);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _I;function u3(n){ce(!_I,"__referenceConstructor has already been defined"),_I=n}class wI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new at(null),this.pendingWriteTree_=QV(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function c3(n,e,t,r,s){return VV(n.pendingWriteTree_,e,t,r,s),s?pp(n,new ra(FR(),e,t)):[]}function al(n,e,t=!1){const r=FV(n.pendingWriteTree_,e);if(UV(n.pendingWriteTree_,e)){let o=new at(null);return r.snap!=null?o=o.set(Ze(),!0):yr(r.children,l=>{o=o.set(new ct(l),!0)}),pp(n,new Tf(r.path,o,t))}else return[]}function fp(n,e,t){return pp(n,new ra(UR(),e,t))}function d3(n,e,t){const r=at.fromObject(t);return pp(n,new Ac(UR(),e,r))}function h3(n,e,t,r){const s=nA(n,r);if(s!=null){const o=rA(s),l=o.path,c=o.queryId,h=fr(l,e),f=new ra(BR(c),h,t);return sA(n,l,f)}else return[]}function f3(n,e,t,r){const s=nA(n,r);if(s){const o=rA(s),l=o.path,c=o.queryId,h=fr(l,e),f=at.fromObject(t),m=new Ac(BR(c),h,f);return sA(n,l,m)}else return[]}function ZR(n,e,t){const s=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(l,c)=>{const h=fr(l,e),f=o_(c,h);if(f)return f});return GR(s,e,o,t,!0)}function pp(n,e){return eA(e,n.syncPointTree_,null,qR(n.pendingWriteTree_,Ze()))}function eA(n,e,t,r){if(Be(n.path))return tA(n,e,t,r);{const s=e.get(Ze());t==null&&s!=null&&(t=o_(s,Ze()));let o=[];const l=We(n.path),c=n.operationForChild(l),h=e.children.get(l);if(h&&c){const f=t?t.getImmediateChild(l):null,m=QR(r,l);o=o.concat(eA(c,h,f,m))}return s&&(o=o.concat(i_(s,n,r,t))),o}}function tA(n,e,t,r){const s=e.get(Ze());t==null&&s!=null&&(t=o_(s,Ze()));let o=[];return e.children.inorderTraversal((l,c)=>{const h=t?t.getImmediateChild(l):null,f=QR(r,l),m=n.operationForChild(l);m&&(o=o.concat(tA(m,c,h,f)))}),s&&(o=o.concat(i_(s,n,r,t))),o}function nA(n,e){return n.tagToQueryMap.get(e)}function rA(n){const e=n.indexOf("$");return ce(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ct(n.substr(0,e))}}function sA(n,e,t){const r=n.syncPointTree_.get(e);ce(r,"Missing sync point for query tag that we're tracking");const s=qR(n.pendingWriteTree_,e);return i_(r,t,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new a_(t)}node(){return this.node_}}class l_{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Kt(this.path_,e);return new l_(this.syncTree_,t)}node(){return ZR(this.syncTree_,this.path_)}}const p3=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},EI=function(n,e,t){if(!n||typeof n!="object")return n;if(ce(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return m3(n[".sv"],e,t);if(typeof n[".sv"]=="object")return g3(n[".sv"],e);ce(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},m3=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ce(!1,"Unexpected server value: "+n)}},g3=function(n,e,t){n.hasOwnProperty("increment")||ce(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&ce(!1,"Unexpected increment value: "+r);const s=e.node();if(ce(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const l=s.getValue();return typeof l!="number"?r:l+r},y3=function(n,e,t,r){return u_(e,new l_(t,n),r)},v3=function(n,e,t){return u_(n,new a_(e),t)};function u_(n,e,t){const r=n.getPriority().val(),s=EI(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const l=n,c=EI(l.getValue(),e,t);return c!==l.getValue()||s!==l.getPriority().val()?new qt(c,fn(s)):n}else{const l=n;return o=l,s!==l.getPriority().val()&&(o=o.updatePriority(new qt(s))),l.forEachChild(mn,(c,h)=>{const f=u_(h,e.getImmediateChild(c),t);f!==h&&(o=o.updateImmediateChild(c,f))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function d_(n,e){let t=e instanceof ct?e:new ct(e),r=n,s=We(t);for(;s!==null;){const o=yl(r.node.children,s)||{children:{},childCount:0};r=new c_(s,r,o),t=lt(t),s=We(t)}return r}function Wl(n){return n.node.value}function iA(n,e){n.node.value=e,Iy(n)}function oA(n){return n.node.childCount>0}function _3(n){return Wl(n)===void 0&&!oA(n)}function mp(n,e){yr(n.node.children,(t,r)=>{e(new c_(t,n,r))})}function aA(n,e,t,r){t&&e(n),mp(n,s=>{aA(s,e,!0)})}function w3(n,e,t){let r=n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Xc(n){return new ct(n.parent===null?n.name:Xc(n.parent)+"/"+n.name)}function Iy(n){n.parent!==null&&E3(n.parent,n.name,n)}function E3(n,e,t){const r=_3(t),s=ri(n.node.children,e);r&&s?(delete n.node.children[e],n.node.childCount--,Iy(n)):!r&&!s&&(n.node.children[e]=t.node,n.node.childCount++,Iy(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3=/[\[\].#$\/\u0000-\u001F\u007F]/,I3=/[\[\].#$\u0000-\u001F\u007F]/,_g=10*1024*1024,lA=function(n){return typeof n=="string"&&n.length!==0&&!T3.test(n)},x3=function(n){return typeof n=="string"&&n.length!==0&&!I3.test(n)},C3=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),x3(n)},uA=function(n,e,t){const r=t instanceof ct?new sV(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Ho(r));if(typeof e=="function")throw new Error(n+"contains a function "+Ho(r)+" with contents = "+e.toString());if(aR(e))throw new Error(n+"contains "+e.toString()+" "+Ho(r));if(typeof e=="string"&&e.length>_g/3&&Mf(e)>_g)throw new Error(n+"contains a string greater than "+_g+" utf8 bytes "+Ho(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,o=!1;if(yr(e,(l,c)=>{if(l===".value")s=!0;else if(l!==".priority"&&l!==".sv"&&(o=!0,!lA(l)))throw new Error(n+" contains an invalid key ("+l+") "+Ho(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);iV(r,l),uA(n,c,r),oV(r)}),s&&o)throw new Error(n+' contains ".value" child '+Ho(r)+" in addition to actual children.")}},S3=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!lA(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!C3(t))throw new Error(Rk(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function A3(n,e){let t=null;for(let r=0;r<e.length;r++){const s=e[r],o=s.getPath();t!==null&&!kR(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(s)}t&&n.eventLists_.push(t)}function da(n,e,t){A3(n,t),P3(n,r=>Vr(r,e)||Vr(e,r))}function P3(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const s=n.eventLists_[r];if(s){const o=s.path;e(o)?(b3(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function b3(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const r=t.getEventRunner();oc&&hn("event: "+t.toString()),Qc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3="repo_interrupt",N3=25;class D3{constructor(e,t,r,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new R3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ef(),this.transactionQueueTree_=new c_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function O3(n,e,t){if(n.stats_=Xv(n.repoInfo_),n.forceRestClient_||Pj())n.server_=new wf(n.repoInfo_,(r,s,o,l)=>{TI(n,r,s,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>II(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{en(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ws(n.repoInfo_,e,(r,s,o,l)=>{TI(n,r,s,o,l)},r=>{II(n,r)},r=>{M3(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=Oj(n.repoInfo_,()=>new DV(n.stats_,n.server_)),n.infoData_=new AV,n.infoSyncTree_=new wI({startListening:(r,s,o,l)=>{let c=[];const h=n.infoData_.getNode(r._path);return h.isEmpty()||(c=fp(n.infoSyncTree_,r._path,h),setTimeout(()=>{l("ok")},0)),c},stopListening:()=>{}}),h_(n,"connected",!1),n.serverSyncTree_=new wI({startListening:(r,s,o,l)=>(n.server_.listen(r,o,s,(c,h)=>{const f=l(c,h);da(n.eventQueue_,r._path,f)}),[]),stopListening:(r,s)=>{n.server_.unlisten(r,s)}})}function L3(n){const t=n.infoData_.getNode(new ct(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function cA(n){return p3({timestamp:L3(n)})}function TI(n,e,t,r,s){n.dataUpdateCount++;const o=new ct(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(s)if(r){const h=Jh(t,f=>fn(f));l=f3(n.serverSyncTree_,o,h,s)}else{const h=fn(t);l=h3(n.serverSyncTree_,o,h,s)}else if(r){const h=Jh(t,f=>fn(f));l=d3(n.serverSyncTree_,o,h)}else{const h=fn(t);l=fp(n.serverSyncTree_,o,h)}let c=o;l.length>0&&(c=p_(n,o)),da(n.eventQueue_,c,l)}function II(n,e){h_(n,"connected",e),e===!1&&V3(n)}function M3(n,e){yr(e,(t,r)=>{h_(n,t,r)})}function h_(n,e,t){const r=new ct("/.info/"+e),s=fn(t);n.infoData_.updateSnapshot(r,s);const o=fp(n.infoSyncTree_,r,s);da(n.eventQueue_,r,o)}function j3(n){return n.nextWriteId_++}function V3(n){dA(n,"onDisconnectEvents");const e=cA(n),t=Ef();gy(n.onDisconnect_,Ze(),(s,o)=>{const l=y3(s,o,n.serverSyncTree_,e);VR(t,s,l)});let r=[];gy(t,Ze(),(s,o)=>{r=r.concat(fp(n.serverSyncTree_,s,o));const l=$3(n,s);p_(n,l)}),n.onDisconnect_=Ef(),da(n.eventQueue_,Ze(),r)}function F3(n){n.persistentConnection_&&n.persistentConnection_.interrupt(k3)}function dA(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),hn(t,...e)}function hA(n,e,t){return ZR(n.serverSyncTree_,e,t)||Qe.EMPTY_NODE}function f_(n,e=n.transactionQueueTree_){if(e||gp(n,e),Wl(e)){const t=pA(n,e);ce(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&U3(n,Xc(e),t)}else oA(e)&&mp(e,t=>{f_(n,t)})}function U3(n,e,t){const r=t.map(f=>f.currentWriteId),s=hA(n,e,r);let o=s;const l=s.hash();for(let f=0;f<t.length;f++){const m=t[f];ce(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;const v=fr(e,m.path);o=o.updateChild(v,m.currentOutputSnapshotRaw)}const c=o.val(!0),h=e;n.server_.put(h.toString(),c,f=>{dA(n,"transaction put response",{path:h.toString(),status:f});let m=[];if(f==="ok"){const v=[];for(let E=0;E<t.length;E++)t[E].status=2,m=m.concat(al(n.serverSyncTree_,t[E].currentWriteId)),t[E].onComplete&&v.push(()=>t[E].onComplete(null,!0,t[E].currentOutputSnapshotResolved)),t[E].unwatcher();gp(n,d_(n.transactionQueueTree_,e)),f_(n,n.transactionQueueTree_),da(n.eventQueue_,e,m);for(let E=0;E<v.length;E++)Qc(v[E])}else{if(f==="datastale")for(let v=0;v<t.length;v++)t[v].status===3?t[v].status=4:t[v].status=0;else{Jn("transaction at "+h.toString()+" failed: "+f);for(let v=0;v<t.length;v++)t[v].status=4,t[v].abortReason=f}p_(n,e)}},l)}function p_(n,e){const t=fA(n,e),r=Xc(t),s=pA(n,t);return B3(n,s,r),r}function B3(n,e,t){if(e.length===0)return;const r=[];let s=[];const l=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const h=e[c],f=fr(t,h.path);let m=!1,v;if(ce(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===4)m=!0,v=h.abortReason,s=s.concat(al(n.serverSyncTree_,h.currentWriteId,!0));else if(h.status===0)if(h.retryCount>=N3)m=!0,v="maxretry",s=s.concat(al(n.serverSyncTree_,h.currentWriteId,!0));else{const E=hA(n,h.path,l);h.currentInputSnapshot=E;const x=e[c].update(E.val());if(x!==void 0){uA("transaction failed: Data returned ",x,h.path);let R=fn(x);typeof x=="object"&&x!=null&&ri(x,".priority")||(R=R.updatePriority(E.getPriority()));const S=h.currentWriteId,M=cA(n),U=v3(R,E,M);h.currentOutputSnapshotRaw=R,h.currentOutputSnapshotResolved=U,h.currentWriteId=j3(n),l.splice(l.indexOf(S),1),s=s.concat(c3(n.serverSyncTree_,h.path,U,h.currentWriteId,h.applyLocally)),s=s.concat(al(n.serverSyncTree_,S,!0))}else m=!0,v="nodata",s=s.concat(al(n.serverSyncTree_,h.currentWriteId,!0))}da(n.eventQueue_,t,s),s=[],m&&(e[c].status=2,function(E){setTimeout(E,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(v==="nodata"?r.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):r.push(()=>e[c].onComplete(new Error(v),!1,null))))}gp(n,n.transactionQueueTree_);for(let c=0;c<r.length;c++)Qc(r[c]);f_(n,n.transactionQueueTree_)}function fA(n,e){let t,r=n.transactionQueueTree_;for(t=We(e);t!==null&&Wl(r)===void 0;)r=d_(r,t),e=lt(e),t=We(e);return r}function pA(n,e){const t=[];return mA(n,e,t),t.sort((r,s)=>r.order-s.order),t}function mA(n,e,t){const r=Wl(e);if(r)for(let s=0;s<r.length;s++)t.push(r[s]);mp(e,s=>{mA(n,s,t)})}function gp(n,e){const t=Wl(e);if(t){let r=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[r]=t[s],r++);t.length=r,iA(e,t.length>0?t:void 0)}mp(e,r=>{gp(n,r)})}function $3(n,e){const t=Xc(fA(n,e)),r=d_(n.transactionQueueTree_,e);return w3(r,s=>{wg(n,s)}),wg(n,r),aA(r,s=>{wg(n,s)}),t}function wg(n,e){const t=Wl(e);if(t){const r=[];let s=[],o=-1;for(let l=0;l<t.length;l++)t[l].status===3||(t[l].status===1?(ce(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):(ce(t[l].status===0,"Unexpected transaction status in abort"),t[l].unwatcher(),s=s.concat(al(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));o===-1?iA(e,void 0):t.length=o+1,da(n.eventQueue_,Xc(e),s);for(let l=0;l<r.length;l++)Qc(r[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z3(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let s=t[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function W3(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Jn(`Invalid query segment '${t}' in query '${n}'`)}return e}const xI=function(n,e){const t=q3(n),r=t.namespace;t.domain==="firebase.com"&&Js(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Js("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||Ej();const s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new _R(t.host,t.secure,r,s,e,"",r!==t.subdomain),path:new ct(t.pathString)}},q3=function(n){let e="",t="",r="",s="",o="",l=!0,c="https",h=443;if(typeof n=="string"){let f=n.indexOf("//");f>=0&&(c=n.substring(0,f-1),n=n.substring(f+2));let m=n.indexOf("/");m===-1&&(m=n.length);let v=n.indexOf("?");v===-1&&(v=n.length),e=n.substring(0,Math.min(m,v)),m<v&&(s=z3(n.substring(m,v)));const E=W3(n.substring(Math.min(n.length,v)));f=e.indexOf(":"),f>=0?(l=c==="https"||c==="wss",h=parseInt(e.substring(f+1),10)):f=e.length;const x=e.slice(0,f);if(x.toLowerCase()==="localhost")t="localhost";else if(x.split(".").length<=2)t=x;else{const R=e.indexOf(".");r=e.substring(0,R).toLowerCase(),t=e.substring(R+1),o=r}"ns"in E&&(o=E.ns)}return{host:e,port:h,domain:t,subdomain:r,secure:l,scheme:c,pathString:s,namespace:o}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,t,r,s){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=s}get key(){return Be(this._path)?null:AR(this._path)}get ref(){return new ql(this._repo,this._path)}get _queryIdentifier(){const e=uI(this._queryParams),t=Qv(e);return t==="{}"?"default":t}get _queryObject(){return uI(this._queryParams)}isEqual(e){if(e=rt(e),!(e instanceof m_))return!1;const t=this._repo===e._repo,r=kR(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+rV(this._path)}}class ql extends m_{constructor(e,t){super(e,t,new t_,!1)}get parent(){const e=bR(this._path);return e===null?null:new ql(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}l3(ql);u3(ql);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3="FIREBASE_DATABASE_EMULATOR_HOST",xy={};let G3=!1;function K3(n,e,t,r){n.repoInfo_=new _R(e,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),r&&(n.authTokenProvider_=r)}function Q3(n,e,t,r,s){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||Js("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),hn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l=xI(o,s),c=l.repoInfo,h;typeof process<"u"&&WT&&(h=WT[H3]),h?(o=`http://${h}?ns=${c.namespace}`,l=xI(o,s),c=l.repoInfo):l.repoInfo.secure;const f=new kj(n.name,n.options,e);S3("Invalid Firebase Database URL",l),Be(l.path)||Js("Database URL must point to the root of a Firebase Database (not including a child path).");const m=X3(c,n,f,new bj(n,t));return new J3(m,n)}function Y3(n,e){const t=xy[e];(!t||t[n.key]!==n)&&Js(`Database ${e}(${n.repoInfo_}) has already been deleted.`),F3(n),delete t[n.key]}function X3(n,e,t,r){let s=xy[e.name];s||(s={},xy[e.name]=s);let o=s[n.toURLString()];return o&&Js("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new D3(n,G3,t,r),s[n.toURLString()]=o,o}class J3{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(O3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ql(this._repo,Ze())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Y3(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Js("Cannot call "+e+" on a deleted database.")}}function Z3(n=Vf(),e){const t=Mc(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=Qy("database");r&&eF(t,...r)}return t}function eF(n,e,t,r={}){n=rt(n),n._checkNotDeleted("useEmulator");const s=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&Ji(r,o.repoInfo_.emulatorOptions))return;Js("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Js('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new qh(qh.OWNER);else if(r.mockUserToken){const c=typeof r.mockUserToken=="string"?r.mockUserToken:Xy(r.mockUserToken,n.app.options.projectId);l=new qh(c)}K3(o,s,r,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(n){mj(uo),Zi(new Hs("database",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return Q3(r,s,o,t)},"PUBLIC").setMultipleInstances(!0)),pr(qT,HT,n),pr(qT,HT,"esm2017")}Ws.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Ws.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};tF();const g_=async(n,e,t,r,s,o,l)=>{const c=qc();let h;e||t?h=`${e||""} ${t||""}`.trim():h=o||"";const f={uid:n,displayName:h,firstName:e||(o?o.split(" ")[0]:""),lastName:t||(o?o.split(" ").slice(1).join(" "):""),email:r,phoneNumber:s,createdAt:new Date,...l?{role:l}:{}};await Kv(jt(c,"users",n),f,{merge:!0})},gA={apiKey:"AIzaSyDX3sdS3txwVb8u3XA-3_D3l1psaT1TDzU",authDomain:"ureno-b0c23.firebaseapp.com",projectId:"ureno-b0c23",storageBucket:"ureno-b0c23.appspot.com",messagingSenderId:"750721636991",appId:"1:750721636991:web:1dee0acc728519b7f7fd4a",measurementId:"G-V8LVMN8932",databaseURL:"https://ureno-b0c23.firebaseio.com"};console.log("FIREBASE CONFIG:",gA);const y_=Bx(gA),yp=zf(y_);new ss;const Vt=qc(y_);aL("debug");const yA=In.createContext();function gs(){return I.useContext(yA)}function nF({children:n}){const[e,t]=I.useState(null),[r,s]=I.useState(!1),[o,l]=I.useState(!0),[c,h]=I.useState(!1),[f,m]=I.useState(!1),[v,E]=I.useState(!1),x={currentUser:e,userLoggedIn:r,isEmailUser:c,isGoogleUser:f,loading:o,redirectAfterAuth:v,setRedirectAfterAuth:E};return I.useEffect(()=>{const R=zf(),A=pC(R,S=>{var M;if(t(S),s(!!S),S){const U=(M=S.providerData[0])==null?void 0:M.providerId;h(U==="password"),m(U==="google.com")}else h(!1),m(!1);l(!1),console.log("AuthProvider state updated: userLoggedIn =",!!S,"user:",S==null?void 0:S.uid)});return()=>A},[]),y.jsx(yA.Provider,{value:x,children:!o&&n})}const Pc=qc(y_),rF=async n=>{try{const e=jt(Pc,"users",n),t=await jr(e);return t.exists()?t.data():null}catch(e){throw console.error("Error fetching user profile:",e),e}},ha=I.createContext(),vp=()=>I.useContext(ha),sF=({children:n})=>{const[e,t]=I.useState(null),[r,s]=I.useState(null),[o,l]=I.useState(!0),[c,h]=I.useState(null);return I.useEffect(()=>{const f=pC(yp,async m=>{if(c&&(console.log("Cleaning up previous Firestore listener"),c(),h(null)),t(m),!m){t(null),s(null),l(!1);return}t(m),console.log("Current user UID:",m==null?void 0:m.uid);let v=null,E=null;if(m.displayName){const A=m.displayName.split(" ");v=A[0]||"",E=A.slice(1).join(" ")||""}const x=jt(Pc,"users",m.uid);(await jr(x)).exists()?console.log("User profile already exists, skipping creation."):(console.log("User profile doesn't exist yet, creating it."),await g_(m.uid,v,E,m.email,null,m.displayName));try{const A=await rF(m.uid),S={displayName:m.displayName||"",email:m.email||"",photoURL:m.photoURL||""};s(A||S),l(!1);try{const M=jt(Pc,"users",m.uid);console.log("Setting up Firestore listener on: /users/"+m.uid),(await jr(M)).exists()||(console.log("Document doesn't exist yet, creating it first"),await Kv(M,{displayName:r.displayName,email:r.email,photoURL:r.photoURL,createdAt:new Date},{merge:!0}));const B=nR(M,W=>{W.exists()?(console.log("Received profile update for UID:",m.uid,"Data:",W.data()),s(W.data())):console.warn("User document does not exist for UID:",m.uid)},W=>{console.error("Error listening to profile updates:",W)});h(()=>B)}catch(M){console.error("Error setting up profile listener:",M)}}catch(A){console.error("Failed to fetch user profile:",A.message),l(!1)}});return()=>{f(),c&&(console.log("Cleaning up Firestore listener on component unmount"),c())}},[]),y.jsx(ha.Provider,{value:{user:e,profile:r,loading:o},children:n})},vA=I.createContext(),iF={conversations:[],selectedConversation:null,messages:[],loading:!1,currentConversationData:null};function oF(n,e){switch(e.type){case"SET_CONVERSATIONS":const t=[...e.payload].sort((c,h)=>{var v,E,x,R,A,S,M,U,B,W,Y,X;const f=((x=(E=(v=c.lastMessage)==null?void 0:v.timestamp)==null?void 0:E.toMillis)==null?void 0:x.call(E))||(((R=c.lastMessage)==null?void 0:R.timestamp)instanceof Date?c.lastMessage.timestamp.getTime():0)||((S=(A=c.updatedAt)==null?void 0:A.toMillis)==null?void 0:S.call(A))||0;return(((B=(U=(M=h.lastMessage)==null?void 0:M.timestamp)==null?void 0:U.toMillis)==null?void 0:B.call(U))||(((W=h.lastMessage)==null?void 0:W.timestamp)instanceof Date?h.lastMessage.timestamp.getTime():0)||((X=(Y=h.updatedAt)==null?void 0:Y.toMillis)==null?void 0:X.call(Y))||0)-f});let r=n.currentConversationData;if(n.selectedConversation){const c=t.find(h=>h.id===n.selectedConversation);c&&(r=c)}return{...n,conversations:t,currentConversationData:r};case"UPDATE_LAST_MESSAGE":const s=n.conversations.map(c=>c.id===e.payload.conversationId?{...c,lastMessage:e.payload.lastMessage,updatedAt:e.payload.lastMessage.timestamp}:c).sort((c,h)=>{var v,E,x,R,A,S,M,U,B,W,Y,X;const f=((x=(E=(v=c.lastMessage)==null?void 0:v.timestamp)==null?void 0:E.toMillis)==null?void 0:x.call(E))||(((R=c.lastMessage)==null?void 0:R.timestamp)instanceof Date?c.lastMessage.timestamp.getTime():0)||((S=(A=c.updatedAt)==null?void 0:A.toMillis)==null?void 0:S.call(A))||0;return(((B=(U=(M=h.lastMessage)==null?void 0:M.timestamp)==null?void 0:U.toMillis)==null?void 0:B.call(U))||(((W=h.lastMessage)==null?void 0:W.timestamp)instanceof Date?h.lastMessage.timestamp.getTime():0)||((X=(Y=h.updatedAt)==null?void 0:Y.toMillis)==null?void 0:X.call(Y))||0)-f});return{...n,conversations:s};case"SELECT_CONVERSATION":if(n.selectedConversation===e.payload)return n;const o=n.conversations.find(c=>c.id===e.payload)||null;return{...n,selectedConversation:e.payload,messages:[],currentConversationData:o};case"SET_CURRENT_CONVERSATION_DATA":return{...n,currentConversationData:e.payload};case"SET_MESSAGES":return{...n,messages:e.payload};case"ADD_MESSAGE":return n.messages.some(c=>{var h,f,m,v,E,x;return c.id===e.payload.id||c.senderId===e.payload.senderId&&c.text===e.payload.text&&Math.abs(((m=((f=(h=c.timestamp)==null?void 0:h.toDate)==null?void 0:f.call(h))||c.timestamp)==null?void 0:m.getTime())-((x=((E=(v=e.payload.timestamp)==null?void 0:v.toDate)==null?void 0:E.call(v))||e.payload.timestamp)==null?void 0:x.getTime()))<5e3})?n:{...n,messages:[...n.messages,e.payload].sort((c,h)=>{var v,E,x,R;const f=((E=(v=c.timestamp)==null?void 0:v.toMillis)==null?void 0:E.call(v))||(c.timestamp instanceof Date?c.timestamp.getTime():0),m=((R=(x=h.timestamp)==null?void 0:x.toMillis)==null?void 0:R.call(x))||(h.timestamp instanceof Date?h.timestamp.getTime():0);return f-m})};case"SET_LOADING":return{...n,loading:e.payload};default:return n}}function aF({children:n}){const[e,t]=I.useReducer(oF,iF);return I.useEffect(()=>{const r=e.selectedConversation;if(!r)return;console.log(`Setting up listener for conversation ${r}`);const s=jt(Vt,"conversations",r),o=nR(s,l=>{if(l.exists()){const c={id:l.id,...l.data()};if(console.log("Conversation data updated:",c),t({type:"SET_CURRENT_CONVERSATION_DATA",payload:c}),e.conversations.length>0){const h=e.conversations.map(f=>f.id===r?c:f);t({type:"SET_CONVERSATIONS",payload:h})}}else console.log(`Conversation ${r} does not exist`)},l=>{console.error("Error listening to conversation:",l)});return()=>{console.log(`Cleaning up listener for conversation ${r}`),o()}},[e.selectedConversation]),y.jsx(vA.Provider,{value:{state:e,dispatch:t},children:n})}function jB(){return I.useContext(vA)}function v_(){return y.jsxs("div",{className:"w-full h-screen flex flex-col items-center justify-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4"}),y.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}const lF=1,uF=1e6;let Eg=0;function cF(){return Eg=(Eg+1)%Number.MAX_SAFE_INTEGER,Eg.toString()}const Tg=new Map,CI=n=>{if(Tg.has(n))return;const e=setTimeout(()=>{Tg.delete(n),cc({type:"REMOVE_TOAST",toastId:n})},uF);Tg.set(n,e)},dF=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,lF)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?CI(t):n.toasts.forEach(r=>{CI(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Hh=[];let Gh={toasts:[]};function cc(n){Gh=dF(Gh,n),Hh.forEach(e=>{e(Gh)})}function hF({...n}){const e=cF(),t=s=>cc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>cc({type:"DISMISS_TOAST",toastId:e});return cc({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function __(){const[n,e]=I.useState(Gh);return I.useEffect(()=>(Hh.push(e),()=>{const t=Hh.indexOf(e);t>-1&&Hh.splice(t,1)}),[n]),{...n,toast:hF,dismiss:t=>cc({type:"DISMISS_TOAST",toastId:t})}}function Qn(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function SI(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function _A(...n){return e=>{let t=!1;const r=n.map(s=>{const o=SI(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():SI(n[s],null)}}}}function ia(...n){return I.useCallback(_A(...n),n)}function wA(n,e=[]){let t=[];function r(o,l){const c=I.createContext(l),h=t.length;t=[...t,l];const f=v=>{var M;const{scope:E,children:x,...R}=v,A=((M=E==null?void 0:E[n])==null?void 0:M[h])||c,S=I.useMemo(()=>R,Object.values(R));return y.jsx(A.Provider,{value:S,children:x})};f.displayName=o+"Provider";function m(v,E){var A;const x=((A=E==null?void 0:E[n])==null?void 0:A[h])||c,R=I.useContext(x);if(R)return R;if(l!==void 0)return l;throw new Error(`\`${v}\` must be used within \`${o}\``)}return[f,m]}const s=()=>{const o=t.map(l=>I.createContext(l));return function(c){const h=(c==null?void 0:c[n])||o;return I.useMemo(()=>({[`__scope${n}`]:{...c,[n]:h}}),[c,h])}};return s.scopeName=n,[r,fF(s,...e)]}function fF(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const l=r.reduce((c,{useScope:h,scopeName:f})=>{const v=h(o)[`__scope${f}`];return{...c,...v}},{});return I.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}var Cf=I.forwardRef((n,e)=>{const{children:t,...r}=n,s=I.Children.toArray(t),o=s.find(mF);if(o){const l=o.props.children,c=s.map(h=>h===o?I.Children.count(l)>1?I.Children.only(null):I.isValidElement(l)?l.props.children:null:h);return y.jsx(Cy,{...r,ref:e,children:I.isValidElement(l)?I.cloneElement(l,void 0,c):null})}return y.jsx(Cy,{...r,ref:e,children:t})});Cf.displayName="Slot";var Cy=I.forwardRef((n,e)=>{const{children:t,...r}=n;if(I.isValidElement(t)){const s=yF(t),o=gF(r,t.props);return t.type!==I.Fragment&&(o.ref=e?_A(e,s):s),I.cloneElement(t,o)}return I.Children.count(t)>1?I.Children.only(null):null});Cy.displayName="SlotClone";var pF=({children:n})=>y.jsx(y.Fragment,{children:n});function mF(n){return I.isValidElement(n)&&n.type===pF}function gF(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...c)=>{o(...c),s(...c)}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function yF(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function vF(n){const e=n+"CollectionProvider",[t,r]=wA(e),[s,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=x=>{const{scope:R,children:A}=x,S=In.useRef(null),M=In.useRef(new Map).current;return y.jsx(s,{scope:R,itemMap:M,collectionRef:S,children:A})};l.displayName=e;const c=n+"CollectionSlot",h=In.forwardRef((x,R)=>{const{scope:A,children:S}=x,M=o(c,A),U=ia(R,M.collectionRef);return y.jsx(Cf,{ref:U,children:S})});h.displayName=c;const f=n+"CollectionItemSlot",m="data-radix-collection-item",v=In.forwardRef((x,R)=>{const{scope:A,children:S,...M}=x,U=In.useRef(null),B=ia(R,U),W=o(f,A);return In.useEffect(()=>(W.itemMap.set(U,{ref:U,...M}),()=>void W.itemMap.delete(U))),y.jsx(Cf,{[m]:"",ref:B,children:S})});v.displayName=f;function E(x){const R=o(n+"CollectionConsumer",x);return In.useCallback(()=>{const S=R.collectionRef.current;if(!S)return[];const M=Array.from(S.querySelectorAll(`[${m}]`));return Array.from(R.itemMap.values()).sort((W,Y)=>M.indexOf(W.ref.current)-M.indexOf(Y.ref.current))},[R.collectionRef,R.itemMap])}return[{Provider:l,Slot:h,ItemSlot:v},E,r]}var _F=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ys=_F.reduce((n,e)=>{const t=I.forwardRef((r,s)=>{const{asChild:o,...l}=r,c=o?Cf:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(c,{...l,ref:s})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function EA(n,e){n&&Gy.flushSync(()=>n.dispatchEvent(e))}function Zs(n){const e=I.useRef(n);return I.useEffect(()=>{e.current=n}),I.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function wF(n,e=globalThis==null?void 0:globalThis.document){const t=Zs(n);I.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var EF="DismissableLayer",Sy="dismissableLayer.update",TF="dismissableLayer.pointerDownOutside",IF="dismissableLayer.focusOutside",RI,TA=I.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),IA=I.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...h}=n,f=I.useContext(TA),[m,v]=I.useState(null),E=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=I.useState({}),R=ia(e,N=>v(N)),A=Array.from(f.layers),[S]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),M=A.indexOf(S),U=m?A.indexOf(m):-1,B=f.layersWithOutsidePointerEventsDisabled.size>0,W=U>=M,Y=CF(N=>{const b=N.target,k=[...f.branches].some(L=>L.contains(b));!W||k||(s==null||s(N),l==null||l(N),N.defaultPrevented||c==null||c())},E),X=SF(N=>{const b=N.target;[...f.branches].some(L=>L.contains(b))||(o==null||o(N),l==null||l(N),N.defaultPrevented||c==null||c())},E);return wF(N=>{U===f.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&c&&(N.preventDefault(),c()))},E),I.useEffect(()=>{if(m)return t&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(RI=E.body.style.pointerEvents,E.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),AI(),()=>{t&&f.layersWithOutsidePointerEventsDisabled.size===1&&(E.body.style.pointerEvents=RI)}},[m,E,t,f]),I.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),AI())},[m,f]),I.useEffect(()=>{const N=()=>x({});return document.addEventListener(Sy,N),()=>document.removeEventListener(Sy,N)},[]),y.jsx(ys.div,{...h,ref:R,style:{pointerEvents:B?W?"auto":"none":void 0,...n.style},onFocusCapture:Qn(n.onFocusCapture,X.onFocusCapture),onBlurCapture:Qn(n.onBlurCapture,X.onBlurCapture),onPointerDownCapture:Qn(n.onPointerDownCapture,Y.onPointerDownCapture)})});IA.displayName=EF;var xF="DismissableLayerBranch",xA=I.forwardRef((n,e)=>{const t=I.useContext(TA),r=I.useRef(null),s=ia(e,r);return I.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),y.jsx(ys.div,{...n,ref:s})});xA.displayName=xF;function CF(n,e=globalThis==null?void 0:globalThis.document){const t=Zs(n),r=I.useRef(!1),s=I.useRef(()=>{});return I.useEffect(()=>{const o=c=>{if(c.target&&!r.current){let h=function(){CA(TF,t,f,{discrete:!0})};const f={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function SF(n,e=globalThis==null?void 0:globalThis.document){const t=Zs(n),r=I.useRef(!1);return I.useEffect(()=>{const s=o=>{o.target&&!r.current&&CA(IF,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function AI(){const n=new CustomEvent(Sy);document.dispatchEvent(n)}function CA(n,e,t,{discrete:r}){const s=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?EA(s,o):s.dispatchEvent(o)}var RF=IA,AF=xA,Sf=globalThis!=null&&globalThis.document?I.useLayoutEffect:()=>{},PF="Portal",SA=I.forwardRef((n,e)=>{var c;const{container:t,...r}=n,[s,o]=I.useState(!1);Sf(()=>o(!0),[]);const l=t||s&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return l?ek.createPortal(y.jsx(ys.div,{...r,ref:e}),l):null});SA.displayName=PF;function bF(n,e){return I.useReducer((t,r)=>e[t][r]??t,n)}var RA=n=>{const{present:e,children:t}=n,r=kF(e),s=typeof t=="function"?t({present:r.isPresent}):I.Children.only(t),o=ia(r.ref,NF(s));return typeof t=="function"||r.isPresent?I.cloneElement(s,{ref:o}):null};RA.displayName="Presence";function kF(n){const[e,t]=I.useState(),r=I.useRef({}),s=I.useRef(n),o=I.useRef("none"),l=n?"mounted":"unmounted",[c,h]=bF(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return I.useEffect(()=>{const f=Rh(r.current);o.current=c==="mounted"?f:"none"},[c]),Sf(()=>{const f=r.current,m=s.current;if(m!==n){const E=o.current,x=Rh(f);n?h("MOUNT"):x==="none"||(f==null?void 0:f.display)==="none"?h("UNMOUNT"):h(m&&E!==x?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,h]),Sf(()=>{if(e){let f;const m=e.ownerDocument.defaultView??window,v=x=>{const A=Rh(r.current).includes(x.animationName);if(x.target===e&&A&&(h("ANIMATION_END"),!s.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",f=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},E=x=>{x.target===e&&(o.current=Rh(r.current))};return e.addEventListener("animationstart",E),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{m.clearTimeout(f),e.removeEventListener("animationstart",E),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:I.useCallback(f=>{f&&(r.current=getComputedStyle(f)),t(f)},[])}}function Rh(n){return(n==null?void 0:n.animationName)||"none"}function NF(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function DF({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,s]=OF({defaultProp:e,onChange:t}),o=n!==void 0,l=o?n:r,c=Zs(t),h=I.useCallback(f=>{if(o){const v=typeof f=="function"?f(n):f;v!==n&&c(v)}else s(f)},[o,n,s,c]);return[l,h]}function OF({defaultProp:n,onChange:e}){const t=I.useState(n),[r]=t,s=I.useRef(r),o=Zs(e);return I.useEffect(()=>{s.current!==r&&(o(r),s.current=r)},[r,s,o]),t}var LF="VisuallyHidden",w_=I.forwardRef((n,e)=>y.jsx(ys.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));w_.displayName=LF;var E_="ToastProvider",[T_,MF,jF]=vF("Toast"),[AA,VB]=wA("Toast",[jF]),[VF,_p]=AA(E_),PA=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:l}=n,[c,h]=I.useState(null),[f,m]=I.useState(0),v=I.useRef(!1),E=I.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${E_}\`. Expected non-empty \`string\`.`),y.jsx(T_.Provider,{scope:e,children:y.jsx(VF,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:f,viewport:c,onViewportChange:h,onToastAdd:I.useCallback(()=>m(x=>x+1),[]),onToastRemove:I.useCallback(()=>m(x=>x-1),[]),isFocusedToastEscapeKeyDownRef:v,isClosePausedRef:E,children:l})})};PA.displayName=E_;var bA="ToastViewport",FF=["F8"],Ry="toast.viewportPause",Ay="toast.viewportResume",kA=I.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=FF,label:s="Notifications ({hotkey})",...o}=n,l=_p(bA,t),c=MF(t),h=I.useRef(null),f=I.useRef(null),m=I.useRef(null),v=I.useRef(null),E=ia(e,v,l.onViewportChange),x=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),R=l.toastCount>0;I.useEffect(()=>{const S=M=>{var B;r.length!==0&&r.every(W=>M[W]||M.code===W)&&((B=v.current)==null||B.focus())};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[r]),I.useEffect(()=>{const S=h.current,M=v.current;if(R&&S&&M){const U=()=>{if(!l.isClosePausedRef.current){const X=new CustomEvent(Ry);M.dispatchEvent(X),l.isClosePausedRef.current=!0}},B=()=>{if(l.isClosePausedRef.current){const X=new CustomEvent(Ay);M.dispatchEvent(X),l.isClosePausedRef.current=!1}},W=X=>{!S.contains(X.relatedTarget)&&B()},Y=()=>{S.contains(document.activeElement)||B()};return S.addEventListener("focusin",U),S.addEventListener("focusout",W),S.addEventListener("pointermove",U),S.addEventListener("pointerleave",Y),window.addEventListener("blur",U),window.addEventListener("focus",B),()=>{S.removeEventListener("focusin",U),S.removeEventListener("focusout",W),S.removeEventListener("pointermove",U),S.removeEventListener("pointerleave",Y),window.removeEventListener("blur",U),window.removeEventListener("focus",B)}}},[R,l.isClosePausedRef]);const A=I.useCallback(({tabbingDirection:S})=>{const U=c().map(B=>{const W=B.ref.current,Y=[W,...JF(W)];return S==="forwards"?Y:Y.reverse()});return(S==="forwards"?U.reverse():U).flat()},[c]);return I.useEffect(()=>{const S=v.current;if(S){const M=U=>{var Y,X,N;const B=U.altKey||U.ctrlKey||U.metaKey;if(U.key==="Tab"&&!B){const b=document.activeElement,k=U.shiftKey;if(U.target===S&&k){(Y=f.current)==null||Y.focus();return}const V=A({tabbingDirection:k?"backwards":"forwards"}),D=V.findIndex(le=>le===b);Ig(V.slice(D+1))?U.preventDefault():k?(X=f.current)==null||X.focus():(N=m.current)==null||N.focus()}};return S.addEventListener("keydown",M),()=>S.removeEventListener("keydown",M)}},[c,A]),y.jsxs(AF,{ref:h,role:"region","aria-label":s.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:R?void 0:"none"},children:[R&&y.jsx(Py,{ref:f,onFocusFromOutsideViewport:()=>{const S=A({tabbingDirection:"forwards"});Ig(S)}}),y.jsx(T_.Slot,{scope:t,children:y.jsx(ys.ol,{tabIndex:-1,...o,ref:E})}),R&&y.jsx(Py,{ref:m,onFocusFromOutsideViewport:()=>{const S=A({tabbingDirection:"backwards"});Ig(S)}})]})});kA.displayName=bA;var NA="ToastFocusProxy",Py=I.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,o=_p(NA,t);return y.jsx(w_,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:l=>{var f;const c=l.relatedTarget;!((f=o.viewport)!=null&&f.contains(c))&&r()}})});Py.displayName=NA;var wp="Toast",UF="toast.swipeStart",BF="toast.swipeMove",$F="toast.swipeCancel",zF="toast.swipeEnd",DA=I.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:o,...l}=n,[c=!0,h]=DF({prop:r,defaultProp:s,onChange:o});return y.jsx(RA,{present:t||c,children:y.jsx(HF,{open:c,...l,ref:e,onClose:()=>h(!1),onPause:Zs(n.onPause),onResume:Zs(n.onResume),onSwipeStart:Qn(n.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Qn(n.onSwipeMove,f=>{const{x:m,y:v}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:Qn(n.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Qn(n.onSwipeEnd,f=>{const{x:m,y:v}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),h(!1)})})})});DA.displayName=wp;var[WF,qF]=AA(wp,{onClose(){}}),HF=I.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:o,onClose:l,onEscapeKeyDown:c,onPause:h,onResume:f,onSwipeStart:m,onSwipeMove:v,onSwipeCancel:E,onSwipeEnd:x,...R}=n,A=_p(wp,t),[S,M]=I.useState(null),U=ia(e,le=>M(le)),B=I.useRef(null),W=I.useRef(null),Y=s||A.duration,X=I.useRef(0),N=I.useRef(Y),b=I.useRef(0),{onToastAdd:k,onToastRemove:L}=A,j=Zs(()=>{var Ce;(S==null?void 0:S.contains(document.activeElement))&&((Ce=A.viewport)==null||Ce.focus()),l()}),V=I.useCallback(le=>{!le||le===1/0||(window.clearTimeout(b.current),X.current=new Date().getTime(),b.current=window.setTimeout(j,le))},[j]);I.useEffect(()=>{const le=A.viewport;if(le){const Ce=()=>{V(N.current),f==null||f()},Re=()=>{const Te=new Date().getTime()-X.current;N.current=N.current-Te,window.clearTimeout(b.current),h==null||h()};return le.addEventListener(Ry,Re),le.addEventListener(Ay,Ce),()=>{le.removeEventListener(Ry,Re),le.removeEventListener(Ay,Ce)}}},[A.viewport,Y,h,f,V]),I.useEffect(()=>{o&&!A.isClosePausedRef.current&&V(Y)},[o,Y,A.isClosePausedRef,V]),I.useEffect(()=>(k(),()=>L()),[k,L]);const D=I.useMemo(()=>S?UA(S):null,[S]);return A.viewport?y.jsxs(y.Fragment,{children:[D&&y.jsx(GF,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:D}),y.jsx(WF,{scope:t,onClose:j,children:Gy.createPortal(y.jsx(T_.ItemSlot,{scope:t,children:y.jsx(RF,{asChild:!0,onEscapeKeyDown:Qn(c,()=>{A.isFocusedToastEscapeKeyDownRef.current||j(),A.isFocusedToastEscapeKeyDownRef.current=!1}),children:y.jsx(ys.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":A.swipeDirection,...R,ref:U,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:Qn(n.onKeyDown,le=>{le.key==="Escape"&&(c==null||c(le.nativeEvent),le.nativeEvent.defaultPrevented||(A.isFocusedToastEscapeKeyDownRef.current=!0,j()))}),onPointerDown:Qn(n.onPointerDown,le=>{le.button===0&&(B.current={x:le.clientX,y:le.clientY})}),onPointerMove:Qn(n.onPointerMove,le=>{if(!B.current)return;const Ce=le.clientX-B.current.x,Re=le.clientY-B.current.y,Te=!!W.current,se=["left","right"].includes(A.swipeDirection),ue=["left","up"].includes(A.swipeDirection)?Math.min:Math.max,ie=se?ue(0,Ce):0,z=se?0:ue(0,Re),J=le.pointerType==="touch"?10:2,pe={x:ie,y:z},Ie={originalEvent:le,delta:pe};Te?(W.current=pe,Ah(BF,v,Ie,{discrete:!1})):PI(pe,A.swipeDirection,J)?(W.current=pe,Ah(UF,m,Ie,{discrete:!1}),le.target.setPointerCapture(le.pointerId)):(Math.abs(Ce)>J||Math.abs(Re)>J)&&(B.current=null)}),onPointerUp:Qn(n.onPointerUp,le=>{const Ce=W.current,Re=le.target;if(Re.hasPointerCapture(le.pointerId)&&Re.releasePointerCapture(le.pointerId),W.current=null,B.current=null,Ce){const Te=le.currentTarget,se={originalEvent:le,delta:Ce};PI(Ce,A.swipeDirection,A.swipeThreshold)?Ah(zF,x,se,{discrete:!0}):Ah($F,E,se,{discrete:!0}),Te.addEventListener("click",ue=>ue.preventDefault(),{once:!0})}})})})}),A.viewport)})]}):null}),GF=n=>{const{__scopeToast:e,children:t,...r}=n,s=_p(wp,e),[o,l]=I.useState(!1),[c,h]=I.useState(!1);return YF(()=>l(!0)),I.useEffect(()=>{const f=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(f)},[]),c?null:y.jsx(SA,{asChild:!0,children:y.jsx(w_,{...r,children:o&&y.jsxs(y.Fragment,{children:[s.label," ",t]})})})},KF="ToastTitle",OA=I.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return y.jsx(ys.div,{...r,ref:e})});OA.displayName=KF;var QF="ToastDescription",LA=I.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return y.jsx(ys.div,{...r,ref:e})});LA.displayName=QF;var MA="ToastAction",jA=I.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?y.jsx(FA,{altText:t,asChild:!0,children:y.jsx(I_,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${MA}\`. Expected non-empty \`string\`.`),null)});jA.displayName=MA;var VA="ToastClose",I_=I.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=qF(VA,t);return y.jsx(FA,{asChild:!0,children:y.jsx(ys.button,{type:"button",...r,ref:e,onClick:Qn(n.onClick,s.onClose)})})});I_.displayName=VA;var FA=I.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return y.jsx(ys.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function UA(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),XF(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const l=r.dataset.radixToastAnnounceAlt;l&&e.push(l)}else e.push(...UA(r))}}),e}function Ah(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,o=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?EA(s,o):s.dispatchEvent(o)}var PI=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),o=r>s;return e==="left"||e==="right"?o&&r>t:!o&&s>t};function YF(n=()=>{}){const e=Zs(n);Sf(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function XF(n){return n.nodeType===n.ELEMENT_NODE}function JF(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Ig(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var ZF=PA,BA=kA,$A=DA,zA=OA,WA=LA,qA=jA,HA=I_;function GA(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=GA(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function KA(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=GA(n))&&(r&&(r+=" "),r+=e);return r}const bI=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,kI=KA,QA=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return kI(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:o}=e,l=Object.keys(s).map(f=>{const m=t==null?void 0:t[f],v=o==null?void 0:o[f];if(m===null)return null;const E=bI(m)||bI(v);return s[f][E]}),c=t&&Object.entries(t).reduce((f,m)=>{let[v,E]=m;return E===void 0||(f[v]=E),f},{}),h=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,m)=>{let{class:v,className:E,...x}=m;return Object.entries(x).every(R=>{let[A,S]=R;return Array.isArray(S)?S.includes({...o,...c}[A]):{...o,...c}[A]===S})?[...f,v,E]:f},[]);return kI(n,l,h,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),YA=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var t6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=I.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...c},h)=>I.createElement("svg",{ref:h,...t6,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:YA("lucide",s),...c},[...l.map(([f,m])=>I.createElement(f,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=(n,e)=>{const t=I.forwardRef(({className:r,...s},o)=>I.createElement(n6,{ref:o,iconNode:e,className:YA(`lucide-${e6(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],s6=Jc("Bell",r6);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],o6=Jc("LoaderCircle",i6);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],l6=Jc("LogOut",a6);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],c6=Jc("Settings",u6);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],h6=Jc("X",d6),x_="-",f6=n=>{const e=m6(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:l=>{const c=l.split(x_);return c[0]===""&&c.length!==1&&c.shift(),XA(c,e)||p6(l)},getConflictingClassGroupIds:(l,c)=>{const h=t[l]||[];return c&&r[l]?[...h,...r[l]]:h}}},XA=(n,e)=>{var l;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?XA(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const o=n.join(x_);return(l=e.validators.find(({validator:c})=>c(o)))==null?void 0:l.classGroupId},NI=/^\[(.+)\]$/,p6=n=>{if(NI.test(n)){const e=NI.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},m6=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return y6(Object.entries(n.classGroups),t).forEach(([o,l])=>{by(l,r,o,e)}),r},by=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const o=s===""?e:DI(e,s);o.classGroupId=t;return}if(typeof s=="function"){if(g6(s)){by(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([o,l])=>{by(l,DI(e,o),t,r)})})},DI=(n,e)=>{let t=n;return e.split(x_).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},g6=n=>n.isThemeGetter,y6=(n,e)=>e?n.map(([t,r])=>{const s=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([l,c])=>[e+l,c])):o);return[t,s]}):n,v6=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(o,l)=>{t.set(o,l),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let l=t.get(o);if(l!==void 0)return l;if((l=r.get(o))!==void 0)return s(o,l),l},set(o,l){t.has(o)?t.set(o,l):s(o,l)}}},JA="!",_6=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],o=e.length,l=c=>{const h=[];let f=0,m=0,v;for(let S=0;S<c.length;S++){let M=c[S];if(f===0){if(M===s&&(r||c.slice(S,S+o)===e)){h.push(c.slice(m,S)),m=S+o;continue}if(M==="/"){v=S;continue}}M==="["?f++:M==="]"&&f--}const E=h.length===0?c:c.substring(m),x=E.startsWith(JA),R=x?E.substring(1):E,A=v&&v>m?v-m:void 0;return{modifiers:h,hasImportantModifier:x,baseClassName:R,maybePostfixModifierPosition:A}};return t?c=>t({className:c,parseClassName:l}):l},w6=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},E6=n=>({cache:v6(n.cacheSize),parseClassName:_6(n),...f6(n)}),T6=/\s+/,I6=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,o=[],l=n.trim().split(T6);let c="";for(let h=l.length-1;h>=0;h-=1){const f=l[h],{modifiers:m,hasImportantModifier:v,baseClassName:E,maybePostfixModifierPosition:x}=t(f);let R=!!x,A=r(R?E.substring(0,x):E);if(!A){if(!R){c=f+(c.length>0?" "+c:c);continue}if(A=r(E),!A){c=f+(c.length>0?" "+c:c);continue}R=!1}const S=w6(m).join(":"),M=v?S+JA:S,U=M+A;if(o.includes(U))continue;o.push(U);const B=s(A,R);for(let W=0;W<B.length;++W){const Y=B[W];o.push(M+Y)}c=f+(c.length>0?" "+c:c)}return c};function x6(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=ZA(e))&&(r&&(r+=" "),r+=t);return r}const ZA=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=ZA(n[r]))&&(t&&(t+=" "),t+=e);return t};function C6(n,...e){let t,r,s,o=l;function l(h){const f=e.reduce((m,v)=>v(m),n());return t=E6(f),r=t.cache.get,s=t.cache.set,o=c,c(h)}function c(h){const f=r(h);if(f)return f;const m=I6(h,t);return s(h,m),m}return function(){return o(x6.apply(null,arguments))}}const ot=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},e1=/^\[(?:([a-z-]+):)?(.+)\]$/i,S6=/^\d+\/\d+$/,R6=new Set(["px","full","screen"]),A6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,P6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,b6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,k6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,N6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Os=n=>ml(n)||R6.has(n)||S6.test(n),Mi=n=>Hl(n,"length",U6),ml=n=>!!n&&!Number.isNaN(Number(n)),xg=n=>Hl(n,"number",ml),qu=n=>!!n&&Number.isInteger(Number(n)),D6=n=>n.endsWith("%")&&ml(n.slice(0,-1)),Ne=n=>e1.test(n),ji=n=>A6.test(n),O6=new Set(["length","size","percentage"]),L6=n=>Hl(n,O6,t1),M6=n=>Hl(n,"position",t1),j6=new Set(["image","url"]),V6=n=>Hl(n,j6,$6),F6=n=>Hl(n,"",B6),Hu=()=>!0,Hl=(n,e,t)=>{const r=e1.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},U6=n=>P6.test(n)&&!b6.test(n),t1=()=>!1,B6=n=>k6.test(n),$6=n=>N6.test(n),z6=()=>{const n=ot("colors"),e=ot("spacing"),t=ot("blur"),r=ot("brightness"),s=ot("borderColor"),o=ot("borderRadius"),l=ot("borderSpacing"),c=ot("borderWidth"),h=ot("contrast"),f=ot("grayscale"),m=ot("hueRotate"),v=ot("invert"),E=ot("gap"),x=ot("gradientColorStops"),R=ot("gradientColorStopPositions"),A=ot("inset"),S=ot("margin"),M=ot("opacity"),U=ot("padding"),B=ot("saturate"),W=ot("scale"),Y=ot("sepia"),X=ot("skew"),N=ot("space"),b=ot("translate"),k=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",Ne,e],V=()=>[Ne,e],D=()=>["",Os,Mi],le=()=>["auto",ml,Ne],Ce=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Re=()=>["solid","dashed","dotted","double","none"],Te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],se=()=>["start","end","center","between","around","evenly","stretch"],ue=()=>["","0",Ne],ie=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>[ml,Ne];return{cacheSize:500,separator:":",theme:{colors:[Hu],spacing:[Os,Mi],blur:["none","",ji,Ne],brightness:z(),borderColor:[n],borderRadius:["none","","full",ji,Ne],borderSpacing:V(),borderWidth:D(),contrast:z(),grayscale:ue(),hueRotate:z(),invert:ue(),gap:V(),gradientColorStops:[n],gradientColorStopPositions:[D6,Mi],inset:j(),margin:j(),opacity:z(),padding:V(),saturate:z(),scale:z(),sepia:ue(),skew:z(),space:V(),translate:V()},classGroups:{aspect:[{aspect:["auto","square","video",Ne]}],container:["container"],columns:[{columns:[ji]}],"break-after":[{"break-after":ie()}],"break-before":[{"break-before":ie()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Ce(),Ne]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[A]}],"inset-x":[{"inset-x":[A]}],"inset-y":[{"inset-y":[A]}],start:[{start:[A]}],end:[{end:[A]}],top:[{top:[A]}],right:[{right:[A]}],bottom:[{bottom:[A]}],left:[{left:[A]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",qu,Ne]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ne]}],grow:[{grow:ue()}],shrink:[{shrink:ue()}],order:[{order:["first","last","none",qu,Ne]}],"grid-cols":[{"grid-cols":[Hu]}],"col-start-end":[{col:["auto",{span:["full",qu,Ne]},Ne]}],"col-start":[{"col-start":le()}],"col-end":[{"col-end":le()}],"grid-rows":[{"grid-rows":[Hu]}],"row-start-end":[{row:["auto",{span:[qu,Ne]},Ne]}],"row-start":[{"row-start":le()}],"row-end":[{"row-end":le()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ne]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ne]}],gap:[{gap:[E]}],"gap-x":[{"gap-x":[E]}],"gap-y":[{"gap-y":[E]}],"justify-content":[{justify:["normal",...se()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...se(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...se(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[U]}],px:[{px:[U]}],py:[{py:[U]}],ps:[{ps:[U]}],pe:[{pe:[U]}],pt:[{pt:[U]}],pr:[{pr:[U]}],pb:[{pb:[U]}],pl:[{pl:[U]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ne,e]}],"min-w":[{"min-w":[Ne,e,"min","max","fit"]}],"max-w":[{"max-w":[Ne,e,"none","full","min","max","fit","prose",{screen:[ji]},ji]}],h:[{h:[Ne,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ne,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ne,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ne,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ji,Mi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",xg]}],"font-family":[{font:[Hu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ne]}],"line-clamp":[{"line-clamp":["none",ml,xg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Os,Ne]}],"list-image":[{"list-image":["none",Ne]}],"list-style-type":[{list:["none","disc","decimal",Ne]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[M]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[M]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Re(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Os,Mi]}],"underline-offset":[{"underline-offset":["auto",Os,Ne]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ne]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ne]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[M]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Ce(),M6]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",L6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},V6]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[R]}],"gradient-via-pos":[{via:[R]}],"gradient-to-pos":[{to:[R]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[M]}],"border-style":[{border:[...Re(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[M]}],"divide-style":[{divide:Re()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Re()]}],"outline-offset":[{"outline-offset":[Os,Ne]}],"outline-w":[{outline:[Os,Mi]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[M]}],"ring-offset-w":[{"ring-offset":[Os,Mi]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",ji,F6]}],"shadow-color":[{shadow:[Hu]}],opacity:[{opacity:[M]}],"mix-blend":[{"mix-blend":[...Te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Te()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",ji,Ne]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[v]}],saturate:[{saturate:[B]}],sepia:[{sepia:[Y]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[v]}],"backdrop-opacity":[{"backdrop-opacity":[M]}],"backdrop-saturate":[{"backdrop-saturate":[B]}],"backdrop-sepia":[{"backdrop-sepia":[Y]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ne]}],duration:[{duration:z()}],ease:[{ease:["linear","in","out","in-out",Ne]}],delay:[{delay:z()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ne]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[W]}],"scale-x":[{"scale-x":[W]}],"scale-y":[{"scale-y":[W]}],rotate:[{rotate:[qu,Ne]}],"translate-x":[{"translate-x":[b]}],"translate-y":[{"translate-y":[b]}],"skew-x":[{"skew-x":[X]}],"skew-y":[{"skew-y":[X]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ne]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ne]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ne]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Os,Mi,xg]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},W6=C6(z6);function go(...n){return W6(KA(n))}const q6=ZF,n1=I.forwardRef(({className:n,...e},t)=>y.jsx(BA,{ref:t,className:go("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));n1.displayName=BA.displayName;const H6=QA("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),r1=I.forwardRef(({className:n,variant:e,...t},r)=>y.jsx($A,{ref:r,className:go(H6({variant:e}),n),...t}));r1.displayName=$A.displayName;const G6=I.forwardRef(({className:n,...e},t)=>y.jsx(qA,{ref:t,className:go("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));G6.displayName=qA.displayName;const s1=I.forwardRef(({className:n,...e},t)=>y.jsx(HA,{ref:t,className:go("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:y.jsx(h6,{className:"h-4 w-4"})}));s1.displayName=HA.displayName;const i1=I.forwardRef(({className:n,...e},t)=>y.jsx(zA,{ref:t,className:go("text-sm font-semibold [&+div]:text-xs",n),...e}));i1.displayName=zA.displayName;const o1=I.forwardRef(({className:n,...e},t)=>y.jsx(WA,{ref:t,className:go("text-sm opacity-90",n),...e}));o1.displayName=WA.displayName;function a1(){const{toasts:n}=__();return y.jsxs(q6,{children:[n.map(function({id:e,title:t,description:r,action:s,...o}){return y.jsxs(r1,{...o,children:[y.jsxs("div",{className:"grid gap-1",children:[t&&y.jsx(i1,{children:t}),r&&y.jsx(o1,{children:r})]}),s,y.jsx(s1,{})]},e)}),y.jsx(n1,{})]})}const K6="/Ureno_webdesign/assets/flooring-background-D6oQgrl-.png",Q6="/Ureno_webdesign/assets/paint-background-DV-ynsPo.png",OI="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24px'%20height='24px'%3e%3cpath%20d='M12,2C6.477,2,2,6.477,2,12c0,5.013,3.693,9.153,8.505,9.876V14.65H8.031v-2.629h2.474v-1.749%20c0-2.896,1.411-4.167,3.818-4.167c1.153,0,1.762,0.085,2.051,0.124v2.294h-1.642c-1.022,0-1.379,0.969-1.379,2.061v1.437h2.995%20l-0.406,2.629h-2.588v7.247C18.235,21.236,22,17.062,22,12C22,6.477,17.523,2,12,2z'/%3e%3c/svg%3e",LI="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24px'%20height='24px'%3e%3cpath%20d='M%208%203%20C%205.243%203%203%205.243%203%208%20L%203%2016%20C%203%2018.757%205.243%2021%208%2021%20L%2016%2021%20C%2018.757%2021%2021%2018.757%2021%2016%20L%2021%208%20C%2021%205.243%2018.757%203%2016%203%20L%208%203%20z%20M%208%205%20L%2016%205%20C%2017.654%205%2019%206.346%2019%208%20L%2019%2016%20C%2019%2017.654%2017.654%2019%2016%2019%20L%208%2019%20C%206.346%2019%205%2017.654%205%2016%20L%205%208%20C%205%206.346%206.346%205%208%205%20z%20M%2017%206%20A%201%201%200%200%200%2016%207%20A%201%201%200%200%200%2017%208%20A%201%201%200%200%200%2018%207%20A%201%201%200%200%200%2017%206%20z%20M%2012%207%20C%209.243%207%207%209.243%207%2012%20C%207%2014.757%209.243%2017%2012%2017%20C%2014.757%2017%2017%2014.757%2017%2012%20C%2017%209.243%2014.757%207%2012%207%20z%20M%2012%209%20C%2013.654%209%2015%2010.346%2015%2012%20C%2015%2013.654%2013.654%2015%2012%2015%20C%2010.346%2015%209%2013.654%209%2012%20C%209%2010.346%2010.346%209%2012%209%20z'/%3e%3c/svg%3e",MI="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24px'%20height='24px'%3e%3cpath%20d='M%205%203%20C%203.895%203%203%203.895%203%205%20L%203%2019%20C%203%2020.105%203.895%2021%205%2021%20L%2019%2021%20C%2020.105%2021%2021%2020.105%2021%2019%20L%2021%205%20C%2021%203.895%2020.105%203%2019%203%20L%205%203%20z%20M%205%205%20L%2019%205%20L%2019%2019%20L%205%2019%20L%205%205%20z%20M%207.7792969%206.3164062%20C%206.9222969%206.3164062%206.4082031%206.8315781%206.4082031%207.5175781%20C%206.4082031%208.2035781%206.9223594%208.7167969%207.6933594%208.7167969%20C%208.5503594%208.7167969%209.0644531%208.2035781%209.0644531%207.5175781%20C%209.0644531%206.8315781%208.5502969%206.3164062%207.7792969%206.3164062%20z%20M%206.4765625%2010%20L%206.4765625%2017%20L%209%2017%20L%209%2010%20L%206.4765625%2010%20z%20M%2011.082031%2010%20L%2011.082031%2017%20L%2013.605469%2017%20L%2013.605469%2013.173828%20C%2013.605469%2012.034828%2014.418109%2011.871094%2014.662109%2011.871094%20C%2014.906109%2011.871094%2015.558594%2012.115828%2015.558594%2013.173828%20L%2015.558594%2017%20L%2018%2017%20L%2018%2013.173828%20C%2018%2010.976828%2017.023734%2010%2015.802734%2010%20C%2014.581734%2010%2013.930469%2010.406562%2013.605469%2010.976562%20L%2013.605469%2010%20L%2011.082031%2010%20z'/%3e%3c/svg%3e",jI="/Ureno_webdesign/assets/icons8-youtube-logo-CImQkwOS.svg",C_=()=>y.jsxs("div",{className:"footer",children:[y.jsxs("div",{className:"left",children:[y.jsx("div",{className:"logo",children:"URENO"}),y.jsxs("div",{className:"social-sites",children:[y.jsx("object",{data:OI,type:"image/svg+xml",children:y.jsx("img",{src:OI})}),y.jsx("object",{data:LI,type:"image/svg+xml",children:y.jsx("img",{src:LI})}),y.jsx("object",{data:MI,type:"image/svg+xml",children:y.jsx("img",{src:MI})}),y.jsx("object",{data:jI,type:"image/svg+xml",children:y.jsx("img",{src:jI})})]})]}),y.jsxs("div",{className:"right",children:[y.jsxs("menu",{children:[y.jsx("li",{children:"Topic"}),y.jsx("li",{children:"Page"}),y.jsx("li",{children:"Page"}),y.jsx("li",{children:"Page"})]}),y.jsxs("menu",{children:[y.jsx("li",{children:"Topic"}),y.jsx("li",{children:"Page"}),y.jsx("li",{children:"Page"}),y.jsx("li",{children:"Page"})]}),y.jsxs("menu",{children:[y.jsx("li",{children:"Topic"}),y.jsx("li",{children:"Page"}),y.jsx("li",{children:"Page"}),y.jsx("li",{children:"Page"})]})]})]}),ky="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20height='40px'%20width='40px'%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20402.161%20402.161'%20xml:space='preserve'%3e%3cg%3e%3cg%3e%3cg%3e%3cpath%20d='M201.08,49.778c-38.794,0-70.355,31.561-70.355,70.355c0,18.828,7.425,40.193,19.862,57.151%20c14.067,19.181,32,29.745,50.493,29.745c18.494,0,36.426-10.563,50.494-29.745c12.437-16.958,19.862-38.323,19.862-57.151%20C271.436,81.339,239.874,49.778,201.08,49.778z%20M201.08,192.029c-13.396,0-27.391-8.607-38.397-23.616%20c-10.46-14.262-16.958-32.762-16.958-48.28c0-30.523,24.832-55.355,55.355-55.355s55.355,24.832,55.355,55.355%20C256.436,151.824,230.372,192.029,201.08,192.029z'/%3e%3cpath%20d='M201.08,0C109.387,0,34.788,74.598,34.788,166.292c0,91.693,74.598,166.292,166.292,166.292%20s166.292-74.598,166.292-166.292C367.372,74.598,292.773,0,201.08,0z%20M201.08,317.584c-30.099-0.001-58.171-8.839-81.763-24.052%20c0.82-22.969,11.218-44.503,28.824-59.454c6.996-5.941,17.212-6.59,25.422-1.615c8.868,5.374,18.127,8.099,27.52,8.099%20c9.391,0,18.647-2.724,27.511-8.095c8.201-4.97,18.39-4.345,25.353,1.555c17.619,14.93,28.076,36.526,28.895,59.512%20C259.25,308.746,231.178,317.584,201.08,317.584z%20M296.981,283.218c-3.239-23.483-15.011-45.111-33.337-60.64%20c-11.89-10.074-29.1-11.256-42.824-2.939c-12.974,7.861-26.506,7.86-39.483-0.004c-13.74-8.327-30.981-7.116-42.906,3.01%20c-18.31,15.549-30.035,37.115-33.265,60.563c-33.789-27.77-55.378-69.868-55.378-116.915C49.788,82.869,117.658,15,201.08,15%20c83.423,0,151.292,67.869,151.292,151.292C352.372,213.345,330.778,255.448,296.981,283.218z'/%3e%3cpath%20d='M302.806,352.372H99.354c-4.142,0-7.5,3.358-7.5,7.5c0,4.142,3.358,7.5,7.5,7.5h203.452c4.142,0,7.5-3.358,7.5-7.5%20C310.307,355.73,306.948,352.372,302.806,352.372z'/%3e%3cpath%20d='M302.806,387.161H99.354c-4.142,0-7.5,3.358-7.5,7.5c0,4.142,3.358,7.5,7.5,7.5h203.452c4.142,0,7.5-3.358,7.5-7.5%20C310.307,390.519,306.948,387.161,302.806,387.161z'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Y6=async(n,e)=>LD(yp,n,e),X6=(n,e)=>MD(yp,n,e),J6=async()=>{var t;const n=zf(),e=new ss;try{const r=await fO(n,e),s=(t=qD(r))==null?void 0:t.isNewUser,o=r.user;return s?(console.log("New user signed up with Google:",r.user),await g_(o.uid,o.displayname||"Google User",o.email,o.photoURL)):console.log("Existing user logged in with Google: ",r.user),r}catch(r){console.error("Google Sign-In Error:",r)}},S_=async()=>{try{return await yp.signOut(),{success:!0}}catch(n){return console.error("sign-out error: ",n),{success:!1,error:n}}};var Cg={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var VI;function Z6(){return VI||(VI=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",l=0;l<arguments.length;l++){var c=arguments[l];c&&(o=s(o,r(c)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var l="";for(var c in o)e.call(o,c)&&o[c]&&(l=s(l,c));return l}function s(o,l){return l?o?o+" "+l:o+l:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(Cg)),Cg.exports}var eU=Z6();const Et=Nc(eU);var tU=Function.prototype.bind.call(Function.prototype.call,[].slice);function FI(n,e){return tU(n.querySelectorAll(e))}const l1=!!(typeof window<"u"&&window.document&&window.document.createElement);var Ny=!1,Dy=!1;try{var Sg={get passive(){return Ny=!0},get once(){return Dy=Ny=!0}};l1&&(window.addEventListener("test",Sg,Sg),window.removeEventListener("test",Sg,!0))}catch{}function u1(n,e,t,r){if(r&&typeof r!="boolean"&&!Dy){var s=r.once,o=r.capture,l=t;!Dy&&s&&(l=t.__once||function c(h){this.removeEventListener(e,c,o),t.call(this,h)},t.__once=l),n.addEventListener(e,l,Ny?r:o)}n.addEventListener(e,t,r)}function nU(n,e,t){const r=I.useRef(n!==void 0),[s,o]=I.useState(e),l=n!==void 0,c=r.current;return r.current=l,!l&&c&&s!==e&&o(e),[l?n:s,I.useCallback((...h)=>{const[f,...m]=h;let v=t==null?void 0:t(f,...m);return o(f),v},[t])]}function rU(n){const e=I.useRef(null);return I.useEffect(()=>{e.current=n}),e.current}function sU(){const[,n]=I.useReducer(e=>e+1,0);return n}function iU(n){const e=I.useRef(n);return I.useEffect(()=>{e.current=n},[n]),e}function Xi(n){const e=iU(n);return I.useCallback(function(...t){return e.current&&e.current(...t)},[e])}function oU(n,e,t,r=!1){const s=Xi(t);I.useEffect(()=>{const o=typeof n=="function"?n():n;return o.addEventListener(e,s,r),()=>o.removeEventListener(e,s,r)},[n])}const Ep=I.createContext(null);function aU(){return I.useState(null)}var UI=Object.prototype.hasOwnProperty;function BI(n,e,t){for(t of n.keys())if(dc(t,e))return t}function dc(n,e){var t,r,s;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&dc(n[r],e[r]););return r===-1}if(t===Set){if(n.size!==e.size)return!1;for(r of n)if(s=r,s&&typeof s=="object"&&(s=BI(e,s),!s)||!e.has(s))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(r of n)if(s=r[0],s&&typeof s=="object"&&(s=BI(e,s),!s)||!dc(r[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((r=n.byteLength)===e.byteLength)for(;r--&&n.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(n)){if((r=n.byteLength)===e.byteLength)for(;r--&&n[r]===e[r];);return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(UI.call(n,t)&&++r&&!UI.call(e,t)||!(t in e)||!dc(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}function lU(){const n=I.useRef(!0),e=I.useRef(()=>n.current);return I.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),e.current}function uU(n){const e=lU();return[n[0],I.useCallback(t=>{if(e())return n[1](t)},[e,n[1]])]}var jn="top",vr="bottom",_r="right",Vn="left",R_="auto",Zc=[jn,vr,_r,Vn],Rl="start",bc="end",cU="clippingParents",c1="viewport",Gu="popper",dU="reference",$I=Zc.reduce(function(n,e){return n.concat([e+"-"+Rl,e+"-"+bc])},[]),d1=[].concat(Zc,[R_]).reduce(function(n,e){return n.concat([e,e+"-"+Rl,e+"-"+bc])},[]),hU="beforeRead",fU="read",pU="afterRead",mU="beforeMain",gU="main",yU="afterMain",vU="beforeWrite",_U="write",wU="afterWrite",EU=[hU,fU,pU,mU,gU,yU,vU,_U,wU];function ds(n){return n.split("-")[0]}function Zn(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function oa(n){var e=Zn(n).Element;return n instanceof e||n instanceof Element}function hs(n){var e=Zn(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function A_(n){if(typeof ShadowRoot>"u")return!1;var e=Zn(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}var Yo=Math.max,Rf=Math.min,Al=Math.round;function Oy(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function h1(){return!/^((?!chrome|android).)*safari/i.test(Oy())}function Pl(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=n.getBoundingClientRect(),s=1,o=1;e&&hs(n)&&(s=n.offsetWidth>0&&Al(r.width)/n.offsetWidth||1,o=n.offsetHeight>0&&Al(r.height)/n.offsetHeight||1);var l=oa(n)?Zn(n):window,c=l.visualViewport,h=!h1()&&t,f=(r.left+(h&&c?c.offsetLeft:0))/s,m=(r.top+(h&&c?c.offsetTop:0))/o,v=r.width/s,E=r.height/o;return{width:v,height:E,top:m,right:f+v,bottom:m+E,left:f,x:f,y:m}}function P_(n){var e=Pl(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function f1(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&A_(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function lo(n){return n?(n.nodeName||"").toLowerCase():null}function ei(n){return Zn(n).getComputedStyle(n)}function TU(n){return["table","td","th"].indexOf(lo(n))>=0}function yo(n){return((oa(n)?n.ownerDocument:n.document)||window.document).documentElement}function Tp(n){return lo(n)==="html"?n:n.assignedSlot||n.parentNode||(A_(n)?n.host:null)||yo(n)}function zI(n){return!hs(n)||ei(n).position==="fixed"?null:n.offsetParent}function IU(n){var e=/firefox/i.test(Oy()),t=/Trident/i.test(Oy());if(t&&hs(n)){var r=ei(n);if(r.position==="fixed")return null}var s=Tp(n);for(A_(s)&&(s=s.host);hs(s)&&["html","body"].indexOf(lo(s))<0;){var o=ei(s);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return s;s=s.parentNode}return null}function ed(n){for(var e=Zn(n),t=zI(n);t&&TU(t)&&ei(t).position==="static";)t=zI(t);return t&&(lo(t)==="html"||lo(t)==="body"&&ei(t).position==="static")?e:t||IU(n)||e}function b_(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function hc(n,e,t){return Yo(n,Rf(e,t))}function xU(n,e,t){var r=hc(n,e,t);return r>t?t:r}function p1(){return{top:0,right:0,bottom:0,left:0}}function m1(n){return Object.assign({},p1(),n)}function g1(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var CU=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,m1(typeof e!="number"?e:g1(e,Zc))};function SU(n){var e,t=n.state,r=n.name,s=n.options,o=t.elements.arrow,l=t.modifiersData.popperOffsets,c=ds(t.placement),h=b_(c),f=[Vn,_r].indexOf(c)>=0,m=f?"height":"width";if(!(!o||!l)){var v=CU(s.padding,t),E=P_(o),x=h==="y"?jn:Vn,R=h==="y"?vr:_r,A=t.rects.reference[m]+t.rects.reference[h]-l[h]-t.rects.popper[m],S=l[h]-t.rects.reference[h],M=ed(o),U=M?h==="y"?M.clientHeight||0:M.clientWidth||0:0,B=A/2-S/2,W=v[x],Y=U-E[m]-v[R],X=U/2-E[m]/2+B,N=hc(W,X,Y),b=h;t.modifiersData[r]=(e={},e[b]=N,e.centerOffset=N-X,e)}}function RU(n){var e=n.state,t=n.options,r=t.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||f1(e.elements.popper,s)&&(e.elements.arrow=s))}const AU={name:"arrow",enabled:!0,phase:"main",fn:SU,effect:RU,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function bl(n){return n.split("-")[1]}var PU={top:"auto",right:"auto",bottom:"auto",left:"auto"};function bU(n,e){var t=n.x,r=n.y,s=e.devicePixelRatio||1;return{x:Al(t*s)/s||0,y:Al(r*s)/s||0}}function WI(n){var e,t=n.popper,r=n.popperRect,s=n.placement,o=n.variation,l=n.offsets,c=n.position,h=n.gpuAcceleration,f=n.adaptive,m=n.roundOffsets,v=n.isFixed,E=l.x,x=E===void 0?0:E,R=l.y,A=R===void 0?0:R,S=typeof m=="function"?m({x,y:A}):{x,y:A};x=S.x,A=S.y;var M=l.hasOwnProperty("x"),U=l.hasOwnProperty("y"),B=Vn,W=jn,Y=window;if(f){var X=ed(t),N="clientHeight",b="clientWidth";if(X===Zn(t)&&(X=yo(t),ei(X).position!=="static"&&c==="absolute"&&(N="scrollHeight",b="scrollWidth")),X=X,s===jn||(s===Vn||s===_r)&&o===bc){W=vr;var k=v&&X===Y&&Y.visualViewport?Y.visualViewport.height:X[N];A-=k-r.height,A*=h?1:-1}if(s===Vn||(s===jn||s===vr)&&o===bc){B=_r;var L=v&&X===Y&&Y.visualViewport?Y.visualViewport.width:X[b];x-=L-r.width,x*=h?1:-1}}var j=Object.assign({position:c},f&&PU),V=m===!0?bU({x,y:A},Zn(t)):{x,y:A};if(x=V.x,A=V.y,h){var D;return Object.assign({},j,(D={},D[W]=U?"0":"",D[B]=M?"0":"",D.transform=(Y.devicePixelRatio||1)<=1?"translate("+x+"px, "+A+"px)":"translate3d("+x+"px, "+A+"px, 0)",D))}return Object.assign({},j,(e={},e[W]=U?A+"px":"",e[B]=M?x+"px":"",e.transform="",e))}function kU(n){var e=n.state,t=n.options,r=t.gpuAcceleration,s=r===void 0?!0:r,o=t.adaptive,l=o===void 0?!0:o,c=t.roundOffsets,h=c===void 0?!0:c,f={placement:ds(e.placement),variation:bl(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,WI(Object.assign({},f,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:h})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,WI(Object.assign({},f,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const NU={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:kU,data:{}};var Ph={passive:!0};function DU(n){var e=n.state,t=n.instance,r=n.options,s=r.scroll,o=s===void 0?!0:s,l=r.resize,c=l===void 0?!0:l,h=Zn(e.elements.popper),f=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&f.forEach(function(m){m.addEventListener("scroll",t.update,Ph)}),c&&h.addEventListener("resize",t.update,Ph),function(){o&&f.forEach(function(m){m.removeEventListener("scroll",t.update,Ph)}),c&&h.removeEventListener("resize",t.update,Ph)}}const OU={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:DU,data:{}};var LU={left:"right",right:"left",bottom:"top",top:"bottom"};function Kh(n){return n.replace(/left|right|bottom|top/g,function(e){return LU[e]})}var MU={start:"end",end:"start"};function qI(n){return n.replace(/start|end/g,function(e){return MU[e]})}function k_(n){var e=Zn(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function N_(n){return Pl(yo(n)).left+k_(n).scrollLeft}function jU(n,e){var t=Zn(n),r=yo(n),s=t.visualViewport,o=r.clientWidth,l=r.clientHeight,c=0,h=0;if(s){o=s.width,l=s.height;var f=h1();(f||!f&&e==="fixed")&&(c=s.offsetLeft,h=s.offsetTop)}return{width:o,height:l,x:c+N_(n),y:h}}function VU(n){var e,t=yo(n),r=k_(n),s=(e=n.ownerDocument)==null?void 0:e.body,o=Yo(t.scrollWidth,t.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),l=Yo(t.scrollHeight,t.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),c=-r.scrollLeft+N_(n),h=-r.scrollTop;return ei(s||t).direction==="rtl"&&(c+=Yo(t.clientWidth,s?s.clientWidth:0)-o),{width:o,height:l,x:c,y:h}}function D_(n){var e=ei(n),t=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+s+r)}function y1(n){return["html","body","#document"].indexOf(lo(n))>=0?n.ownerDocument.body:hs(n)&&D_(n)?n:y1(Tp(n))}function fc(n,e){var t;e===void 0&&(e=[]);var r=y1(n),s=r===((t=n.ownerDocument)==null?void 0:t.body),o=Zn(r),l=s?[o].concat(o.visualViewport||[],D_(r)?r:[]):r,c=e.concat(l);return s?c:c.concat(fc(Tp(l)))}function Ly(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function FU(n,e){var t=Pl(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function HI(n,e,t){return e===c1?Ly(jU(n,t)):oa(e)?FU(e,t):Ly(VU(yo(n)))}function UU(n){var e=fc(Tp(n)),t=["absolute","fixed"].indexOf(ei(n).position)>=0,r=t&&hs(n)?ed(n):n;return oa(r)?e.filter(function(s){return oa(s)&&f1(s,r)&&lo(s)!=="body"}):[]}function BU(n,e,t,r){var s=e==="clippingParents"?UU(n):[].concat(e),o=[].concat(s,[t]),l=o[0],c=o.reduce(function(h,f){var m=HI(n,f,r);return h.top=Yo(m.top,h.top),h.right=Rf(m.right,h.right),h.bottom=Rf(m.bottom,h.bottom),h.left=Yo(m.left,h.left),h},HI(n,l,r));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function v1(n){var e=n.reference,t=n.element,r=n.placement,s=r?ds(r):null,o=r?bl(r):null,l=e.x+e.width/2-t.width/2,c=e.y+e.height/2-t.height/2,h;switch(s){case jn:h={x:l,y:e.y-t.height};break;case vr:h={x:l,y:e.y+e.height};break;case _r:h={x:e.x+e.width,y:c};break;case Vn:h={x:e.x-t.width,y:c};break;default:h={x:e.x,y:e.y}}var f=s?b_(s):null;if(f!=null){var m=f==="y"?"height":"width";switch(o){case Rl:h[f]=h[f]-(e[m]/2-t[m]/2);break;case bc:h[f]=h[f]+(e[m]/2-t[m]/2);break}}return h}function kc(n,e){e===void 0&&(e={});var t=e,r=t.placement,s=r===void 0?n.placement:r,o=t.strategy,l=o===void 0?n.strategy:o,c=t.boundary,h=c===void 0?cU:c,f=t.rootBoundary,m=f===void 0?c1:f,v=t.elementContext,E=v===void 0?Gu:v,x=t.altBoundary,R=x===void 0?!1:x,A=t.padding,S=A===void 0?0:A,M=m1(typeof S!="number"?S:g1(S,Zc)),U=E===Gu?dU:Gu,B=n.rects.popper,W=n.elements[R?U:E],Y=BU(oa(W)?W:W.contextElement||yo(n.elements.popper),h,m,l),X=Pl(n.elements.reference),N=v1({reference:X,element:B,placement:s}),b=Ly(Object.assign({},B,N)),k=E===Gu?b:X,L={top:Y.top-k.top+M.top,bottom:k.bottom-Y.bottom+M.bottom,left:Y.left-k.left+M.left,right:k.right-Y.right+M.right},j=n.modifiersData.offset;if(E===Gu&&j){var V=j[s];Object.keys(L).forEach(function(D){var le=[_r,vr].indexOf(D)>=0?1:-1,Ce=[jn,vr].indexOf(D)>=0?"y":"x";L[D]+=V[Ce]*le})}return L}function $U(n,e){e===void 0&&(e={});var t=e,r=t.placement,s=t.boundary,o=t.rootBoundary,l=t.padding,c=t.flipVariations,h=t.allowedAutoPlacements,f=h===void 0?d1:h,m=bl(r),v=m?c?$I:$I.filter(function(R){return bl(R)===m}):Zc,E=v.filter(function(R){return f.indexOf(R)>=0});E.length===0&&(E=v);var x=E.reduce(function(R,A){return R[A]=kc(n,{placement:A,boundary:s,rootBoundary:o,padding:l})[ds(A)],R},{});return Object.keys(x).sort(function(R,A){return x[R]-x[A]})}function zU(n){if(ds(n)===R_)return[];var e=Kh(n);return[qI(n),e,qI(e)]}function WU(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var s=t.mainAxis,o=s===void 0?!0:s,l=t.altAxis,c=l===void 0?!0:l,h=t.fallbackPlacements,f=t.padding,m=t.boundary,v=t.rootBoundary,E=t.altBoundary,x=t.flipVariations,R=x===void 0?!0:x,A=t.allowedAutoPlacements,S=e.options.placement,M=ds(S),U=M===S,B=h||(U||!R?[Kh(S)]:zU(S)),W=[S].concat(B).reduce(function(Ie,Ae){return Ie.concat(ds(Ae)===R_?$U(e,{placement:Ae,boundary:m,rootBoundary:v,padding:f,flipVariations:R,allowedAutoPlacements:A}):Ae)},[]),Y=e.rects.reference,X=e.rects.popper,N=new Map,b=!0,k=W[0],L=0;L<W.length;L++){var j=W[L],V=ds(j),D=bl(j)===Rl,le=[jn,vr].indexOf(V)>=0,Ce=le?"width":"height",Re=kc(e,{placement:j,boundary:m,rootBoundary:v,altBoundary:E,padding:f}),Te=le?D?_r:Vn:D?vr:jn;Y[Ce]>X[Ce]&&(Te=Kh(Te));var se=Kh(Te),ue=[];if(o&&ue.push(Re[V]<=0),c&&ue.push(Re[Te]<=0,Re[se]<=0),ue.every(function(Ie){return Ie})){k=j,b=!1;break}N.set(j,ue)}if(b)for(var ie=R?3:1,z=function(Ae){var De=W.find(function(je){var Oe=N.get(je);if(Oe)return Oe.slice(0,Ae).every(function(Ke){return Ke})});if(De)return k=De,"break"},J=ie;J>0;J--){var pe=z(J);if(pe==="break")break}e.placement!==k&&(e.modifiersData[r]._skip=!0,e.placement=k,e.reset=!0)}}const qU={name:"flip",enabled:!0,phase:"main",fn:WU,requiresIfExists:["offset"],data:{_skip:!1}};function GI(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function KI(n){return[jn,_r,vr,Vn].some(function(e){return n[e]>=0})}function HU(n){var e=n.state,t=n.name,r=e.rects.reference,s=e.rects.popper,o=e.modifiersData.preventOverflow,l=kc(e,{elementContext:"reference"}),c=kc(e,{altBoundary:!0}),h=GI(l,r),f=GI(c,s,o),m=KI(h),v=KI(f);e.modifiersData[t]={referenceClippingOffsets:h,popperEscapeOffsets:f,isReferenceHidden:m,hasPopperEscaped:v},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":v})}const GU={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:HU};function KU(n,e,t){var r=ds(n),s=[Vn,jn].indexOf(r)>=0?-1:1,o=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,l=o[0],c=o[1];return l=l||0,c=(c||0)*s,[Vn,_r].indexOf(r)>=0?{x:c,y:l}:{x:l,y:c}}function QU(n){var e=n.state,t=n.options,r=n.name,s=t.offset,o=s===void 0?[0,0]:s,l=d1.reduce(function(m,v){return m[v]=KU(v,e.rects,o),m},{}),c=l[e.placement],h=c.x,f=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=f),e.modifiersData[r]=l}const YU={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:QU};function XU(n){var e=n.state,t=n.name;e.modifiersData[t]=v1({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const JU={name:"popperOffsets",enabled:!0,phase:"read",fn:XU,data:{}};function ZU(n){return n==="x"?"y":"x"}function e9(n){var e=n.state,t=n.options,r=n.name,s=t.mainAxis,o=s===void 0?!0:s,l=t.altAxis,c=l===void 0?!1:l,h=t.boundary,f=t.rootBoundary,m=t.altBoundary,v=t.padding,E=t.tether,x=E===void 0?!0:E,R=t.tetherOffset,A=R===void 0?0:R,S=kc(e,{boundary:h,rootBoundary:f,padding:v,altBoundary:m}),M=ds(e.placement),U=bl(e.placement),B=!U,W=b_(M),Y=ZU(W),X=e.modifiersData.popperOffsets,N=e.rects.reference,b=e.rects.popper,k=typeof A=="function"?A(Object.assign({},e.rects,{placement:e.placement})):A,L=typeof k=="number"?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),j=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,V={x:0,y:0};if(X){if(o){var D,le=W==="y"?jn:Vn,Ce=W==="y"?vr:_r,Re=W==="y"?"height":"width",Te=X[W],se=Te+S[le],ue=Te-S[Ce],ie=x?-b[Re]/2:0,z=U===Rl?N[Re]:b[Re],J=U===Rl?-b[Re]:-N[Re],pe=e.elements.arrow,Ie=x&&pe?P_(pe):{width:0,height:0},Ae=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:p1(),De=Ae[le],je=Ae[Ce],Oe=hc(0,N[Re],Ie[Re]),Ke=B?N[Re]/2-ie-Oe-De-L.mainAxis:z-Oe-De-L.mainAxis,Rt=B?-N[Re]/2+ie+Oe+je+L.mainAxis:J+Oe+je+L.mainAxis,Un=e.elements.arrow&&ed(e.elements.arrow),si=Un?W==="y"?Un.clientTop||0:Un.clientLeft||0:0,wr=(D=j==null?void 0:j[W])!=null?D:0,vs=Te+Ke-wr-si,ii=Te+Rt-wr,oi=hc(x?Rf(se,vs):se,Te,x?Yo(ue,ii):ue);X[W]=oi,V[W]=oi-Te}if(c){var ai,fa=W==="x"?jn:Vn,li=W==="x"?vr:_r,Qt=X[Y],xn=Y==="y"?"height":"width",ui=Qt+S[fa],_s=Qt-S[li],qr=[jn,Vn].indexOf(M)!==-1,ci=(ai=j==null?void 0:j[Y])!=null?ai:0,yt=qr?ui:Qt-N[xn]-b[xn]-ci+L.altAxis,vt=qr?Qt+N[xn]+b[xn]-ci-L.altAxis:_s,er=x&&qr?xU(yt,Qt,vt):hc(x?yt:ui,Qt,x?vt:_s);X[Y]=er,V[Y]=er-Qt}e.modifiersData[r]=V}}const t9={name:"preventOverflow",enabled:!0,phase:"main",fn:e9,requiresIfExists:["offset"]};function n9(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function r9(n){return n===Zn(n)||!hs(n)?k_(n):n9(n)}function s9(n){var e=n.getBoundingClientRect(),t=Al(e.width)/n.offsetWidth||1,r=Al(e.height)/n.offsetHeight||1;return t!==1||r!==1}function i9(n,e,t){t===void 0&&(t=!1);var r=hs(e),s=hs(e)&&s9(e),o=yo(e),l=Pl(n,s,t),c={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(r||!r&&!t)&&((lo(e)!=="body"||D_(o))&&(c=r9(e)),hs(e)?(h=Pl(e,!0),h.x+=e.clientLeft,h.y+=e.clientTop):o&&(h.x=N_(o))),{x:l.left+c.scrollLeft-h.x,y:l.top+c.scrollTop-h.y,width:l.width,height:l.height}}function o9(n){var e=new Map,t=new Set,r=[];n.forEach(function(o){e.set(o.name,o)});function s(o){t.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(c){if(!t.has(c)){var h=e.get(c);h&&s(h)}}),r.push(o)}return n.forEach(function(o){t.has(o.name)||s(o)}),r}function a9(n){var e=o9(n);return EU.reduce(function(t,r){return t.concat(e.filter(function(s){return s.phase===r}))},[])}function l9(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function u9(n){var e=n.reduce(function(t,r){var s=t[r.name];return t[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var QI={placement:"bottom",modifiers:[],strategy:"absolute"};function YI(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function c9(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,s=e.defaultOptions,o=s===void 0?QI:s;return function(c,h,f){f===void 0&&(f=o);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},QI,o),modifiersData:{},elements:{reference:c,popper:h},attributes:{},styles:{}},v=[],E=!1,x={state:m,setOptions:function(M){var U=typeof M=="function"?M(m.options):M;A(),m.options=Object.assign({},o,m.options,U),m.scrollParents={reference:oa(c)?fc(c):c.contextElement?fc(c.contextElement):[],popper:fc(h)};var B=a9(u9([].concat(r,m.options.modifiers)));return m.orderedModifiers=B.filter(function(W){return W.enabled}),R(),x.update()},forceUpdate:function(){if(!E){var M=m.elements,U=M.reference,B=M.popper;if(YI(U,B)){m.rects={reference:i9(U,ed(B),m.options.strategy==="fixed"),popper:P_(B)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(L){return m.modifiersData[L.name]=Object.assign({},L.data)});for(var W=0;W<m.orderedModifiers.length;W++){if(m.reset===!0){m.reset=!1,W=-1;continue}var Y=m.orderedModifiers[W],X=Y.fn,N=Y.options,b=N===void 0?{}:N,k=Y.name;typeof X=="function"&&(m=X({state:m,options:b,name:k,instance:x})||m)}}}},update:l9(function(){return new Promise(function(S){x.forceUpdate(),S(m)})}),destroy:function(){A(),E=!0}};if(!YI(c,h))return x;x.setOptions(f).then(function(S){!E&&f.onFirstUpdate&&f.onFirstUpdate(S)});function R(){m.orderedModifiers.forEach(function(S){var M=S.name,U=S.options,B=U===void 0?{}:U,W=S.effect;if(typeof W=="function"){var Y=W({state:m,name:M,instance:x,options:B}),X=function(){};v.push(Y||X)}})}function A(){v.forEach(function(S){return S()}),v=[]}return x}}const d9=c9({defaultModifiers:[GU,JU,NU,OU,YU,qU,t9,AU]}),h9=["enabled","placement","strategy","modifiers"];function f9(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}const p9={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},m9={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:n})=>()=>{const{reference:e,popper:t}=n.elements;if("removeAttribute"in e){const r=(e.getAttribute("aria-describedby")||"").split(",").filter(s=>s.trim()!==t.id);r.length?e.setAttribute("aria-describedby",r.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:n})=>{var e;const{popper:t,reference:r}=n.elements,s=(e=t.getAttribute("role"))==null?void 0:e.toLowerCase();if(t.id&&s==="tooltip"&&"setAttribute"in r){const o=r.getAttribute("aria-describedby");if(o&&o.split(",").indexOf(t.id)!==-1)return;r.setAttribute("aria-describedby",o?`${o},${t.id}`:t.id)}}},g9=[];function y9(n,e,t={}){let{enabled:r=!0,placement:s="bottom",strategy:o="absolute",modifiers:l=g9}=t,c=f9(t,h9);const h=I.useRef(l),f=I.useRef(),m=I.useCallback(()=>{var S;(S=f.current)==null||S.update()},[]),v=I.useCallback(()=>{var S;(S=f.current)==null||S.forceUpdate()},[]),[E,x]=uU(I.useState({placement:s,update:m,forceUpdate:v,attributes:{},styles:{popper:{},arrow:{}}})),R=I.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:S})=>{const M={},U={};Object.keys(S.elements).forEach(B=>{M[B]=S.styles[B],U[B]=S.attributes[B]}),x({state:S,styles:M,attributes:U,update:m,forceUpdate:v,placement:S.placement})}}),[m,v,x]),A=I.useMemo(()=>(dc(h.current,l)||(h.current=l),h.current),[l]);return I.useEffect(()=>{!f.current||!r||f.current.setOptions({placement:s,strategy:o,modifiers:[...A,R,p9]})},[o,s,R,r,A]),I.useEffect(()=>{if(!(!r||n==null||e==null))return f.current=d9(n,e,Object.assign({},c,{placement:s,strategy:o,modifiers:[...A,m9,R]})),()=>{f.current!=null&&(f.current.destroy(),f.current=void 0,x(S=>Object.assign({},S,{attributes:{},styles:{popper:{}}})))}},[r,n,e]),E}function XI(n,e){if(n.contains)return n.contains(e);if(n.compareDocumentPosition)return n===e||!!(n.compareDocumentPosition(e)&16)}function v9(n,e,t,r){var s=r&&typeof r!="boolean"?r.capture:r;n.removeEventListener(e,t,s),t.__once&&n.removeEventListener(e,t.__once,s)}function bh(n,e,t,r){return u1(n,e,t,r),function(){v9(n,e,t,r)}}function _9(n){return n&&n.ownerDocument||document}var Rg,JI;function w9(){if(JI)return Rg;JI=1;var n=function(){};return Rg=n,Rg}var E9=w9();const T9=Nc(E9),ZI=()=>{};function I9(n){return n.button===0}function x9(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}const Ag=n=>n&&("current"in n?n.current:n),ex={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function C9(n,e=ZI,{disabled:t,clickTrigger:r="click"}={}){const s=I.useRef(!1),o=I.useRef(!1),l=I.useCallback(f=>{const m=Ag(n);T9(!!m,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),s.current=!m||x9(f)||!I9(f)||!!XI(m,f.target)||o.current,o.current=!1},[n]),c=Xi(f=>{const m=Ag(n);m&&XI(m,f.target)?o.current=!0:o.current=!1}),h=Xi(f=>{s.current||e(f)});I.useEffect(()=>{var f,m;if(t||n==null)return;const v=_9(Ag(n)),E=v.defaultView||window;let x=(f=E.event)!=null?f:(m=E.parent)==null?void 0:m.event,R=null;ex[r]&&(R=bh(v,ex[r],c,!0));const A=bh(v,r,l,!0),S=bh(v,r,U=>{if(U===x){x=void 0;return}h(U)});let M=[];return"ontouchstart"in v.documentElement&&(M=[].slice.call(v.body.children).map(U=>bh(U,"mousemove",ZI))),()=>{R==null||R(),A(),S(),M.forEach(U=>U())}},[n,t,r,l,c,h])}function S9(n){const e={};return Array.isArray(n)?(n==null||n.forEach(t=>{e[t.name]=t}),e):n||e}function R9(n={}){return Array.isArray(n)?n:Object.keys(n).map(e=>(n[e].name=e,n[e]))}function A9({enabled:n,enableEvents:e,placement:t,flip:r,offset:s,fixed:o,containerPadding:l,arrowElement:c,popperConfig:h={}}){var f,m,v,E,x;const R=S9(h.modifiers);return Object.assign({},h,{placement:t,enabled:n,strategy:o?"fixed":h.strategy,modifiers:R9(Object.assign({},R,{eventListeners:{enabled:e,options:(f=R.eventListeners)==null?void 0:f.options},preventOverflow:Object.assign({},R.preventOverflow,{options:l?Object.assign({padding:l},(m=R.preventOverflow)==null?void 0:m.options):(v=R.preventOverflow)==null?void 0:v.options}),offset:{options:Object.assign({offset:s},(E=R.offset)==null?void 0:E.options)},arrow:Object.assign({},R.arrow,{enabled:!!c,options:Object.assign({},(x=R.arrow)==null?void 0:x.options,{element:c})}),flip:Object.assign({enabled:!!r},R.flip)}))})}const P9=["children","usePopper"];function b9(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}const k9=()=>{};function _1(n={}){const e=I.useContext(Ep),[t,r]=aU(),s=I.useRef(!1),{flip:o,offset:l,rootCloseEvent:c,fixed:h=!1,placement:f,popperConfig:m={},enableEventListeners:v=!0,usePopper:E=!!e}=n,x=(e==null?void 0:e.show)==null?!!n.show:e.show;x&&!s.current&&(s.current=!0);const R=X=>{e==null||e.toggle(!1,X)},{placement:A,setMenu:S,menuElement:M,toggleElement:U}=e||{},B=y9(U,M,A9({placement:f||A||"bottom-start",enabled:E,enableEvents:v??x,offset:l,flip:o,fixed:h,arrowElement:t,popperConfig:m})),W=Object.assign({ref:S||k9,"aria-labelledby":U==null?void 0:U.id},B.attributes.popper,{style:B.styles.popper}),Y={show:x,placement:A,hasShown:s.current,toggle:e==null?void 0:e.toggle,popper:E?B:null,arrowProps:E?Object.assign({ref:r},B.attributes.arrow,{style:B.styles.arrow}):{}};return C9(M,R,{clickTrigger:c,disabled:!x}),[W,Y]}function w1(n){let{children:e,usePopper:t=!0}=n,r=b9(n,P9);const[s,o]=_1(Object.assign({},r,{usePopper:t}));return y.jsx(y.Fragment,{children:e(s,o)})}w1.displayName="DropdownMenu";const O_={prefix:String(Math.round(Math.random()*1e10)),current:0},E1=In.createContext(O_),N9=In.createContext(!1);let D9=!!(typeof window<"u"&&window.document&&window.document.createElement),Pg=new WeakMap;function O9(n=!1){let e=I.useContext(E1),t=I.useRef(null);if(t.current===null&&!n){var r,s;let o=(s=In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||s===void 0||(r=s.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(o){let l=Pg.get(o);l==null?Pg.set(o,{id:e.current,state:o.memoizedState}):o.memoizedState!==l.state&&(e.current=l.id,Pg.delete(o))}t.current=++e.current}return t.current}function L9(n){let e=I.useContext(E1);e===O_&&!D9&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let t=O9(!!n),r=`react-aria${e.prefix}`;return n||`${r}-${t}`}function M9(n){let e=In.useId(),[t]=I.useState(B9()),r=t?"react-aria":`react-aria${O_.prefix}`;return n||`${r}-${e}`}const j9=typeof In.useId=="function"?M9:L9;function V9(){return!1}function F9(){return!0}function U9(n){return()=>{}}function B9(){return typeof In.useSyncExternalStore=="function"?In.useSyncExternalStore(U9,V9,F9):I.useContext(N9)}const T1=n=>{var e;return((e=n.getAttribute("role"))==null?void 0:e.toLowerCase())==="menu"},tx=()=>{};function I1(){const n=j9(),{show:e=!1,toggle:t=tx,setToggle:r,menuElement:s}=I.useContext(Ep)||{},o=I.useCallback(c=>{t(!e,c)},[e,t]),l={id:n,ref:r||tx,onClick:o,"aria-expanded":!!e};return s&&T1(s)&&(l["aria-haspopup"]=!0),[l,{show:e,toggle:t}]}function x1({children:n}){const[e,t]=I1();return y.jsx(y.Fragment,{children:n(e,t)})}x1.displayName="DropdownToggle";const My=I.createContext(null),nx=(n,e=null)=>n!=null?String(n):e||null,C1=I.createContext(null);C1.displayName="NavContext";const $9=["as","disabled"];function z9(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function W9(n){return!n||n.trim()==="#"}function L_({tagName:n,disabled:e,href:t,target:r,rel:s,role:o,onClick:l,tabIndex:c=0,type:h}){n||(t!=null||r!=null||s!=null?n="a":n="button");const f={tagName:n};if(n==="button")return[{type:h||"button",disabled:e},f];const m=E=>{if((e||n==="a"&&W9(t))&&E.preventDefault(),e){E.stopPropagation();return}l==null||l(E)},v=E=>{E.key===" "&&(E.preventDefault(),m(E))};return n==="a"&&(t||(t="#"),e&&(t=void 0)),[{role:o??"button",disabled:void 0,tabIndex:e?void 0:c,href:t,target:n==="a"?r:void 0,"aria-disabled":e||void 0,rel:n==="a"?s:void 0,onClick:m,onKeyDown:v},f]}const S1=I.forwardRef((n,e)=>{let{as:t,disabled:r}=n,s=z9(n,$9);const[o,{tagName:l}]=L_(Object.assign({tagName:t,disabled:r},s));return y.jsx(l,Object.assign({},s,o,{ref:e}))});S1.displayName="Button";const q9="data-rr-ui-";function R1(n){return`${q9}${n}`}const H9=["eventKey","disabled","onClick","active","as"];function G9(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function A1({key:n,href:e,active:t,disabled:r,onClick:s}){const o=I.useContext(My),l=I.useContext(C1),{activeKey:c}=l||{},h=nx(n,e),f=t==null&&n!=null?nx(c)===h:t;return[{onClick:Xi(v=>{r||(s==null||s(v),o&&!v.isPropagationStopped()&&o(h,v))}),"aria-disabled":r||void 0,"aria-selected":f,[R1("dropdown-item")]:""},{isActive:f}]}const P1=I.forwardRef((n,e)=>{let{eventKey:t,disabled:r,onClick:s,active:o,as:l=S1}=n,c=G9(n,H9);const[h]=A1({key:t,href:c.href,disabled:r,onClick:s,active:o});return y.jsx(l,Object.assign({},c,{ref:e},h))});P1.displayName="DropdownItem";const b1=I.createContext(l1?window:void 0);b1.Provider;function K9(){return I.useContext(b1)}function rx(){const n=sU(),e=I.useRef(null),t=I.useCallback(r=>{e.current=r,n()},[n]);return[e,t]}function td({defaultShow:n,show:e,onSelect:t,onToggle:r,itemSelector:s=`* [${R1("dropdown-item")}]`,focusFirstItemOnShow:o,placement:l="bottom-start",children:c}){const h=K9(),[f,m]=nU(e,n,r),[v,E]=rx(),x=v.current,[R,A]=rx(),S=R.current,M=rU(f),U=I.useRef(null),B=I.useRef(!1),W=I.useContext(My),Y=I.useCallback((j,V,D=V==null?void 0:V.type)=>{m(j,{originalEvent:V,source:D})},[m]),X=Xi((j,V)=>{t==null||t(j,V),Y(!1,V,"select"),V.isPropagationStopped()||W==null||W(j,V)}),N=I.useMemo(()=>({toggle:Y,placement:l,show:f,menuElement:x,toggleElement:S,setMenu:E,setToggle:A}),[Y,l,f,x,S,E,A]);x&&M&&!f&&(B.current=x.contains(x.ownerDocument.activeElement));const b=Xi(()=>{S&&S.focus&&S.focus()}),k=Xi(()=>{const j=U.current;let V=o;if(V==null&&(V=v.current&&T1(v.current)?"keyboard":!1),V===!1||V==="keyboard"&&!/^key.+$/.test(j))return;const D=FI(v.current,s)[0];D&&D.focus&&D.focus()});I.useEffect(()=>{f?k():B.current&&(B.current=!1,b())},[f,B,b,k]),I.useEffect(()=>{U.current=null});const L=(j,V)=>{if(!v.current)return null;const D=FI(v.current,s);let le=D.indexOf(j)+V;return le=Math.max(0,Math.min(le,D.length)),D[le]};return oU(I.useCallback(()=>h.document,[h]),"keydown",j=>{var V,D;const{key:le}=j,Ce=j.target,Re=(V=v.current)==null?void 0:V.contains(Ce),Te=(D=R.current)==null?void 0:D.contains(Ce);if(/input|textarea/i.test(Ce.tagName)&&(le===" "||le!=="Escape"&&Re||le==="Escape"&&Ce.type==="search")||!Re&&!Te||le==="Tab"&&(!v.current||!f))return;U.current=j.type;const ue={originalEvent:j,source:j.type};switch(le){case"ArrowUp":{const ie=L(Ce,-1);ie&&ie.focus&&ie.focus(),j.preventDefault();return}case"ArrowDown":if(j.preventDefault(),!f)m(!0,ue);else{const ie=L(Ce,1);ie&&ie.focus&&ie.focus()}return;case"Tab":u1(Ce.ownerDocument,"keyup",ie=>{var z;(ie.key==="Tab"&&!ie.target||!((z=v.current)!=null&&z.contains(ie.target)))&&m(!1,ue)},{once:!0});break;case"Escape":le==="Escape"&&(j.preventDefault(),j.stopPropagation()),m(!1,ue);break}}),y.jsx(My.Provider,{value:X,children:y.jsx(Ep.Provider,{value:N,children:c})})}td.displayName="Dropdown";td.Menu=w1;td.Toggle=x1;td.Item=P1;function jy(){return jy=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jy.apply(null,arguments)}function Q9(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function sx(n){return"default"+n.charAt(0).toUpperCase()+n.substr(1)}function Y9(n){var e=X9(n,"string");return typeof e=="symbol"?e:String(e)}function X9(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function J9(n,e,t){var r=I.useRef(n!==void 0),s=I.useState(e),o=s[0],l=s[1],c=n!==void 0,h=r.current;return r.current=c,!c&&h&&o!==e&&l(e),[c?n:o,I.useCallback(function(f){for(var m=arguments.length,v=new Array(m>1?m-1:0),E=1;E<m;E++)v[E-1]=arguments[E];t&&t.apply(void 0,[f].concat(v)),l(f)},[t])]}function Z9(n,e){return Object.keys(e).reduce(function(t,r){var s,o=t,l=o[sx(r)],c=o[r],h=Q9(o,[sx(r),r].map(Y9)),f=e[r],m=J9(c,l,n[f]),v=m[0],E=m[1];return jy({},h,(s={},s[r]=v,s[f]=E,s))},n)}function e5(n){const e=I.useRef(n);return I.useEffect(()=>{e.current=n},[n]),e}function t5(n){const e=e5(n);return I.useCallback(function(...t){return e.current&&e.current(...t)},[e])}const M_=I.createContext({});M_.displayName="DropdownContext";const n5=["xxl","xl","lg","md","sm","xs"],r5="xs",nd=I.createContext({prefixes:{},breakpoints:n5,minBreakpoint:r5}),{Consumer:FB,Provider:UB}=nd;function Dt(n,e){const{prefixes:t}=I.useContext(nd);return n||t[e]||e}function s5(){const{breakpoints:n}=I.useContext(nd);return n}function i5(){const{minBreakpoint:n}=I.useContext(nd);return n}function o5(){const{dir:n}=I.useContext(nd);return n==="rtl"}const k1=I.forwardRef(({className:n,bsPrefix:e,as:t="hr",role:r="separator",...s},o)=>(e=Dt(e,"dropdown-divider"),y.jsx(t,{ref:o,className:Et(n,e),role:r,...s})));k1.displayName="DropdownDivider";const N1=I.forwardRef(({className:n,bsPrefix:e,as:t="div",role:r="heading",...s},o)=>(e=Dt(e,"dropdown-header"),y.jsx(t,{ref:o,className:Et(n,e),role:r,...s})));N1.displayName="DropdownHeader";const a5=["onKeyDown"];function l5(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function u5(n){return!n||n.trim()==="#"}const D1=I.forwardRef((n,e)=>{let{onKeyDown:t}=n,r=l5(n,a5);const[s]=L_(Object.assign({tagName:"a"},r)),o=Xi(l=>{s.onKeyDown(l),t==null||t(l)});return u5(r.href)||r.role==="button"?y.jsx("a",Object.assign({ref:e},r,s,{onKeyDown:o})):y.jsx("a",Object.assign({ref:e},r,{onKeyDown:t}))});D1.displayName="Anchor";const O1=I.forwardRef(({bsPrefix:n,className:e,eventKey:t,disabled:r=!1,onClick:s,active:o,as:l=D1,...c},h)=>{const f=Dt(n,"dropdown-item"),[m,v]=A1({key:t,href:c.href,disabled:r,onClick:s,active:o});return y.jsx(l,{...c,...m,ref:h,className:Et(e,f,v.isActive&&"active",r&&"disabled")})});O1.displayName="DropdownItem";const L1=I.forwardRef(({className:n,bsPrefix:e,as:t="span",...r},s)=>(e=Dt(e,"dropdown-item-text"),y.jsx(t,{ref:s,className:Et(n,e),...r})));L1.displayName="DropdownItemText";const c5=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",d5=typeof document<"u",h5=d5||c5?I.useLayoutEffect:I.useEffect,ix=n=>!n||typeof n=="function"?n:e=>{n.current=e};function f5(n,e){const t=ix(n),r=ix(e);return s=>{t&&t(s),r&&r(s)}}function M1(n,e){return I.useMemo(()=>f5(n,e),[n,e])}const j_=I.createContext(null);j_.displayName="InputGroupContext";const j1=I.createContext(null);j1.displayName="NavbarContext";function V1(n,e){return n}var bg={exports:{}},kg,ox;function p5(){if(ox)return kg;ox=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return kg=n,kg}var Ng,ax;function m5(){if(ax)return Ng;ax=1;var n=p5();function e(){}function t(){}return t.resetWarningCache=e,Ng=function(){function r(l,c,h,f,m,v){if(v!==n){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}r.isRequired=r;function s(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},Ng}var lx;function g5(){return lx||(lx=1,bg.exports=m5()()),bg.exports}var y5=g5();const gl=Nc(y5);function F1(n,e,t){const r=t?"top-end":"top-start",s=t?"top-start":"top-end",o=t?"bottom-end":"bottom-start",l=t?"bottom-start":"bottom-end",c=t?"right-start":"left-start",h=t?"right-end":"left-end",f=t?"left-start":"right-start",m=t?"left-end":"right-end";let v=n?l:o;return e==="up"?v=n?s:r:e==="end"?v=n?m:f:e==="start"?v=n?h:c:e==="down-centered"?v="bottom":e==="up-centered"&&(v="top"),v}const U1=I.forwardRef(({bsPrefix:n,className:e,align:t,rootCloseEvent:r,flip:s=!0,show:o,renderOnMount:l,as:c="div",popperConfig:h,variant:f,...m},v)=>{let E=!1;const x=I.useContext(j1),R=Dt(n,"dropdown-menu"),{align:A,drop:S,isRTL:M}=I.useContext(M_);t=t||A;const U=I.useContext(j_),B=[];if(t)if(typeof t=="object"){const j=Object.keys(t);if(j.length){const V=j[0],D=t[V];E=D==="start",B.push(`${R}-${V}-${D}`)}}else t==="end"&&(E=!0);const W=F1(E,S,M),[Y,{hasShown:X,popper:N,show:b,toggle:k}]=_1({flip:s,rootCloseEvent:r,show:o,usePopper:!x&&B.length===0,offset:[0,2],popperConfig:h,placement:W});if(Y.ref=M1(V1(v),Y.ref),h5(()=>{b&&(N==null||N.update())},[b]),!X&&!l&&!U)return null;typeof c!="string"&&(Y.show=b,Y.close=()=>k==null?void 0:k(!1),Y.align=t);let L=m.style;return N!=null&&N.placement&&(L={...m.style,...Y.style},m["x-placement"]=N.placement),y.jsx(c,{...m,...Y,style:L,...(B.length||x)&&{"data-bs-popper":"static"},className:Et(e,R,b&&"show",E&&`${R}-end`,f&&`${R}-${f}`,...B)})});U1.displayName="DropdownMenu";const Af=I.forwardRef(({as:n,bsPrefix:e,variant:t="primary",size:r,active:s=!1,disabled:o=!1,className:l,...c},h)=>{const f=Dt(e,"btn"),[m,{tagName:v}]=L_({tagName:n,disabled:o,...c}),E=v;return y.jsx(E,{...m,...c,ref:h,disabled:o,className:Et(l,f,s&&"active",t&&`${f}-${t}`,r&&`${f}-${r}`,c.href&&o&&"disabled")})});Af.displayName="Button";const B1=I.forwardRef(({bsPrefix:n,split:e,className:t,childBsPrefix:r,as:s=Af,...o},l)=>{const c=Dt(n,"dropdown-toggle"),h=I.useContext(Ep);r!==void 0&&(o.bsPrefix=r);const[f]=I1();return f.ref=M1(f.ref,V1(l)),y.jsx(s,{className:Et(t,c,e&&`${c}-split`,(h==null?void 0:h.show)&&"show"),...f,...o})});B1.displayName="DropdownToggle";const $1=I.forwardRef((n,e)=>{const{bsPrefix:t,drop:r="down",show:s,className:o,align:l="start",onSelect:c,onToggle:h,focusFirstItemOnShow:f,as:m="div",navbar:v,autoClose:E=!0,...x}=Z9(n,{show:"onToggle"}),R=I.useContext(j_),A=Dt(t,"dropdown"),S=o5(),M=N=>E===!1?N==="click":E==="inside"?N!=="rootClose":E==="outside"?N!=="select":!0,U=t5((N,b)=>{var k;!((k=b.originalEvent)==null||(k=k.target)==null)&&k.classList.contains("dropdown-toggle")&&b.source==="mousedown"||(b.originalEvent.currentTarget===document&&(b.source!=="keydown"||b.originalEvent.key==="Escape")&&(b.source="rootClose"),M(b.source)&&(h==null||h(N,b)))}),W=F1(l==="end",r,S),Y=I.useMemo(()=>({align:l,drop:r,isRTL:S}),[l,r,S]),X={down:A,"down-centered":`${A}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return y.jsx(M_.Provider,{value:Y,children:y.jsx(td,{placement:W,show:s,onSelect:c,onToggle:U,focusFirstItemOnShow:f,itemSelector:`.${A}-item:not(.disabled):not(:disabled)`,children:R?x.children:y.jsx(m,{...x,ref:e,className:Et(o,s&&"show",X[r])})})})});$1.displayName="Dropdown";const Ls=Object.assign($1,{Toggle:B1,Menu:U1,Item:O1,ItemText:L1,Divider:k1,Header:N1}),v5=()=>{const n=Fn(),{currentUser:e}=gs(),{profile:t}=I.useContext(ha),{toast:r}=__(),[s,o]=I.useState(!1),l=async()=>{try{o(!0),r({title:"Logging out",description:"You are being signed out..."}),await S_(),setTimeout(()=>{n("/"),o(!1)},1e3)}catch(c){console.error("Logout error:",c),r({variant:"destructive",title:"Logout failed",description:"There was an error signing you out."}),o(!1)}};return s?y.jsx(v_,{}):y.jsxs(Ls,{children:[y.jsx(Ls.Toggle,{variant:"success",id:"dropdown-basic",children:y.jsx("img",{src:ky})}),y.jsxs(Ls.Menu,{children:[(t==null?void 0:t.role)==="contractor"?y.jsx(Ls.Item,{as:ft,to:"/contractor-dashboard",children:"Dashboard"}):y.jsx(Ls.Item,{as:ft,to:"/ProfileDashboard",children:"Profile"}),y.jsx(Ls.Item,{as:ft,to:"/designerPage",children:"Designs"}),(e==null?void 0:e.isAdmin)&&y.jsx(Ls.Item,{as:ft,to:"/Admin",children:"Admin"}),y.jsx(Ls.Item,{href:"#/action-3",children:"Action"}),y.jsx(Ls.Item,{onClick:l,children:"Log Out"})]})]})},V_=()=>{const{userLoggedIn:n}=gs()||{userLoggedIn:!1},e=Fn(),[t,r]=I.useState(!1),[s,o]=I.useState(!1),l=async()=>{r(!0);const c=await S_();r(!1),c.success?(o(!0),setTimeout(()=>{e("/")},1500)):alert("Logout failed. Please try again.")};return y.jsxs("div",{className:"nav",children:[y.jsx(ft,{to:"/",children:y.jsx("div",{className:"logo",children:"URENO"})}),y.jsxs("div",{className:"Right",children:[y.jsxs("menu",{children:[y.jsx("li",{children:"AI Design"}),n&&y.jsxs(y.Fragment,{children:[y.jsx(ft,{to:"/messages",children:y.jsx("li",{children:"Messages"})}),y.jsx(ft,{to:"/projects",children:y.jsx("li",{children:"Projects"})})]})]}),n?t?y.jsx("span",{className:"text-sm text-gray-500",children:"Logging out..."}):s?y.jsx("span",{className:"text-sm text-green-600",children:"Logged out!"}):y.jsx("button",{className:"btn login-btn",onClick:l,children:"Log Out"}):y.jsx(ft,{to:"/sign-in",children:y.jsx("button",{className:"btn login-btn",children:"Log In"})}),n?y.jsx(v5,{}):y.jsx("button",{className:"btn profile-btn",children:y.jsx("object",{data:ky,type:"image/svg+xml",children:y.jsx("img",{src:ky})})})]})]})};function _5(){return y.jsxs(y.Fragment,{children:[y.jsx("meta",{charSet:"UTF-8"}),y.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),y.jsx("title",{children:"Ureno"}),y.jsx(V_,{}),y.jsx("div",{className:"center-logo",children:y.jsxs("div",{className:"container",children:[y.jsx("h1",{children:"URENO"}),y.jsx("p",{children:"Renovation Made Simple"}),y.jsx("button",{className:"btn try-now",children:"Try it Now"})]})}),y.jsxs("div",{className:"services",children:[y.jsx("div",{className:"our-services",children:y.jsx("p",{children:"Our Services"})}),y.jsxs("div",{className:"floor-content",children:[y.jsx("div",{className:"flooring fadeInRight",children:y.jsx("p",{children:y.jsx(ft,{to:"/product-page",children:y.jsx("img",{src:K6,alt:"light oak wooden floor"})})})}),y.jsxs("div",{className:"floor-txt fadeInRight",children:[y.jsx("h3",{children:"flooring"}),y.jsx("p",{children:"Lorem ipsum dolor sit amet. A reiciendis repellat in cupiditate temporibus est tenetur architecto sed voluptatibus saepe."})]})]}),y.jsxs("div",{className:"paint-content",children:[y.jsx("div",{className:"painting fadeInLeft",children:y.jsx("img",{src:Q6,alt:"blue painted walls"})}),y.jsxs("div",{className:"paint-txt fadeInLeft",children:[y.jsx("h3",{children:"paint"}),y.jsx("p",{children:"Lorem ipsum dolor sit amet. A reiciendis repellat in cupiditate temporibus est tenetur architecto sed voluptatibus saepe."})]})]})]}),y.jsx(C_,{})]})}const w5="/Ureno_webdesign/assets/Harvest-grove-rigid-CaKY0j96.png",E5="/Ureno_webdesign/assets/tavertine-BlkzyBiO.png",z1=({productId:n,image:e,title:t,description:r,price:s,link:o})=>y.jsx("div",{className:"products",children:y.jsxs(ft,{to:`/productDetail/${n}`,className:"container",children:[y.jsx("img",{src:e,alt:t}),y.jsx("div",{className:"prod-title",children:t}),y.jsx("p",{children:r}),y.jsx("p",{children:s})]})});z1.defaultProps={productId:"default-id",image:"../assets/images/defaultImage.jpg.webp",title:"Default Title",description:"No description available",price:"Price not available.",link:"/productDetail"};function T5(){const[n,e]=I.useState(0),{userLoggedIn:t}=gs()||{userLoggedIn:!1},[r,s]=I.useState([]);return I.useEffect(()=>{(async()=>{try{const l=qc();console.log("Attempting to fetch products from Firestore...");const c=await hr(Us(l,"products"));console.log("Products fetched successfully:",c.size);const h=c.docs.map(f=>({id:f.id,...f.data()}));s(h)}catch(l){console.error("Error fetching products:",l),s([{id:"HarvestGrove",image:w5,title:"Harvest Grove Rigid Luxury Vinyl",description:"Floor and Decor",price:"$2.19/sqft"},{id:"tavertine",image:E5,title:"Inverness Tavertine Vinyl",description:"Floor and Decor",price:"$2.19/sqft"}])}})()},[]),I.useEffect(()=>{const o=()=>{const l=document.querySelector(".nav");l&&e(l.offsetHeight)};return o(),window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}},[]),y.jsxs(y.Fragment,{children:[y.jsx("meta",{charSet:"UTF-8"}),y.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),y.jsx("title",{children:"URENO"}),y.jsx(V_,{}),y.jsxs("div",{className:"body",children:[y.jsxs("div",{className:`main-content ${t?"logged-in":""}`,children:[y.jsx("h1",{children:"Flooring"}),y.jsxs("div",{className:"search",children:[y.jsx("div",{className:"input",children:y.jsx("input",{type:"text",className:"search-bar",placeholder:"Search"})}),y.jsx("div",{className:"filter",children:"Filter"})]}),y.jsx("p",{children:"Popular"}),y.jsx("div",{className:"products",children:r.map(o=>y.jsx(z1,{productId:o.id,image:o.image,title:o.title,description:o.description,price:o.price,link:o.link},o.id))})]}),y.jsx(C_,{})]})]})}const I5=QA("active:scale-95 inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:opacity-50 dark:focus:ring-slate-400 disabled:pointer-events-none dark:focus:ring-offset-slate-900",{variants:{variant:{default:"bg-zinc-900 text-zinc-100 hover:bg-zinc-800",destructive:"text-white hover:bg-red-600 dark:hover:bg-red-600",outline:"bg-zinc-100 text-zinc-900 hover:bg-zinc-200 outline outline-1 outline-zinc-300",subtle:"hover:bg-zinc-200 bg-zinc-100 text-zinc-900",ghost:"bg-transparent hover:bg-zinc-100 text-zinc-800 data-[state=open]:bg-transparent data-[state=open]:bg-transparent",link:"bg-transparent dark:bg-transparent underline-offset-4 hover:underline text-slate-900 dark:text-slate-100 hover:bg-transparent dark:hover:bg-transparent"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-2 rounded-md",xs:"h-8 px-1.5 rounded-sm",lg:"h-11 px-8 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),Pf=I.forwardRef(({className:n,children:e,variant:t,isLoading:r,size:s,...o},l)=>y.jsxs("button",{className:go(I5({variant:t,size:s,className:n})),ref:l,disabled:r,...o,children:[r?y.jsx(o6,{className:"mr-2 h-4 w-4 animate-spin"}):null,e]}));Pf.displayName="Button";const F_={logo:n=>y.jsx("svg",{width:"271.015",height:"70.315",viewBox:"-145.011144365309036 -30.49067544250989 331.0151672857927 130.31489419250988",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("g",{id:"svgGroup",strokeLinecap:"round",fillRule:"nonzero",fontSize:"9pt",stroke:"#000",strokeWidth:"0.25mm",fill:"#000",children:y.jsx("path",{d:"M 0.871 42.383 L 9.367 0 L 22.306 0 L 13.81 42.383 A 30.417 30.417 0 0 0 13.441 44.675 Q 11.706 59.082 27.58 59.082 A 25.912 25.912 0 0 0 35.582 57.938 Q 43.671 55.317 46.807 46.686 A 29.378 29.378 0 0 0 47.99 42.383 L 56.486 0 L 69.425 0 L 60.929 42.383 Q 56.437 64.922 36.013 69.272 A 51.3 51.3 0 0 1 25.333 70.312 Q -4.549 70.313 0.817 42.655 A 54.603 54.603 0 0 1 0.871 42.383 Z M 170.255 69.824 L 157.316 69.824 L 167.57 18.555 L 179.044 18.555 L 177.042 35.84 A 48.043 48.043 0 0 1 182.438 27.877 Q 190.364 18.555 200.871 18.555 Q 215.284 18.555 212.504 34.358 A 37.97 37.97 0 0 1 212.345 35.205 L 205.412 69.824 L 192.472 69.824 L 199.406 35.059 A 9.722 9.722 0 0 0 199.542 34.192 Q 200.038 29.64 195.123 29.082 A 13.143 13.143 0 0 0 193.644 29.004 A 12.397 12.397 0 0 0 186.867 31.196 Q 182.454 34.051 178.041 40.623 A 72.792 72.792 0 0 0 175.187 45.264 L 170.255 69.824 Z M 131.242 49.219 L 118.4 49.219 A 14.778 14.778 0 0 0 118.188 50.62 Q 117.295 59.57 129.826 59.57 A 32.356 32.356 0 0 0 147.217 54.447 A 40.076 40.076 0 0 0 149.064 53.223 L 147.013 63.477 A 29.1 29.1 0 0 1 133.997 69.204 A 40.091 40.091 0 0 1 126.798 69.824 A 35.673 35.673 0 0 1 118.704 68.991 Q 102.573 65.217 106.442 44.34 A 55.876 55.876 0 0 1 106.583 43.604 Q 111.086 21.176 131.247 18.829 A 42.614 42.614 0 0 1 136.173 18.555 A 46.684 46.684 0 0 1 142.691 18.969 Q 157.543 21.075 154.972 33.887 A 16.984 16.984 0 0 1 144.095 47.13 Q 140.663 48.501 136.2 48.972 A 47.285 47.285 0 0 1 131.242 49.219 Z M 120.304 39.746 L 133.244 39.746 Q 137.059 39.746 139.319 38.509 A 6.004 6.004 0 0 0 142.423 34.229 A 6.024 6.024 0 0 0 142.521 33.509 Q 142.836 29.111 135.517 28.744 A 27.909 27.909 0 0 0 134.122 28.711 A 15.659 15.659 0 0 0 128.354 29.709 Q 124.114 31.377 121.81 35.833 A 20.477 20.477 0 0 0 120.304 39.746 Z M 81.828 69.824 L 68.888 69.824 L 79.142 18.555 L 90.617 18.555 L 88.81 34.863 A 59.862 59.862 0 0 1 92.813 28.311 Q 97.632 21.541 102.816 19.469 A 12.42 12.42 0 0 1 107.462 18.555 L 105.265 29.492 A 13.431 13.431 0 0 0 97.693 31.996 Q 92.076 35.776 86.759 45.264 L 81.828 69.824 Z M 224.146 32.761 Q 230.67 20.161 245.33 18.365 A 41.947 41.947 0 0 1 250.431 18.066 A 34.33 34.33 0 0 1 258.326 18.89 Q 274.406 22.705 270.109 44.189 A 43.09 43.09 0 0 1 266.267 55.597 Q 259.743 68.173 245.083 69.966 A 42.024 42.024 0 0 1 239.982 70.264 Q 215.53 70.264 220.164 44.926 A 56.584 56.584 0 0 1 220.304 44.189 A 43.226 43.226 0 0 1 224.146 32.761 Z M 233.292 43.994 Q 230.07 60.059 242.033 60.059 A 12.969 12.969 0 0 0 253.572 53.783 Q 255.134 51.371 256.191 48.032 A 38.445 38.445 0 0 0 257.218 43.994 Q 259.879 30.648 251.601 28.666 A 13.851 13.851 0 0 0 248.38 28.32 Q 236.417 28.32 233.292 43.994 Z",vectorEffect:"non-scaling-stroke"})})}),google:n=>y.jsxs("svg",{...n,viewBox:"0 0 24 24",children:[y.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),y.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),y.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),y.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"}),y.jsx("path",{d:"M1 1h22v22H1z",fill:"none"})]})},x5=({className:n,...e})=>{const{userLoggedIn:t}=gs()||{userLoggedIn:!1},r=Fn(),[s,o]=I.useState(""),[l,c]=I.useState(""),[h,f]=I.useState(!1),{toast:m}=__();I.useEffect(()=>{console.log("Auth state changed: userLoggedIn = ",t),t&&r("/")},[t,r]);const v=async()=>{f(!0);try{const x=await J6();r("/")}catch(x){console.error("Google sign-in error:",x),m({title:"There was a problem.",description:"THere was an error logging in with Google",variant:"destructive"})}finally{f(!1),console.log("Logged in: ",t)}},E=async(x,R)=>{f(!0);try{const A=await X6(x,R);r("/"),m({title:"Success!",description:"Logged in",variant:"default"})}catch(A){let S="Error logging in with email and password";console.log(A.code),A.code==="auth/invalid-credential"?S="Incorrect email or password. Please try again.":A.code==="auth/user-not-found"?S="No account found with this email.":A.code==="auth/invalid-email"?S="Invalid email format":A.code==="auth/too-many-requests"&&(S="Too many failed login attempts. Try again later."),m({title:"There was a problem.",description:S,variant:"destructive"})}finally{f(!1),console.log("Logged in: ",t)}};return y.jsxs(y.Fragment,{children:[y.jsx(a1,{}),y.jsx("div",{className:go("flex flex-col items-center space-y-4 justify-center",n),...e,children:y.jsxs("div",{className:"flex flex-col space-y-4",children:[y.jsx("input",{type:"email",value:s,onChange:x=>o(x.currentTarget.value),placeholder:"Email",className:"input"}),y.jsx("input",{type:"password",value:l,onChange:x=>c(x.target.value),placeholder:"Password",className:"input"}),y.jsx(Pf,{onClick:()=>E(s,l),isLoading:h,size:"sm",className:"w-full",children:"Login with Email"}),y.jsxs("p",{className:"flex items-center text-gray-500 text-sm",children:[y.jsx("span",{className:"flex-grow border-t border-gray-300"}),y.jsx("span",{className:"px-3",children:" Or Login with Google "}),y.jsx("span",{className:"flex-grow border-t border-gray-300"})]}),y.jsxs(Pf,{onClick:v,isLoading:h,size:"sm",className:"w-full",children:[h?null:y.jsx(F_.google,{className:"sh-4 w-4 mr-2"}),"Google"]})]})})]})},C5=()=>{const n=Fn();return y.jsx("div",{className:"flex items-center justify-center h-screen w-full px-4",children:y.jsx("div",{className:"w-full max-w-sm space-y-6 text-center",children:y.jsxs("div",{className:"flex flex-col space-y-2 text-center",children:[y.jsx("div",{className:"w-full flex justify-center",children:y.jsx("button",{onClick:()=>n("/"),"aria-label":"Go to home",children:y.jsx(F_.logo,{className:"h-12 w-auto"})})}),y.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Welcome back"}),y.jsx(x5,{}),y.jsxs("p",{className:"px-8 text-center text-sm text-zinc-700",children:["New to Ureno?"," ",y.jsx(ft,{to:"/sign-up",className:"hover:text-zinc-800 text-sm underline underline-offset-4",children:"Sign Up"})]}),y.jsxs("p",{className:"text-sm max-w-xs mx-auto text-gray-500",children:["By clicking create account, you agree to our ",y.jsx("a",{href:"",className:"underline",children:"Terms of Service"})," and ",y.jsx("a",{href:"",className:"underline",children:"Privacy Policy"})]})]})})})},S5=()=>{const n=Fn();Z3();const{userLoggedIn:e,loading:t}=gs(),[r,s]=I.useState(""),[o,l]=I.useState(""),[c,h]=I.useState(""),[f,m]=I.useState(!1),[v,E]=I.useState(!1),[x,R]=I.useState(""),[A,S]=I.useState(""),[M,U]=I.useState(""),[B,W]=I.useState(!1),[Y,X]=I.useState(""),N=async k=>{if(k.preventDefault(),!B){if(X(""),W(!0),!x||!A){X("Email and password are required"),W(!1);return}if(A.length<6){X("Password must be at least 6 characters"),W(!1);return}if(A!==M){X("Passwords don't match"),W(!1);return}try{const j=(await Y6(x.trim(),A.trim())).user;await Gg(j,{displayName:`${r} ${o}`}),await g_(j.uid,r,o,x.trim(),c,j.displayName),n("/"),console.log(e)}catch(L){L.code==="auth/email-already-in-use"?X("An account with this email already exists."):L.code==="auth/invalid-email"?X("The email address is not valid."):X("There was a problem creating your account."),W(!1)}}},b=async()=>{E(!0);try{const k=await doSignInWithGoogle();n("/")}catch{toast({title:"THere was a problem.",description:"THere was an error logging in with Google",variant:"destructive"})}finally{E(!1),console.log("Logged in: ",e)}};return I.useEffect(()=>{f&&(n("/"),m(!1))},[f,n,m]),t?y.jsx("div",{children:"Loading..."}):y.jsxs(y.Fragment,{children:[e&&y.jsx(xx,{to:"/",replace:!0}),y.jsx("main",{className:"w-full h-screen flex self-center place-content-center place-items-center",children:y.jsxs("div",{className:"w-96 text-gray-600 space-y-5 p-4",children:[y.jsx("div",{className:"text-center mb-6",children:y.jsxs("div",{className:"mt-2",children:[y.jsx("h3",{className:"text-gray-800 text-xl font-semibold sm:text-2xl",children:"Account Information"}),y.jsx("p",{children:"Enter your information to sign up"})]})}),y.jsxs("form",{onSubmit:N,className:"space-y-4",children:[Y&&y.jsx("span",{className:"text-red-600 font-bold",children:Y}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-600 font-bold"}),y.jsx("input",{type:"text",autoComplete:"given-name",placeholder:"First Name",required:!0,value:r,onChange:k=>{s(k.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:indigo-600 shadow-sm rounded-lg transition duration-300"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-600 font-bold"}),y.jsx("input",{type:"text",autoComplete:"family-name",placeholder:"Last Name",required:!0,value:o,onChange:k=>{l(k.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:indigo-600 shadow-sm rounded-lg transition duration-300"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-600 font-bold"}),y.jsx("input",{type:"tel",autoComplete:"mobile",placeholder:"Phone Number",required:!0,value:c,onChange:k=>{h(k.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:indigo-600 shadow-sm rounded-lg transition duration-300"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-600 font-bold"}),y.jsx("input",{type:"email",autoComplete:"email",placeholder:"Email",required:!0,value:x,onChange:k=>{R(k.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:indigo-600 shadow-sm rounded-lg transition duration-300"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-600 font-bold"}),y.jsx("input",{type:"password",autoComplete:"new-password",placeholder:"Password",required:!0,value:A,onChange:k=>{S(k.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:border-indigo-600 shadow-sm rounded-lg transition duration-300"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-600 font-bold"}),y.jsx("input",{disabled:B,type:"password",autoComplete:"off",placeholder:"Confirm Password",required:!0,value:M,onChange:k=>{U(k.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:border-black shadow-sm rounded-lg transition duration-300"})]}),Y&&y.jsx("span",{className:"text-red-600 font-bold",children:Y}),y.jsx("button",{type:"submit",disabled:B,className:`w-full px-4 py-2 text-white font-medium rounded-lg ${B?" bg-gray-300 cursor-not-allowed":"bg-black hover:bg-black hover:shadow-xl transition duration-300"}`,children:B?"Signing Up...":"Create Account"})]}),y.jsxs("p",{className:"flex items-center text-gray-500 text-sm",children:[y.jsx("span",{className:"flex-grow border-t border-gray-300"}),y.jsx("span",{className:"px-3",children:" Or Sign up with Google "}),y.jsx("span",{className:"flex-grow border-t border-gray-300"})]}),y.jsxs(Pf,{onClick:b,isLoading:v,size:"sm",className:"w-full",children:[v?null:y.jsx(F_.google,{className:"sh-4 w-4 mr-2"}),"Google"]}),y.jsxs("div",{className:"text-sm text-center",children:["Already have an account? ","    ",y.jsx(ft,{to:"/sign-in",className:"text-center text-sm hover:underline font-bold",children:"Continue"})]}),y.jsxs("p",{className:"text-sm max-w-xs mx-auto",children:["By clicking create account, you agree to our ",y.jsx("a",{href:"",className:"underline",children:"Terms of Service"})," and ",y.jsx("a",{href:"",className:"underline",children:"Privacy Policy"})]})]})})]})},R5=()=>y.jsx("div",{className:"container mx-auto flex h-screen w-full flex-col justify-center space-y-6 sm:w-[400px]",children:y.jsx("div",{className:"flex flex-col space-y-2 text-center",children:y.jsx(S5,{})})}),un="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAOVBMVEXz9Pa5vsq2u8jN0dnV2N/o6u7w8fTi5OnFydO+ws3f4ee6v8vY2+H29/jy9Pbu7/LJztbCx9HR1ty/NMEIAAACq0lEQVR42u3cYXaqMBBA4cyEgEAi4P4X+34oLSra9IA9E979FtDj7SAJUOocAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAqrQ3Y311iH5fsaktBTYn3d/Y2JljlM/orAR2IsdOHNqPFbY2TqKdXj/Orl/C24/sLHwV0ygiIv2466n0+kNlNFHYiohotfNyWKmIyKm2U9jsffqyU+gopLDMwiGE+sCFjRdV1SkOxyw8X2Rer6cNe2e7hfVJv3ddGg9YeNHlxrIPhyvs9GHvXB+sMJ2eLoDSsQrDwwhF/cFm+HiQikxvP+Prk63RwhSfCtt3i6J/fbK1Wlj9qvCiIjEd9yg9e32zZFotHPLPNOd55VyfotnVYsq9XVZ7fbvxsbviZx6kZ7+Y9toU7e7a/P1x+mI5qP3doRyLuraYlokxY4LrUzRcOPj56knaxmVMcP1XYfkKODW+VVWZqiHlTXBtisbvYgwhhKF22RNcmWLBd6JWJ/g8xXIL64u+eg5zl1huodfXj5riAQrPF333NG0xxVILvb5/YBhLKxzC8+XSD4mpqMLQt2F59hj158e+saDCFFrRacj9Dj5MsYTC0IuIfk9xzAoU7QopTKG93dq/7d3yJiiiVSqjMPTzJ25Dcu6cOUERjUUUzhP8mmLuBIsp/Jrg9Soq+OzAMgqXE7wm/uKvhIoovJ/gLxVQ+DTBwxVummABhRsnWEDhxgmaL9w8QfOFmydovTDlb11KLawopJBCCimk8E8Kbd+nGcJ2Q9F39fNRSKH5wtSZeyvI7/sm8O053MnCCOc/C/7Iu2vexIuyn3z/sLEQ6Orp4O+QOtf0HwrsGyOFrhP9QJ+qmUDnwtju/jp+PwZT/1chdNW+YuMAAAAAAAAAAAAAAAAAAAAAAAAAAACA/9s/LTI30XlcBHoAAAAASUVORK5CYII=",W1=()=>{const{productId:n}=Df(),[e,t]=I.useState(null),[r,s]=I.useState(null);return I.useEffect(()=>{n&&(async()=>{try{const l=jt(Pc,"products",n),c=await jr(l);if(c.exists()){const h=c.data();t(h),s(h.image)}else console.error("Product not found")}catch(l){console.error("Error fetching product: ",l)}})()},[n]),e?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"main-content",children:[y.jsxs("div",{id:"left",children:[y.jsx("div",{className:"main-image",children:y.jsx("img",{src:r||e.image,alt:""})}),y.jsxs("div",{className:"thumbnails",children:[y.jsx("img",{src:e.image,alt:"",onClick:()=>s(e.image)}),y.jsx("img",{src:e.image1,alt:"",onClick:()=>s(e.image1)}),y.jsx("img",{src:e.image2,alt:"",onClick:()=>s(e.image2)}),y.jsx("img",{src:e.image3,alt:"",onClick:()=>s(e.image3)})]})]}),y.jsxs("div",{id:"right",children:[y.jsxs("div",{className:"title-section",children:[y.jsxs("div",{className:"title",children:[y.jsx("p",{id:"main",children:e.title}),y.jsx("p",{id:"sub",children:e.description})]}),y.jsxs("div",{className:"price-link",children:[y.jsx("div",{className:"title-left",children:y.jsx("p",{children:e.price})}),y.jsx("div",{className:"title-right",children:y.jsx("a",{href:"",children:"See in my room"})})]}),y.jsx("a",{href:"",children:"View specifications"})]}),y.jsxs("div",{className:"description",children:[y.jsx("p",{children:e.description}),y.jsx("p",{children:e.overview}),y.jsx("a",{href:"",children:"Product Details"}),y.jsx("a",{href:"",children:"Reviews"})]})]})]}),y.jsxs("div",{className:"secondary-content",children:[y.jsx("div",{className:"suggestedProduct",children:y.jsxs("div",{className:"container",children:[y.jsx("img",{src:un,alt:"{title}"}),y.jsxs("div",{className:"prod-title",children:["{","title","}"]}),y.jsxs("p",{children:["{","description","}"]}),y.jsxs("p",{children:["{","price","}"]})]})}),y.jsx("div",{className:"suggestedProduct",children:y.jsxs("div",{className:"container",children:[y.jsx("img",{src:un,alt:"{title}"}),y.jsxs("div",{className:"prod-title",children:["{","title","}"]}),y.jsxs("p",{children:["{","description","}"]}),y.jsxs("p",{children:["{","price","}"]})]})}),y.jsx("div",{className:"suggestedProduct",children:y.jsxs("div",{className:"container",children:[y.jsx("img",{src:un,alt:"{title}"}),y.jsxs("div",{className:"prod-title",children:["{","title","}"]}),y.jsxs("p",{children:["{","description","}"]}),y.jsxs("p",{children:["{","price","}"]})]})})]})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"main-content",children:[y.jsxs("div",{id:"left",children:[y.jsx("div",{className:"main-image",children:y.jsx("img",{src:un,alt:""})}),y.jsxs("div",{className:"thumbnails",children:[y.jsx("img",{src:un,alt:""}),y.jsx("img",{src:un,alt:""}),y.jsx("img",{src:un,alt:""})]})]}),y.jsxs("div",{id:"right",children:[y.jsxs("div",{className:"title-section",children:[y.jsxs("div",{className:"title",children:[y.jsx("p",{id:"main",children:"Deafult Title"}),y.jsx("p",{id:"sub",children:"Default Category"})]}),y.jsxs("div",{className:"price-link",children:[y.jsx("div",{className:"title-left",children:y.jsx("p",{children:"$"})}),y.jsx("div",{className:"title-right",children:y.jsx("a",{href:"",children:"See in my room"})})]}),y.jsx("a",{href:"",children:"View specifications"})]}),y.jsxs("div",{className:"description",children:[y.jsx("p",{children:"Default Description"}),y.jsx("a",{href:"",children:"Product Details"}),y.jsx("a",{href:"",children:"Reviews"})]})]})]}),y.jsxs("div",{className:"secondary-content",children:[y.jsx("div",{className:"suggestedProduct",children:y.jsxs("div",{className:"container",children:[y.jsx("img",{src:un,alt:"{title}"}),y.jsxs("div",{className:"prod-title",children:["{","title","}"]}),y.jsxs("p",{children:["{","description","}"]}),y.jsxs("p",{children:["{","price","}"]})]})}),y.jsx("div",{className:"suggestedProduct",children:y.jsxs("div",{className:"container",children:[y.jsx("img",{src:un,alt:"{title}"}),y.jsxs("div",{className:"prod-title",children:["{","title","}"]}),y.jsxs("p",{children:["{","description","}"]}),y.jsxs("p",{children:["{","price","}"]})]})}),y.jsx("div",{className:"suggestedProduct",children:y.jsxs("div",{className:"container",children:[y.jsx("img",{src:un,alt:"{title}"}),y.jsxs("div",{className:"prod-title",children:["{","title","}"]}),y.jsxs("p",{children:["{","description","}"]}),y.jsxs("p",{children:["{","price","}"]})]})})]})]})};W1.defaultProps={productTitle:"Default title",productCategory:"Default category",price:"Price not available",description:"No description available",mainIm:{defaultImage:un},alternate1:{defaultImage:un},alternate2:{defaultImage:un},suggested1:{defaultImage:un},suggested2:{defaultImage:un},suggested3:{defaultImage:un}};function A5(){return y.jsx(y.Fragment,{children:y.jsxs("div",{className:"product-detail-page",children:[y.jsx("meta",{charSet:"UTF-8"}),y.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),y.jsx("title",{children:"product detail"}),y.jsx(V_,{}),y.jsx(W1,{}),y.jsx(C_,{})]})})}function P5(n,e){return I.Children.toArray(n).some(t=>I.isValidElement(t)&&t.type===e)}function b5({as:n,bsPrefix:e,className:t,...r}){e=Dt(e,"col");const s=s5(),o=i5(),l=[],c=[];return s.forEach(h=>{const f=r[h];delete r[h];let m,v,E;typeof f=="object"&&f!=null?{span:m,offset:v,order:E}=f:m=f;const x=h!==o?`-${h}`:"";m&&l.push(m===!0?`${e}${x}`:`${e}${x}-${m}`),E!=null&&c.push(`order${x}-${E}`),v!=null&&c.push(`offset${x}-${v}`)}),[{...r,className:Et(t,...l,...c)},{as:n,bsPrefix:e,spans:l}]}const q1=I.forwardRef((n,e)=>{const[{className:t,...r},{as:s="div",bsPrefix:o,spans:l}]=b5(n);return y.jsx(s,{...r,ref:e,className:Et(t,!l.length&&o)})});q1.displayName="Col";const k5={type:gl.string,tooltip:gl.bool,as:gl.elementType},Ip=I.forwardRef(({as:n="div",className:e,type:t="valid",tooltip:r=!1,...s},o)=>y.jsx(n,{...s,ref:o,className:Et(e,`${t}-${r?"tooltip":"feedback"}`)}));Ip.displayName="Feedback";Ip.propTypes=k5;const ti=I.createContext({}),U_=I.forwardRef(({id:n,bsPrefix:e,className:t,type:r="checkbox",isValid:s=!1,isInvalid:o=!1,as:l="input",...c},h)=>{const{controlId:f}=I.useContext(ti);return e=Dt(e,"form-check-input"),y.jsx(l,{...c,ref:h,type:r,id:n||f,className:Et(t,e,s&&"is-valid",o&&"is-invalid")})});U_.displayName="FormCheckInput";const bf=I.forwardRef(({bsPrefix:n,className:e,htmlFor:t,...r},s)=>{const{controlId:o}=I.useContext(ti);return n=Dt(n,"form-check-label"),y.jsx("label",{...r,ref:s,htmlFor:t||o,className:Et(e,n)})});bf.displayName="FormCheckLabel";const H1=I.forwardRef(({id:n,bsPrefix:e,bsSwitchPrefix:t,inline:r=!1,reverse:s=!1,disabled:o=!1,isValid:l=!1,isInvalid:c=!1,feedbackTooltip:h=!1,feedback:f,feedbackType:m,className:v,style:E,title:x="",type:R="checkbox",label:A,children:S,as:M="input",...U},B)=>{e=Dt(e,"form-check"),t=Dt(t,"form-switch");const{controlId:W}=I.useContext(ti),Y=I.useMemo(()=>({controlId:n||W}),[W,n]),X=!S&&A!=null&&A!==!1||P5(S,bf),N=y.jsx(U_,{...U,type:R==="switch"?"checkbox":R,ref:B,isValid:l,isInvalid:c,disabled:o,as:M});return y.jsx(ti.Provider,{value:Y,children:y.jsx("div",{style:E,className:Et(v,X&&e,r&&`${e}-inline`,s&&`${e}-reverse`,R==="switch"&&t),children:S||y.jsxs(y.Fragment,{children:[N,X&&y.jsx(bf,{title:x,children:A}),f&&y.jsx(Ip,{type:m,tooltip:h,children:f})]})})})});H1.displayName="FormCheck";const kf=Object.assign(H1,{Input:U_,Label:bf}),G1=I.forwardRef(({bsPrefix:n,type:e,size:t,htmlSize:r,id:s,className:o,isValid:l=!1,isInvalid:c=!1,plaintext:h,readOnly:f,as:m="input",...v},E)=>{const{controlId:x}=I.useContext(ti);return n=Dt(n,"form-control"),y.jsx(m,{...v,type:e,size:r,ref:E,readOnly:f,id:s||x,className:Et(o,h?`${n}-plaintext`:n,t&&`${n}-${t}`,e==="color"&&`${n}-color`,l&&"is-valid",c&&"is-invalid")})});G1.displayName="FormControl";const N5=Object.assign(G1,{Feedback:Ip}),K1=I.forwardRef(({className:n,bsPrefix:e,as:t="div",...r},s)=>(e=Dt(e,"form-floating"),y.jsx(t,{ref:s,className:Et(n,e),...r})));K1.displayName="FormFloating";const B_=I.forwardRef(({controlId:n,as:e="div",...t},r)=>{const s=I.useMemo(()=>({controlId:n}),[n]);return y.jsx(ti.Provider,{value:s,children:y.jsx(e,{...t,ref:r})})});B_.displayName="FormGroup";const Q1=I.forwardRef(({as:n="label",bsPrefix:e,column:t=!1,visuallyHidden:r=!1,className:s,htmlFor:o,...l},c)=>{const{controlId:h}=I.useContext(ti);e=Dt(e,"form-label");let f="col-form-label";typeof t=="string"&&(f=`${f} ${f}-${t}`);const m=Et(s,e,r&&"visually-hidden",t&&f);return o=o||h,t?y.jsx(q1,{ref:c,as:"label",className:m,htmlFor:o,...l}):y.jsx(n,{ref:c,className:m,htmlFor:o,...l})});Q1.displayName="FormLabel";const Y1=I.forwardRef(({bsPrefix:n,className:e,id:t,...r},s)=>{const{controlId:o}=I.useContext(ti);return n=Dt(n,"form-range"),y.jsx("input",{...r,type:"range",ref:s,className:Et(e,n),id:t||o})});Y1.displayName="FormRange";const X1=I.forwardRef(({bsPrefix:n,size:e,htmlSize:t,className:r,isValid:s=!1,isInvalid:o=!1,id:l,...c},h)=>{const{controlId:f}=I.useContext(ti);return n=Dt(n,"form-select"),y.jsx("select",{...c,size:t,ref:h,className:Et(r,n,e&&`${n}-${e}`,s&&"is-valid",o&&"is-invalid"),id:l||f})});X1.displayName="FormSelect";const J1=I.forwardRef(({bsPrefix:n,className:e,as:t="small",muted:r,...s},o)=>(n=Dt(n,"form-text"),y.jsx(t,{...s,ref:o,className:Et(e,n,r&&"text-muted")})));J1.displayName="FormText";const Z1=I.forwardRef((n,e)=>y.jsx(kf,{...n,ref:e,type:"switch"}));Z1.displayName="Switch";const D5=Object.assign(Z1,{Input:kf.Input,Label:kf.Label}),eP=I.forwardRef(({bsPrefix:n,className:e,children:t,controlId:r,label:s,...o},l)=>(n=Dt(n,"form-floating"),y.jsxs(B_,{ref:l,className:Et(e,n),controlId:r,...o,children:[t,y.jsx("label",{htmlFor:r,children:s})]})));eP.displayName="FloatingLabel";const O5={_ref:gl.any,validated:gl.bool,as:gl.elementType},$_=I.forwardRef(({className:n,validated:e,as:t="form",...r},s)=>y.jsx(t,{...r,ref:s,className:Et(n,e&&"was-validated")}));$_.displayName="Form";$_.propTypes=O5;const Kn=Object.assign($_,{Group:B_,Control:N5,Floating:K1,Check:kf,Switch:D5,Label:Q1,Text:J1,Range:Y1,Select:X1,FloatingLabel:eP}),L5=()=>{const n=Fn(),e=async()=>{await S_(),n("/")};return y.jsxs("div",{className:"nav flex justify-between items-center p-4 border-b",children:[y.jsx(ft,{to:"/",className:"text-2xl font-bold",children:y.jsx("div",{className:"logo",children:"URENO"})}),y.jsxs("div",{className:"flex items-center gap-4 ml-auto",children:[y.jsxs(ft,{to:"/settings",className:"flex items-center gap-2 text-gray-600 hover:text-black",children:[y.jsx(c6,{className:"w-5 h-5"})," Settings"]}),y.jsxs(ft,{to:"/notifications",className:"flex items-center gap-2 text-gray-600 hover:text-black",children:[y.jsx(s6,{className:"w-5 h-5"})," Notifications"]}),y.jsxs(ft,{to:"/logout",onClick:e,className:"flex items-center gap-2 text-red-500 hover:text-red-700",children:[y.jsx(l6,{className:"w-5 h-5"})," Log Out"]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP="firebasestorage.googleapis.com",nP="storageBucket",M5=2*60*1e3,j5=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt extends ps{constructor(e,t,r=0){super(Dg(e),`Firebase Storage: ${t} (${Dg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Tt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Dg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var wt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(wt||(wt={}));function Dg(n){return"storage/"+n}function z_(){const n="An unknown error occurred, please check the error payload for server response.";return new Tt(wt.UNKNOWN,n)}function V5(n){return new Tt(wt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function F5(n){return new Tt(wt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function U5(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Tt(wt.UNAUTHENTICATED,n)}function B5(){return new Tt(wt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function $5(n){return new Tt(wt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function z5(){return new Tt(wt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function W5(){return new Tt(wt.CANCELED,"User canceled the upload/download.")}function q5(n){return new Tt(wt.INVALID_URL,"Invalid URL '"+n+"'.")}function H5(n){return new Tt(wt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function G5(){return new Tt(wt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+nP+"' property when initializing the app?")}function K5(){return new Tt(wt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Q5(){return new Tt(wt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Y5(n){return new Tt(wt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Vy(n){return new Tt(wt.INVALID_ARGUMENT,n)}function rP(){return new Tt(wt.APP_DELETED,"The Firebase app was deleted.")}function X5(n){return new Tt(wt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function pc(n,e){return new Tt(wt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ku(n){throw new Tt(wt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Xn.makeFromUrl(e,t)}catch{return new Xn(e,"")}if(r.path==="")return r;throw H5(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(W){W.path.charAt(W.path.length-1)==="/"&&(W.path_=W.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+s+l,"i"),h={bucket:1,path:3};function f(W){W.path_=decodeURIComponent(W.path)}const m="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",x=new RegExp(`^https?://${v}/${m}/b/${s}/o${E}`,"i"),R={bucket:1,path:3},A=t===tP?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",M=new RegExp(`^https?://${A}/${s}/${S}`,"i"),B=[{regex:c,indices:h,postModify:o},{regex:x,indices:R,postModify:f},{regex:M,indices:{bucket:1,path:2},postModify:f}];for(let W=0;W<B.length;W++){const Y=B[W],X=Y.regex.exec(e);if(X){const N=X[Y.indices.bucket];let b=X[Y.indices.path];b||(b=""),r=new Xn(N,b),Y.postModify(r);break}}if(r==null)throw q5(e);return r}}class J5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z5(n,e,t){let r=1,s=null,o=null,l=!1,c=0;function h(){return c===2}let f=!1;function m(...S){f||(f=!0,e.apply(null,S))}function v(S){s=setTimeout(()=>{s=null,n(x,h())},S)}function E(){o&&clearTimeout(o)}function x(S,...M){if(f){E();return}if(S){E(),m.call(null,S,...M);return}if(h()||l){E(),m.call(null,S,...M);return}r<64&&(r*=2);let B;c===1?(c=2,B=0):B=(r+Math.random())*1e3,v(B)}let R=!1;function A(S){R||(R=!0,E(),!f&&(s!==null?(S||(c=2),clearTimeout(s),v(0)):S||(c=1)))}return v(0),o=setTimeout(()=>{l=!0,A(!0)},t),A}function e8(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t8(n){return n!==void 0}function n8(n){return typeof n=="object"&&!Array.isArray(n)}function W_(n){return typeof n=="string"||n instanceof String}function ux(n){return q_()&&n instanceof Blob}function q_(){return typeof Blob<"u"}function cx(n,e,t,r){if(r<e)throw Vy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Vy(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function sP(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Xo;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Xo||(Xo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e,t,r,s,o,l,c,h,f,m,v,E=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=v,this.retry=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,R)=>{this.resolve_=x,this.reject_=R,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new kh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const h=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===Xo.NO_ERROR,h=o.getStatus();if(!c||r8(h,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===Xo.ABORT;r(!1,new kh(!1,null,m));return}const f=this.successCodes_.indexOf(h)!==-1;r(!0,new kh(f,o))})},t=(r,s)=>{const o=this.resolve_,l=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(c,c.getResponse());t8(h)?o(h):o()}catch(h){l(h)}else if(c!==null){const h=z_();h.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,h)):l(h)}else if(s.canceled){const h=this.appDelete_?rP():W5();l(h)}else{const h=z5();l(h)}};this.canceled_?t(!1,new kh(!1,null,!0)):this.backoffId_=Z5(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&e8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class kh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function i8(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function o8(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function a8(n,e){e&&(n["X-Firebase-GMPID"]=e)}function l8(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function u8(n,e,t,r,s,o,l=!0){const c=sP(n.urlParams),h=n.url+c,f=Object.assign({},n.headers);return a8(f,e),i8(f,t),o8(f,o),l8(f,r),new s8(h,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function d8(...n){const e=c8();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(q_())return new Blob(n);throw new Tt(wt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function h8(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f8(n){if(typeof atob>"u")throw Y5("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Og{constructor(e,t){this.data=e,this.contentType=t||null}}function p8(n,e){switch(n){case os.RAW:return new Og(iP(e));case os.BASE64:case os.BASE64URL:return new Og(oP(n,e));case os.DATA_URL:return new Og(g8(e),y8(e))}throw z_()}function iP(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=n.charCodeAt(++t);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function m8(n){let e;try{e=decodeURIComponent(n)}catch{throw pc(os.DATA_URL,"Malformed data URL.")}return iP(e)}function oP(n,e){switch(n){case os.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw pc(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case os.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw pc(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=f8(e)}catch(s){throw s.message.includes("polyfill")?s:pc(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class aP{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw pc(os.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=v8(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function g8(n){const e=new aP(n);return e.base64?oP(os.BASE64,e.rest):m8(e.rest)}function y8(n){return new aP(n).contentType}function v8(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,t){let r=0,s="";ux(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(ux(this.data_)){const r=this.data_,s=h8(r,e,t);return s===null?null:new Bi(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Bi(r,!0)}}static getBlob(...e){if(q_()){const t=e.map(r=>r instanceof Bi?r.data_:r);return new Bi(d8.apply(null,t))}else{const t=e.map(l=>W_(l)?p8(os.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let c=0;c<l.length;c++)s[o++]=l[c]}),new Bi(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(n){let e;try{e=JSON.parse(n)}catch{return null}return n8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _8(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function w8(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function uP(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E8(n,e){return e}class Tn{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||E8}}let Nh=null;function T8(n){return!W_(n)||n.length<2?n:uP(n)}function cP(){if(Nh)return Nh;const n=[];n.push(new Tn("bucket")),n.push(new Tn("generation")),n.push(new Tn("metageneration")),n.push(new Tn("name","fullPath",!0));function e(o,l){return T8(l)}const t=new Tn("name");t.xform=e,n.push(t);function r(o,l){return l!==void 0?Number(l):l}const s=new Tn("size");return s.xform=r,n.push(s),n.push(new Tn("timeCreated")),n.push(new Tn("updated")),n.push(new Tn("md5Hash",null,!0)),n.push(new Tn("cacheControl",null,!0)),n.push(new Tn("contentDisposition",null,!0)),n.push(new Tn("contentEncoding",null,!0)),n.push(new Tn("contentLanguage",null,!0)),n.push(new Tn("contentType",null,!0)),n.push(new Tn("metadata","customMetadata",!0)),Nh=n,Nh}function I8(n,e){function t(){const r=n.bucket,s=n.fullPath,o=new Xn(r,s);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function x8(n,e,t){const r={};r.type="file";const s=t.length;for(let o=0;o<s;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return I8(r,n),r}function dP(n,e,t){const r=lP(e);return r===null?null:x8(n,r,t)}function C8(n,e,t,r){const s=lP(e);if(s===null||!W_(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(f=>{const m=n.bucket,v=n.fullPath,E="/b/"+l(m)+"/o/"+l(v),x=H_(E,t,r),R=sP({alt:"media",token:f});return x+R})[0]}function S8(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class hP{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(n){if(!n)throw z_()}function R8(n,e){function t(r,s){const o=dP(n,s,e);return fP(o!==null),o}return t}function A8(n,e){function t(r,s){const o=dP(n,s,e);return fP(o!==null),C8(o,s,n.host,n._protocol)}return t}function pP(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=B5():s=U5():t.getStatus()===402?s=F5(n.bucket):t.getStatus()===403?s=$5(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function P8(n){const e=pP(n);function t(r,s){let o=e(r,s);return r.getStatus()===404&&(o=V5(n.path)),o.serverResponse=s.serverResponse,o}return t}function b8(n,e,t){const r=e.fullServerUrl(),s=H_(r,n.host,n._protocol),o="GET",l=n.maxOperationRetryTime,c=new hP(s,o,A8(n,t),l);return c.errorHandler=P8(e),c}function k8(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function N8(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=k8(null,e)),r}function D8(n,e,t,r,s){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let B="";for(let W=0;W<2;W++)B=B+Math.random().toString().slice(2);return B}const h=c();l["Content-Type"]="multipart/related; boundary="+h;const f=N8(e,r,s),m=S8(f,t),v="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+h+`\r
Content-Type: `+f.contentType+`\r
\r
`,E=`\r
--`+h+"--",x=Bi.getBlob(v,r,E);if(x===null)throw K5();const R={name:f.fullPath},A=H_(o,n.host,n._protocol),S="POST",M=n.maxUploadRetryTime,U=new hP(A,S,R8(n,t),M);return U.urlParams=R,U.headers=l,U.body=x.uploadData(),U.errorHandler=pP(e),U}class O8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw Ku("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ku("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ku("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ku("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ku("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class L8 extends O8{initXhr(){this.xhr_.responseType="text"}}function mP(){return new L8}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,t){this._service=e,t instanceof Xn?this._location=t:this._location=Xn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new aa(e,t)}get root(){const e=new Xn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return uP(this._location.path)}get storage(){return this._service}get parent(){const e=_8(this._location.path);if(e===null)return null;const t=new Xn(this._location.bucket,e);return new aa(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw X5(e)}}function M8(n,e,t){n._throwIfRoot("uploadBytes");const r=D8(n.storage,n._location,cP(),new Bi(e,!0),t);return n.storage.makeRequestWithTokens(r,mP).then(s=>({metadata:s,ref:n}))}function j8(n){n._throwIfRoot("getDownloadURL");const e=b8(n.storage,n._location,cP());return n.storage.makeRequestWithTokens(e,mP).then(t=>{if(t===null)throw Q5();return t})}function V8(n,e){const t=w8(n._location.path,e),r=new Xn(n._location.bucket,t);return new aa(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F8(n){return/^[A-Za-z]+:\/\//.test(n)}function U8(n,e){return new aa(n,e)}function gP(n,e){if(n instanceof G_){const t=n;if(t._bucket==null)throw G5();const r=new aa(t,t._bucket);return e!=null?gP(r,e):r}else return e!==void 0?V8(n,e):n}function B8(n,e){if(e&&F8(e)){if(n instanceof G_)return U8(n,e);throw Vy("To use ref(service, url), the first argument must be a Storage instance.")}else return gP(n,e)}function dx(n,e){const t=e==null?void 0:e[nP];return t==null?null:Xn.makeFromBucketSpec(t,n)}function $8(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:Xy(s,n.app.options.projectId))}class G_{constructor(e,t,r,s,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._bucket=null,this._host=tP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=M5,this._maxUploadRetryTime=j5,this._requests=new Set,s!=null?this._bucket=Xn.makeFromBucketSpec(s,this._host):this._bucket=dx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Xn.makeFromBucketSpec(this._url,e):this._bucket=dx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){cx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){cx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new aa(this,e)}_makeRequest(e,t,r,s,o=!0){if(this._deleted)return new J5(rP());{const l=u8(e,this._appId,r,s,t,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const hx="@firebase/storage",fx="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP="storage";function z8(n,e,t){return n=rt(n),M8(n,e,t)}function W8(n){return n=rt(n),j8(n)}function q8(n,e){return n=rt(n),B8(n,e)}function H8(n=Vf(),e){n=rt(n);const r=Mc(n,yP).getImmediate({identifier:e}),s=Qy("storage");return s&&G8(r,...s),r}function G8(n,e,t,r={}){$8(n,e,t,r)}function K8(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new G_(t,r,s,e,uo)}function Q8(){Zi(new Hs(yP,K8,"PUBLIC").setMultipleInstances(!0)),pr(hx,fx,""),pr(hx,fx,"esm2017")}Q8();function Y8(){const{user:n,profile:e}=vp(),t=Fn(),[r,s]=I.useState({displayName:"",email:"",phone:"",profilePicture:null});if(I.useEffect(()=>{e&&s({displayName:n.displayName||"",email:n.email||"",phone:e.phone||"",profilePicture:null})},[e,n]),!n||!e)return y.jsx("p",{children:"Loading profile data..."});const o=async l=>{l.preventDefault();const c=zf(),h=qc(),f=H8(),m=c.currentUser;if(!m)return;const v={};try{if(r.displayName&&r.displayName!==m.displayName&&(await Gg(m,{displayName:r.displayName}),v.displayName=r.displayName),r.email&&r.email!==m.email&&(await VD(m,r.email),v.email=r.email),r.phone&&(v.phone=r.phone),r.profilePicture){const E=q8(f,`profilePictures/${m.uid}`);await z8(E,r.profilePicture);const x=await W8(E);await Gg(m,{photoURL:x}),v.photoURL=x}if(Object.keys(v).length>0){const E=jt(h,"users",m.uid);await Qi(E,v)}alert("profile updated succesfully"),t("/ProfileDashboard")}catch(E){console.error("Error updating profile:",E),alert("Failed to update profile. Check the console for details.")}};return y.jsx(y.Fragment,{children:y.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[y.jsx("h2",{className:"text-2xl font-bold mb-4",children:" Edit Profile"}),y.jsxs(Kn,{children:[y.jsxs(Kn.Group,{controlId:"displayName",className:"mb-3",children:[y.jsx(Kn.Label,{children:"Display Name"}),y.jsx(Kn.Control,{type:"text",value:r.displayName,onChange:l=>s({...r,displayName:l.target.value})})]}),y.jsxs(Kn.Group,{controlId:"email",className:"mb-3",children:[y.jsx(Kn.Label,{children:"email"}),y.jsx(Kn.Control,{type:"email",value:r.email,onChange:l=>s({...r,email:l.target.value})})]}),y.jsxs(Kn.Group,{controlId:"phone",className:"mb-3",children:[y.jsx(Kn.Label,{children:"Phone Number"}),y.jsx(Kn.Control,{type:"text",value:r.phone,onChange:l=>s({...r,phone:l.target.value})})]}),y.jsxs(Kn.Group,{controlId:"profilePicture",className:"mb-3",children:[y.jsx(Kn.Label,{children:"Profile Picture"}),y.jsx(Kn.Control,{type:"file",onChange:l=>s({...r,profilePicture:l.target.files[0]})})]}),y.jsxs("div",{className:"flex gap-4",children:[y.jsx(Af,{variant:"primary",onClick:o,type:"submit",children:"Save Changes"}),y.jsx(Af,{variant:"secondary",onClick:()=>t("/ProfileDashboard"),children:"Cancel"})]})]})]})})}function X8(){const{currentUser:n}=gs(),[e,t]=I.useState([]),[r,s]=I.useState(!0);return I.useEffect(()=>{(async()=>{if(!n)return;const l=Us(Vt,"savedMaterials"),c=zi(l,dr("userId","==",n.uid));try{const f=(await hr(c)).docs.map(m=>({id:m.id,...m.data()}));t(f)}catch(h){console.error("Error fetching saved materials:",h)}finally{s(!1)}})()},[n]),r?y.jsx("div",{children:"Loading saved materials..."}):y.jsxs("div",{className:"p-4 max-w-6xl mx-auto",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(ft,{to:"/ProfileDashboard",className:"text-blue-500 text-3xl font-bold hover:scale-110 hover:text-blue-700 transition-all duration-200 flex items-center justify-center",children:"<"}),y.jsx("h1",{className:"text-2xl font-bold",children:"Saved Items"})]}),e.length===0?y.jsx("p",{className:"text-gray-500",children:"You don't have any saved materials yet."}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(o=>y.jsxs("div",{className:"border p-4 rounded shadow",children:[o.materialImageURL&&y.jsx("img",{src:o.materialImageURL,alt:o.materialName,className:"w-full h-32 object-cover rounded mb-2"}),y.jsx("h2",{className:"text-xl font-semibold",children:o.materialName}),y.jsx("p",{className:"text-gray-600",children:o.materialType})]},o.id))})]})}const J8="_loginWrapper_1063v_3",Z8="_container_1063v_11",eB="_form_1063v_32",tB="_formBox_1063v_34",nB="_active_1063v_49",rB="_register_1063v_51",sB="_inputBox_1063v_54",iB="_forgotLink_1063v_84",oB="_btn_1063v_90",aB="_socialIcons_1063v_103",lB="_toggleBox_1063v_118",uB="_togglePanel_1063v_138",cB="_toggleLeft_1063v_152",dB="_toggleRight_1063v_161",Je={loginWrapper:J8,container:Z8,form:eB,formBox:tB,active:nB,register:rB,inputBox:sB,forgotLink:iB,btn:oB,socialIcons:aB,toggleBox:lB,togglePanel:uB,toggleLeft:cB,toggleRight:dB},hB=()=>{const[n,e]=I.useState(!1),t=()=>{e(!0)},r=()=>{e(!1)};return y.jsx("div",{className:Je.loginWrapper,children:y.jsxs("div",{className:`${Je.container} ${n?Je.active:""}`,children:[y.jsx("div",{className:`${Je.formBox} ${Je.login}`,children:y.jsxs("form",{className:Je.form,action:"#",children:[y.jsx("h1",{children:"Login"}),y.jsxs("div",{className:Je.inputBox,children:[y.jsx("input",{type:"text",placeholder:"Email",required:!0}),y.jsx("i",{className:"bx bxs-user"})]}),y.jsxs("div",{className:Je.inputBox,children:[y.jsx("input",{type:"password",placeholder:"Password",required:!0}),y.jsx("i",{className:"bx bxs-lock-alt"})]}),y.jsx("div",{className:Je.forgotLink,children:y.jsx("a",{href:"#",children:"Forgot Password?"})}),y.jsx("button",{type:"submit",className:Je.btn,children:"Login"}),y.jsx("p",{children:"or login with social platforms"}),y.jsxs("div",{className:Je.socialIcons,children:[y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-google"})}),y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-facebook"})}),y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-github"})}),y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-linkedin"})})]})]})}),y.jsx("div",{className:`${Je.formBox} ${Je.register}`,children:y.jsxs("form",{className:Je.form,action:"#",children:[y.jsx("h1",{children:"Registration"}),y.jsxs("div",{className:Je.inputBox,children:[y.jsx("input",{type:"text",placeholder:"First Name",required:!0}),y.jsx("i",{className:"bx bxs-user"})]}),y.jsxs("div",{className:Je.inputBox,children:[y.jsx("input",{type:"text",placeholder:"Last Name",required:!0}),y.jsx("i",{className:"bx bxs-user"})]}),y.jsxs("div",{className:Je.inputBox,children:[y.jsx("input",{type:"email",placeholder:"Email",required:!0}),y.jsx("i",{className:"bx bxs-envelope"})]}),y.jsxs("div",{className:Je.inputBox,children:[y.jsx("input",{type:"password",placeholder:"Password",required:!0}),y.jsx("i",{className:"bx bxs-lock-alt"})]}),y.jsxs("div",{className:Je.inputBox,children:[y.jsx("input",{type:"password",placeholder:"Confirm Password",required:!0}),y.jsx("i",{className:"bx bxs-lock-alt"})]}),y.jsx("button",{type:"submit",className:Je.btn,children:"Register"}),y.jsx("p",{children:"or register with social platforms"}),y.jsxs("div",{className:Je.socialIcons,children:[y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-google"})}),y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-facebook"})}),y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-github"})}),y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-linkedin"})})]})]})}),y.jsxs("div",{className:Je.toggleBox,children:[y.jsxs("div",{className:`${Je.togglePanel} ${Je.toggleLeft}`,children:[y.jsx("h1",{children:"Hello, Welcome!"}),y.jsx("p",{children:"Don't have an account?"}),y.jsx("button",{className:Je.btn,onClick:t,children:"Register"})]}),y.jsxs("div",{className:`${Je.togglePanel} ${Je.toggleRight}`,children:[y.jsx("h1",{children:"Welcome Back!"}),y.jsx("p",{children:"Already have an account?"}),y.jsx("button",{className:Je.btn,onClick:r,children:"Login"})]})]})]})})},fB=()=>{const{user:n}=I.useContext(ha),e=Fn(),t=async r=>{if(n!=null&&n.uid)try{await Qi(jt(Pc,"users",n.uid),{role:r}),e(r==="contractor"?"/contractor-dashboard":"/")}catch(s){console.error("Failed to update role:",s)}};return y.jsxs("div",{className:"flex flex-col items-center justify-center h-screen px-4 text-center",children:[y.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Are you a contractor or homeowner?"}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[y.jsx("button",{onClick:()=>t("contractor"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded",children:"I'm a Contractor"}),y.jsx("button",{onClick:()=>t("customer"),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded",children:"I'm a Homeowner"})]})]})},pB=()=>{const{projectId:n}=Df(),{currentUser:e}=gs(),t=Fn(),[r,s]=I.useState(null),[o,l]=I.useState(!0);I.useEffect(()=>{(async()=>{if(!e)return;const f=jt(Vt,"projects",n),m=await jr(f);m.exists()&&s({id:m.id,...m.data()}),l(!1)})()},[e,n]);const c=async h=>{h.preventDefault();const f=jt(Vt,"projects",n);await Qi(f,{title:r.title,description:r.description}),t("/projects")};return o?y.jsx("div",{children:"Loading..."}):r?y.jsxs("div",{className:"max-w-xl mx-auto p-4",children:[y.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Edit Project"}),y.jsxs("form",{onSubmit:c,className:"flex flex-col gap-4",children:[y.jsx("input",{type:"text",value:r.title,onChange:h=>s(f=>({...f,title:h.target.value})),placeholder:"Project Title",className:"border p-2 rounded"}),y.jsx("textarea",{value:r.description,onChange:h=>s(f=>({...f,description:h.target.value})),placeholder:"Project Description",className:"border p-2 rounded"}),y.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Update Project"})]})]}):y.jsx("div",{children:"Project not found"})},mB=()=>{const{profile:n,user:e}=vp(),t=Fn(),[r,s]=I.useState([]),[o,l]=I.useState(!0);if(I.useEffect(()=>{(async()=>{try{if(!n||!e||n.role!=="contractor"){l(!1);return}console.log("Fetching projects for contractor:",e.uid);const m=zi(Us(Vt,"projects"),dr("status","==","submitted")),v=zi(Us(Vt,"projects"),dr("status","==","inquiry")),E=zi(Us(Vt,"projects"),dr("status","==","in progress"),dr("contractorId","==",e.uid)),x=zi(Us(Vt,"projects"),dr("status","==","pending_approval"),dr("requestedBy","array-contains",e.uid)),[R,A,S,M]=await Promise.all([hr(m),hr(v),hr(E),hr(x)]),U=R.docs.map(N=>({id:N.id,...N.data()})),B=A.docs.map(N=>({id:N.id,...N.data()})),W=S.docs.map(N=>({id:N.id,...N.data()})),Y=M.docs.map(N=>({id:N.id,...N.data()})),X=[...U,...B,...W,...Y];s(X)}catch(m){console.error("Error fetching projects:",m.message),s([])}finally{l(!1)}})()},[n,e]),o)return y.jsx("div",{children:"Loading..."});const c=r.filter(f=>f.status==="in progress"&&f.contractorId===e.uid),h=r.filter(f=>!(f.status==="in progress"&&f.contractorId===e.uid));return y.jsxs("div",{className:"p-4 max-w-4xl mx-auto mt-20",children:[y.jsx("div",{className:"fixed top-0 left-0 w-full bg-white p-4 flex items-center pb-6 z-10",children:y.jsx(ft,{to:"/contractor-dashboard",children:y.jsx("div",{className:"logo",children:" return "})})}),c.length>0&&y.jsxs(y.Fragment,{children:[y.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Accepted Projects"}),y.jsx("div",{className:"mb-8",children:y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:c.map(f=>{var m,v,E;return y.jsxs("div",{className:"border p-4 rounded shadow relative bg-green-50",children:[y.jsx("div",{className:"absolute top-0 right-0 m-2 px-2 py-1 text-xs font-semibold rounded bg-green-100 text-green-800",children:"In Progress"}),y.jsx("h2",{className:"text-xl font-semibold mb-2",children:f.title}),y.jsx("p",{className:"text-gray-600 mb-1",children:f.description}),y.jsxs("p",{className:"text-sm",children:["Material: ",(m=f.flooringOption)==null?void 0:m.title]}),y.jsxs("p",{className:"text-sm",children:["Area: ",(v=f.roomDimensions)==null?void 0:v.length," ft x ",(E=f.roomDimensions)==null?void 0:E.width," ft"]}),y.jsx("button",{className:"mt-3 px-4 py-2 bg-green-600 text-white rounded",onClick:()=>t(`/projects/view/${f.id}`),children:"View Project"})]},f.id)})})})]}),y.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Available Projects"}),h.length===0?y.jsx("p",{children:"No Submitted projects found."}):y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:h.map(f=>{var m,v,E,x,R,A,S;return y.jsxs("div",{className:"border p-4 rounded shadow relative",children:[y.jsx("div",{className:`absolute top-0 right-0 m-2 px-2 py-1 text-xs font-semibold rounded ${f.status==="submitted"?"bg-blue-100 text-blue-800":f.status==="inquiry"?"bg-yellow-100 text-yellow-800":f.status==="in progress"?"bg-green-100 text-green-800":f.status==="pending_approval"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:f.status==="submitted"?"New":f.status==="inquiry"?"Inquired":f.status==="in progress"?"In Progress":f.status==="pending_approval"?"Pending Approval":f.status}),y.jsx("h2",{className:"text-xl font-semibold mb-2",children:f.title}),y.jsx("p",{className:"text-gray-600 mb-1",children:f.description}),y.jsxs("p",{className:"text-sm",children:["Material: ",(m=f.flooringOption)==null?void 0:m.title]}),y.jsxs("p",{className:"text-sm",children:["Area: ",(v=f.roomDimensions)==null?void 0:v.length," ft x ",(E=f.roomDimensions)==null?void 0:E.width," ft"]}),y.jsx("button",{className:`mt-3 px-4 py-2 text-white rounded ${f.status==="pending_approval"&&((x=f.requestedBy)!=null&&x.includes(e.uid))?"bg-orange-500":f.status==="inquiry"&&((R=f.inquiredBy)!=null&&R.includes(e.uid))?"bg-yellow-500":"bg-blue-600"}`,onClick:()=>t(`/projects/view/${f.id}`),children:f.status==="pending_approval"&&((A=f.requestedBy)!=null&&A.includes(e.uid))?"Awaiting Customer Approval":f.status==="inquiry"&&((S=f.inquiredBy)!=null&&S.includes(e.uid))?"View Inquiry":f.status==="pending homeowner approval"&&f.contractorId===e.uid?"Pending Approval":"View Project"})]},f.id)})})]})},gB="/Ureno_webdesign/assets/default_pfp-bcxf0fN1.png",yB=()=>{const{profile:n}=I.useContext(ha),{currentUser:e}=gs(),[t,r]=I.useState(0),[s,o]=I.useState(0),[l,c]=I.useState(0),[h,f]=I.useState(null);return I.useEffect(()=>{if(!(n!=null&&n.role)||n.role!=="contractor")return;(async()=>{try{console.log("Fetching project stats for contractor role:",n.role);const v=zi(Us(Vt,"projects"),dr("status","==","submitted")),E=zi(Us(Vt,"projects"),dr("status","==","inquiry"),dr("inquiredBy","array-contains",(e==null?void 0:e.uid)||"")),x=zi(Us(Vt,"projects"),dr("status","==","in progress"),dr("inquiredBy","array-contains",(e==null?void 0:e.uid)||""));try{const[R,A,S]=await Promise.all([hr(v),hr(E),hr(x)]);console.log("Available projects count:",R.size),console.log("Inquired projects count:",A.size),console.log("In Progress projects count:",S.size),r(R.size),o(A.size),c(S.size),f(null)}catch(R){console.error("Error in queries:",R);try{const A=await hr(v);r(A.size),console.log("Available query succeeded:",A.size)}catch(A){console.error("Available query failed:",A),r(0)}try{const A=await hr(E);o(A.size),console.log("Inquired query succeeded:",A.size)}catch(A){console.error("Inquired query failed:",A),o(0)}try{const A=await hr(x);c(A.size),console.log("In Progress query succeeded:",A.size)}catch(A){console.error("In Progress query failed:",A),c(0)}}}catch(v){console.error("Error fetching project stats:",v),f(v.message),r(0),o(0),c(0)}})()},[e,n]),y.jsxs(y.Fragment,{children:[y.jsx(L5,{}),y.jsx("div",{className:"main-content max-w-6xl mx-auto p-6",children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-24",children:[y.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"p-4 border rounded shadow",children:[y.jsx("h3",{className:"text-lg font-semibold",children:"Projects"}),y.jsxs("p",{className:"text-gray-500",children:[t," Available, ",s," Inquired, ",l," Accepted"]}),y.jsx(ft,{to:"/available-projects",children:y.jsx("button",{className:"mt-2 text-blue-500 hover:underline",children:"Browse Projects"})})]}),y.jsxs("div",{className:"p-4 border rounded shadow",children:[y.jsx("h3",{className:"text-lg font-semibold",children:"Messages & Notifications"}),y.jsx("p",{className:"text-gray-500",children:"Check for project updates and messages"}),y.jsx(ft,{to:"/messages",children:y.jsx("button",{className:"mt-2 text-blue-500 hover:underline",children:"Go to Messages"})})]})]}),y.jsxs("div",{className:"flex flex-col items-center md:col-span-1 text-center",children:[y.jsx("h2",{className:"text-2xl font-bold mt-4",children:(n==null?void 0:n.username)||(n==null?void 0:n.firstName)||"Contractor"}),y.jsx("img",{src:gB,alt:"profile",className:"w-24 h-24 rounded-full my-2"}),y.jsx("p",{className:"text-gray-500",children:n==null?void 0:n.email}),y.jsx(ft,{to:"/edit-profile",children:y.jsx("button",{className:"mt-2 bg-blue-500 text-white px-4 py-2 rounded",children:"Edit Profile"})})]})]})})]})},vB=async({projectId:n,customerId:e,contractorId:t,status:r="inquiry"})=>{const s=`${n}_${t}`,o=jt(Vt,"conversations",s);return(await jr(o)).exists()||await Kv(o,{projectId:n,customerId:e,contractorId:t,participants:[e,t],status:r,createdAt:pj()}),s},_B=()=>{var m,v,E;const{projectId:n}=Df();console.log("Project ID from URL:",n);const e=Fn(),{profile:t,user:r}=vp(),[s,o]=I.useState(null),[l,c]=I.useState(!0);I.useEffect(()=>{(async()=>{if(!n){console.error("No project ID provided in URL"),c(!1);return}try{const R=jt(Vt,"projects",n),A=await jr(R);A.exists()&&o({id:A.id,...A.data()})}catch(R){console.error("Error fetching project:",R.message)}finally{c(!1)}})()},[n]);const h=async()=>{try{const x=jt(Vt,"projects",n);await Qi(x,{status:"inquiry",inquiredBy:[...s.inquiredBy||[],r.uid]});const R=await vB({projectId:n,customerId:s.ownerId,contractorId:r.uid,status:"inquiry"});e("/messages")}catch(x){console.error("Error inquiring about project:",x.message)}},f=async()=>{try{const x=jt(Vt,"projects",n);await Qi(x,{status:"pending_approval",requestedBy:[...s.requestedBy||[],r.uid]}),e("/contractor-dashboard")}catch(x){console.error("Error requestin acceptance:",x.message)}};return l?y.jsx("div",{children:"Loading project..."}):s?y.jsxs("div",{className:"p-6 max-w-4xl mx-auto mt-24",children:[y.jsx("div",{className:"fixed top-0 left-0 w-full bg-white p-4 flex items-center pb-6 z-10",children:y.jsx(ft,{to:"/available-projects",children:y.jsx("div",{className:"logo",children:" return "})})}),y.jsx("h1",{className:"text-2xl font-bold mb-2",children:s.title}),y.jsx("p",{className:"text-gray-700 mb-4",children:s.description}),y.jsxs("p",{children:["Material: ",(m=s.flooringOption)==null?void 0:m.title]}),y.jsxs("p",{children:["Area: ",(v=s.roomDimensions)==null?void 0:v.length," x ",(E=s.roomDimensions)==null?void 0:E.width," ft"]}),(t==null?void 0:t.role)==="contractor"&&y.jsx("div",{className:"mt-6 flex gap-4",children:s.status==="in progress"&&s.contractorId===r.uid?y.jsx("button",{onClick:()=>e("/messages/"),className:"bg-blue-600 text-white px-4 py-2 rounded",children:"View Conversation"}):y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:h,className:"bg-yellow-500 text-white px-4 py-2 rounded",children:"Inquire"}),y.jsx("button",{onClick:f,className:"bg-green-600 text-white px-4 py-2 rounded",children:"Request Acceptance"})]})})]}):y.jsx("div",{children:"Project not found."})},wB=()=>{const{id:n}=Df(),[e,t]=I.useState([]),[r,s]=I.useState(!0);I.useEffect(()=>{(async()=>{try{const h=jt(Vt,"projects",n),f=await jr(h);if(!f.exists()){console.error("Project not found"),s(!1);return}const v=f.data().requestedBy||[],E=await Promise.all(v.map(async x=>{const R=await jr(jt(Vt,"users",x));return R.exists()?{uid:x,...R.data()}:null}));t(E.filter(Boolean))}catch(h){console.error("Error fetching contractor requests:",h)}finally{s(!1)}})()},[n]);const o=async c=>{try{const h=jt(Vt,"projects",n);await Qi(h,{contractorId:c,status:"in progress"});const f=await jr(h);if(f.exists()){const v=(f.data().requestedBy||[]).filter(E=>E!==c);await Qi(h,{requestedBy:v}),t(E=>E.filter(x=>x.uid!==c))}}catch(h){console.error("Error approving contractor:",h)}},l=async c=>{try{const h=jt(Vt,"projects",n),f=await jr(h);if(!f.exists())return;const v=(f.data().requestedBy||[]).filter(E=>E!==c);await Qi(h,{requestedBy:v}),t(E=>E.filter(x=>x.uid!==c))}catch(h){console.error("Error denying contractor:",h)}};return r?y.jsx("div",{className:"p-4",children:"Loading contractor requests..."}):y.jsxs("div",{className:"p-6 max-w-3xl mx-auto",children:[y.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Contractor Requests"}),e.length===0?y.jsx("p",{children:"No contractor requests yet."}):y.jsx("ul",{className:"space-y-4",children:e.map(c=>y.jsxs("li",{className:"p-4 border rounded shadow",children:[y.jsxs("h2",{className:"text-lg font-semibold",children:[c.firstName," ",c.lastName]}),y.jsx("p",{className:"text-sm text-gray-600",children:c.email}),y.jsx("p",{className:"text-sm text-gray-500",children:c.role}),y.jsxs("div",{className:"mt-2 flex gap-2",children:[y.jsx("button",{onClick:()=>o(c.uid),className:"bg-green-600 text-white px-4 py-1 rounded",children:"Approve"}),y.jsx("button",{onClick:()=>l(c.uid),className:"bg-red-500 text-white px-4 py-1 rounded",children:"Deny"})]})]},c.uid))})]})};function Gl(n,e=0){return e>0?I.lazy(()=>Promise.all([n(),new Promise(t=>setTimeout(t,e))]).then(([t])=>t)):I.lazy(async()=>{try{return await n()}catch(t){return console.error("Error loading component:",t),{}}})}const EB=()=>{const{user:n,profile:e,loading:t}=vp(),r=Fn(),s=ni();return I.useEffect(()=>{if(t)return;if(n&&e&&!e.role&&s.pathname!=="/choose-role"){r("/choose-role");return}const o=["/contractor-dashboard","/available-projects"];n&&e&&e.role!=="contractor"&&o.includes(s.pathname)&&r("/"),console.log("RoleRedirectGate check:",{user:!!n,profile:!!e,role:e==null?void 0:e.role,path:s.pathname})},[n,e,t,s.pathname,r]),null},TB=Gl(()=>kl(()=>import("./designer-Cfh93nmU.js"),[])),IB=Gl(()=>kl(()=>import("./profile-CXpUbLa4.js"),[])),xB=Gl(()=>kl(()=>import("./projectsDashboard-ComIaqAm.js"),[])),CB=Gl(()=>kl(()=>import("./CreateProject-B6Oqvwjy.js"),[])),SB=Gl(()=>kl(()=>import("./MessagePage-D6hKPHwf.js"),[])),RB=Gl(()=>kl(()=>import("./AdminDashboard-BsNT5sW-.js"),[])),AB=({children:n})=>{const{currentUser:e}=gs(),{profile:t}=I.useContext(ha);return!e||(t==null?void 0:t.role)!=="admin"?null:n},Lg=({children:n})=>{const{currentUser:e}=gs(),{profile:t}=I.useContext(ha);return!e||!t||typeof t.role!="string"?y.jsx(v_,{}):t.role!=="contractor"?y.jsx(xx,{to:"/"}):n},PB=document.getElementById("root"),bB=bb.createRoot(PB);bB.render(y.jsx(I.StrictMode,{children:y.jsx(nF,{children:y.jsx(sF,{children:y.jsx(aF,{children:y.jsxs(W2,{basename:"/Ureno_webdesign/",children:[y.jsx(EB,{}),y.jsx(I.Suspense,{fallback:y.jsx(v_,{}),children:y.jsxs(w2,{children:[y.jsx(Ct,{path:"/",element:y.jsx(_5,{})}),y.jsx(Ct,{path:"/product-page",element:y.jsx(T5,{})}),y.jsx(Ct,{path:"/productDetail/:productId",element:y.jsx(A5,{})}),y.jsx(Ct,{path:"/designerPage",element:y.jsx(TB,{})}),y.jsx(Ct,{path:"/ProfileDashboard",element:y.jsx(IB,{})}),y.jsx(Ct,{path:"/edit-profile",element:y.jsx(Y8,{})}),y.jsx(Ct,{path:"/sign-in",element:y.jsx(C5,{})}),y.jsx(Ct,{path:"/Login",element:y.jsx(hB,{})}),y.jsx(Ct,{path:"/sign-up",element:y.jsx(R5,{})}),y.jsx(Ct,{path:"/admin",element:y.jsx(AB,{children:y.jsx(RB,{})})}),y.jsx(Ct,{path:"/projects",element:y.jsx(xB,{})}),y.jsx(Ct,{path:"/projects/new",element:y.jsx(CB,{})}),y.jsx(Ct,{path:"/savedItems",element:y.jsx(X8,{})}),y.jsx(Ct,{path:"/messages",element:y.jsx(SB,{})}),y.jsx(Ct,{path:"/choose-role",element:y.jsx(fB,{})}),y.jsx(Ct,{path:"/projects/edit/:projectId",element:y.jsx(pB,{})}),y.jsx(Ct,{path:"/contractor-dashboard",element:y.jsx(Lg,{children:y.jsx(yB,{})})}),y.jsx(Ct,{path:"/available-projects",element:y.jsx(Lg,{children:y.jsx(mB,{})})}),y.jsx(Ct,{path:"/projects/view/:projectId",element:y.jsx(Lg,{children:y.jsx(_B,{})})}),y.jsx(Ct,{path:"/projects/:id/requests",element:y.jsx(wB,{})})]})}),y.jsx(a1,{})]})})})})}));export{Af as B,C_ as F,ft as L,V_ as N,L5 as P,ha as U,vp as a,jB as b,Et as c,gB as d,Us as e,Vt as f,hr as g,gs as h,jt as i,y as j,LB as k,Fn as l,MB as m,OB as n,nR as o,jr as p,zi as q,I as r,pj as s,Qi as t,Dt as u,qc as v,dr as w};
