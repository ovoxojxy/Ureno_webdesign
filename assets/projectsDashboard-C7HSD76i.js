import{h as g,r as l,j as e,L as c,e as w,f as u,q as y,w as N,g as v,i as D,k as P}from"./index-2rqtV8UT.js";function q(){const{currentUser:r}=g(),[x,n]=l.useState([]),[h,m]=l.useState(!0),[f,j]=l.useState(null),b=t=>{j(o=>o===t?null:t)},p=async t=>{if(!(!r||!window.confirm("Are you sure you want to delete this project?")))try{const s=D(u,"projects",t);await P(s),n(i=>i.filter(a=>a.id!==t)),console.log("Project deleted successfully")}catch(s){console.error("Error deleting project:",s),alert("Failed to delete project. Please try again.")}};return l.useEffect(()=>{(async()=>{if(!r)return;const o=w(u,"projects"),s=y(o,N("ownerId","==",r.uid)),a=(await v(s)).docs.map(d=>({id:d.id,...d.data()}));n(a),m(!1)})()},[r]),h?e.jsx("div",{children:"Loading..."}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-4  relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(c,{to:"/ProfileDashboard",className:"text-blue-500 text-3xl font-bold hover:scale-110 hover:text-blue-700 transition-all duration-200 flex items-center justify-center",children:"<"}),e.jsx("h1",{className:"text-2xl font-bold",children:"My Projects"})]}),e.jsx(c,{to:"/projects/new",children:e.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Create New Project"})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(t=>e.jsxs("div",{className:"p-4 border rounded shadow",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h2",{className:"text-xl font-semibold",children:t.title}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>b(t.id),className:"text-gray-600 hover:text-black",children:"â‹®"}),f===t.id&&e.jsxs("div",{className:"absolute right-0 mt-1 bg-white border rounded shadow-md z-10",children:[e.jsx("button",{onClick:()=>p(t.id),className:"block w-full text-left px-4 py-2 hover:bg-red-100 text-red-600",children:"Delete"}),e.jsx(c,{to:`/projects/edit/${t.id}`,className:"block px-4 py-2 hover:bg-blue-100 text-blue-600",children:"Edit"})]})]})]}),e.jsx("p",{className:"text-gray-600",children:t.description})]},t.id))})]})})}export{q as default};
