import{h as P,l as F,r as s,j as t,L,q as E,w as T,e as x,f as j,g as A,m as R,s as b}from"./index-2rqtV8UT.js";function k(){const{currentUser:o}=P(),n=F(),[l,w]=s.useState(""),[c,v]=s.useState(""),[a,N]=s.useState(null),[i,S]=s.useState(""),[u,y]=s.useState(""),[d,p]=s.useState(!1),[C,h]=s.useState(!1),[g,q]=s.useState([]);s.useEffect(()=>{(async()=>{const r=E(x(j,"products"),T("description","==","Flooring")),O=(await A(r)).docs.map(f=>({id:f.id,...f.data()}));q(O)})()},[]);const D=async e=>{if(e.preventDefault(),!!o){p(!0);try{const r=x(j,"projects");await R(r,{ownerId:o.uid,title:l,description:c,flooringOption:a,roomDimensions:{length:Number(i),width:Number(u)},createdAt:b(),updatedAt:b(),status:"submitted"}),h(!0),setTimeout(()=>{h(!1),n("/projects")},1500),n("/projects")}catch(r){console.error("Error creating project: ",r)}finally{p(!1)}}};return t.jsxs("div",{className:"p-4 max-w-2xl mx-auto mt-20 relative",children:[t.jsx("div",{className:"fixed top-0 left-0 w-full bg-white  p-4 flex items-center",children:t.jsx(L,{to:"/projects",children:t.jsx("div",{className:"logo",children:" return "})})}),t.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Create New Project"}),C&&t.jsx("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow",children:"Project created successfully!"}),t.jsxs("form",{onSubmit:D,className:"space-y-4",children:[t.jsx("input",{type:"text",placeholder:"Project Title",value:l,onChange:e=>w(e.target.value),required:!0,className:"w-full border p-2 rounded"}),t.jsx("textarea",{placeholder:"Project Description",value:c,onChange:e=>v(e.target.value),required:!0,className:"w-full border p-2 rounded"}),t.jsxs("select",{value:(a==null?void 0:a.id)||"",className:"w-full border p-2 rounded bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onChange:e=>{const r=g.find(m=>m.id===e.target.value);N(r||null)},children:[t.jsx("option",{value:"",children:"Select Flooring Option"}),g.map(e=>t.jsxs("option",{value:e.id,children:[e.title," - ",e.price]},e.id))]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx("input",{type:"number",placeholder:"Length (ft)",value:i,onChange:e=>S(e.target.value),className:"w-full border p-2 rounded"}),t.jsx("input",{type:"number",placeholder:"Width (ft)",value:u,onChange:e=>y(e.target.value),className:"w-full border p-2 rounded"})]}),t.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-blue-500 text-white rounded",children:d?"Creating...":"Create Project"})]})]})}export{k as default};
