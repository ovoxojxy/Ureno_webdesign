import{r as c,j as e,c as l,u as o,a as A,b as G,P as W,L as f,B as h,d as z,F as J,e as R,f as L,q as M,g as F,w as K}from"./index-hEPJqI76.js";const I=a=>c.forwardRef((s,r)=>e.jsx("div",{...s,ref:r,className:l(s.className,a)})),S=c.forwardRef(({className:a,bsPrefix:s,as:r="div",...t},d)=>(s=o(s,"card-body"),e.jsx(r,{ref:d,className:l(a,s),...t})));S.displayName="CardBody";const k=c.forwardRef(({className:a,bsPrefix:s,as:r="div",...t},d)=>(s=o(s,"card-footer"),e.jsx(r,{ref:d,className:l(a,s),...t})));k.displayName="CardFooter";const q=c.createContext(null);q.displayName="CardHeaderContext";const B=c.forwardRef(({bsPrefix:a,className:s,as:r="div",...t},d)=>{const i=o(a,"card-header"),n=c.useMemo(()=>({cardHeaderBsPrefix:i}),[i]);return e.jsx(q.Provider,{value:n,children:e.jsx(r,{ref:d,...t,className:l(s,i)})})});B.displayName="CardHeader";const H=c.forwardRef(({bsPrefix:a,className:s,variant:r,as:t="img",...d},i)=>{const n=o(a,"card-img");return e.jsx(t,{ref:i,className:l(r?`${n}-${r}`:n,s),...d})});H.displayName="CardImg";const T=c.forwardRef(({className:a,bsPrefix:s,as:r="div",...t},d)=>(s=o(s,"card-img-overlay"),e.jsx(r,{ref:d,className:l(a,s),...t})));T.displayName="CardImgOverlay";const E=c.forwardRef(({className:a,bsPrefix:s,as:r="a",...t},d)=>(s=o(s,"card-link"),e.jsx(r,{ref:d,className:l(a,s),...t})));E.displayName="CardLink";const P=I("h6"),$=c.forwardRef(({className:a,bsPrefix:s,as:r=P,...t},d)=>(s=o(s,"card-subtitle"),e.jsx(r,{ref:d,className:l(a,s),...t})));$.displayName="CardSubtitle";const O=c.forwardRef(({className:a,bsPrefix:s,as:r="p",...t},d)=>(s=o(s,"card-text"),e.jsx(r,{ref:d,className:l(a,s),...t})));O.displayName="CardText";const Q=I("h5"),D=c.forwardRef(({className:a,bsPrefix:s,as:r=Q,...t},d)=>(s=o(s,"card-title"),e.jsx(r,{ref:d,className:l(a,s),...t})));D.displayName="CardTitle";const U=c.forwardRef(({bsPrefix:a,className:s,bg:r,text:t,border:d,body:i=!1,children:n,as:p="div",...u},g)=>{const N=o(a,"card");return e.jsx(p,{ref:g,...u,className:l(s,N,r&&`bg-${r}`,t&&`text-${t}`,d&&`border-${d}`),children:i?e.jsx(S,{children:n}):n})});U.displayName="Card";const w=Object.assign(U,{Img:H,Title:D,Subtitle:$,Body:S,Link:E,Text:O,Header:B,Footer:k,ImgOverlay:T});function Y(){const{user:a,profile:s,loading:r}=A();G();const[t,d]=c.useState([]),[i,n]=c.useState(!0),[p,u]=c.useState([]),[g,N]=c.useState(!0);return c.useEffect(()=>{const m=async()=>{if(!a)return;const v=R(L,"users",a.uid,"projects"),y=M(v);try{const C=(await F(y)).docs.map(x=>({id:x.id,...x.data()}));d(C)}catch(j){console.error("Error fetching projects: ",j)}finally{n(!1)}},V=async()=>{if(!a)return;const v=R(L,"savedMaterials"),y=M(v,K("userId","==",a.uid));try{const C=(await F(y)).docs.map(x=>({id:x.id,...x.data()}));u(C)}catch{console.error("Error fetching saved materials:",errors)}finally{N(!1)}};m(),V()},[a]),r?e.jsx("p",{children:"Loading..."}):!a||!s?e.jsx("p",{children:"User not found nor not logged in."}):e.jsxs(e.Fragment,{children:[e.jsx("meta",{charSet:"UTF-8"}),e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),e.jsx("title",{children:"Profile"}),e.jsx(W,{}),e.jsx("div",{className:"main-content max-w-6xl mx-auto p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-24 ",children:[e.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(w,{children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Projects"}),i?e.jsx("p",{className:"text-gray-500",children:"Loading project stats..."}):e.jsxs("p",{className:"text-gray-500",children:[t.filter(m=>m.status==="in progress").length," Ongoing, "," ",t.filter(m=>m.status==="completed").length," Completed"]}),e.jsx(f,{to:"/projects",children:e.jsx(h,{variant:"link",className:"mt-2",children:"View projects"})})]})}),e.jsx(w,{children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Saved Items"}),g?e.jsx("p",{className:"text-gray-500",children:"Loading saved materials..."}):e.jsxs("p",{className:"text-gray-500",children:[p.length," Materials Favorited"]}),e.jsx(f,{to:"/savedItems",children:e.jsx(h,{variant:"link",className:"mt-2",children:"View Favorites"})})]})}),e.jsx(w,{children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Messages & Notifications"}),e.jsx("p",{className:"text-gray-500",children:"2 Unread Messages"}),e.jsx(f,{to:"/messages",children:e.jsx(h,{variant:"link",className:"mt-2",children:"Go to Messages"})})]})})]}),e.jsxs("div",{className:"flex flex-col items-center md:col-span-1 text-center ",children:[e.jsx("h2",{className:"text-2xl font-bold mt-4",children:s.username||a.displayName}),e.jsx("img",{src:z}),e.jsx("p",{className:"text-gray-500",children:a.email}),e.jsx(f,{to:"/edit-profile",children:e.jsx(h,{className:"mt-2",children:"Edit Profile"})})]})]})}),e.jsx(J,{})]})}export{Y as default};
