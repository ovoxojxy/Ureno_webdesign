(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function Rc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Hm={exports:{}},Du={},qm={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yw;function NP(){if(Yw)return Le;Yw=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),w=Symbol.iterator;function E(z){return z===null||typeof z!="object"?null:(z=w&&z[w]||z["@@iterator"],typeof z=="function"?z:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,b={};function S(z,Y,pe){this.props=z,this.context=Y,this.refs=b,this.updater=pe||x}S.prototype.isReactComponent={},S.prototype.setState=function(z,Y){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,Y,"setState")},S.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function L(){}L.prototype=S.prototype;function U(z,Y,pe){this.props=z,this.context=Y,this.refs=b,this.updater=pe||x}var B=U.prototype=new L;B.constructor=U,R(B,S.prototype),B.isPureReactComponent=!0;var q=Array.isArray,X=Object.prototype.hasOwnProperty,Z={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function P(z,Y,pe){var Ie,Ae={},De=null,je=null;if(Y!=null)for(Ie in Y.ref!==void 0&&(je=Y.ref),Y.key!==void 0&&(De=""+Y.key),Y)X.call(Y,Ie)&&!N.hasOwnProperty(Ie)&&(Ae[Ie]=Y[Ie]);var Oe=arguments.length-2;if(Oe===1)Ae.children=pe;else if(1<Oe){for(var Ye=Array(Oe),At=0;At<Oe;At++)Ye[At]=arguments[At+2];Ae.children=Ye}if(z&&z.defaultProps)for(Ie in Oe=z.defaultProps,Oe)Ae[Ie]===void 0&&(Ae[Ie]=Oe[Ie]);return{$$typeof:n,type:z,key:De,ref:je,props:Ae,_owner:Z.current}}function k(z,Y){return{$$typeof:n,type:z.type,key:Y,ref:z.ref,props:z.props,_owner:z._owner}}function M(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function j(z){var Y={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(pe){return Y[pe]})}var V=/\/+/g;function D(z,Y){return typeof z=="object"&&z!==null&&z.key!=null?j(""+z.key):Y.toString(36)}function le(z,Y,pe,Ie,Ae){var De=typeof z;(De==="undefined"||De==="boolean")&&(z=null);var je=!1;if(z===null)je=!0;else switch(De){case"string":case"number":je=!0;break;case"object":switch(z.$$typeof){case n:case e:je=!0}}if(je)return je=z,Ae=Ae(je),z=Ie===""?"."+D(je,0):Ie,q(Ae)?(pe="",z!=null&&(pe=z.replace(V,"$&/")+"/"),le(Ae,Y,pe,"",function(At){return At})):Ae!=null&&(M(Ae)&&(Ae=k(Ae,pe+(!Ae.key||je&&je.key===Ae.key?"":(""+Ae.key).replace(V,"$&/")+"/")+z)),Y.push(Ae)),1;if(je=0,Ie=Ie===""?".":Ie+":",q(z))for(var Oe=0;Oe<z.length;Oe++){De=z[Oe];var Ye=Ie+D(De,Oe);je+=le(De,Y,pe,Ye,Ae)}else if(Ye=E(z),typeof Ye=="function")for(z=Ye.call(z),Oe=0;!(De=z.next()).done;)De=De.value,Ye=Ie+D(De,Oe++),je+=le(De,Y,pe,Ye,Ae);else if(De==="object")throw Y=String(z),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return je}function xe(z,Y,pe){if(z==null)return z;var Ie=[],Ae=0;return le(z,Ie,"","",function(De){return Y.call(pe,De,Ae++)}),Ie}function Re(z){if(z._status===-1){var Y=z._result;Y=Y(),Y.then(function(pe){(z._status===0||z._status===-1)&&(z._status=1,z._result=pe)},function(pe){(z._status===0||z._status===-1)&&(z._status=2,z._result=pe)}),z._status===-1&&(z._status=0,z._result=Y)}if(z._status===1)return z._result.default;throw z._result}var Te={current:null},se={transition:null},ue={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:se,ReactCurrentOwner:Z};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Le.Children={map:xe,forEach:function(z,Y,pe){xe(z,function(){Y.apply(this,arguments)},pe)},count:function(z){var Y=0;return xe(z,function(){Y++}),Y},toArray:function(z){return xe(z,function(Y){return Y})||[]},only:function(z){if(!M(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Le.Component=S,Le.Fragment=t,Le.Profiler=s,Le.PureComponent=U,Le.StrictMode=r,Le.Suspense=h,Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,Le.act=ie,Le.cloneElement=function(z,Y,pe){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var Ie=R({},z.props),Ae=z.key,De=z.ref,je=z._owner;if(Y!=null){if(Y.ref!==void 0&&(De=Y.ref,je=Z.current),Y.key!==void 0&&(Ae=""+Y.key),z.type&&z.type.defaultProps)var Oe=z.type.defaultProps;for(Ye in Y)X.call(Y,Ye)&&!N.hasOwnProperty(Ye)&&(Ie[Ye]=Y[Ye]===void 0&&Oe!==void 0?Oe[Ye]:Y[Ye])}var Ye=arguments.length-2;if(Ye===1)Ie.children=pe;else if(1<Ye){Oe=Array(Ye);for(var At=0;At<Ye;At++)Oe[At]=arguments[At+2];Ie.children=Oe}return{$$typeof:n,type:z.type,key:Ae,ref:De,props:Ie,_owner:je}},Le.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:o,_context:z},z.Consumer=z},Le.createElement=P,Le.createFactory=function(z){var Y=P.bind(null,z);return Y.type=z,Y},Le.createRef=function(){return{current:null}},Le.forwardRef=function(z){return{$$typeof:c,render:z}},Le.isValidElement=M,Le.lazy=function(z){return{$$typeof:g,_payload:{_status:-1,_result:z},_init:Re}},Le.memo=function(z,Y){return{$$typeof:p,type:z,compare:Y===void 0?null:Y}},Le.startTransition=function(z){var Y=se.transition;se.transition={};try{z()}finally{se.transition=Y}},Le.unstable_act=ie,Le.useCallback=function(z,Y){return Te.current.useCallback(z,Y)},Le.useContext=function(z){return Te.current.useContext(z)},Le.useDebugValue=function(){},Le.useDeferredValue=function(z){return Te.current.useDeferredValue(z)},Le.useEffect=function(z,Y){return Te.current.useEffect(z,Y)},Le.useId=function(){return Te.current.useId()},Le.useImperativeHandle=function(z,Y,pe){return Te.current.useImperativeHandle(z,Y,pe)},Le.useInsertionEffect=function(z,Y){return Te.current.useInsertionEffect(z,Y)},Le.useLayoutEffect=function(z,Y){return Te.current.useLayoutEffect(z,Y)},Le.useMemo=function(z,Y){return Te.current.useMemo(z,Y)},Le.useReducer=function(z,Y,pe){return Te.current.useReducer(z,Y,pe)},Le.useRef=function(z){return Te.current.useRef(z)},Le.useState=function(z){return Te.current.useState(z)},Le.useSyncExternalStore=function(z,Y,pe){return Te.current.useSyncExternalStore(z,Y,pe)},Le.useTransition=function(){return Te.current.useTransition()},Le.version="18.3.1",Le}var Xw;function My(){return Xw||(Xw=1,qm.exports=NP()),qm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jw;function DP(){if(Jw)return Du;Jw=1;var n=My(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,p){var g,w={},E=null,x=null;p!==void 0&&(E=""+p),h.key!==void 0&&(E=""+h.key),h.ref!==void 0&&(x=h.ref);for(g in h)r.call(h,g)&&!o.hasOwnProperty(g)&&(w[g]=h[g]);if(c&&c.defaultProps)for(g in h=c.defaultProps,h)w[g]===void 0&&(w[g]=h[g]);return{$$typeof:e,type:c,key:E,ref:x,props:w,_owner:s.current}}return Du.Fragment=t,Du.jsx=l,Du.jsxs=l,Du}var Zw;function OP(){return Zw||(Zw=1,Hm.exports=DP()),Hm.exports}var y=OP(),I=My();const En=Rc(I);var hh={},Gm={exports:{}},bn={},Km={exports:{}},Qm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eE;function LP(){return eE||(eE=1,function(n){function e(se,ue){var ie=se.length;se.push(ue);e:for(;0<ie;){var z=ie-1>>>1,Y=se[z];if(0<s(Y,ue))se[z]=ue,se[ie]=Y,ie=z;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var ue=se[0],ie=se.pop();if(ie!==ue){se[0]=ie;e:for(var z=0,Y=se.length,pe=Y>>>1;z<pe;){var Ie=2*(z+1)-1,Ae=se[Ie],De=Ie+1,je=se[De];if(0>s(Ae,ie))De<Y&&0>s(je,Ae)?(se[z]=je,se[De]=ie,z=De):(se[z]=Ae,se[Ie]=ie,z=Ie);else if(De<Y&&0>s(je,ie))se[z]=je,se[De]=ie,z=De;else break e}}return ue}function s(se,ue){var ie=se.sortIndex-ue.sortIndex;return ie!==0?ie:se.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],p=[],g=1,w=null,E=3,x=!1,R=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(se){for(var ue=t(p);ue!==null;){if(ue.callback===null)r(p);else if(ue.startTime<=se)r(p),ue.sortIndex=ue.expirationTime,e(h,ue);else break;ue=t(p)}}function q(se){if(b=!1,B(se),!R)if(t(h)!==null)R=!0,Re(X);else{var ue=t(p);ue!==null&&Te(q,ue.startTime-se)}}function X(se,ue){R=!1,b&&(b=!1,L(P),P=-1),x=!0;var ie=E;try{for(B(ue),w=t(h);w!==null&&(!(w.expirationTime>ue)||se&&!j());){var z=w.callback;if(typeof z=="function"){w.callback=null,E=w.priorityLevel;var Y=z(w.expirationTime<=ue);ue=n.unstable_now(),typeof Y=="function"?w.callback=Y:w===t(h)&&r(h),B(ue)}else r(h);w=t(h)}if(w!==null)var pe=!0;else{var Ie=t(p);Ie!==null&&Te(q,Ie.startTime-ue),pe=!1}return pe}finally{w=null,E=ie,x=!1}}var Z=!1,N=null,P=-1,k=5,M=-1;function j(){return!(n.unstable_now()-M<k)}function V(){if(N!==null){var se=n.unstable_now();M=se;var ue=!0;try{ue=N(!0,se)}finally{ue?D():(Z=!1,N=null)}}else Z=!1}var D;if(typeof U=="function")D=function(){U(V)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,xe=le.port2;le.port1.onmessage=V,D=function(){xe.postMessage(null)}}else D=function(){S(V,0)};function Re(se){N=se,Z||(Z=!0,D())}function Te(se,ue){P=S(function(){se(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){R||x||(R=!0,Re(X))},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(se){switch(E){case 1:case 2:case 3:var ue=3;break;default:ue=E}var ie=E;E=ue;try{return se()}finally{E=ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,ue){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ie=E;E=se;try{return ue()}finally{E=ie}},n.unstable_scheduleCallback=function(se,ue,ie){var z=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?z+ie:z):ie=z,se){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ie+Y,se={id:g++,callback:ue,priorityLevel:se,startTime:ie,expirationTime:Y,sortIndex:-1},ie>z?(se.sortIndex=ie,e(p,se),t(h)===null&&se===t(p)&&(b?(L(P),P=-1):b=!0,Te(q,ie-z))):(se.sortIndex=Y,e(h,se),R||x||(R=!0,Re(X))),se},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(se){var ue=E;return function(){var ie=E;E=ue;try{return se.apply(this,arguments)}finally{E=ie}}}}(Qm)),Qm}var tE;function MP(){return tE||(tE=1,Km.exports=LP()),Km.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nE;function jP(){if(nE)return bn;nE=1;var n=My(),e=MP();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},w={};function E(i){return h.call(w,i)?!0:h.call(g,i)?!1:p.test(i)?w[i]=!0:(g[i]=!0,!1)}function x(i,a,u,f){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function R(i,a,u,f){if(a===null||typeof a>"u"||x(i,a,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function b(i,a,u,f,m,_,C){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=i,this.type=a,this.sanitizeURL=_,this.removeEmptyString=C}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){S[i]=new b(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];S[a]=new b(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){S[i]=new b(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){S[i]=new b(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){S[i]=new b(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){S[i]=new b(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){S[i]=new b(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){S[i]=new b(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){S[i]=new b(i,5,!1,i.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function U(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(L,U);S[a]=new b(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(L,U);S[a]=new b(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(L,U);S[a]=new b(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){S[i]=new b(i,1,!1,i.toLowerCase(),null,!1,!1)}),S.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){S[i]=new b(i,1,!1,i.toLowerCase(),null,!0,!0)});function B(i,a,u,f){var m=S.hasOwnProperty(a)?S[a]:null;(m!==null?m.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(R(a,u,m,f)&&(u=null),f||m===null?E(a)&&(u===null?i.removeAttribute(a):i.setAttribute(a,""+u)):m.mustUseProperty?i[m.propertyName]=u===null?m.type===3?!1:"":u:(a=m.attributeName,f=m.attributeNamespace,u===null?i.removeAttribute(a):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,f?i.setAttributeNS(f,a,u):i.setAttribute(a,u))))}var q=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),Z=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),j=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),xe=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),Te=Symbol.for("react.offscreen"),se=Symbol.iterator;function ue(i){return i===null||typeof i!="object"?null:(i=se&&i[se]||i["@@iterator"],typeof i=="function"?i:null)}var ie=Object.assign,z;function Y(i){if(z===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);z=a&&a[1]||""}return`
`+z+i}var pe=!1;function Ie(i,a){if(!i||pe)return"";pe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(K){var f=K}Reflect.construct(i,[],a)}else{try{a.call()}catch(K){f=K}i.call(a.prototype)}else{try{throw Error()}catch(K){f=K}i()}}catch(K){if(K&&f&&typeof K.stack=="string"){for(var m=K.stack.split(`
`),_=f.stack.split(`
`),C=m.length-1,O=_.length-1;1<=C&&0<=O&&m[C]!==_[O];)O--;for(;1<=C&&0<=O;C--,O--)if(m[C]!==_[O]){if(C!==1||O!==1)do if(C--,O--,0>O||m[C]!==_[O]){var F=`
`+m[C].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=C&&0<=O);break}}}finally{pe=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?Y(i):""}function Ae(i){switch(i.tag){case 5:return Y(i.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return i=Ie(i.type,!1),i;case 11:return i=Ie(i.type.render,!1),i;case 1:return i=Ie(i.type,!0),i;default:return""}}function De(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case Z:return"Portal";case k:return"Profiler";case P:return"StrictMode";case D:return"Suspense";case le:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case j:return(i.displayName||"Context")+".Consumer";case M:return(i._context.displayName||"Context")+".Provider";case V:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case xe:return a=i.displayName||null,a!==null?a:De(i.type)||"Memo";case Re:a=i._payload,i=i._init;try{return De(i(a))}catch{}}return null}function je(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(a);case 8:return a===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Oe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ye(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function At(i){var a=Ye(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),f=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,_=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return m.call(this)},set:function(C){f=""+C,_.call(this,C)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(C){f=""+C},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function jn(i){i._valueTracker||(i._valueTracker=At(i))}function Js(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),f="";return i&&(f=Ye(i)?i.checked?"true":"false":i.value),i=f,i!==u?(a.setValue(i),!0):!1}function yr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ps(i,a){var u=a.checked;return ie({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function Zs(i,a){var u=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;u=Oe(a.value!=null?a.value:u),i._wrapperState={initialChecked:f,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function ei(i,a){a=a.checked,a!=null&&B(i,"checked",a,!1)}function ti(i,a){ei(i,a);var u=Oe(a.value),f=a.type;if(u!=null)f==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?ni(i,a.type,u):a.hasOwnProperty("defaultValue")&&ni(i,a.type,Oe(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function ua(i,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,u||a===i.value||(i.value=a),i.defaultValue=a}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function ni(i,a,u){(a!=="number"||yr(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var Gt=Array.isArray;function Tn(i,a,u,f){if(i=i.options,a){a={};for(var m=0;m<u.length;m++)a["$"+u[m]]=!0;for(u=0;u<i.length;u++)m=a.hasOwnProperty("$"+i[u].value),i[u].selected!==m&&(i[u].selected=m),m&&f&&(i[u].defaultSelected=!0)}else{for(u=""+Oe(u),a=null,m=0;m<i.length;m++){if(i[m].value===u){i[m].selected=!0,f&&(i[m].defaultSelected=!0);return}a!==null||i[m].disabled||(a=i[m])}a!==null&&(a.selected=!0)}}function ri(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function ms(i,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(Gt(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}i._wrapperState={initialValue:Oe(u)}}function Br(i,a){var u=Oe(a.value),f=Oe(a.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),a.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),f!=null&&(i.defaultValue=""+f)}function si(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function _t(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wt(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?_t(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Xn,zl=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,f,m){MSApp.execUnsafeLocalFunction(function(){return i(a,u,f,m)})}:i}(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(Xn=Xn||document.createElement("div"),Xn.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Xn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function ii(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var mo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},go=["Webkit","ms","Moz","O"];Object.keys(mo).forEach(function(i){go.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),mo[a]=mo[i]})});function Wl(i,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||mo.hasOwnProperty(i)&&mo[i]?(""+a).trim():a+"px"}function Hl(i,a){i=i.style;for(var u in a)if(a.hasOwnProperty(u)){var f=u.indexOf("--")===0,m=Wl(u,a[u],f);u==="float"&&(u="cssFloat"),f?i.setProperty(u,m):i[u]=m}}var ql=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gl(i,a){if(a){if(ql[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Kl(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yo=null;function ca(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var da=null,Jn=null,zr=null;function ha(i){if(i=vu(i)){if(typeof da!="function")throw Error(t(280));var a=i.stateNode;a&&(a=Rd(a),da(i.stateNode,i.type,a))}}function Wr(i){Jn?zr?zr.push(i):zr=[i]:Jn=i}function Ql(){if(Jn){var i=Jn,a=zr;if(zr=Jn=null,ha(i),a)for(i=0;i<a.length;i++)ha(a[i])}}function vo(i,a){return i(a)}function Yl(){}var gs=!1;function Xl(i,a,u){if(gs)return i(a,u);gs=!0;try{return vo(i,a,u)}finally{gs=!1,(Jn!==null||zr!==null)&&(Yl(),Ql())}}function xt(i,a){var u=i.stateNode;if(u===null)return null;var f=Rd(u);if(f===null)return null;u=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var fa=!1;if(c)try{var vr={};Object.defineProperty(vr,"passive",{get:function(){fa=!0}}),window.addEventListener("test",vr,vr),window.removeEventListener("test",vr,vr)}catch{fa=!1}function _o(i,a,u,f,m,_,C,O,F){var K=Array.prototype.slice.call(arguments,3);try{a.apply(u,K)}catch(ne){this.onError(ne)}}var wo=!1,pa=null,_r=!1,Jl=null,_p={onError:function(i){wo=!0,pa=i}};function ma(i,a,u,f,m,_,C,O,F){wo=!1,pa=null,_o.apply(_p,arguments)}function Jc(i,a,u,f,m,_,C,O,F){if(ma.apply(this,arguments),wo){if(wo){var K=pa;wo=!1,pa=null}else throw Error(t(198));_r||(_r=!0,Jl=K)}}function wr(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function Eo(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function Er(i){if(wr(i)!==i)throw Error(t(188))}function Zc(i){var a=i.alternate;if(!a){if(a=wr(i),a===null)throw Error(t(188));return a!==i?null:i}for(var u=i,f=a;;){var m=u.return;if(m===null)break;var _=m.alternate;if(_===null){if(f=m.return,f!==null){u=f;continue}break}if(m.child===_.child){for(_=m.child;_;){if(_===u)return Er(m),i;if(_===f)return Er(m),a;_=_.sibling}throw Error(t(188))}if(u.return!==f.return)u=m,f=_;else{for(var C=!1,O=m.child;O;){if(O===u){C=!0,u=m,f=_;break}if(O===f){C=!0,f=m,u=_;break}O=O.sibling}if(!C){for(O=_.child;O;){if(O===u){C=!0,u=_,f=m;break}if(O===f){C=!0,f=_,u=m;break}O=O.sibling}if(!C)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:a}function Zl(i){return i=Zc(i),i!==null?ga(i):null}function ga(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=ga(i);if(a!==null)return a;i=i.sibling}return null}var ya=e.unstable_scheduleCallback,eu=e.unstable_cancelCallback,ed=e.unstable_shouldYield,wp=e.unstable_requestPaint,st=e.unstable_now,td=e.unstable_getCurrentPriorityLevel,To=e.unstable_ImmediatePriority,oi=e.unstable_UserBlockingPriority,Zn=e.unstable_NormalPriority,tu=e.unstable_LowPriority,nd=e.unstable_IdlePriority,Io=null,Vn=null;function rd(i){if(Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot(Io,i,void 0,(i.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:id,nu=Math.log,sd=Math.LN2;function id(i){return i>>>=0,i===0?32:31-(nu(i)/sd|0)|0}var va=64,_a=4194304;function ai(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Co(i,a){var u=i.pendingLanes;if(u===0)return 0;var f=0,m=i.suspendedLanes,_=i.pingedLanes,C=u&268435455;if(C!==0){var O=C&~m;O!==0?f=ai(O):(_&=C,_!==0&&(f=ai(_)))}else C=u&~m,C!==0?f=ai(C):_!==0&&(f=ai(_));if(f===0)return 0;if(a!==0&&a!==f&&(a&m)===0&&(m=f&-f,_=a&-a,m>=_||m===16&&(_&4194240)!==0))return a;if((f&4)!==0&&(f|=u&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=f;0<a;)u=31-gn(a),m=1<<u,f|=i[u],a&=~m;return f}function Ep(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ys(i,a){for(var u=i.suspendedLanes,f=i.pingedLanes,m=i.expirationTimes,_=i.pendingLanes;0<_;){var C=31-gn(_),O=1<<C,F=m[C];F===-1?((O&u)===0||(O&f)!==0)&&(m[C]=Ep(O,a)):F<=a&&(i.expiredLanes|=O),_&=~O}}function Fn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function xo(){var i=va;return va<<=1,(va&4194240)===0&&(va=64),i}function li(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function ui(i,a,u){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-gn(a),i[a]=u}function rt(i,a){var u=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<u;){var m=31-gn(u),_=1<<m;a[m]=0,f[m]=-1,i[m]=-1,u&=~_}}function ci(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var f=31-gn(u),m=1<<f;m&a|i[f]&a&&(i[f]|=a),u&=~m}}var Fe=0;function di(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var od,wa,ad,ld,ud,ru=!1,Hr=[],Kt=null,Tr=null,Ir=null,hi=new Map,er=new Map,qr=[],Tp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cd(i,a){switch(i){case"focusin":case"focusout":Kt=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":hi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":er.delete(a.pointerId)}}function In(i,a,u,f,m,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:u,eventSystemFlags:f,nativeEvent:_,targetContainers:[m]},a!==null&&(a=vu(a),a!==null&&wa(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),i)}function Ip(i,a,u,f,m){switch(a){case"focusin":return Kt=In(Kt,i,a,u,f,m),!0;case"dragenter":return Tr=In(Tr,i,a,u,f,m),!0;case"mouseover":return Ir=In(Ir,i,a,u,f,m),!0;case"pointerover":var _=m.pointerId;return hi.set(_,In(hi.get(_)||null,i,a,u,f,m)),!0;case"gotpointercapture":return _=m.pointerId,er.set(_,In(er.get(_)||null,i,a,u,f,m)),!0}return!1}function dd(i){var a=bo(i.target);if(a!==null){var u=wr(a);if(u!==null){if(a=u.tag,a===13){if(a=Eo(u),a!==null){i.blockedOn=a,ud(i.priority,function(){ad(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function vs(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=Ea(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);yo=f,u.target.dispatchEvent(f),yo=null}else return a=vu(u),a!==null&&wa(a),i.blockedOn=u,!1;a.shift()}return!0}function So(i,a,u){vs(i)&&u.delete(a)}function hd(){ru=!1,Kt!==null&&vs(Kt)&&(Kt=null),Tr!==null&&vs(Tr)&&(Tr=null),Ir!==null&&vs(Ir)&&(Ir=null),hi.forEach(So),er.forEach(So)}function Cr(i,a){i.blockedOn===a&&(i.blockedOn=null,ru||(ru=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hd)))}function xr(i){function a(m){return Cr(m,i)}if(0<Hr.length){Cr(Hr[0],i);for(var u=1;u<Hr.length;u++){var f=Hr[u];f.blockedOn===i&&(f.blockedOn=null)}}for(Kt!==null&&Cr(Kt,i),Tr!==null&&Cr(Tr,i),Ir!==null&&Cr(Ir,i),hi.forEach(a),er.forEach(a),u=0;u<qr.length;u++)f=qr[u],f.blockedOn===i&&(f.blockedOn=null);for(;0<qr.length&&(u=qr[0],u.blockedOn===null);)dd(u),u.blockedOn===null&&qr.shift()}var _s=q.ReactCurrentBatchConfig,fi=!0;function pt(i,a,u,f){var m=Fe,_=_s.transition;_s.transition=null;try{Fe=1,su(i,a,u,f)}finally{Fe=m,_s.transition=_}}function Cp(i,a,u,f){var m=Fe,_=_s.transition;_s.transition=null;try{Fe=4,su(i,a,u,f)}finally{Fe=m,_s.transition=_}}function su(i,a,u,f){if(fi){var m=Ea(i,a,u,f);if(m===null)Lp(i,a,f,Ro,u),cd(i,f);else if(Ip(m,i,a,u,f))f.stopPropagation();else if(cd(i,f),a&4&&-1<Tp.indexOf(i)){for(;m!==null;){var _=vu(m);if(_!==null&&od(_),_=Ea(i,a,u,f),_===null&&Lp(i,a,f,Ro,u),_===m)break;m=_}m!==null&&f.stopPropagation()}else Lp(i,a,f,null,u)}}var Ro=null;function Ea(i,a,u,f){if(Ro=null,i=ca(f),i=bo(i),i!==null)if(a=wr(i),a===null)i=null;else if(u=a.tag,u===13){if(i=Eo(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Ro=i,null}function iu(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(td()){case To:return 1;case oi:return 4;case Zn:case tu:return 16;case nd:return 536870912;default:return 16}default:return 16}}var Un=null,Ta=null,Cn=null;function ou(){if(Cn)return Cn;var i,a=Ta,u=a.length,f,m="value"in Un?Un.value:Un.textContent,_=m.length;for(i=0;i<u&&a[i]===m[i];i++);var C=u-i;for(f=1;f<=C&&a[u-f]===m[_-f];f++);return Cn=m.slice(i,1<f?1-f:void 0)}function Ia(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Gr(){return!0}function au(){return!1}function Qt(i){function a(u,f,m,_,C){this._reactName=u,this._targetInst=m,this.type=f,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var O in i)i.hasOwnProperty(O)&&(u=i[O],this[O]=u?u(_):_[O]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Gr:au,this.isPropagationStopped=au,this}return ie(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Gr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Gr)},persist:function(){},isPersistent:Gr}),a}var Sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ca=Qt(Sr),Kr=ie({},Sr,{view:0,detail:0}),xp=Qt(Kr),xa,ws,pi,Ao=ie({},Kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==pi&&(pi&&i.type==="mousemove"?(xa=i.screenX-pi.screenX,ws=i.screenY-pi.screenY):ws=xa=0,pi=i),xa)},movementY:function(i){return"movementY"in i?i.movementY:ws}}),Sa=Qt(Ao),lu=ie({},Ao,{dataTransfer:0}),fd=Qt(lu),Ra=ie({},Kr,{relatedTarget:0}),Aa=Qt(Ra),pd=ie({},Sr,{animationName:0,elapsedTime:0,pseudoElement:0}),Es=Qt(pd),md=ie({},Sr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),gd=Qt(md),yd=ie({},Sr,{data:0}),uu=Qt(yd),Pa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _d(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=vd[i])?!!a[i]:!1}function Qr(){return _d}var d=ie({},Kr,{key:function(i){if(i.key){var a=Pa[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Ia(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?yn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qr,charCode:function(i){return i.type==="keypress"?Ia(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ia(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),v=Qt(d),T=ie({},Ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A=Qt(T),W=ie({},Kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qr}),Q=Qt(W),ae=ie({},Sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),et=Qt(ae),Ot=ie({},Ao,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Be=Qt(Ot),Ft=[9,13,27,32],Pt=c&&"CompositionEvent"in window,tr=null;c&&"documentMode"in document&&(tr=document.documentMode);var $n=c&&"TextEvent"in window&&!tr,Po=c&&(!Pt||tr&&8<tr&&11>=tr),ba=" ",W_=!1;function H_(i,a){switch(i){case"keyup":return Ft.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function q_(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ka=!1;function P2(i,a){switch(i){case"compositionend":return q_(a);case"keypress":return a.which!==32?null:(W_=!0,ba);case"textInput":return i=a.data,i===ba&&W_?null:i;default:return null}}function b2(i,a){if(ka)return i==="compositionend"||!Pt&&H_(i,a)?(i=ou(),Cn=Ta=Un=null,ka=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Po&&a.locale!=="ko"?null:a.data;default:return null}}var k2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function G_(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!k2[i.type]:a==="textarea"}function K_(i,a,u,f){Wr(f),a=Cd(a,"onChange"),0<a.length&&(u=new Ca("onChange","change",null,u,f),i.push({event:u,listeners:a}))}var cu=null,du=null;function N2(i){h0(i,0)}function wd(i){var a=Ma(i);if(Js(a))return i}function D2(i,a){if(i==="change")return a}var Q_=!1;if(c){var Sp;if(c){var Rp="oninput"in document;if(!Rp){var Y_=document.createElement("div");Y_.setAttribute("oninput","return;"),Rp=typeof Y_.oninput=="function"}Sp=Rp}else Sp=!1;Q_=Sp&&(!document.documentMode||9<document.documentMode)}function X_(){cu&&(cu.detachEvent("onpropertychange",J_),du=cu=null)}function J_(i){if(i.propertyName==="value"&&wd(du)){var a=[];K_(a,du,i,ca(i)),Xl(N2,a)}}function O2(i,a,u){i==="focusin"?(X_(),cu=a,du=u,cu.attachEvent("onpropertychange",J_)):i==="focusout"&&X_()}function L2(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return wd(du)}function M2(i,a){if(i==="click")return wd(a)}function j2(i,a){if(i==="input"||i==="change")return wd(a)}function V2(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Rr=typeof Object.is=="function"?Object.is:V2;function hu(i,a){if(Rr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),f=Object.keys(a);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var m=u[f];if(!h.call(a,m)||!Rr(i[m],a[m]))return!1}return!0}function Z_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function e0(i,a){var u=Z_(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=a&&f>=a)return{node:u,offset:a-i};i=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Z_(u)}}function t0(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?t0(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function n0(){for(var i=window,a=yr();a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=yr(i.document)}return a}function Ap(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function F2(i){var a=n0(),u=i.focusedElem,f=i.selectionRange;if(a!==u&&u&&u.ownerDocument&&t0(u.ownerDocument.documentElement,u)){if(f!==null&&Ap(u)){if(a=f.start,i=f.end,i===void 0&&(i=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(i,u.value.length);else if(i=(a=u.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var m=u.textContent.length,_=Math.min(f.start,m);f=f.end===void 0?_:Math.min(f.end,m),!i.extend&&_>f&&(m=f,f=_,_=m),m=e0(u,_);var C=e0(u,f);m&&C&&(i.rangeCount!==1||i.anchorNode!==m.node||i.anchorOffset!==m.offset||i.focusNode!==C.node||i.focusOffset!==C.offset)&&(a=a.createRange(),a.setStart(m.node,m.offset),i.removeAllRanges(),_>f?(i.addRange(a),i.extend(C.node,C.offset)):(a.setEnd(C.node,C.offset),i.addRange(a)))}}for(a=[],i=u;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)i=a[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var U2=c&&"documentMode"in document&&11>=document.documentMode,Na=null,Pp=null,fu=null,bp=!1;function r0(i,a,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;bp||Na==null||Na!==yr(f)||(f=Na,"selectionStart"in f&&Ap(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),fu&&hu(fu,f)||(fu=f,f=Cd(Pp,"onSelect"),0<f.length&&(a=new Ca("onSelect","select",null,a,u),i.push({event:a,listeners:f}),a.target=Na)))}function Ed(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var Da={animationend:Ed("Animation","AnimationEnd"),animationiteration:Ed("Animation","AnimationIteration"),animationstart:Ed("Animation","AnimationStart"),transitionend:Ed("Transition","TransitionEnd")},kp={},s0={};c&&(s0=document.createElement("div").style,"AnimationEvent"in window||(delete Da.animationend.animation,delete Da.animationiteration.animation,delete Da.animationstart.animation),"TransitionEvent"in window||delete Da.transitionend.transition);function Td(i){if(kp[i])return kp[i];if(!Da[i])return i;var a=Da[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in s0)return kp[i]=a[u];return i}var i0=Td("animationend"),o0=Td("animationiteration"),a0=Td("animationstart"),l0=Td("transitionend"),u0=new Map,c0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mi(i,a){u0.set(i,a),o(a,[i])}for(var Np=0;Np<c0.length;Np++){var Dp=c0[Np],$2=Dp.toLowerCase(),B2=Dp[0].toUpperCase()+Dp.slice(1);mi($2,"on"+B2)}mi(i0,"onAnimationEnd"),mi(o0,"onAnimationIteration"),mi(a0,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(l0,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),z2=new Set("cancel close invalid load scroll toggle".split(" ").concat(pu));function d0(i,a,u){var f=i.type||"unknown-event";i.currentTarget=u,Jc(f,a,void 0,i),i.currentTarget=null}function h0(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],m=f.event;f=f.listeners;e:{var _=void 0;if(a)for(var C=f.length-1;0<=C;C--){var O=f[C],F=O.instance,K=O.currentTarget;if(O=O.listener,F!==_&&m.isPropagationStopped())break e;d0(m,O,K),_=F}else for(C=0;C<f.length;C++){if(O=f[C],F=O.instance,K=O.currentTarget,O=O.listener,F!==_&&m.isPropagationStopped())break e;d0(m,O,K),_=F}}}if(_r)throw i=Jl,_r=!1,Jl=null,i}function at(i,a){var u=a[$p];u===void 0&&(u=a[$p]=new Set);var f=i+"__bubble";u.has(f)||(f0(a,i,2,!1),u.add(f))}function Op(i,a,u){var f=0;a&&(f|=4),f0(u,i,f,a)}var Id="_reactListening"+Math.random().toString(36).slice(2);function mu(i){if(!i[Id]){i[Id]=!0,r.forEach(function(u){u!=="selectionchange"&&(z2.has(u)||Op(u,!1,i),Op(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Id]||(a[Id]=!0,Op("selectionchange",!1,a))}}function f0(i,a,u,f){switch(iu(a)){case 1:var m=pt;break;case 4:m=Cp;break;default:m=su}u=m.bind(null,a,u,i),m=void 0,!fa||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),f?m!==void 0?i.addEventListener(a,u,{capture:!0,passive:m}):i.addEventListener(a,u,!0):m!==void 0?i.addEventListener(a,u,{passive:m}):i.addEventListener(a,u,!1)}function Lp(i,a,u,f,m){var _=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var C=f.tag;if(C===3||C===4){var O=f.stateNode.containerInfo;if(O===m||O.nodeType===8&&O.parentNode===m)break;if(C===4)for(C=f.return;C!==null;){var F=C.tag;if((F===3||F===4)&&(F=C.stateNode.containerInfo,F===m||F.nodeType===8&&F.parentNode===m))return;C=C.return}for(;O!==null;){if(C=bo(O),C===null)return;if(F=C.tag,F===5||F===6){f=_=C;continue e}O=O.parentNode}}f=f.return}Xl(function(){var K=_,ne=ca(u),re=[];e:{var te=u0.get(i);if(te!==void 0){var de=Ca,ge=i;switch(i){case"keypress":if(Ia(u)===0)break e;case"keydown":case"keyup":de=v;break;case"focusin":ge="focus",de=Aa;break;case"focusout":ge="blur",de=Aa;break;case"beforeblur":case"afterblur":de=Aa;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Sa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=fd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=Q;break;case i0:case o0:case a0:de=Es;break;case l0:de=et;break;case"scroll":de=xp;break;case"wheel":de=Be;break;case"copy":case"cut":case"paste":de=gd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=A}var ye=(a&4)!==0,St=!ye&&i==="scroll",H=ye?te!==null?te+"Capture":null:te;ye=[];for(var $=K,G;$!==null;){G=$;var oe=G.stateNode;if(G.tag===5&&oe!==null&&(G=oe,H!==null&&(oe=xt($,H),oe!=null&&ye.push(gu($,oe,G)))),St)break;$=$.return}0<ye.length&&(te=new de(te,ge,null,u,ne),re.push({event:te,listeners:ye}))}}if((a&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",de=i==="mouseout"||i==="pointerout",te&&u!==yo&&(ge=u.relatedTarget||u.fromElement)&&(bo(ge)||ge[Ts]))break e;if((de||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,de?(ge=u.relatedTarget||u.toElement,de=K,ge=ge?bo(ge):null,ge!==null&&(St=wr(ge),ge!==St||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(de=null,ge=K),de!==ge)){if(ye=Sa,oe="onMouseLeave",H="onMouseEnter",$="mouse",(i==="pointerout"||i==="pointerover")&&(ye=A,oe="onPointerLeave",H="onPointerEnter",$="pointer"),St=de==null?te:Ma(de),G=ge==null?te:Ma(ge),te=new ye(oe,$+"leave",de,u,ne),te.target=St,te.relatedTarget=G,oe=null,bo(ne)===K&&(ye=new ye(H,$+"enter",ge,u,ne),ye.target=G,ye.relatedTarget=St,oe=ye),St=oe,de&&ge)t:{for(ye=de,H=ge,$=0,G=ye;G;G=Oa(G))$++;for(G=0,oe=H;oe;oe=Oa(oe))G++;for(;0<$-G;)ye=Oa(ye),$--;for(;0<G-$;)H=Oa(H),G--;for(;$--;){if(ye===H||H!==null&&ye===H.alternate)break t;ye=Oa(ye),H=Oa(H)}ye=null}else ye=null;de!==null&&p0(re,te,de,ye,!1),ge!==null&&St!==null&&p0(re,St,ge,ye,!0)}}e:{if(te=K?Ma(K):window,de=te.nodeName&&te.nodeName.toLowerCase(),de==="select"||de==="input"&&te.type==="file")var ve=D2;else if(G_(te))if(Q_)ve=j2;else{ve=L2;var we=O2}else(de=te.nodeName)&&de.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(ve=M2);if(ve&&(ve=ve(i,K))){K_(re,ve,u,ne);break e}we&&we(i,te,K),i==="focusout"&&(we=te._wrapperState)&&we.controlled&&te.type==="number"&&ni(te,"number",te.value)}switch(we=K?Ma(K):window,i){case"focusin":(G_(we)||we.contentEditable==="true")&&(Na=we,Pp=K,fu=null);break;case"focusout":fu=Pp=Na=null;break;case"mousedown":bp=!0;break;case"contextmenu":case"mouseup":case"dragend":bp=!1,r0(re,u,ne);break;case"selectionchange":if(U2)break;case"keydown":case"keyup":r0(re,u,ne)}var Ee;if(Pt)e:{switch(i){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else ka?H_(i,u)&&(Pe="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Pe="onCompositionStart");Pe&&(Po&&u.locale!=="ko"&&(ka||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&ka&&(Ee=ou()):(Un=ne,Ta="value"in Un?Un.value:Un.textContent,ka=!0)),we=Cd(K,Pe),0<we.length&&(Pe=new uu(Pe,i,null,u,ne),re.push({event:Pe,listeners:we}),Ee?Pe.data=Ee:(Ee=q_(u),Ee!==null&&(Pe.data=Ee)))),(Ee=$n?P2(i,u):b2(i,u))&&(K=Cd(K,"onBeforeInput"),0<K.length&&(ne=new uu("onBeforeInput","beforeinput",null,u,ne),re.push({event:ne,listeners:K}),ne.data=Ee))}h0(re,a)})}function gu(i,a,u){return{instance:i,listener:a,currentTarget:u}}function Cd(i,a){for(var u=a+"Capture",f=[];i!==null;){var m=i,_=m.stateNode;m.tag===5&&_!==null&&(m=_,_=xt(i,u),_!=null&&f.unshift(gu(i,_,m)),_=xt(i,a),_!=null&&f.push(gu(i,_,m))),i=i.return}return f}function Oa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function p0(i,a,u,f,m){for(var _=a._reactName,C=[];u!==null&&u!==f;){var O=u,F=O.alternate,K=O.stateNode;if(F!==null&&F===f)break;O.tag===5&&K!==null&&(O=K,m?(F=xt(u,_),F!=null&&C.unshift(gu(u,F,O))):m||(F=xt(u,_),F!=null&&C.push(gu(u,F,O)))),u=u.return}C.length!==0&&i.push({event:a,listeners:C})}var W2=/\r\n?/g,H2=/\u0000|\uFFFD/g;function m0(i){return(typeof i=="string"?i:""+i).replace(W2,`
`).replace(H2,"")}function xd(i,a,u){if(a=m0(a),m0(i)!==a&&u)throw Error(t(425))}function Sd(){}var Mp=null,jp=null;function Vp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Fp=typeof setTimeout=="function"?setTimeout:void 0,q2=typeof clearTimeout=="function"?clearTimeout:void 0,g0=typeof Promise=="function"?Promise:void 0,G2=typeof queueMicrotask=="function"?queueMicrotask:typeof g0<"u"?function(i){return g0.resolve(null).then(i).catch(K2)}:Fp;function K2(i){setTimeout(function(){throw i})}function Up(i,a){var u=a,f=0;do{var m=u.nextSibling;if(i.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(f===0){i.removeChild(m),xr(a);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=m}while(u);xr(a)}function gi(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function y0(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}var La=Math.random().toString(36).slice(2),Yr="__reactFiber$"+La,yu="__reactProps$"+La,Ts="__reactContainer$"+La,$p="__reactEvents$"+La,Q2="__reactListeners$"+La,Y2="__reactHandles$"+La;function bo(i){var a=i[Yr];if(a)return a;for(var u=i.parentNode;u;){if(a=u[Ts]||u[Yr]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=y0(i);i!==null;){if(u=i[Yr])return u;i=y0(i)}return a}i=u,u=i.parentNode}return null}function vu(i){return i=i[Yr]||i[Ts],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Ma(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Rd(i){return i[yu]||null}var Bp=[],ja=-1;function yi(i){return{current:i}}function lt(i){0>ja||(i.current=Bp[ja],Bp[ja]=null,ja--)}function it(i,a){ja++,Bp[ja]=i.current,i.current=a}var vi={},tn=yi(vi),xn=yi(!1),ko=vi;function Va(i,a){var u=i.type.contextTypes;if(!u)return vi;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var m={},_;for(_ in u)m[_]=a[_];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=m),m}function Sn(i){return i=i.childContextTypes,i!=null}function Ad(){lt(xn),lt(tn)}function v0(i,a,u){if(tn.current!==vi)throw Error(t(168));it(tn,a),it(xn,u)}function _0(i,a,u){var f=i.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var m in f)if(!(m in a))throw Error(t(108,je(i)||"Unknown",m));return ie({},u,f)}function Pd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||vi,ko=tn.current,it(tn,i),it(xn,xn.current),!0}function w0(i,a,u){var f=i.stateNode;if(!f)throw Error(t(169));u?(i=_0(i,a,ko),f.__reactInternalMemoizedMergedChildContext=i,lt(xn),lt(tn),it(tn,i)):lt(xn),it(xn,u)}var Is=null,bd=!1,zp=!1;function E0(i){Is===null?Is=[i]:Is.push(i)}function X2(i){bd=!0,E0(i)}function _i(){if(!zp&&Is!==null){zp=!0;var i=0,a=Fe;try{var u=Is;for(Fe=1;i<u.length;i++){var f=u[i];do f=f(!0);while(f!==null)}Is=null,bd=!1}catch(m){throw Is!==null&&(Is=Is.slice(i+1)),ya(To,_i),m}finally{Fe=a,zp=!1}}return null}var Fa=[],Ua=0,kd=null,Nd=0,nr=[],rr=0,No=null,Cs=1,xs="";function Do(i,a){Fa[Ua++]=Nd,Fa[Ua++]=kd,kd=i,Nd=a}function T0(i,a,u){nr[rr++]=Cs,nr[rr++]=xs,nr[rr++]=No,No=i;var f=Cs;i=xs;var m=32-gn(f)-1;f&=~(1<<m),u+=1;var _=32-gn(a)+m;if(30<_){var C=m-m%5;_=(f&(1<<C)-1).toString(32),f>>=C,m-=C,Cs=1<<32-gn(a)+m|u<<m|f,xs=_+i}else Cs=1<<_|u<<m|f,xs=i}function Wp(i){i.return!==null&&(Do(i,1),T0(i,1,0))}function Hp(i){for(;i===kd;)kd=Fa[--Ua],Fa[Ua]=null,Nd=Fa[--Ua],Fa[Ua]=null;for(;i===No;)No=nr[--rr],nr[rr]=null,xs=nr[--rr],nr[rr]=null,Cs=nr[--rr],nr[rr]=null}var Bn=null,zn=null,mt=!1,Ar=null;function I0(i,a){var u=ar(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=i,a=i.deletions,a===null?(i.deletions=[u],i.flags|=16):a.push(u)}function C0(i,a){switch(i.tag){case 5:var u=i.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,Bn=i,zn=gi(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,Bn=i,zn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=No!==null?{id:Cs,overflow:xs}:null,i.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=ar(18,null,null,0),u.stateNode=a,u.return=i,i.child=u,Bn=i,zn=null,!0):!1;default:return!1}}function qp(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Gp(i){if(mt){var a=zn;if(a){var u=a;if(!C0(i,a)){if(qp(i))throw Error(t(418));a=gi(u.nextSibling);var f=Bn;a&&C0(i,a)?I0(f,u):(i.flags=i.flags&-4097|2,mt=!1,Bn=i)}}else{if(qp(i))throw Error(t(418));i.flags=i.flags&-4097|2,mt=!1,Bn=i}}}function x0(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Bn=i}function Dd(i){if(i!==Bn)return!1;if(!mt)return x0(i),mt=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!Vp(i.type,i.memoizedProps)),a&&(a=zn)){if(qp(i))throw S0(),Error(t(418));for(;a;)I0(i,a),a=gi(a.nextSibling)}if(x0(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(a===0){zn=gi(i.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}i=i.nextSibling}zn=null}}else zn=Bn?gi(i.stateNode.nextSibling):null;return!0}function S0(){for(var i=zn;i;)i=gi(i.nextSibling)}function $a(){zn=Bn=null,mt=!1}function Kp(i){Ar===null?Ar=[i]:Ar.push(i)}var J2=q.ReactCurrentBatchConfig;function _u(i,a,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,i));var m=f,_=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===_?a.ref:(a=function(C){var O=m.refs;C===null?delete O[_]:O[_]=C},a._stringRef=_,a)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function Od(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function R0(i){var a=i._init;return a(i._payload)}function A0(i){function a(H,$){if(i){var G=H.deletions;G===null?(H.deletions=[$],H.flags|=16):G.push($)}}function u(H,$){if(!i)return null;for(;$!==null;)a(H,$),$=$.sibling;return null}function f(H,$){for(H=new Map;$!==null;)$.key!==null?H.set($.key,$):H.set($.index,$),$=$.sibling;return H}function m(H,$){return H=Ri(H,$),H.index=0,H.sibling=null,H}function _(H,$,G){return H.index=G,i?(G=H.alternate,G!==null?(G=G.index,G<$?(H.flags|=2,$):G):(H.flags|=2,$)):(H.flags|=1048576,$)}function C(H){return i&&H.alternate===null&&(H.flags|=2),H}function O(H,$,G,oe){return $===null||$.tag!==6?($=Fm(G,H.mode,oe),$.return=H,$):($=m($,G),$.return=H,$)}function F(H,$,G,oe){var ve=G.type;return ve===N?ne(H,$,G.props.children,oe,G.key):$!==null&&($.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Re&&R0(ve)===$.type)?(oe=m($,G.props),oe.ref=_u(H,$,G),oe.return=H,oe):(oe=sh(G.type,G.key,G.props,null,H.mode,oe),oe.ref=_u(H,$,G),oe.return=H,oe)}function K(H,$,G,oe){return $===null||$.tag!==4||$.stateNode.containerInfo!==G.containerInfo||$.stateNode.implementation!==G.implementation?($=Um(G,H.mode,oe),$.return=H,$):($=m($,G.children||[]),$.return=H,$)}function ne(H,$,G,oe,ve){return $===null||$.tag!==7?($=$o(G,H.mode,oe,ve),$.return=H,$):($=m($,G),$.return=H,$)}function re(H,$,G){if(typeof $=="string"&&$!==""||typeof $=="number")return $=Fm(""+$,H.mode,G),$.return=H,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case X:return G=sh($.type,$.key,$.props,null,H.mode,G),G.ref=_u(H,null,$),G.return=H,G;case Z:return $=Um($,H.mode,G),$.return=H,$;case Re:var oe=$._init;return re(H,oe($._payload),G)}if(Gt($)||ue($))return $=$o($,H.mode,G,null),$.return=H,$;Od(H,$)}return null}function te(H,$,G,oe){var ve=$!==null?$.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return ve!==null?null:O(H,$,""+G,oe);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case X:return G.key===ve?F(H,$,G,oe):null;case Z:return G.key===ve?K(H,$,G,oe):null;case Re:return ve=G._init,te(H,$,ve(G._payload),oe)}if(Gt(G)||ue(G))return ve!==null?null:ne(H,$,G,oe,null);Od(H,G)}return null}function de(H,$,G,oe,ve){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return H=H.get(G)||null,O($,H,""+oe,ve);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case X:return H=H.get(oe.key===null?G:oe.key)||null,F($,H,oe,ve);case Z:return H=H.get(oe.key===null?G:oe.key)||null,K($,H,oe,ve);case Re:var we=oe._init;return de(H,$,G,we(oe._payload),ve)}if(Gt(oe)||ue(oe))return H=H.get(G)||null,ne($,H,oe,ve,null);Od($,oe)}return null}function ge(H,$,G,oe){for(var ve=null,we=null,Ee=$,Pe=$=0,Bt=null;Ee!==null&&Pe<G.length;Pe++){Ee.index>Pe?(Bt=Ee,Ee=null):Bt=Ee.sibling;var Qe=te(H,Ee,G[Pe],oe);if(Qe===null){Ee===null&&(Ee=Bt);break}i&&Ee&&Qe.alternate===null&&a(H,Ee),$=_(Qe,$,Pe),we===null?ve=Qe:we.sibling=Qe,we=Qe,Ee=Bt}if(Pe===G.length)return u(H,Ee),mt&&Do(H,Pe),ve;if(Ee===null){for(;Pe<G.length;Pe++)Ee=re(H,G[Pe],oe),Ee!==null&&($=_(Ee,$,Pe),we===null?ve=Ee:we.sibling=Ee,we=Ee);return mt&&Do(H,Pe),ve}for(Ee=f(H,Ee);Pe<G.length;Pe++)Bt=de(Ee,H,Pe,G[Pe],oe),Bt!==null&&(i&&Bt.alternate!==null&&Ee.delete(Bt.key===null?Pe:Bt.key),$=_(Bt,$,Pe),we===null?ve=Bt:we.sibling=Bt,we=Bt);return i&&Ee.forEach(function(Ai){return a(H,Ai)}),mt&&Do(H,Pe),ve}function ye(H,$,G,oe){var ve=ue(G);if(typeof ve!="function")throw Error(t(150));if(G=ve.call(G),G==null)throw Error(t(151));for(var we=ve=null,Ee=$,Pe=$=0,Bt=null,Qe=G.next();Ee!==null&&!Qe.done;Pe++,Qe=G.next()){Ee.index>Pe?(Bt=Ee,Ee=null):Bt=Ee.sibling;var Ai=te(H,Ee,Qe.value,oe);if(Ai===null){Ee===null&&(Ee=Bt);break}i&&Ee&&Ai.alternate===null&&a(H,Ee),$=_(Ai,$,Pe),we===null?ve=Ai:we.sibling=Ai,we=Ai,Ee=Bt}if(Qe.done)return u(H,Ee),mt&&Do(H,Pe),ve;if(Ee===null){for(;!Qe.done;Pe++,Qe=G.next())Qe=re(H,Qe.value,oe),Qe!==null&&($=_(Qe,$,Pe),we===null?ve=Qe:we.sibling=Qe,we=Qe);return mt&&Do(H,Pe),ve}for(Ee=f(H,Ee);!Qe.done;Pe++,Qe=G.next())Qe=de(Ee,H,Pe,Qe.value,oe),Qe!==null&&(i&&Qe.alternate!==null&&Ee.delete(Qe.key===null?Pe:Qe.key),$=_(Qe,$,Pe),we===null?ve=Qe:we.sibling=Qe,we=Qe);return i&&Ee.forEach(function(kP){return a(H,kP)}),mt&&Do(H,Pe),ve}function St(H,$,G,oe){if(typeof G=="object"&&G!==null&&G.type===N&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case X:e:{for(var ve=G.key,we=$;we!==null;){if(we.key===ve){if(ve=G.type,ve===N){if(we.tag===7){u(H,we.sibling),$=m(we,G.props.children),$.return=H,H=$;break e}}else if(we.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Re&&R0(ve)===we.type){u(H,we.sibling),$=m(we,G.props),$.ref=_u(H,we,G),$.return=H,H=$;break e}u(H,we);break}else a(H,we);we=we.sibling}G.type===N?($=$o(G.props.children,H.mode,oe,G.key),$.return=H,H=$):(oe=sh(G.type,G.key,G.props,null,H.mode,oe),oe.ref=_u(H,$,G),oe.return=H,H=oe)}return C(H);case Z:e:{for(we=G.key;$!==null;){if($.key===we)if($.tag===4&&$.stateNode.containerInfo===G.containerInfo&&$.stateNode.implementation===G.implementation){u(H,$.sibling),$=m($,G.children||[]),$.return=H,H=$;break e}else{u(H,$);break}else a(H,$);$=$.sibling}$=Um(G,H.mode,oe),$.return=H,H=$}return C(H);case Re:return we=G._init,St(H,$,we(G._payload),oe)}if(Gt(G))return ge(H,$,G,oe);if(ue(G))return ye(H,$,G,oe);Od(H,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,$!==null&&$.tag===6?(u(H,$.sibling),$=m($,G),$.return=H,H=$):(u(H,$),$=Fm(G,H.mode,oe),$.return=H,H=$),C(H)):u(H,$)}return St}var Ba=A0(!0),P0=A0(!1),Ld=yi(null),Md=null,za=null,Qp=null;function Yp(){Qp=za=Md=null}function Xp(i){var a=Ld.current;lt(Ld),i._currentValue=a}function Jp(i,a,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===u)break;i=i.return}}function Wa(i,a){Md=i,Qp=za=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(Rn=!0),i.firstContext=null)}function sr(i){var a=i._currentValue;if(Qp!==i)if(i={context:i,memoizedValue:a,next:null},za===null){if(Md===null)throw Error(t(308));za=i,Md.dependencies={lanes:0,firstContext:i}}else za=za.next=i;return a}var Oo=null;function Zp(i){Oo===null?Oo=[i]:Oo.push(i)}function b0(i,a,u,f){var m=a.interleaved;return m===null?(u.next=u,Zp(a)):(u.next=m.next,m.next=u),a.interleaved=u,Ss(i,f)}function Ss(i,a){i.lanes|=a;var u=i.alternate;for(u!==null&&(u.lanes|=a),u=i,i=i.return;i!==null;)i.childLanes|=a,u=i.alternate,u!==null&&(u.childLanes|=a),u=i,i=i.return;return u.tag===3?u.stateNode:null}var wi=!1;function em(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function k0(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Rs(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function Ei(i,a,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Ge&2)!==0){var m=f.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),f.pending=a,Ss(i,u)}return m=f.interleaved,m===null?(a.next=a,Zp(f)):(a.next=m.next,m.next=a),f.interleaved=a,Ss(i,u)}function jd(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var f=a.lanes;f&=i.pendingLanes,u|=f,a.lanes=u,ci(i,u)}}function N0(i,a){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var m=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var C={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};_===null?m=_=C:_=_.next=C,u=u.next}while(u!==null);_===null?m=_=a:_=_.next=a}else m=_=a;u={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:_,shared:f.shared,effects:f.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}function Vd(i,a,u,f){var m=i.updateQueue;wi=!1;var _=m.firstBaseUpdate,C=m.lastBaseUpdate,O=m.shared.pending;if(O!==null){m.shared.pending=null;var F=O,K=F.next;F.next=null,C===null?_=K:C.next=K,C=F;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,O=ne.lastBaseUpdate,O!==C&&(O===null?ne.firstBaseUpdate=K:O.next=K,ne.lastBaseUpdate=F))}if(_!==null){var re=m.baseState;C=0,ne=K=F=null,O=_;do{var te=O.lane,de=O.eventTime;if((f&te)===te){ne!==null&&(ne=ne.next={eventTime:de,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var ge=i,ye=O;switch(te=a,de=u,ye.tag){case 1:if(ge=ye.payload,typeof ge=="function"){re=ge.call(de,re,te);break e}re=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=ye.payload,te=typeof ge=="function"?ge.call(de,re,te):ge,te==null)break e;re=ie({},re,te);break e;case 2:wi=!0}}O.callback!==null&&O.lane!==0&&(i.flags|=64,te=m.effects,te===null?m.effects=[O]:te.push(O))}else de={eventTime:de,lane:te,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ne===null?(K=ne=de,F=re):ne=ne.next=de,C|=te;if(O=O.next,O===null){if(O=m.shared.pending,O===null)break;te=O,O=te.next,te.next=null,m.lastBaseUpdate=te,m.shared.pending=null}}while(!0);if(ne===null&&(F=re),m.baseState=F,m.firstBaseUpdate=K,m.lastBaseUpdate=ne,a=m.shared.interleaved,a!==null){m=a;do C|=m.lane,m=m.next;while(m!==a)}else _===null&&(m.shared.lanes=0);jo|=C,i.lanes=C,i.memoizedState=re}}function D0(i,a,u){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var f=i[a],m=f.callback;if(m!==null){if(f.callback=null,f=u,typeof m!="function")throw Error(t(191,m));m.call(f)}}}var wu={},Xr=yi(wu),Eu=yi(wu),Tu=yi(wu);function Lo(i){if(i===wu)throw Error(t(174));return i}function tm(i,a){switch(it(Tu,a),it(Eu,i),it(Xr,wu),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:wt(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=wt(a,i)}lt(Xr),it(Xr,a)}function Ha(){lt(Xr),lt(Eu),lt(Tu)}function O0(i){Lo(Tu.current);var a=Lo(Xr.current),u=wt(a,i.type);a!==u&&(it(Eu,i),it(Xr,u))}function nm(i){Eu.current===i&&(lt(Xr),lt(Eu))}var yt=yi(0);function Fd(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var rm=[];function sm(){for(var i=0;i<rm.length;i++)rm[i]._workInProgressVersionPrimary=null;rm.length=0}var Ud=q.ReactCurrentDispatcher,im=q.ReactCurrentBatchConfig,Mo=0,vt=null,Lt=null,Ut=null,$d=!1,Iu=!1,Cu=0,Z2=0;function nn(){throw Error(t(321))}function om(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!Rr(i[u],a[u]))return!1;return!0}function am(i,a,u,f,m,_){if(Mo=_,vt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Ud.current=i===null||i.memoizedState===null?rP:sP,i=u(f,m),Iu){_=0;do{if(Iu=!1,Cu=0,25<=_)throw Error(t(301));_+=1,Ut=Lt=null,a.updateQueue=null,Ud.current=iP,i=u(f,m)}while(Iu)}if(Ud.current=Wd,a=Lt!==null&&Lt.next!==null,Mo=0,Ut=Lt=vt=null,$d=!1,a)throw Error(t(300));return i}function lm(){var i=Cu!==0;return Cu=0,i}function Jr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?vt.memoizedState=Ut=i:Ut=Ut.next=i,Ut}function ir(){if(Lt===null){var i=vt.alternate;i=i!==null?i.memoizedState:null}else i=Lt.next;var a=Ut===null?vt.memoizedState:Ut.next;if(a!==null)Ut=a,Lt=i;else{if(i===null)throw Error(t(310));Lt=i,i={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},Ut===null?vt.memoizedState=Ut=i:Ut=Ut.next=i}return Ut}function xu(i,a){return typeof a=="function"?a(i):a}function um(i){var a=ir(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=Lt,m=f.baseQueue,_=u.pending;if(_!==null){if(m!==null){var C=m.next;m.next=_.next,_.next=C}f.baseQueue=m=_,u.pending=null}if(m!==null){_=m.next,f=f.baseState;var O=C=null,F=null,K=_;do{var ne=K.lane;if((Mo&ne)===ne)F!==null&&(F=F.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),f=K.hasEagerState?K.eagerState:i(f,K.action);else{var re={lane:ne,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};F===null?(O=F=re,C=f):F=F.next=re,vt.lanes|=ne,jo|=ne}K=K.next}while(K!==null&&K!==_);F===null?C=f:F.next=O,Rr(f,a.memoizedState)||(Rn=!0),a.memoizedState=f,a.baseState=C,a.baseQueue=F,u.lastRenderedState=f}if(i=u.interleaved,i!==null){m=i;do _=m.lane,vt.lanes|=_,jo|=_,m=m.next;while(m!==i)}else m===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function cm(i){var a=ir(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=u.dispatch,m=u.pending,_=a.memoizedState;if(m!==null){u.pending=null;var C=m=m.next;do _=i(_,C.action),C=C.next;while(C!==m);Rr(_,a.memoizedState)||(Rn=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),u.lastRenderedState=_}return[_,f]}function L0(){}function M0(i,a){var u=vt,f=ir(),m=a(),_=!Rr(f.memoizedState,m);if(_&&(f.memoizedState=m,Rn=!0),f=f.queue,dm(F0.bind(null,u,f,i),[i]),f.getSnapshot!==a||_||Ut!==null&&Ut.memoizedState.tag&1){if(u.flags|=2048,Su(9,V0.bind(null,u,f,m,a),void 0,null),$t===null)throw Error(t(349));(Mo&30)!==0||j0(u,a,m)}return m}function j0(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=vt.updateQueue,a===null?(a={lastEffect:null,stores:null},vt.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function V0(i,a,u,f){a.value=u,a.getSnapshot=f,U0(a)&&$0(i)}function F0(i,a,u){return u(function(){U0(a)&&$0(i)})}function U0(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!Rr(i,u)}catch{return!0}}function $0(i){var a=Ss(i,1);a!==null&&Nr(a,i,1,-1)}function B0(i){var a=Jr();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xu,lastRenderedState:i},a.queue=i,i=i.dispatch=nP.bind(null,vt,i),[a.memoizedState,i]}function Su(i,a,u,f){return i={tag:i,create:a,destroy:u,deps:f,next:null},a=vt.updateQueue,a===null?(a={lastEffect:null,stores:null},vt.updateQueue=a,a.lastEffect=i.next=i):(u=a.lastEffect,u===null?a.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,a.lastEffect=i)),i}function z0(){return ir().memoizedState}function Bd(i,a,u,f){var m=Jr();vt.flags|=i,m.memoizedState=Su(1|a,u,void 0,f===void 0?null:f)}function zd(i,a,u,f){var m=ir();f=f===void 0?null:f;var _=void 0;if(Lt!==null){var C=Lt.memoizedState;if(_=C.destroy,f!==null&&om(f,C.deps)){m.memoizedState=Su(a,u,_,f);return}}vt.flags|=i,m.memoizedState=Su(1|a,u,_,f)}function W0(i,a){return Bd(8390656,8,i,a)}function dm(i,a){return zd(2048,8,i,a)}function H0(i,a){return zd(4,2,i,a)}function q0(i,a){return zd(4,4,i,a)}function G0(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function K0(i,a,u){return u=u!=null?u.concat([i]):null,zd(4,4,G0.bind(null,a,i),u)}function hm(){}function Q0(i,a){var u=ir();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&om(a,f[1])?f[0]:(u.memoizedState=[i,a],i)}function Y0(i,a){var u=ir();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&om(a,f[1])?f[0]:(i=i(),u.memoizedState=[i,a],i)}function X0(i,a,u){return(Mo&21)===0?(i.baseState&&(i.baseState=!1,Rn=!0),i.memoizedState=u):(Rr(u,a)||(u=xo(),vt.lanes|=u,jo|=u,i.baseState=!0),a)}function eP(i,a){var u=Fe;Fe=u!==0&&4>u?u:4,i(!0);var f=im.transition;im.transition={};try{i(!1),a()}finally{Fe=u,im.transition=f}}function J0(){return ir().memoizedState}function tP(i,a,u){var f=xi(i);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},Z0(i))ew(a,u);else if(u=b0(i,a,u,f),u!==null){var m=_n();Nr(u,i,f,m),tw(u,a,f)}}function nP(i,a,u){var f=xi(i),m={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(Z0(i))ew(a,m);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var C=a.lastRenderedState,O=_(C,u);if(m.hasEagerState=!0,m.eagerState=O,Rr(O,C)){var F=a.interleaved;F===null?(m.next=m,Zp(a)):(m.next=F.next,F.next=m),a.interleaved=m;return}}catch{}finally{}u=b0(i,a,m,f),u!==null&&(m=_n(),Nr(u,i,f,m),tw(u,a,f))}}function Z0(i){var a=i.alternate;return i===vt||a!==null&&a===vt}function ew(i,a){Iu=$d=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function tw(i,a,u){if((u&4194240)!==0){var f=a.lanes;f&=i.pendingLanes,u|=f,a.lanes=u,ci(i,u)}}var Wd={readContext:sr,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useInsertionEffect:nn,useLayoutEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useMutableSource:nn,useSyncExternalStore:nn,useId:nn,unstable_isNewReconciler:!1},rP={readContext:sr,useCallback:function(i,a){return Jr().memoizedState=[i,a===void 0?null:a],i},useContext:sr,useEffect:W0,useImperativeHandle:function(i,a,u){return u=u!=null?u.concat([i]):null,Bd(4194308,4,G0.bind(null,a,i),u)},useLayoutEffect:function(i,a){return Bd(4194308,4,i,a)},useInsertionEffect:function(i,a){return Bd(4,2,i,a)},useMemo:function(i,a){var u=Jr();return a=a===void 0?null:a,i=i(),u.memoizedState=[i,a],i},useReducer:function(i,a,u){var f=Jr();return a=u!==void 0?u(a):a,f.memoizedState=f.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},f.queue=i,i=i.dispatch=tP.bind(null,vt,i),[f.memoizedState,i]},useRef:function(i){var a=Jr();return i={current:i},a.memoizedState=i},useState:B0,useDebugValue:hm,useDeferredValue:function(i){return Jr().memoizedState=i},useTransition:function(){var i=B0(!1),a=i[0];return i=eP.bind(null,i[1]),Jr().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,u){var f=vt,m=Jr();if(mt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),$t===null)throw Error(t(349));(Mo&30)!==0||j0(f,a,u)}m.memoizedState=u;var _={value:u,getSnapshot:a};return m.queue=_,W0(F0.bind(null,f,_,i),[i]),f.flags|=2048,Su(9,V0.bind(null,f,_,u,a),void 0,null),u},useId:function(){var i=Jr(),a=$t.identifierPrefix;if(mt){var u=xs,f=Cs;u=(f&~(1<<32-gn(f)-1)).toString(32)+u,a=":"+a+"R"+u,u=Cu++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=Z2++,a=":"+a+"r"+u.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},sP={readContext:sr,useCallback:Q0,useContext:sr,useEffect:dm,useImperativeHandle:K0,useInsertionEffect:H0,useLayoutEffect:q0,useMemo:Y0,useReducer:um,useRef:z0,useState:function(){return um(xu)},useDebugValue:hm,useDeferredValue:function(i){var a=ir();return X0(a,Lt.memoizedState,i)},useTransition:function(){var i=um(xu)[0],a=ir().memoizedState;return[i,a]},useMutableSource:L0,useSyncExternalStore:M0,useId:J0,unstable_isNewReconciler:!1},iP={readContext:sr,useCallback:Q0,useContext:sr,useEffect:dm,useImperativeHandle:K0,useInsertionEffect:H0,useLayoutEffect:q0,useMemo:Y0,useReducer:cm,useRef:z0,useState:function(){return cm(xu)},useDebugValue:hm,useDeferredValue:function(i){var a=ir();return Lt===null?a.memoizedState=i:X0(a,Lt.memoizedState,i)},useTransition:function(){var i=cm(xu)[0],a=ir().memoizedState;return[i,a]},useMutableSource:L0,useSyncExternalStore:M0,useId:J0,unstable_isNewReconciler:!1};function Pr(i,a){if(i&&i.defaultProps){a=ie({},a),i=i.defaultProps;for(var u in i)a[u]===void 0&&(a[u]=i[u]);return a}return a}function fm(i,a,u,f){a=i.memoizedState,u=u(f,a),u=u==null?a:ie({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Hd={isMounted:function(i){return(i=i._reactInternals)?wr(i)===i:!1},enqueueSetState:function(i,a,u){i=i._reactInternals;var f=_n(),m=xi(i),_=Rs(f,m);_.payload=a,u!=null&&(_.callback=u),a=Ei(i,_,m),a!==null&&(Nr(a,i,m,f),jd(a,i,m))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var f=_n(),m=xi(i),_=Rs(f,m);_.tag=1,_.payload=a,u!=null&&(_.callback=u),a=Ei(i,_,m),a!==null&&(Nr(a,i,m,f),jd(a,i,m))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=_n(),f=xi(i),m=Rs(u,f);m.tag=2,a!=null&&(m.callback=a),a=Ei(i,m,f),a!==null&&(Nr(a,i,f,u),jd(a,i,f))}};function nw(i,a,u,f,m,_,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,_,C):a.prototype&&a.prototype.isPureReactComponent?!hu(u,f)||!hu(m,_):!0}function rw(i,a,u){var f=!1,m=vi,_=a.contextType;return typeof _=="object"&&_!==null?_=sr(_):(m=Sn(a)?ko:tn.current,f=a.contextTypes,_=(f=f!=null)?Va(i,m):vi),a=new a(u,_),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Hd,i.stateNode=a,a._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=m,i.__reactInternalMemoizedMaskedChildContext=_),a}function sw(i,a,u,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,f),a.state!==i&&Hd.enqueueReplaceState(a,a.state,null)}function pm(i,a,u,f){var m=i.stateNode;m.props=u,m.state=i.memoizedState,m.refs={},em(i);var _=a.contextType;typeof _=="object"&&_!==null?m.context=sr(_):(_=Sn(a)?ko:tn.current,m.context=Va(i,_)),m.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(fm(i,a,_,u),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(a=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),a!==m.state&&Hd.enqueueReplaceState(m,m.state,null),Vd(i,u,m,f),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308)}function qa(i,a){try{var u="",f=a;do u+=Ae(f),f=f.return;while(f);var m=u}catch(_){m=`
Error generating stack: `+_.message+`
`+_.stack}return{value:i,source:a,stack:m,digest:null}}function mm(i,a,u){return{value:i,source:null,stack:u??null,digest:a??null}}function gm(i,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var oP=typeof WeakMap=="function"?WeakMap:Map;function iw(i,a,u){u=Rs(-1,u),u.tag=3,u.payload={element:null};var f=a.value;return u.callback=function(){Jd||(Jd=!0,km=f),gm(i,a)},u}function ow(i,a,u){u=Rs(-1,u),u.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var m=a.value;u.payload=function(){return f(m)},u.callback=function(){gm(i,a)}}var _=i.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(u.callback=function(){gm(i,a),typeof f!="function"&&(Ii===null?Ii=new Set([this]):Ii.add(this));var C=a.stack;this.componentDidCatch(a.value,{componentStack:C!==null?C:""})}),u}function aw(i,a,u){var f=i.pingCache;if(f===null){f=i.pingCache=new oP;var m=new Set;f.set(a,m)}else m=f.get(a),m===void 0&&(m=new Set,f.set(a,m));m.has(u)||(m.add(u),i=wP.bind(null,i,a,u),a.then(i,i))}function lw(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function uw(i,a,u,f,m){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=Rs(-1,1),a.tag=2,Ei(u,a,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=m,i)}var aP=q.ReactCurrentOwner,Rn=!1;function vn(i,a,u,f){a.child=i===null?P0(a,null,u,f):Ba(a,i.child,u,f)}function cw(i,a,u,f,m){u=u.render;var _=a.ref;return Wa(a,m),f=am(i,a,u,f,_,m),u=lm(),i!==null&&!Rn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~m,As(i,a,m)):(mt&&u&&Wp(a),a.flags|=1,vn(i,a,f,m),a.child)}function dw(i,a,u,f,m){if(i===null){var _=u.type;return typeof _=="function"&&!Vm(_)&&_.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=_,hw(i,a,_,f,m)):(i=sh(u.type,null,f,a,a.mode,m),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,(i.lanes&m)===0){var C=_.memoizedProps;if(u=u.compare,u=u!==null?u:hu,u(C,f)&&i.ref===a.ref)return As(i,a,m)}return a.flags|=1,i=Ri(_,f),i.ref=a.ref,i.return=a,a.child=i}function hw(i,a,u,f,m){if(i!==null){var _=i.memoizedProps;if(hu(_,f)&&i.ref===a.ref)if(Rn=!1,a.pendingProps=f=_,(i.lanes&m)!==0)(i.flags&131072)!==0&&(Rn=!0);else return a.lanes=i.lanes,As(i,a,m)}return ym(i,a,u,f,m)}function fw(i,a,u){var f=a.pendingProps,m=f.children,_=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(Ka,Wn),Wn|=u;else{if((u&1073741824)===0)return i=_!==null?_.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,it(Ka,Wn),Wn|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:u,it(Ka,Wn),Wn|=f}else _!==null?(f=_.baseLanes|u,a.memoizedState=null):f=u,it(Ka,Wn),Wn|=f;return vn(i,a,m,u),a.child}function pw(i,a){var u=a.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function ym(i,a,u,f,m){var _=Sn(u)?ko:tn.current;return _=Va(a,_),Wa(a,m),u=am(i,a,u,f,_,m),f=lm(),i!==null&&!Rn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~m,As(i,a,m)):(mt&&f&&Wp(a),a.flags|=1,vn(i,a,u,m),a.child)}function mw(i,a,u,f,m){if(Sn(u)){var _=!0;Pd(a)}else _=!1;if(Wa(a,m),a.stateNode===null)Gd(i,a),rw(a,u,f),pm(a,u,f,m),f=!0;else if(i===null){var C=a.stateNode,O=a.memoizedProps;C.props=O;var F=C.context,K=u.contextType;typeof K=="object"&&K!==null?K=sr(K):(K=Sn(u)?ko:tn.current,K=Va(a,K));var ne=u.getDerivedStateFromProps,re=typeof ne=="function"||typeof C.getSnapshotBeforeUpdate=="function";re||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(O!==f||F!==K)&&sw(a,C,f,K),wi=!1;var te=a.memoizedState;C.state=te,Vd(a,f,C,m),F=a.memoizedState,O!==f||te!==F||xn.current||wi?(typeof ne=="function"&&(fm(a,u,ne,f),F=a.memoizedState),(O=wi||nw(a,u,O,f,te,F,K))?(re||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(a.flags|=4194308)):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=F),C.props=f,C.state=F,C.context=K,f=O):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{C=a.stateNode,k0(i,a),O=a.memoizedProps,K=a.type===a.elementType?O:Pr(a.type,O),C.props=K,re=a.pendingProps,te=C.context,F=u.contextType,typeof F=="object"&&F!==null?F=sr(F):(F=Sn(u)?ko:tn.current,F=Va(a,F));var de=u.getDerivedStateFromProps;(ne=typeof de=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(O!==re||te!==F)&&sw(a,C,f,F),wi=!1,te=a.memoizedState,C.state=te,Vd(a,f,C,m);var ge=a.memoizedState;O!==re||te!==ge||xn.current||wi?(typeof de=="function"&&(fm(a,u,de,f),ge=a.memoizedState),(K=wi||nw(a,u,K,f,te,ge,F)||!1)?(ne||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(f,ge,F),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(f,ge,F)),typeof C.componentDidUpdate=="function"&&(a.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof C.componentDidUpdate!="function"||O===i.memoizedProps&&te===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&te===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=ge),C.props=f,C.state=ge,C.context=F,f=K):(typeof C.componentDidUpdate!="function"||O===i.memoizedProps&&te===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&te===i.memoizedState||(a.flags|=1024),f=!1)}return vm(i,a,u,f,_,m)}function vm(i,a,u,f,m,_){pw(i,a);var C=(a.flags&128)!==0;if(!f&&!C)return m&&w0(a,u,!1),As(i,a,_);f=a.stateNode,aP.current=a;var O=C&&typeof u.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,i!==null&&C?(a.child=Ba(a,i.child,null,_),a.child=Ba(a,null,O,_)):vn(i,a,O,_),a.memoizedState=f.state,m&&w0(a,u,!0),a.child}function gw(i){var a=i.stateNode;a.pendingContext?v0(i,a.pendingContext,a.pendingContext!==a.context):a.context&&v0(i,a.context,!1),tm(i,a.containerInfo)}function yw(i,a,u,f,m){return $a(),Kp(m),a.flags|=256,vn(i,a,u,f),a.child}var _m={dehydrated:null,treeContext:null,retryLane:0};function wm(i){return{baseLanes:i,cachePool:null,transitions:null}}function vw(i,a,u){var f=a.pendingProps,m=yt.current,_=!1,C=(a.flags&128)!==0,O;if((O=C)||(O=i!==null&&i.memoizedState===null?!1:(m&2)!==0),O?(_=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(m|=1),it(yt,m&1),i===null)return Gp(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(C=f.children,i=f.fallback,_?(f=a.mode,_=a.child,C={mode:"hidden",children:C},(f&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=C):_=ih(C,f,0,null),i=$o(i,f,u,null),_.return=a,i.return=a,_.sibling=i,a.child=_,a.child.memoizedState=wm(u),a.memoizedState=_m,i):Em(a,C));if(m=i.memoizedState,m!==null&&(O=m.dehydrated,O!==null))return lP(i,a,C,f,O,m,u);if(_){_=f.fallback,C=a.mode,m=i.child,O=m.sibling;var F={mode:"hidden",children:f.children};return(C&1)===0&&a.child!==m?(f=a.child,f.childLanes=0,f.pendingProps=F,a.deletions=null):(f=Ri(m,F),f.subtreeFlags=m.subtreeFlags&14680064),O!==null?_=Ri(O,_):(_=$o(_,C,u,null),_.flags|=2),_.return=a,f.return=a,f.sibling=_,a.child=f,f=_,_=a.child,C=i.child.memoizedState,C=C===null?wm(u):{baseLanes:C.baseLanes|u,cachePool:null,transitions:C.transitions},_.memoizedState=C,_.childLanes=i.childLanes&~u,a.memoizedState=_m,f}return _=i.child,i=_.sibling,f=Ri(_,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=u),f.return=a,f.sibling=null,i!==null&&(u=a.deletions,u===null?(a.deletions=[i],a.flags|=16):u.push(i)),a.child=f,a.memoizedState=null,f}function Em(i,a){return a=ih({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function qd(i,a,u,f){return f!==null&&Kp(f),Ba(a,i.child,null,u),i=Em(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function lP(i,a,u,f,m,_,C){if(u)return a.flags&256?(a.flags&=-257,f=mm(Error(t(422))),qd(i,a,C,f)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(_=f.fallback,m=a.mode,f=ih({mode:"visible",children:f.children},m,0,null),_=$o(_,m,C,null),_.flags|=2,f.return=a,_.return=a,f.sibling=_,a.child=f,(a.mode&1)!==0&&Ba(a,i.child,null,C),a.child.memoizedState=wm(C),a.memoizedState=_m,_);if((a.mode&1)===0)return qd(i,a,C,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var O=f.dgst;return f=O,_=Error(t(419)),f=mm(_,f,void 0),qd(i,a,C,f)}if(O=(C&i.childLanes)!==0,Rn||O){if(f=$t,f!==null){switch(C&-C){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(f.suspendedLanes|C))!==0?0:m,m!==0&&m!==_.retryLane&&(_.retryLane=m,Ss(i,m),Nr(f,i,m,-1))}return jm(),f=mm(Error(t(421))),qd(i,a,C,f)}return m.data==="$?"?(a.flags|=128,a.child=i.child,a=EP.bind(null,i),m._reactRetry=a,null):(i=_.treeContext,zn=gi(m.nextSibling),Bn=a,mt=!0,Ar=null,i!==null&&(nr[rr++]=Cs,nr[rr++]=xs,nr[rr++]=No,Cs=i.id,xs=i.overflow,No=a),a=Em(a,f.children),a.flags|=4096,a)}function _w(i,a,u){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),Jp(i.return,a,u)}function Tm(i,a,u,f,m){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:m}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=u,_.tailMode=m)}function ww(i,a,u){var f=a.pendingProps,m=f.revealOrder,_=f.tail;if(vn(i,a,f.children,u),f=yt.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&_w(i,u,a);else if(i.tag===19)_w(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(it(yt,f),(a.mode&1)===0)a.memoizedState=null;else switch(m){case"forwards":for(u=a.child,m=null;u!==null;)i=u.alternate,i!==null&&Fd(i)===null&&(m=u),u=u.sibling;u=m,u===null?(m=a.child,a.child=null):(m=u.sibling,u.sibling=null),Tm(a,!1,m,u,_);break;case"backwards":for(u=null,m=a.child,a.child=null;m!==null;){if(i=m.alternate,i!==null&&Fd(i)===null){a.child=m;break}i=m.sibling,m.sibling=u,u=m,m=i}Tm(a,!0,u,null,_);break;case"together":Tm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Gd(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function As(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),jo|=a.lanes,(u&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,u=Ri(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=Ri(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function uP(i,a,u){switch(a.tag){case 3:gw(a),$a();break;case 5:O0(a);break;case 1:Sn(a.type)&&Pd(a);break;case 4:tm(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,m=a.memoizedProps.value;it(Ld,f._currentValue),f._currentValue=m;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(it(yt,yt.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?vw(i,a,u):(it(yt,yt.current&1),i=As(i,a,u),i!==null?i.sibling:null);it(yt,yt.current&1);break;case 19:if(f=(u&a.childLanes)!==0,(i.flags&128)!==0){if(f)return ww(i,a,u);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),it(yt,yt.current),f)break;return null;case 22:case 23:return a.lanes=0,fw(i,a,u)}return As(i,a,u)}var Ew,Im,Tw,Iw;Ew=function(i,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Im=function(){},Tw=function(i,a,u,f){var m=i.memoizedProps;if(m!==f){i=a.stateNode,Lo(Xr.current);var _=null;switch(u){case"input":m=ps(i,m),f=ps(i,f),_=[];break;case"select":m=ie({},m,{value:void 0}),f=ie({},f,{value:void 0}),_=[];break;case"textarea":m=ri(i,m),f=ri(i,f),_=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=Sd)}Gl(u,f);var C;u=null;for(K in m)if(!f.hasOwnProperty(K)&&m.hasOwnProperty(K)&&m[K]!=null)if(K==="style"){var O=m[K];for(C in O)O.hasOwnProperty(C)&&(u||(u={}),u[C]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(s.hasOwnProperty(K)?_||(_=[]):(_=_||[]).push(K,null));for(K in f){var F=f[K];if(O=m!=null?m[K]:void 0,f.hasOwnProperty(K)&&F!==O&&(F!=null||O!=null))if(K==="style")if(O){for(C in O)!O.hasOwnProperty(C)||F&&F.hasOwnProperty(C)||(u||(u={}),u[C]="");for(C in F)F.hasOwnProperty(C)&&O[C]!==F[C]&&(u||(u={}),u[C]=F[C])}else u||(_||(_=[]),_.push(K,u)),u=F;else K==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,O=O?O.__html:void 0,F!=null&&O!==F&&(_=_||[]).push(K,F)):K==="children"?typeof F!="string"&&typeof F!="number"||(_=_||[]).push(K,""+F):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(s.hasOwnProperty(K)?(F!=null&&K==="onScroll"&&at("scroll",i),_||O===F||(_=[])):(_=_||[]).push(K,F))}u&&(_=_||[]).push("style",u);var K=_;(a.updateQueue=K)&&(a.flags|=4)}},Iw=function(i,a,u,f){u!==f&&(a.flags|=4)};function Ru(i,a){if(!mt)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function rn(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(a)for(var m=i.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=f,i.childLanes=u,a}function cP(i,a,u){var f=a.pendingProps;switch(Hp(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(a),null;case 1:return Sn(a.type)&&Ad(),rn(a),null;case 3:return f=a.stateNode,Ha(),lt(xn),lt(tn),sm(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(Dd(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ar!==null&&(Om(Ar),Ar=null))),Im(i,a),rn(a),null;case 5:nm(a);var m=Lo(Tu.current);if(u=a.type,i!==null&&a.stateNode!=null)Tw(i,a,u,f,m),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(t(166));return rn(a),null}if(i=Lo(Xr.current),Dd(a)){f=a.stateNode,u=a.type;var _=a.memoizedProps;switch(f[Yr]=a,f[yu]=_,i=(a.mode&1)!==0,u){case"dialog":at("cancel",f),at("close",f);break;case"iframe":case"object":case"embed":at("load",f);break;case"video":case"audio":for(m=0;m<pu.length;m++)at(pu[m],f);break;case"source":at("error",f);break;case"img":case"image":case"link":at("error",f),at("load",f);break;case"details":at("toggle",f);break;case"input":Zs(f,_),at("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},at("invalid",f);break;case"textarea":ms(f,_),at("invalid",f)}Gl(u,_),m=null;for(var C in _)if(_.hasOwnProperty(C)){var O=_[C];C==="children"?typeof O=="string"?f.textContent!==O&&(_.suppressHydrationWarning!==!0&&xd(f.textContent,O,i),m=["children",O]):typeof O=="number"&&f.textContent!==""+O&&(_.suppressHydrationWarning!==!0&&xd(f.textContent,O,i),m=["children",""+O]):s.hasOwnProperty(C)&&O!=null&&C==="onScroll"&&at("scroll",f)}switch(u){case"input":jn(f),ua(f,_,!0);break;case"textarea":jn(f),si(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=Sd)}f=m,a.updateQueue=f,f!==null&&(a.flags|=4)}else{C=m.nodeType===9?m:m.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=_t(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=C.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=C.createElement(u,{is:f.is}):(i=C.createElement(u),u==="select"&&(C=i,f.multiple?C.multiple=!0:f.size&&(C.size=f.size))):i=C.createElementNS(i,u),i[Yr]=a,i[yu]=f,Ew(i,a,!1,!1),a.stateNode=i;e:{switch(C=Kl(u,f),u){case"dialog":at("cancel",i),at("close",i),m=f;break;case"iframe":case"object":case"embed":at("load",i),m=f;break;case"video":case"audio":for(m=0;m<pu.length;m++)at(pu[m],i);m=f;break;case"source":at("error",i),m=f;break;case"img":case"image":case"link":at("error",i),at("load",i),m=f;break;case"details":at("toggle",i),m=f;break;case"input":Zs(i,f),m=ps(i,f),at("invalid",i);break;case"option":m=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},m=ie({},f,{value:void 0}),at("invalid",i);break;case"textarea":ms(i,f),m=ri(i,f),at("invalid",i);break;default:m=f}Gl(u,m),O=m;for(_ in O)if(O.hasOwnProperty(_)){var F=O[_];_==="style"?Hl(i,F):_==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&zl(i,F)):_==="children"?typeof F=="string"?(u!=="textarea"||F!=="")&&ii(i,F):typeof F=="number"&&ii(i,""+F):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?F!=null&&_==="onScroll"&&at("scroll",i):F!=null&&B(i,_,F,C))}switch(u){case"input":jn(i),ua(i,f,!1);break;case"textarea":jn(i),si(i);break;case"option":f.value!=null&&i.setAttribute("value",""+Oe(f.value));break;case"select":i.multiple=!!f.multiple,_=f.value,_!=null?Tn(i,!!f.multiple,_,!1):f.defaultValue!=null&&Tn(i,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(i.onclick=Sd)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return rn(a),null;case 6:if(i&&a.stateNode!=null)Iw(i,a,i.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(t(166));if(u=Lo(Tu.current),Lo(Xr.current),Dd(a)){if(f=a.stateNode,u=a.memoizedProps,f[Yr]=a,(_=f.nodeValue!==u)&&(i=Bn,i!==null))switch(i.tag){case 3:xd(f.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&xd(f.nodeValue,u,(i.mode&1)!==0)}_&&(a.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[Yr]=a,a.stateNode=f}return rn(a),null;case 13:if(lt(yt),f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(mt&&zn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)S0(),$a(),a.flags|=98560,_=!1;else if(_=Dd(a),f!==null&&f.dehydrated!==null){if(i===null){if(!_)throw Error(t(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[Yr]=a}else $a(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;rn(a),_=!1}else Ar!==null&&(Om(Ar),Ar=null),_=!0;if(!_)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(yt.current&1)!==0?Mt===0&&(Mt=3):jm())),a.updateQueue!==null&&(a.flags|=4),rn(a),null);case 4:return Ha(),Im(i,a),i===null&&mu(a.stateNode.containerInfo),rn(a),null;case 10:return Xp(a.type._context),rn(a),null;case 17:return Sn(a.type)&&Ad(),rn(a),null;case 19:if(lt(yt),_=a.memoizedState,_===null)return rn(a),null;if(f=(a.flags&128)!==0,C=_.rendering,C===null)if(f)Ru(_,!1);else{if(Mt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(C=Fd(i),C!==null){for(a.flags|=128,Ru(_,!1),f=C.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=u,u=a.child;u!==null;)_=u,i=f,_.flags&=14680066,C=_.alternate,C===null?(_.childLanes=0,_.lanes=i,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=C.childLanes,_.lanes=C.lanes,_.child=C.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=C.memoizedProps,_.memoizedState=C.memoizedState,_.updateQueue=C.updateQueue,_.type=C.type,i=C.dependencies,_.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return it(yt,yt.current&1|2),a.child}i=i.sibling}_.tail!==null&&st()>Qa&&(a.flags|=128,f=!0,Ru(_,!1),a.lanes=4194304)}else{if(!f)if(i=Fd(C),i!==null){if(a.flags|=128,f=!0,u=i.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),Ru(_,!0),_.tail===null&&_.tailMode==="hidden"&&!C.alternate&&!mt)return rn(a),null}else 2*st()-_.renderingStartTime>Qa&&u!==1073741824&&(a.flags|=128,f=!0,Ru(_,!1),a.lanes=4194304);_.isBackwards?(C.sibling=a.child,a.child=C):(u=_.last,u!==null?u.sibling=C:a.child=C,_.last=C)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=st(),a.sibling=null,u=yt.current,it(yt,f?u&1|2:u&1),a):(rn(a),null);case 22:case 23:return Mm(),f=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(Wn&1073741824)!==0&&(rn(a),a.subtreeFlags&6&&(a.flags|=8192)):rn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function dP(i,a){switch(Hp(a),a.tag){case 1:return Sn(a.type)&&Ad(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Ha(),lt(xn),lt(tn),sm(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return nm(a),null;case 13:if(lt(yt),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));$a()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return lt(yt),null;case 4:return Ha(),null;case 10:return Xp(a.type._context),null;case 22:case 23:return Mm(),null;case 24:return null;default:return null}}var Kd=!1,sn=!1,hP=typeof WeakSet=="function"?WeakSet:Set,me=null;function Ga(i,a){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){Et(i,a,f)}else u.current=null}function Cm(i,a,u){try{u()}catch(f){Et(i,a,f)}}var Cw=!1;function fP(i,a){if(Mp=fi,i=n0(),Ap(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var m=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var C=0,O=-1,F=-1,K=0,ne=0,re=i,te=null;t:for(;;){for(var de;re!==u||m!==0&&re.nodeType!==3||(O=C+m),re!==_||f!==0&&re.nodeType!==3||(F=C+f),re.nodeType===3&&(C+=re.nodeValue.length),(de=re.firstChild)!==null;)te=re,re=de;for(;;){if(re===i)break t;if(te===u&&++K===m&&(O=C),te===_&&++ne===f&&(F=C),(de=re.nextSibling)!==null)break;re=te,te=re.parentNode}re=de}u=O===-1||F===-1?null:{start:O,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(jp={focusedElem:i,selectionRange:u},fi=!1,me=a;me!==null;)if(a=me,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,me=i;else for(;me!==null;){a=me;try{var ge=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var ye=ge.memoizedProps,St=ge.memoizedState,H=a.stateNode,$=H.getSnapshotBeforeUpdate(a.elementType===a.type?ye:Pr(a.type,ye),St);H.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var G=a.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){Et(a,a.return,oe)}if(i=a.sibling,i!==null){i.return=a.return,me=i;break}me=a.return}return ge=Cw,Cw=!1,ge}function Au(i,a,u){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&i)===i){var _=m.destroy;m.destroy=void 0,_!==void 0&&Cm(a,u,_)}m=m.next}while(m!==f)}}function Qd(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&i)===i){var f=u.create;u.destroy=f()}u=u.next}while(u!==a)}}function xm(i){var a=i.ref;if(a!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof a=="function"?a(i):a.current=i}}function xw(i){var a=i.alternate;a!==null&&(i.alternate=null,xw(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Yr],delete a[yu],delete a[$p],delete a[Q2],delete a[Y2])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Sw(i){return i.tag===5||i.tag===3||i.tag===4}function Rw(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Sw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Sm(i,a,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(i,a):u.insertBefore(i,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(i,u)):(a=u,a.appendChild(i)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Sd));else if(f!==4&&(i=i.child,i!==null))for(Sm(i,a,u),i=i.sibling;i!==null;)Sm(i,a,u),i=i.sibling}function Rm(i,a,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(Rm(i,a,u),i=i.sibling;i!==null;)Rm(i,a,u),i=i.sibling}var Yt=null,br=!1;function Ti(i,a,u){for(u=u.child;u!==null;)Aw(i,a,u),u=u.sibling}function Aw(i,a,u){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount(Io,u)}catch{}switch(u.tag){case 5:sn||Ga(u,a);case 6:var f=Yt,m=br;Yt=null,Ti(i,a,u),Yt=f,br=m,Yt!==null&&(br?(i=Yt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Yt.removeChild(u.stateNode));break;case 18:Yt!==null&&(br?(i=Yt,u=u.stateNode,i.nodeType===8?Up(i.parentNode,u):i.nodeType===1&&Up(i,u),xr(i)):Up(Yt,u.stateNode));break;case 4:f=Yt,m=br,Yt=u.stateNode.containerInfo,br=!0,Ti(i,a,u),Yt=f,br=m;break;case 0:case 11:case 14:case 15:if(!sn&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var _=m,C=_.destroy;_=_.tag,C!==void 0&&((_&2)!==0||(_&4)!==0)&&Cm(u,a,C),m=m.next}while(m!==f)}Ti(i,a,u);break;case 1:if(!sn&&(Ga(u,a),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(O){Et(u,a,O)}Ti(i,a,u);break;case 21:Ti(i,a,u);break;case 22:u.mode&1?(sn=(f=sn)||u.memoizedState!==null,Ti(i,a,u),sn=f):Ti(i,a,u);break;default:Ti(i,a,u)}}function Pw(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new hP),a.forEach(function(f){var m=TP.bind(null,i,f);u.has(f)||(u.add(f),f.then(m,m))})}}function kr(i,a){var u=a.deletions;if(u!==null)for(var f=0;f<u.length;f++){var m=u[f];try{var _=i,C=a,O=C;e:for(;O!==null;){switch(O.tag){case 5:Yt=O.stateNode,br=!1;break e;case 3:Yt=O.stateNode.containerInfo,br=!0;break e;case 4:Yt=O.stateNode.containerInfo,br=!0;break e}O=O.return}if(Yt===null)throw Error(t(160));Aw(_,C,m),Yt=null,br=!1;var F=m.alternate;F!==null&&(F.return=null),m.return=null}catch(K){Et(m,a,K)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)bw(a,i),a=a.sibling}function bw(i,a){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(kr(a,i),Zr(i),f&4){try{Au(3,i,i.return),Qd(3,i)}catch(ye){Et(i,i.return,ye)}try{Au(5,i,i.return)}catch(ye){Et(i,i.return,ye)}}break;case 1:kr(a,i),Zr(i),f&512&&u!==null&&Ga(u,u.return);break;case 5:if(kr(a,i),Zr(i),f&512&&u!==null&&Ga(u,u.return),i.flags&32){var m=i.stateNode;try{ii(m,"")}catch(ye){Et(i,i.return,ye)}}if(f&4&&(m=i.stateNode,m!=null)){var _=i.memoizedProps,C=u!==null?u.memoizedProps:_,O=i.type,F=i.updateQueue;if(i.updateQueue=null,F!==null)try{O==="input"&&_.type==="radio"&&_.name!=null&&ei(m,_),Kl(O,C);var K=Kl(O,_);for(C=0;C<F.length;C+=2){var ne=F[C],re=F[C+1];ne==="style"?Hl(m,re):ne==="dangerouslySetInnerHTML"?zl(m,re):ne==="children"?ii(m,re):B(m,ne,re,K)}switch(O){case"input":ti(m,_);break;case"textarea":Br(m,_);break;case"select":var te=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!_.multiple;var de=_.value;de!=null?Tn(m,!!_.multiple,de,!1):te!==!!_.multiple&&(_.defaultValue!=null?Tn(m,!!_.multiple,_.defaultValue,!0):Tn(m,!!_.multiple,_.multiple?[]:"",!1))}m[yu]=_}catch(ye){Et(i,i.return,ye)}}break;case 6:if(kr(a,i),Zr(i),f&4){if(i.stateNode===null)throw Error(t(162));m=i.stateNode,_=i.memoizedProps;try{m.nodeValue=_}catch(ye){Et(i,i.return,ye)}}break;case 3:if(kr(a,i),Zr(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{xr(a.containerInfo)}catch(ye){Et(i,i.return,ye)}break;case 4:kr(a,i),Zr(i);break;case 13:kr(a,i),Zr(i),m=i.child,m.flags&8192&&(_=m.memoizedState!==null,m.stateNode.isHidden=_,!_||m.alternate!==null&&m.alternate.memoizedState!==null||(bm=st())),f&4&&Pw(i);break;case 22:if(ne=u!==null&&u.memoizedState!==null,i.mode&1?(sn=(K=sn)||ne,kr(a,i),sn=K):kr(a,i),Zr(i),f&8192){if(K=i.memoizedState!==null,(i.stateNode.isHidden=K)&&!ne&&(i.mode&1)!==0)for(me=i,ne=i.child;ne!==null;){for(re=me=ne;me!==null;){switch(te=me,de=te.child,te.tag){case 0:case 11:case 14:case 15:Au(4,te,te.return);break;case 1:Ga(te,te.return);var ge=te.stateNode;if(typeof ge.componentWillUnmount=="function"){f=te,u=te.return;try{a=f,ge.props=a.memoizedProps,ge.state=a.memoizedState,ge.componentWillUnmount()}catch(ye){Et(f,u,ye)}}break;case 5:Ga(te,te.return);break;case 22:if(te.memoizedState!==null){Dw(re);continue}}de!==null?(de.return=te,me=de):Dw(re)}ne=ne.sibling}e:for(ne=null,re=i;;){if(re.tag===5){if(ne===null){ne=re;try{m=re.stateNode,K?(_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(O=re.stateNode,F=re.memoizedProps.style,C=F!=null&&F.hasOwnProperty("display")?F.display:null,O.style.display=Wl("display",C))}catch(ye){Et(i,i.return,ye)}}}else if(re.tag===6){if(ne===null)try{re.stateNode.nodeValue=K?"":re.memoizedProps}catch(ye){Et(i,i.return,ye)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===i)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===i)break e;for(;re.sibling===null;){if(re.return===null||re.return===i)break e;ne===re&&(ne=null),re=re.return}ne===re&&(ne=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:kr(a,i),Zr(i),f&4&&Pw(i);break;case 21:break;default:kr(a,i),Zr(i)}}function Zr(i){var a=i.flags;if(a&2){try{e:{for(var u=i.return;u!==null;){if(Sw(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(ii(m,""),f.flags&=-33);var _=Rw(i);Rm(i,_,m);break;case 3:case 4:var C=f.stateNode.containerInfo,O=Rw(i);Sm(i,O,C);break;default:throw Error(t(161))}}catch(F){Et(i,i.return,F)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function pP(i,a,u){me=i,kw(i)}function kw(i,a,u){for(var f=(i.mode&1)!==0;me!==null;){var m=me,_=m.child;if(m.tag===22&&f){var C=m.memoizedState!==null||Kd;if(!C){var O=m.alternate,F=O!==null&&O.memoizedState!==null||sn;O=Kd;var K=sn;if(Kd=C,(sn=F)&&!K)for(me=m;me!==null;)C=me,F=C.child,C.tag===22&&C.memoizedState!==null?Ow(m):F!==null?(F.return=C,me=F):Ow(m);for(;_!==null;)me=_,kw(_),_=_.sibling;me=m,Kd=O,sn=K}Nw(i)}else(m.subtreeFlags&8772)!==0&&_!==null?(_.return=m,me=_):Nw(i)}}function Nw(i){for(;me!==null;){var a=me;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:sn||Qd(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!sn)if(u===null)f.componentDidMount();else{var m=a.elementType===a.type?u.memoizedProps:Pr(a.type,u.memoizedProps);f.componentDidUpdate(m,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=a.updateQueue;_!==null&&D0(a,_,f);break;case 3:var C=a.updateQueue;if(C!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}D0(a,C,u)}break;case 5:var O=a.stateNode;if(u===null&&a.flags&4){u=O;var F=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&u.focus();break;case"img":F.src&&(u.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var K=a.alternate;if(K!==null){var ne=K.memoizedState;if(ne!==null){var re=ne.dehydrated;re!==null&&xr(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}sn||a.flags&512&&xm(a)}catch(te){Et(a,a.return,te)}}if(a===i){me=null;break}if(u=a.sibling,u!==null){u.return=a.return,me=u;break}me=a.return}}function Dw(i){for(;me!==null;){var a=me;if(a===i){me=null;break}var u=a.sibling;if(u!==null){u.return=a.return,me=u;break}me=a.return}}function Ow(i){for(;me!==null;){var a=me;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{Qd(4,a)}catch(F){Et(a,u,F)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var m=a.return;try{f.componentDidMount()}catch(F){Et(a,m,F)}}var _=a.return;try{xm(a)}catch(F){Et(a,_,F)}break;case 5:var C=a.return;try{xm(a)}catch(F){Et(a,C,F)}}}catch(F){Et(a,a.return,F)}if(a===i){me=null;break}var O=a.sibling;if(O!==null){O.return=a.return,me=O;break}me=a.return}}var mP=Math.ceil,Yd=q.ReactCurrentDispatcher,Am=q.ReactCurrentOwner,or=q.ReactCurrentBatchConfig,Ge=0,$t=null,bt=null,Xt=0,Wn=0,Ka=yi(0),Mt=0,Pu=null,jo=0,Xd=0,Pm=0,bu=null,An=null,bm=0,Qa=1/0,Ps=null,Jd=!1,km=null,Ii=null,Zd=!1,Ci=null,eh=0,ku=0,Nm=null,th=-1,nh=0;function _n(){return(Ge&6)!==0?st():th!==-1?th:th=st()}function xi(i){return(i.mode&1)===0?1:(Ge&2)!==0&&Xt!==0?Xt&-Xt:J2.transition!==null?(nh===0&&(nh=xo()),nh):(i=Fe,i!==0||(i=window.event,i=i===void 0?16:iu(i.type)),i)}function Nr(i,a,u,f){if(50<ku)throw ku=0,Nm=null,Error(t(185));ui(i,u,f),((Ge&2)===0||i!==$t)&&(i===$t&&((Ge&2)===0&&(Xd|=u),Mt===4&&Si(i,Xt)),Pn(i,f),u===1&&Ge===0&&(a.mode&1)===0&&(Qa=st()+500,bd&&_i()))}function Pn(i,a){var u=i.callbackNode;ys(i,a);var f=Co(i,i===$t?Xt:0);if(f===0)u!==null&&eu(u),i.callbackNode=null,i.callbackPriority=0;else if(a=f&-f,i.callbackPriority!==a){if(u!=null&&eu(u),a===1)i.tag===0?X2(Mw.bind(null,i)):E0(Mw.bind(null,i)),G2(function(){(Ge&6)===0&&_i()}),u=null;else{switch(di(f)){case 1:u=To;break;case 4:u=oi;break;case 16:u=Zn;break;case 536870912:u=nd;break;default:u=Zn}u=Ww(u,Lw.bind(null,i))}i.callbackPriority=a,i.callbackNode=u}}function Lw(i,a){if(th=-1,nh=0,(Ge&6)!==0)throw Error(t(327));var u=i.callbackNode;if(Ya()&&i.callbackNode!==u)return null;var f=Co(i,i===$t?Xt:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||a)a=rh(i,f);else{a=f;var m=Ge;Ge|=2;var _=Vw();($t!==i||Xt!==a)&&(Ps=null,Qa=st()+500,Fo(i,a));do try{vP();break}catch(O){jw(i,O)}while(!0);Yp(),Yd.current=_,Ge=m,bt!==null?a=0:($t=null,Xt=0,a=Mt)}if(a!==0){if(a===2&&(m=Fn(i),m!==0&&(f=m,a=Dm(i,m))),a===1)throw u=Pu,Fo(i,0),Si(i,f),Pn(i,st()),u;if(a===6)Si(i,f);else{if(m=i.current.alternate,(f&30)===0&&!gP(m)&&(a=rh(i,f),a===2&&(_=Fn(i),_!==0&&(f=_,a=Dm(i,_))),a===1))throw u=Pu,Fo(i,0),Si(i,f),Pn(i,st()),u;switch(i.finishedWork=m,i.finishedLanes=f,a){case 0:case 1:throw Error(t(345));case 2:Uo(i,An,Ps);break;case 3:if(Si(i,f),(f&130023424)===f&&(a=bm+500-st(),10<a)){if(Co(i,0)!==0)break;if(m=i.suspendedLanes,(m&f)!==f){_n(),i.pingedLanes|=i.suspendedLanes&m;break}i.timeoutHandle=Fp(Uo.bind(null,i,An,Ps),a);break}Uo(i,An,Ps);break;case 4:if(Si(i,f),(f&4194240)===f)break;for(a=i.eventTimes,m=-1;0<f;){var C=31-gn(f);_=1<<C,C=a[C],C>m&&(m=C),f&=~_}if(f=m,f=st()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*mP(f/1960))-f,10<f){i.timeoutHandle=Fp(Uo.bind(null,i,An,Ps),f);break}Uo(i,An,Ps);break;case 5:Uo(i,An,Ps);break;default:throw Error(t(329))}}}return Pn(i,st()),i.callbackNode===u?Lw.bind(null,i):null}function Dm(i,a){var u=bu;return i.current.memoizedState.isDehydrated&&(Fo(i,a).flags|=256),i=rh(i,a),i!==2&&(a=An,An=u,a!==null&&Om(a)),i}function Om(i){An===null?An=i:An.push.apply(An,i)}function gP(i){for(var a=i;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var m=u[f],_=m.getSnapshot;m=m.value;try{if(!Rr(_(),m))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Si(i,a){for(a&=~Pm,a&=~Xd,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var u=31-gn(a),f=1<<u;i[u]=-1,a&=~f}}function Mw(i){if((Ge&6)!==0)throw Error(t(327));Ya();var a=Co(i,0);if((a&1)===0)return Pn(i,st()),null;var u=rh(i,a);if(i.tag!==0&&u===2){var f=Fn(i);f!==0&&(a=f,u=Dm(i,f))}if(u===1)throw u=Pu,Fo(i,0),Si(i,a),Pn(i,st()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,Uo(i,An,Ps),Pn(i,st()),null}function Lm(i,a){var u=Ge;Ge|=1;try{return i(a)}finally{Ge=u,Ge===0&&(Qa=st()+500,bd&&_i())}}function Vo(i){Ci!==null&&Ci.tag===0&&(Ge&6)===0&&Ya();var a=Ge;Ge|=1;var u=or.transition,f=Fe;try{if(or.transition=null,Fe=1,i)return i()}finally{Fe=f,or.transition=u,Ge=a,(Ge&6)===0&&_i()}}function Mm(){Wn=Ka.current,lt(Ka)}function Fo(i,a){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,q2(u)),bt!==null)for(u=bt.return;u!==null;){var f=u;switch(Hp(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Ad();break;case 3:Ha(),lt(xn),lt(tn),sm();break;case 5:nm(f);break;case 4:Ha();break;case 13:lt(yt);break;case 19:lt(yt);break;case 10:Xp(f.type._context);break;case 22:case 23:Mm()}u=u.return}if($t=i,bt=i=Ri(i.current,null),Xt=Wn=a,Mt=0,Pu=null,Pm=Xd=jo=0,An=bu=null,Oo!==null){for(a=0;a<Oo.length;a++)if(u=Oo[a],f=u.interleaved,f!==null){u.interleaved=null;var m=f.next,_=u.pending;if(_!==null){var C=_.next;_.next=m,f.next=C}u.pending=f}Oo=null}return i}function jw(i,a){do{var u=bt;try{if(Yp(),Ud.current=Wd,$d){for(var f=vt.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}$d=!1}if(Mo=0,Ut=Lt=vt=null,Iu=!1,Cu=0,Am.current=null,u===null||u.return===null){Mt=1,Pu=a,bt=null;break}e:{var _=i,C=u.return,O=u,F=a;if(a=Xt,O.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var K=F,ne=O,re=ne.tag;if((ne.mode&1)===0&&(re===0||re===11||re===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var de=lw(C);if(de!==null){de.flags&=-257,uw(de,C,O,_,a),de.mode&1&&aw(_,K,a),a=de,F=K;var ge=a.updateQueue;if(ge===null){var ye=new Set;ye.add(F),a.updateQueue=ye}else ge.add(F);break e}else{if((a&1)===0){aw(_,K,a),jm();break e}F=Error(t(426))}}else if(mt&&O.mode&1){var St=lw(C);if(St!==null){(St.flags&65536)===0&&(St.flags|=256),uw(St,C,O,_,a),Kp(qa(F,O));break e}}_=F=qa(F,O),Mt!==4&&(Mt=2),bu===null?bu=[_]:bu.push(_),_=C;do{switch(_.tag){case 3:_.flags|=65536,a&=-a,_.lanes|=a;var H=iw(_,F,a);N0(_,H);break e;case 1:O=F;var $=_.type,G=_.stateNode;if((_.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Ii===null||!Ii.has(G)))){_.flags|=65536,a&=-a,_.lanes|=a;var oe=ow(_,O,a);N0(_,oe);break e}}_=_.return}while(_!==null)}Uw(u)}catch(ve){a=ve,bt===u&&u!==null&&(bt=u=u.return);continue}break}while(!0)}function Vw(){var i=Yd.current;return Yd.current=Wd,i===null?Wd:i}function jm(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),$t===null||(jo&268435455)===0&&(Xd&268435455)===0||Si($t,Xt)}function rh(i,a){var u=Ge;Ge|=2;var f=Vw();($t!==i||Xt!==a)&&(Ps=null,Fo(i,a));do try{yP();break}catch(m){jw(i,m)}while(!0);if(Yp(),Ge=u,Yd.current=f,bt!==null)throw Error(t(261));return $t=null,Xt=0,Mt}function yP(){for(;bt!==null;)Fw(bt)}function vP(){for(;bt!==null&&!ed();)Fw(bt)}function Fw(i){var a=zw(i.alternate,i,Wn);i.memoizedProps=i.pendingProps,a===null?Uw(i):bt=a,Am.current=null}function Uw(i){var a=i;do{var u=a.alternate;if(i=a.return,(a.flags&32768)===0){if(u=cP(u,a,Wn),u!==null){bt=u;return}}else{if(u=dP(u,a),u!==null){u.flags&=32767,bt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Mt=6,bt=null;return}}if(a=a.sibling,a!==null){bt=a;return}bt=a=i}while(a!==null);Mt===0&&(Mt=5)}function Uo(i,a,u){var f=Fe,m=or.transition;try{or.transition=null,Fe=1,_P(i,a,u,f)}finally{or.transition=m,Fe=f}return null}function _P(i,a,u,f){do Ya();while(Ci!==null);if((Ge&6)!==0)throw Error(t(327));u=i.finishedWork;var m=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var _=u.lanes|u.childLanes;if(rt(i,_),i===$t&&(bt=$t=null,Xt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Zd||(Zd=!0,Ww(Zn,function(){return Ya(),null})),_=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||_){_=or.transition,or.transition=null;var C=Fe;Fe=1;var O=Ge;Ge|=4,Am.current=null,fP(i,u),bw(u,i),F2(jp),fi=!!Mp,jp=Mp=null,i.current=u,pP(u),wp(),Ge=O,Fe=C,or.transition=_}else i.current=u;if(Zd&&(Zd=!1,Ci=i,eh=m),_=i.pendingLanes,_===0&&(Ii=null),rd(u.stateNode),Pn(i,st()),a!==null)for(f=i.onRecoverableError,u=0;u<a.length;u++)m=a[u],f(m.value,{componentStack:m.stack,digest:m.digest});if(Jd)throw Jd=!1,i=km,km=null,i;return(eh&1)!==0&&i.tag!==0&&Ya(),_=i.pendingLanes,(_&1)!==0?i===Nm?ku++:(ku=0,Nm=i):ku=0,_i(),null}function Ya(){if(Ci!==null){var i=di(eh),a=or.transition,u=Fe;try{if(or.transition=null,Fe=16>i?16:i,Ci===null)var f=!1;else{if(i=Ci,Ci=null,eh=0,(Ge&6)!==0)throw Error(t(331));var m=Ge;for(Ge|=4,me=i.current;me!==null;){var _=me,C=_.child;if((me.flags&16)!==0){var O=_.deletions;if(O!==null){for(var F=0;F<O.length;F++){var K=O[F];for(me=K;me!==null;){var ne=me;switch(ne.tag){case 0:case 11:case 15:Au(8,ne,_)}var re=ne.child;if(re!==null)re.return=ne,me=re;else for(;me!==null;){ne=me;var te=ne.sibling,de=ne.return;if(xw(ne),ne===K){me=null;break}if(te!==null){te.return=de,me=te;break}me=de}}}var ge=_.alternate;if(ge!==null){var ye=ge.child;if(ye!==null){ge.child=null;do{var St=ye.sibling;ye.sibling=null,ye=St}while(ye!==null)}}me=_}}if((_.subtreeFlags&2064)!==0&&C!==null)C.return=_,me=C;else e:for(;me!==null;){if(_=me,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:Au(9,_,_.return)}var H=_.sibling;if(H!==null){H.return=_.return,me=H;break e}me=_.return}}var $=i.current;for(me=$;me!==null;){C=me;var G=C.child;if((C.subtreeFlags&2064)!==0&&G!==null)G.return=C,me=G;else e:for(C=$;me!==null;){if(O=me,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:Qd(9,O)}}catch(ve){Et(O,O.return,ve)}if(O===C){me=null;break e}var oe=O.sibling;if(oe!==null){oe.return=O.return,me=oe;break e}me=O.return}}if(Ge=m,_i(),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot(Io,i)}catch{}f=!0}return f}finally{Fe=u,or.transition=a}}return!1}function $w(i,a,u){a=qa(u,a),a=iw(i,a,1),i=Ei(i,a,1),a=_n(),i!==null&&(ui(i,1,a),Pn(i,a))}function Et(i,a,u){if(i.tag===3)$w(i,i,u);else for(;a!==null;){if(a.tag===3){$w(a,i,u);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ii===null||!Ii.has(f))){i=qa(u,i),i=ow(a,i,1),a=Ei(a,i,1),i=_n(),a!==null&&(ui(a,1,i),Pn(a,i));break}}a=a.return}}function wP(i,a,u){var f=i.pingCache;f!==null&&f.delete(a),a=_n(),i.pingedLanes|=i.suspendedLanes&u,$t===i&&(Xt&u)===u&&(Mt===4||Mt===3&&(Xt&130023424)===Xt&&500>st()-bm?Fo(i,0):Pm|=u),Pn(i,a)}function Bw(i,a){a===0&&((i.mode&1)===0?a=1:(a=_a,_a<<=1,(_a&130023424)===0&&(_a=4194304)));var u=_n();i=Ss(i,a),i!==null&&(ui(i,a,u),Pn(i,u))}function EP(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),Bw(i,u)}function TP(i,a){var u=0;switch(i.tag){case 13:var f=i.stateNode,m=i.memoizedState;m!==null&&(u=m.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(a),Bw(i,u)}var zw;zw=function(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps||xn.current)Rn=!0;else{if((i.lanes&u)===0&&(a.flags&128)===0)return Rn=!1,uP(i,a,u);Rn=(i.flags&131072)!==0}else Rn=!1,mt&&(a.flags&1048576)!==0&&T0(a,Nd,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;Gd(i,a),i=a.pendingProps;var m=Va(a,tn.current);Wa(a,u),m=am(null,a,f,i,m,u);var _=lm();return a.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Sn(f)?(_=!0,Pd(a)):_=!1,a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,em(a),m.updater=Hd,a.stateNode=m,m._reactInternals=a,pm(a,f,i,u),a=vm(null,a,f,!0,_,u)):(a.tag=0,mt&&_&&Wp(a),vn(null,a,m,u),a=a.child),a;case 16:f=a.elementType;e:{switch(Gd(i,a),i=a.pendingProps,m=f._init,f=m(f._payload),a.type=f,m=a.tag=CP(f),i=Pr(f,i),m){case 0:a=ym(null,a,f,i,u);break e;case 1:a=mw(null,a,f,i,u);break e;case 11:a=cw(null,a,f,i,u);break e;case 14:a=dw(null,a,f,Pr(f.type,i),u);break e}throw Error(t(306,f,""))}return a;case 0:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:Pr(f,m),ym(i,a,f,m,u);case 1:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:Pr(f,m),mw(i,a,f,m,u);case 3:e:{if(gw(a),i===null)throw Error(t(387));f=a.pendingProps,_=a.memoizedState,m=_.element,k0(i,a),Vd(a,f,null,u);var C=a.memoizedState;if(f=C.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){m=qa(Error(t(423)),a),a=yw(i,a,f,u,m);break e}else if(f!==m){m=qa(Error(t(424)),a),a=yw(i,a,f,u,m);break e}else for(zn=gi(a.stateNode.containerInfo.firstChild),Bn=a,mt=!0,Ar=null,u=P0(a,null,f,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if($a(),f===m){a=As(i,a,u);break e}vn(i,a,f,u)}a=a.child}return a;case 5:return O0(a),i===null&&Gp(a),f=a.type,m=a.pendingProps,_=i!==null?i.memoizedProps:null,C=m.children,Vp(f,m)?C=null:_!==null&&Vp(f,_)&&(a.flags|=32),pw(i,a),vn(i,a,C,u),a.child;case 6:return i===null&&Gp(a),null;case 13:return vw(i,a,u);case 4:return tm(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=Ba(a,null,f,u):vn(i,a,f,u),a.child;case 11:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:Pr(f,m),cw(i,a,f,m,u);case 7:return vn(i,a,a.pendingProps,u),a.child;case 8:return vn(i,a,a.pendingProps.children,u),a.child;case 12:return vn(i,a,a.pendingProps.children,u),a.child;case 10:e:{if(f=a.type._context,m=a.pendingProps,_=a.memoizedProps,C=m.value,it(Ld,f._currentValue),f._currentValue=C,_!==null)if(Rr(_.value,C)){if(_.children===m.children&&!xn.current){a=As(i,a,u);break e}}else for(_=a.child,_!==null&&(_.return=a);_!==null;){var O=_.dependencies;if(O!==null){C=_.child;for(var F=O.firstContext;F!==null;){if(F.context===f){if(_.tag===1){F=Rs(-1,u&-u),F.tag=2;var K=_.updateQueue;if(K!==null){K=K.shared;var ne=K.pending;ne===null?F.next=F:(F.next=ne.next,ne.next=F),K.pending=F}}_.lanes|=u,F=_.alternate,F!==null&&(F.lanes|=u),Jp(_.return,u,a),O.lanes|=u;break}F=F.next}}else if(_.tag===10)C=_.type===a.type?null:_.child;else if(_.tag===18){if(C=_.return,C===null)throw Error(t(341));C.lanes|=u,O=C.alternate,O!==null&&(O.lanes|=u),Jp(C,u,a),C=_.sibling}else C=_.child;if(C!==null)C.return=_;else for(C=_;C!==null;){if(C===a){C=null;break}if(_=C.sibling,_!==null){_.return=C.return,C=_;break}C=C.return}_=C}vn(i,a,m.children,u),a=a.child}return a;case 9:return m=a.type,f=a.pendingProps.children,Wa(a,u),m=sr(m),f=f(m),a.flags|=1,vn(i,a,f,u),a.child;case 14:return f=a.type,m=Pr(f,a.pendingProps),m=Pr(f.type,m),dw(i,a,f,m,u);case 15:return hw(i,a,a.type,a.pendingProps,u);case 17:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:Pr(f,m),Gd(i,a),a.tag=1,Sn(f)?(i=!0,Pd(a)):i=!1,Wa(a,u),rw(a,f,m),pm(a,f,m,u),vm(null,a,f,!0,i,u);case 19:return ww(i,a,u);case 22:return fw(i,a,u)}throw Error(t(156,a.tag))};function Ww(i,a){return ya(i,a)}function IP(i,a,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(i,a,u,f){return new IP(i,a,u,f)}function Vm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function CP(i){if(typeof i=="function")return Vm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===V)return 11;if(i===xe)return 14}return 2}function Ri(i,a){var u=i.alternate;return u===null?(u=ar(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function sh(i,a,u,f,m,_){var C=2;if(f=i,typeof i=="function")Vm(i)&&(C=1);else if(typeof i=="string")C=5;else e:switch(i){case N:return $o(u.children,m,_,a);case P:C=8,m|=8;break;case k:return i=ar(12,u,a,m|2),i.elementType=k,i.lanes=_,i;case D:return i=ar(13,u,a,m),i.elementType=D,i.lanes=_,i;case le:return i=ar(19,u,a,m),i.elementType=le,i.lanes=_,i;case Te:return ih(u,m,_,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case M:C=10;break e;case j:C=9;break e;case V:C=11;break e;case xe:C=14;break e;case Re:C=16,f=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=ar(C,u,a,m),a.elementType=i,a.type=f,a.lanes=_,a}function $o(i,a,u,f){return i=ar(7,i,f,a),i.lanes=u,i}function ih(i,a,u,f){return i=ar(22,i,f,a),i.elementType=Te,i.lanes=u,i.stateNode={isHidden:!1},i}function Fm(i,a,u){return i=ar(6,i,null,a),i.lanes=u,i}function Um(i,a,u){return a=ar(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function xP(i,a,u,f,m){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=li(0),this.expirationTimes=li(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=li(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function $m(i,a,u,f,m,_,C,O,F){return i=new xP(i,a,u,O,F),a===1?(a=1,_===!0&&(a|=8)):a=0,_=ar(3,null,null,a),i.current=_,_.stateNode=i,_.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},em(_),i}function SP(i,a,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:f==null?null:""+f,children:i,containerInfo:a,implementation:u}}function Hw(i){if(!i)return vi;i=i._reactInternals;e:{if(wr(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Sn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(Sn(u))return _0(i,u,a)}return a}function qw(i,a,u,f,m,_,C,O,F){return i=$m(u,f,!0,i,m,_,C,O,F),i.context=Hw(null),u=i.current,f=_n(),m=xi(u),_=Rs(f,m),_.callback=a??null,Ei(u,_,m),i.current.lanes=m,ui(i,m,f),Pn(i,f),i}function oh(i,a,u,f){var m=a.current,_=_n(),C=xi(m);return u=Hw(u),a.context===null?a.context=u:a.pendingContext=u,a=Rs(_,C),a.payload={element:i},f=f===void 0?null:f,f!==null&&(a.callback=f),i=Ei(m,a,C),i!==null&&(Nr(i,m,C,_),jd(i,m,C)),C}function ah(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Gw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function Bm(i,a){Gw(i,a),(i=i.alternate)&&Gw(i,a)}function RP(){return null}var Kw=typeof reportError=="function"?reportError:function(i){console.error(i)};function zm(i){this._internalRoot=i}lh.prototype.render=zm.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));oh(i,a,null,null)},lh.prototype.unmount=zm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Vo(function(){oh(null,i,null,null)}),a[Ts]=null}};function lh(i){this._internalRoot=i}lh.prototype.unstable_scheduleHydration=function(i){if(i){var a=ld();i={blockedOn:null,target:i,priority:a};for(var u=0;u<qr.length&&a!==0&&a<qr[u].priority;u++);qr.splice(u,0,i),u===0&&dd(i)}};function Wm(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function uh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Qw(){}function AP(i,a,u,f,m){if(m){if(typeof f=="function"){var _=f;f=function(){var K=ah(C);_.call(K)}}var C=qw(a,f,i,0,null,!1,!1,"",Qw);return i._reactRootContainer=C,i[Ts]=C.current,mu(i.nodeType===8?i.parentNode:i),Vo(),C}for(;m=i.lastChild;)i.removeChild(m);if(typeof f=="function"){var O=f;f=function(){var K=ah(F);O.call(K)}}var F=$m(i,0,!1,null,null,!1,!1,"",Qw);return i._reactRootContainer=F,i[Ts]=F.current,mu(i.nodeType===8?i.parentNode:i),Vo(function(){oh(a,F,u,f)}),F}function ch(i,a,u,f,m){var _=u._reactRootContainer;if(_){var C=_;if(typeof m=="function"){var O=m;m=function(){var F=ah(C);O.call(F)}}oh(a,C,i,m)}else C=AP(u,a,i,m,f);return ah(C)}od=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var u=ai(a.pendingLanes);u!==0&&(ci(a,u|1),Pn(a,st()),(Ge&6)===0&&(Qa=st()+500,_i()))}break;case 13:Vo(function(){var f=Ss(i,1);if(f!==null){var m=_n();Nr(f,i,1,m)}}),Bm(i,1)}},wa=function(i){if(i.tag===13){var a=Ss(i,134217728);if(a!==null){var u=_n();Nr(a,i,134217728,u)}Bm(i,134217728)}},ad=function(i){if(i.tag===13){var a=xi(i),u=Ss(i,a);if(u!==null){var f=_n();Nr(u,i,a,f)}Bm(i,a)}},ld=function(){return Fe},ud=function(i,a){var u=Fe;try{return Fe=i,a()}finally{Fe=u}},da=function(i,a,u){switch(a){case"input":if(ti(i,u),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var f=u[a];if(f!==i&&f.form===i.form){var m=Rd(f);if(!m)throw Error(t(90));Js(f),ti(f,m)}}}break;case"textarea":Br(i,u);break;case"select":a=u.value,a!=null&&Tn(i,!!u.multiple,a,!1)}},vo=Lm,Yl=Vo;var PP={usingClientEntryPoint:!1,Events:[vu,Ma,Rd,Wr,Ql,Lm]},Nu={findFiberByHostInstance:bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bP={bundleType:Nu.bundleType,version:Nu.version,rendererPackageName:Nu.rendererPackageName,rendererConfig:Nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Zl(i),i===null?null:i.stateNode},findFiberByHostInstance:Nu.findFiberByHostInstance||RP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dh.isDisabled&&dh.supportsFiber)try{Io=dh.inject(bP),Vn=dh}catch{}}return bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PP,bn.createPortal=function(i,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wm(a))throw Error(t(200));return SP(i,a,null,u)},bn.createRoot=function(i,a){if(!Wm(i))throw Error(t(299));var u=!1,f="",m=Kw;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(m=a.onRecoverableError)),a=$m(i,1,!1,null,null,u,!1,f,m),i[Ts]=a.current,mu(i.nodeType===8?i.parentNode:i),new zm(a)},bn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Zl(a),i=i===null?null:i.stateNode,i},bn.flushSync=function(i){return Vo(i)},bn.hydrate=function(i,a,u){if(!uh(a))throw Error(t(200));return ch(null,i,a,!0,u)},bn.hydrateRoot=function(i,a,u){if(!Wm(i))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,m=!1,_="",C=Kw;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(C=u.onRecoverableError)),a=qw(a,null,i,1,u??null,m,!1,_,C),i[Ts]=a.current,mu(i),f)for(i=0;i<f.length;i++)u=f[i],m=u._getVersion,m=m(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,m]:a.mutableSourceEagerHydrationData.push(u,m);return new lh(a)},bn.render=function(i,a,u){if(!uh(a))throw Error(t(200));return ch(null,i,a,!1,u)},bn.unmountComponentAtNode=function(i){if(!uh(i))throw Error(t(40));return i._reactRootContainer?(Vo(function(){ch(null,null,i,!1,function(){i._reactRootContainer=null,i[Ts]=null})}),!0):!1},bn.unstable_batchedUpdates=Lm,bn.unstable_renderSubtreeIntoContainer=function(i,a,u,f){if(!uh(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return ch(i,a,u,!1,f)},bn.version="18.3.1-next-f1338f8080-20240426",bn}var rE;function cC(){if(rE)return Gm.exports;rE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Gm.exports=jP(),Gm.exports}var sE;function VP(){if(sE)return hh;sE=1;var n=cC();return hh.createRoot=n.createRoot,hh.hydrateRoot=n.hydrateRoot,hh}var FP=VP(),Ou={},iE;function UP(){if(iE)return Ou;iE=1,Object.defineProperty(Ou,"__esModule",{value:!0}),Ou.parse=l,Ou.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const E=function(){};return E.prototype=Object.create(null),E})();function l(E,x){const R=new o,b=E.length;if(b<2)return R;const S=(x==null?void 0:x.decode)||g;let L=0;do{const U=E.indexOf("=",L);if(U===-1)break;const B=E.indexOf(";",L),q=B===-1?b:B;if(U>q){L=E.lastIndexOf(";",U-1)+1;continue}const X=c(E,L,U),Z=h(E,U,X),N=E.slice(X,Z);if(R[N]===void 0){let P=c(E,U+1,q),k=h(E,q,P);const M=S(E.slice(P,k));R[N]=M}L=q+1}while(L<b);return R}function c(E,x,R){do{const b=E.charCodeAt(x);if(b!==32&&b!==9)return x}while(++x<R);return R}function h(E,x,R){for(;x>R;){const b=E.charCodeAt(--x);if(b!==32&&b!==9)return x+1}return R}function p(E,x,R){const b=(R==null?void 0:R.encode)||encodeURIComponent;if(!n.test(E))throw new TypeError(`argument name is invalid: ${E}`);const S=b(x);if(!e.test(S))throw new TypeError(`argument val is invalid: ${x}`);let L=E+"="+S;if(!R)return L;if(R.maxAge!==void 0){if(!Number.isInteger(R.maxAge))throw new TypeError(`option maxAge is invalid: ${R.maxAge}`);L+="; Max-Age="+R.maxAge}if(R.domain){if(!t.test(R.domain))throw new TypeError(`option domain is invalid: ${R.domain}`);L+="; Domain="+R.domain}if(R.path){if(!r.test(R.path))throw new TypeError(`option path is invalid: ${R.path}`);L+="; Path="+R.path}if(R.expires){if(!w(R.expires)||!Number.isFinite(R.expires.valueOf()))throw new TypeError(`option expires is invalid: ${R.expires}`);L+="; Expires="+R.expires.toUTCString()}if(R.httpOnly&&(L+="; HttpOnly"),R.secure&&(L+="; Secure"),R.partitioned&&(L+="; Partitioned"),R.priority)switch(typeof R.priority=="string"?R.priority.toLowerCase():void 0){case"low":L+="; Priority=Low";break;case"medium":L+="; Priority=Medium";break;case"high":L+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${R.priority}`)}if(R.sameSite)switch(typeof R.sameSite=="string"?R.sameSite.toLowerCase():R.sameSite){case!0:case"strict":L+="; SameSite=Strict";break;case"lax":L+="; SameSite=Lax";break;case"none":L+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${R.sameSite}`)}return L}function g(E){if(E.indexOf("%")===-1)return E;try{return decodeURIComponent(E)}catch{return E}}function w(E){return s.call(E)==="[object Date]"}return Ou}UP();/**
 * react-router v7.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var oE="popstate";function $P(n={}){function e(r,s){let{pathname:o,search:l,hash:c}=r.location;return kg("",{pathname:o,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:dc(s)}return zP(e,t,null,n)}function gt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function jr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BP(){return Math.random().toString(36).substring(2,10)}function aE(n,e){return{usr:n.state,key:n.key,idx:e}}function kg(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Al(e):e,state:t,key:e&&e.key||r||BP()}}function dc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Al(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function zP(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,c="POP",h=null,p=g();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function g(){return(l.state||{idx:null}).idx}function w(){c="POP";let S=g(),L=S==null?null:S-p;p=S,h&&h({action:c,location:b.location,delta:L})}function E(S,L){c="PUSH";let U=kg(b.location,S,L);p=g()+1;let B=aE(U,p),q=b.createHref(U);try{l.pushState(B,"",q)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;s.location.assign(q)}o&&h&&h({action:c,location:b.location,delta:1})}function x(S,L){c="REPLACE";let U=kg(b.location,S,L);p=g();let B=aE(U,p),q=b.createHref(U);l.replaceState(B,"",q),o&&h&&h({action:c,location:b.location,delta:0})}function R(S){let L=s.location.origin!=="null"?s.location.origin:s.location.href,U=typeof S=="string"?S:dc(S);return U=U.replace(/ $/,"%20"),gt(L,`No window.location.(origin|href) available to create URL for href: ${U}`),new URL(U,L)}let b={get action(){return c},get location(){return n(s,l)},listen(S){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(oE,w),h=S,()=>{s.removeEventListener(oE,w),h=null}},createHref(S){return e(s,S)},createURL:R,encodeLocation(S){let L=R(S);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:E,replace:x,go(S){return l.go(S)}};return b}function dC(n,e,t="/"){return WP(n,e,t,!1)}function WP(n,e,t,r){let s=typeof e=="string"?Al(e):e,o=Fs(s.pathname||"/",t);if(o==null)return null;let l=hC(n);HP(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let p=nb(o);c=eb(l[h],p,r)}return c}function hC(n,e=[],t=[],r=""){let s=(o,l,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(gt(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length));let p=Ms([r,h.relativePath]),g=t.concat(h);o.children&&o.children.length>0&&(gt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),hC(o.children,e,g,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:JP(p,o.index),routesMeta:g})};return n.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,l);else for(let h of fC(o.path))s(o,l,h)}),e}function fC(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=fC(r.join("/")),c=[];return c.push(...l.map(h=>h===""?o:[o,h].join("/"))),s&&c.push(...l),c.map(h=>n.startsWith("/")&&h===""?"/":h)}function HP(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:ZP(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var qP=/^:[\w-]+$/,GP=3,KP=2,QP=1,YP=10,XP=-2,lE=n=>n==="*";function JP(n,e){let t=n.split("/"),r=t.length;return t.some(lE)&&(r+=XP),e&&(r+=KP),t.filter(s=>!lE(s)).reduce((s,o)=>s+(qP.test(o)?GP:o===""?QP:YP),r)}function ZP(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function eb(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",l=[];for(let c=0;c<r.length;++c){let h=r[c],p=c===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",w=Wh({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},g),E=h.route;if(!w&&p&&t&&!r[r.length-1].route.index&&(w=Wh({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!w)return null;Object.assign(s,w.params),l.push({params:s,pathname:Ms([o,w.pathname]),pathnameBase:ob(Ms([o,w.pathnameBase])),route:E}),w.pathnameBase!=="/"&&(o=Ms([o,w.pathnameBase]))}return l}function Wh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=tb(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((p,{paramName:g,isOptional:w},E)=>{if(g==="*"){let R=c[E]||"";l=o.slice(0,o.length-R.length).replace(/(.)\/+$/,"$1")}const x=c[E];return w&&!x?p[g]=void 0:p[g]=(x||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:n}}function tb(n,e=!1,t=!0){jr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(r.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function nb(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Fs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function rb(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Al(n):n;return{pathname:t?t.startsWith("/")?t:sb(t,e):e,search:ab(r),hash:lb(s)}}function sb(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Ym(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ib(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function jy(n){let e=ib(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Vy(n,e,t,r=!1){let s;typeof n=="string"?s=Al(n):(s={...n},gt(!s.pathname||!s.pathname.includes("?"),Ym("?","pathname","search",s)),gt(!s.pathname||!s.pathname.includes("#"),Ym("#","pathname","hash",s)),gt(!s.search||!s.search.includes("#"),Ym("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,c;if(l==null)c=t;else{let w=e.length-1;if(!r&&l.startsWith("..")){let E=l.split("/");for(;E[0]==="..";)E.shift(),w-=1;s.pathname=E.join("/")}c=w>=0?e[w]:"/"}let h=rb(s,c),p=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(p||g)&&(h.pathname+="/"),h}var Ms=n=>n.join("/").replace(/\/\/+/g,"/"),ob=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ab=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,lb=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function ub(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var pC=["POST","PUT","PATCH","DELETE"];new Set(pC);var cb=["GET",...pC];new Set(cb);var Pl=I.createContext(null);Pl.displayName="DataRouter";var Sf=I.createContext(null);Sf.displayName="DataRouterState";var mC=I.createContext({isTransitioning:!1});mC.displayName="ViewTransition";var db=I.createContext(new Map);db.displayName="Fetchers";var hb=I.createContext(null);hb.displayName="Await";var Ur=I.createContext(null);Ur.displayName="Navigation";var Ac=I.createContext(null);Ac.displayName="Location";var $r=I.createContext({outlet:null,matches:[],isDataRoute:!1});$r.displayName="Route";var Fy=I.createContext(null);Fy.displayName="RouteError";function fb(n,{relative:e}={}){gt(bl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=I.useContext(Ur),{hash:s,pathname:o,search:l}=Pc(n,{relative:e}),c=o;return t!=="/"&&(c=o==="/"?t:Ms([t,o])),r.createHref({pathname:c,search:l,hash:s})}function bl(){return I.useContext(Ac)!=null}function io(){return gt(bl(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Ac).location}var gC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function yC(n){I.useContext(Ur).static||I.useLayoutEffect(n)}function mr(){let{isDataRoute:n}=I.useContext($r);return n?Rb():pb()}function pb(){gt(bl(),"useNavigate() may be used only in the context of a <Router> component.");let n=I.useContext(Pl),{basename:e,navigator:t}=I.useContext(Ur),{matches:r}=I.useContext($r),{pathname:s}=io(),o=JSON.stringify(jy(r)),l=I.useRef(!1);return yC(()=>{l.current=!0}),I.useCallback((h,p={})=>{if(jr(l.current,gC),!l.current)return;if(typeof h=="number"){t.go(h);return}let g=Vy(h,JSON.parse(o),s,p.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Ms([e,g.pathname])),(p.replace?t.replace:t.push)(g,p.state,p)},[e,t,o,s,n])}I.createContext(null);function mb(){let{matches:n}=I.useContext($r),e=n[n.length-1];return e?e.params:{}}function Pc(n,{relative:e}={}){let{matches:t}=I.useContext($r),{pathname:r}=io(),s=JSON.stringify(jy(t));return I.useMemo(()=>Vy(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function gb(n,e){return vC(n,e)}function vC(n,e,t,r){var U;gt(bl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=I.useContext(Ur),{matches:l}=I.useContext($r),c=l[l.length-1],h=c?c.params:{},p=c?c.pathname:"/",g=c?c.pathnameBase:"/",w=c&&c.route;{let B=w&&w.path||"";_C(p,!w||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let E=io(),x;if(e){let B=typeof e=="string"?Al(e):e;gt(g==="/"||((U=B.pathname)==null?void 0:U.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${B.pathname}" was given in the \`location\` prop.`),x=B}else x=E;let R=x.pathname||"/",b=R;if(g!=="/"){let B=g.replace(/^\//,"").split("/");b="/"+R.replace(/^\//,"").split("/").slice(B.length).join("/")}let S=!o&&t&&t.matches&&t.matches.length>0?t.matches:dC(n,{pathname:b});jr(w||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),jr(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=Eb(S&&S.map(B=>Object.assign({},B,{params:Object.assign({},h,B.params),pathname:Ms([g,s.encodeLocation?s.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?g:Ms([g,s.encodeLocation?s.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),l,t,r);return e&&L?I.createElement(Ac.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},L):L}function yb(){let n=Sb(),e=ub(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:o},"ErrorBoundary")," or"," ",I.createElement("code",{style:o},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),t?I.createElement("pre",{style:s},t):null,l)}var vb=I.createElement(yb,null),_b=class extends I.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?I.createElement($r.Provider,{value:this.props.routeContext},I.createElement(Fy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function wb({routeContext:n,match:e,children:t}){let r=I.useContext(Pl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement($r.Provider,{value:n},t)}function Eb(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t==null?void 0:t.errors;if(o!=null){let h=s.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);gt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let l=!1,c=-1;if(t)for(let h=0;h<s.length;h++){let p=s[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=h),p.route.id){let{loaderData:g,errors:w}=t,E=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!w||w[p.route.id]===void 0);if(p.route.lazy||E){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((h,p,g)=>{let w,E=!1,x=null,R=null;t&&(w=o&&p.route.id?o[p.route.id]:void 0,x=p.route.errorElement||vb,l&&(c<0&&g===0?(_C("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,R=null):c===g&&(E=!0,R=p.route.hydrateFallbackElement||null)));let b=e.concat(s.slice(0,g+1)),S=()=>{let L;return w?L=x:E?L=R:p.route.Component?L=I.createElement(p.route.Component,null):p.route.element?L=p.route.element:L=h,I.createElement(wb,{match:p,routeContext:{outlet:h,matches:b,isDataRoute:t!=null},children:L})};return t&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?I.createElement(_b,{location:t.location,revalidation:t.revalidation,component:x,error:w,children:S(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):S()},null)}function Uy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Tb(n){let e=I.useContext(Pl);return gt(e,Uy(n)),e}function Ib(n){let e=I.useContext(Sf);return gt(e,Uy(n)),e}function Cb(n){let e=I.useContext($r);return gt(e,Uy(n)),e}function $y(n){let e=Cb(n),t=e.matches[e.matches.length-1];return gt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function xb(){return $y("useRouteId")}function Sb(){var r;let n=I.useContext(Fy),e=Ib("useRouteError"),t=$y("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function Rb(){let{router:n}=Tb("useNavigate"),e=$y("useNavigate"),t=I.useRef(!1);return yC(()=>{t.current=!0}),I.useCallback(async(s,o={})=>{jr(t.current,gC),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var uE={};function _C(n,e,t){!e&&!uE[n]&&(uE[n]=!0,jr(!1,t))}I.memo(Ab);function Ab({routes:n,future:e,state:t}){return vC(n,void 0,t,e)}function Pb({to:n,replace:e,state:t,relative:r}){gt(bl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=I.useContext(Ur);jr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=I.useContext($r),{pathname:l}=io(),c=mr(),h=Vy(n,jy(o),l,r==="path"),p=JSON.stringify(h);return I.useEffect(()=>{c(JSON.parse(p),{replace:e,state:t,relative:r})},[c,p,r,e,t]),null}function an(n){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bb({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1}){gt(!bl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=I.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof t=="string"&&(t=Al(t));let{pathname:h="/",search:p="",hash:g="",state:w=null,key:E="default"}=t,x=I.useMemo(()=>{let R=Fs(h,l);return R==null?null:{location:{pathname:R,search:p,hash:g,state:w,key:E},navigationType:r}},[l,h,p,g,w,E,r]);return jr(x!=null,`<Router basename="${l}"> is not able to match the URL "${h}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:I.createElement(Ur.Provider,{value:c},I.createElement(Ac.Provider,{children:e,value:x}))}function kb({children:n,location:e}){return gb(Ng(n),e)}function Ng(n,e=[]){let t=[];return I.Children.forEach(n,(r,s)=>{if(!I.isValidElement(r))return;let o=[...e,s];if(r.type===I.Fragment){t.push.apply(t,Ng(r.props.children,o));return}gt(r.type===an,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Ng(r.props.children,o)),t.push(l)}),t}var Ah="get",Ph="application/x-www-form-urlencoded";function Rf(n){return n!=null&&typeof n.tagName=="string"}function Nb(n){return Rf(n)&&n.tagName.toLowerCase()==="button"}function Db(n){return Rf(n)&&n.tagName.toLowerCase()==="form"}function Ob(n){return Rf(n)&&n.tagName.toLowerCase()==="input"}function Lb(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Mb(n,e){return n.button===0&&(!e||e==="_self")&&!Lb(n)}var fh=null;function jb(){if(fh===null)try{new FormData(document.createElement("form"),0),fh=!1}catch{fh=!0}return fh}var Vb=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xm(n){return n!=null&&!Vb.has(n)?(jr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ph}"`),null):n}function Fb(n,e){let t,r,s,o,l;if(Db(n)){let c=n.getAttribute("action");r=c?Fs(c,e):null,t=n.getAttribute("method")||Ah,s=Xm(n.getAttribute("enctype"))||Ph,o=new FormData(n)}else if(Nb(n)||Ob(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||c.getAttribute("action");if(r=h?Fs(h,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Ah,s=Xm(n.getAttribute("formenctype"))||Xm(c.getAttribute("enctype"))||Ph,o=new FormData(c,n),!jb()){let{name:p,type:g,value:w}=n;if(g==="image"){let E=p?`${p}.`:"";o.append(`${E}x`,"0"),o.append(`${E}y`,"0")}else p&&o.append(p,w)}}else{if(Rf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ah,r=null,s=Ph,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:l}}function By(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function Ub(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $b(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Bb(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await Ub(o,t);return l.links?l.links():[]}return[]}));return qb(r.flat(1).filter($b).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function cE(n,e,t,r,s,o){let l=(h,p)=>t[p]?h.route.id!==t[p].route.id:!0,c=(h,p)=>{var g;return t[p].pathname!==h.pathname||((g=t[p].route.path)==null?void 0:g.endsWith("*"))&&t[p].params["*"]!==h.params["*"]};return o==="assets"?e.filter((h,p)=>l(h,p)||c(h,p)):o==="data"?e.filter((h,p)=>{var w;let g=r.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(l(h,p)||c(h,p))return!0;if(h.route.shouldRevalidate){let E=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((w=t[0])==null?void 0:w.params)||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function zb(n,e,{includeHydrateFallback:t}={}){return Wb(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function Wb(n){return[...new Set(n)]}function Hb(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function qb(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(Hb(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function Gb(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Fs(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function wC(){let n=I.useContext(Pl);return By(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Kb(){let n=I.useContext(Sf);return By(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var zy=I.createContext(void 0);zy.displayName="FrameworkContext";function EC(){let n=I.useContext(zy);return By(n,"You must render this element inside a <HydratedRouter> element"),n}function Qb(n,e){let t=I.useContext(zy),[r,s]=I.useState(!1),[o,l]=I.useState(!1),{onFocus:c,onBlur:h,onMouseEnter:p,onMouseLeave:g,onTouchStart:w}=e,E=I.useRef(null);I.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let b=L=>{L.forEach(U=>{l(U.isIntersecting)})},S=new IntersectionObserver(b,{threshold:.5});return E.current&&S.observe(E.current),()=>{S.disconnect()}}},[n]),I.useEffect(()=>{if(r){let b=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(b)}}},[r]);let x=()=>{s(!0)},R=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,E,{}]:[o,E,{onFocus:Lu(c,x),onBlur:Lu(h,R),onMouseEnter:Lu(p,x),onMouseLeave:Lu(g,R),onTouchStart:Lu(w,x)}]:[!1,E,{}]}function Lu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Yb({page:n,...e}){let{router:t}=wC(),r=I.useMemo(()=>dC(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?I.createElement(Jb,{page:n,matches:r,...e}):null}function Xb(n){let{manifest:e,routeModules:t}=EC(),[r,s]=I.useState([]);return I.useEffect(()=>{let o=!1;return Bb(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),r}function Jb({page:n,matches:e,...t}){let r=io(),{manifest:s,routeModules:o}=EC(),{basename:l}=wC(),{loaderData:c,matches:h}=Kb(),p=I.useMemo(()=>cE(n,e,h,s,r,"data"),[n,e,h,s,r]),g=I.useMemo(()=>cE(n,e,h,s,r,"assets"),[n,e,h,s,r]),w=I.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let R=new Set,b=!1;if(e.forEach(L=>{var B;let U=s.routes[L.route.id];!U||!U.hasLoader||(!p.some(q=>q.route.id===L.route.id)&&L.route.id in c&&((B=o[L.route.id])!=null&&B.shouldRevalidate)||U.hasClientLoader?b=!0:R.add(L.route.id))}),R.size===0)return[];let S=Gb(n,l);return b&&R.size>0&&S.searchParams.set("_routes",e.filter(L=>R.has(L.route.id)).map(L=>L.route.id).join(",")),[S.pathname+S.search]},[l,c,r,s,p,e,n,o]),E=I.useMemo(()=>zb(g,s),[g,s]),x=Xb(g);return I.createElement(I.Fragment,null,w.map(R=>I.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...t})),E.map(R=>I.createElement("link",{key:R,rel:"modulepreload",href:R,...t})),x.map(({key:R,link:b})=>I.createElement("link",{key:R,...b})))}function Zb(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var TC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{TC&&(window.__reactRouterVersion="7.3.0")}catch{}function ek({basename:n,children:e,window:t}){let r=I.useRef();r.current==null&&(r.current=$P({window:t,v5Compat:!0}));let s=r.current,[o,l]=I.useState({action:s.action,location:s.location}),c=I.useCallback(h=>{I.startTransition(()=>l(h))},[l]);return I.useLayoutEffect(()=>s.listen(c),[s,c]),I.createElement(bb,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var IC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tt=I.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:c,target:h,to:p,preventScrollReset:g,viewTransition:w,...E},x){let{basename:R}=I.useContext(Ur),b=typeof p=="string"&&IC.test(p),S,L=!1;if(typeof p=="string"&&b&&(S=p,TC))try{let k=new URL(window.location.href),M=p.startsWith("//")?new URL(k.protocol+p):new URL(p),j=Fs(M.pathname,R);M.origin===k.origin&&j!=null?p=j+M.search+M.hash:L=!0}catch{jr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let U=fb(p,{relative:s}),[B,q,X]=Qb(r,E),Z=sk(p,{replace:l,state:c,target:h,preventScrollReset:g,relative:s,viewTransition:w});function N(k){e&&e(k),k.defaultPrevented||Z(k)}let P=I.createElement("a",{...E,...X,href:S||U,onClick:L||o?e:N,ref:Zb(x,q),target:h,"data-discover":!b&&t==="render"?"true":void 0});return B&&!b?I.createElement(I.Fragment,null,P,I.createElement(Yb,{page:U})):P});Tt.displayName="Link";var tk=I.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:c,children:h,...p},g){let w=Pc(l,{relative:p.relative}),E=io(),x=I.useContext(Sf),{navigator:R,basename:b}=I.useContext(Ur),S=x!=null&&uk(w)&&c===!0,L=R.encodeLocation?R.encodeLocation(w).pathname:w.pathname,U=E.pathname,B=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(U=U.toLowerCase(),B=B?B.toLowerCase():null,L=L.toLowerCase()),B&&b&&(B=Fs(B,b)||B);const q=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let X=U===L||!s&&U.startsWith(L)&&U.charAt(q)==="/",Z=B!=null&&(B===L||!s&&B.startsWith(L)&&B.charAt(L.length)==="/"),N={isActive:X,isPending:Z,isTransitioning:S},P=X?e:void 0,k;typeof r=="function"?k=r(N):k=[r,X?"active":null,Z?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let M=typeof o=="function"?o(N):o;return I.createElement(Tt,{...p,"aria-current":P,className:k,ref:g,style:M,to:l,viewTransition:c},typeof h=="function"?h(N):h)});tk.displayName="NavLink";var nk=I.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:l=Ah,action:c,onSubmit:h,relative:p,preventScrollReset:g,viewTransition:w,...E},x)=>{let R=ak(),b=lk(c,{relative:p}),S=l.toLowerCase()==="get"?"get":"post",L=typeof c=="string"&&IC.test(c),U=B=>{if(h&&h(B),B.defaultPrevented)return;B.preventDefault();let q=B.nativeEvent.submitter,X=(q==null?void 0:q.getAttribute("formmethod"))||l;R(q||B.currentTarget,{fetcherKey:e,method:X,navigate:t,replace:s,state:o,relative:p,preventScrollReset:g,viewTransition:w})};return I.createElement("form",{ref:x,method:S,action:b,onSubmit:r?h:U,...E,"data-discover":!L&&n==="render"?"true":void 0})});nk.displayName="Form";function rk(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function CC(n){let e=I.useContext(Pl);return gt(e,rk(n)),e}function sk(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:l}={}){let c=mr(),h=io(),p=Pc(n,{relative:o});return I.useCallback(g=>{if(Mb(g,e)){g.preventDefault();let w=t!==void 0?t:dc(h)===dc(p);c(n,{replace:w,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[h,c,p,t,r,e,n,s,o,l])}var ik=0,ok=()=>`__${String(++ik)}__`;function ak(){let{router:n}=CC("useSubmit"),{basename:e}=I.useContext(Ur),t=xb();return I.useCallback(async(r,s={})=>{let{action:o,method:l,encType:c,formData:h,body:p}=Fb(r,e);if(s.navigate===!1){let g=s.fetcherKey||ok();await n.fetch(g,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:h,body:p,formMethod:s.method||l,formEncType:s.encType||c,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:h,body:p,formMethod:s.method||l,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function lk(n,{relative:e}={}){let{basename:t}=I.useContext(Ur),r=I.useContext($r);gt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...Pc(n||".",{relative:e})},l=io();if(n==null){o.search=l.search;let c=new URLSearchParams(o.search),h=c.getAll("index");if(h.some(g=>g==="")){c.delete("index"),h.filter(w=>w).forEach(w=>c.append("index",w));let g=c.toString();o.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Ms([t,o.pathname])),dc(o)}function uk(n,e={}){let t=I.useContext(mC);gt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=CC("useViewTransitionState"),s=Pc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Fs(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=Fs(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Wh(s.pathname,l)!=null||Wh(s.pathname,o)!=null}new TextEncoder;var Wy=cC();const ck=Rc(Wy),dk=()=>{};var dE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce=function(n,e){if(!n)throw kl(e)},kl=function(n){return new Error("Firebase Database ("+xC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},hk=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],c=n[t++],h=((s&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Hy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,c=l?n[s+1]:0,h=s+2<n.length,p=h?n[s+2]:0,g=o>>2,w=(o&3)<<4|c>>4;let E=(c&15)<<2|p>>6,x=p&63;h||(x=64,l||(E=64)),r.push(t[g],t[w],t[E],t[x])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(SC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):hk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const w=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||c==null||p==null||w==null)throw new fk;const E=o<<2|c>>4;if(r.push(E),p!==64){const x=c<<4&240|p>>2;if(r.push(x),w!==64){const R=p<<6&192|w;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class fk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RC=function(n){const e=SC(n);return Hy.encodeByteArray(e,!0)},Hh=function(n){return RC(n).replace(/\./g,"")},qh=function(n){try{return Hy.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(n){return AC(void 0,n)}function AC(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!mk(t)||(n[t]=AC(n[t],e[t]));return n}function mk(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=()=>gk().__FIREBASE_DEFAULTS__,vk=()=>{if(typeof process>"u"||typeof dE>"u")return;const n=dE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},_k=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&qh(n[1]);return e&&JSON.parse(e)},Af=()=>{try{return dk()||yk()||vk()||_k()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},PC=n=>{var e,t;return(t=(e=Af())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},qy=n=>{const e=PC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},bC=()=>{var n;return(n=Af())===null||n===void 0?void 0:n.config},kC=n=>{var e;return(e=Af())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Hh(JSON.stringify(t)),Hh(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qy(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function wk(){var n;const e=(n=Af())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ek(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Tk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function NC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ik(){const n=mn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Ck(){return xC.NODE_ADMIN===!0}function xk(){return!wk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Sk(){try{return typeof indexedDB=="object"}catch{return!1}}function Rk(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak="FirebaseError";class ds extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Ak,Object.setPrototypeOf(this,ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bc.prototype.create)}}class bc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?Pk(o,r):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new ds(s,c,r)}}function Pk(n,e){return n.replace(bk,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const bk=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(n){return JSON.parse(n)}function Jt(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=function(n){let e={},t={},r={},s="";try{const o=n.split(".");e=hc(qh(o[0])||""),t=hc(qh(o[1])||""),s=o[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:s}},kk=function(n){const e=DC(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},Nk=function(n){const e=DC(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function hl(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Dg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Gh(n,e,t){const r={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=e.call(t,n[s],s,n));return r}function qi(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],l=e[s];if(hE(o)&&hE(l)){if(!qi(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function hE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Hu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if(typeof e=="string")for(let w=0;w<16;w++)r[w]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let w=0;w<16;w++)r[w]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let w=16;w<80;w++){const E=r[w-3]^r[w-8]^r[w-14]^r[w-16];r[w]=(E<<1|E>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],l=this.chain_[2],c=this.chain_[3],h=this.chain_[4],p,g;for(let w=0;w<80;w++){w<40?w<20?(p=c^o&(l^c),g=1518500249):(p=o^l^c,g=1859775393):w<60?(p=o&l|c&(o|l),g=2400959708):(p=o^l^c,g=3395469782);const E=(s<<5|s>>>27)+p+h+g+r[w]&4294967295;h=c,c=l,l=(o<<30|o>>>2)&4294967295,o=s,s=E}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const r=t-this.blockSize;let s=0;const o=this.buf_;let l=this.inbuf_;for(;s<t;){if(l===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(o[l]=e.charCodeAt(s),++l,++s,l===this.blockSize){this.compress_(o),l=0;break}}else for(;s<t;)if(o[l]=e[s],++l,++s,l===this.blockSize){this.compress_(o),l=0;break}}this.inbuf_=l,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[s]>>o&255,++r;return e}}function Ok(n,e){const t=new Lk(n,e);return t.subscribe.bind(t)}class Lk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Mk(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Jm),s.error===void 0&&(s.error=Jm),s.complete===void 0&&(s.complete=Jm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Jm(){}function jk(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);if(s>=55296&&s<=56319){const o=s-55296;r++,ce(r<n.length,"Surrogate pair missing trail surrogate.");const l=n.charCodeAt(r)-56320;s=65536+(o<<10)+l}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Pf=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(n){return n&&n._delegate?n._delegate:n}class Us{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fk=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Gy;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($k(e))try{this.getOrInitializeService({instanceIdentifier:Bo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Bo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bo){return this.instances.has(e)}getOptions(e=Bo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Uk(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bo){return this.component?this.component.multipleInstances?e:Bo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Uk(n){return n===Bo?void 0:n}function $k(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Fk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const zk={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},Wk=Me.INFO,Hk={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},qk=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=Hk[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bf{constructor(e){this.name=e,this._logLevel=Wk,this._logHandler=qk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const Gk=(n,e)=>e.some(t=>n instanceof t);let fE,pE;function Kk(){return fE||(fE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qk(){return pE||(pE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OC=new WeakMap,Og=new WeakMap,LC=new WeakMap,Zm=new WeakMap,Yy=new WeakMap;function Yk(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(Fi(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&OC.set(t,n)}).catch(()=>{}),Yy.set(e,n),e}function Xk(n){if(Og.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});Og.set(n,e)}let Lg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Og.get(n);if(e==="objectStoreNames")return n.objectStoreNames||LC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Jk(n){Lg=n(Lg)}function Zk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(eg(this),e,...t);return LC.set(r,e.sort?e.sort():[e]),Fi(r)}:Qk().includes(n)?function(...e){return n.apply(eg(this),e),Fi(OC.get(this))}:function(...e){return Fi(n.apply(eg(this),e))}}function eN(n){return typeof n=="function"?Zk(n):(n instanceof IDBTransaction&&Xk(n),Gk(n,Kk())?new Proxy(n,Lg):n)}function Fi(n){if(n instanceof IDBRequest)return Yk(n);if(Zm.has(n))return Zm.get(n);const e=eN(n);return e!==n&&(Zm.set(n,e),Yy.set(e,n)),e}const eg=n=>Yy.get(n);function tN(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),c=Fi(l);return r&&l.addEventListener("upgradeneeded",h=>{r(Fi(l.result),h.oldVersion,h.newVersion,Fi(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),s&&h.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}const nN=["get","getKey","getAll","getAllKeys","count"],rN=["put","add","delete","clear"],tg=new Map;function mE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tg.get(e))return tg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=rN.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||nN.includes(t)))return;const o=async function(l,...c){const h=this.transaction(l,s?"readwrite":"readonly");let p=h.store;return r&&(p=p.index(c.shift())),(await Promise.all([p[t](...c),s&&h.done]))[0]};return tg.set(e,o),o}Jk(n=>({...n,get:(e,t,r)=>mE(e,t)||n.get(e,t,r),has:(e,t)=>!!mE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(iN(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function iN(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mg="@firebase/app",gE="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new bf("@firebase/app"),oN="@firebase/app-compat",aN="@firebase/analytics-compat",lN="@firebase/analytics",uN="@firebase/app-check-compat",cN="@firebase/app-check",dN="@firebase/auth",hN="@firebase/auth-compat",fN="@firebase/database",pN="@firebase/data-connect",mN="@firebase/database-compat",gN="@firebase/functions",yN="@firebase/functions-compat",vN="@firebase/installations",_N="@firebase/installations-compat",wN="@firebase/messaging",EN="@firebase/messaging-compat",TN="@firebase/performance",IN="@firebase/performance-compat",CN="@firebase/remote-config",xN="@firebase/remote-config-compat",SN="@firebase/storage",RN="@firebase/storage-compat",AN="@firebase/firestore",PN="@firebase/vertexai",bN="@firebase/firestore-compat",kN="firebase",NN="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="[DEFAULT]",DN={[Mg]:"fire-core",[oN]:"fire-core-compat",[lN]:"fire-analytics",[aN]:"fire-analytics-compat",[cN]:"fire-app-check",[uN]:"fire-app-check-compat",[dN]:"fire-auth",[hN]:"fire-auth-compat",[fN]:"fire-rtdb",[pN]:"fire-data-connect",[mN]:"fire-rtdb-compat",[gN]:"fire-fn",[yN]:"fire-fn-compat",[vN]:"fire-iid",[_N]:"fire-iid-compat",[wN]:"fire-fcm",[EN]:"fire-fcm-compat",[TN]:"fire-perf",[IN]:"fire-perf-compat",[CN]:"fire-rc",[xN]:"fire-rc-compat",[SN]:"fire-gcs",[RN]:"fire-gcs-compat",[AN]:"fire-fst",[bN]:"fire-fst-compat",[PN]:"fire-vertex","fire-js":"fire-js",[kN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh=new Map,ON=new Map,Vg=new Map;function yE(n,e){try{n.container.addComponent(e)}catch(t){$s.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Gi(n){const e=n.name;if(Vg.has(e))return $s.debug(`There were multiple attempts to register component ${e}.`),!1;Vg.set(e,n);for(const t of Kh.values())yE(t,n);for(const t of ON.values())yE(t,n);return!0}function kc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function hn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ui=new bc("app","Firebase",LN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=NN;function MC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:jg,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ui.create("bad-app-name",{appName:String(s)});if(t||(t=bC()),!t)throw Ui.create("no-options");const o=Kh.get(s);if(o){if(qi(t,o.options)&&qi(r,o.config))return o;throw Ui.create("duplicate-app",{appName:s})}const l=new Bk(s);for(const h of Vg.values())l.addComponent(h);const c=new MN(t,r,l);return Kh.set(s,c),c}function kf(n=jg){const e=Kh.get(n);if(!e&&n===jg&&bC())return MC();if(!e)throw Ui.create("no-app",{appName:n});return e}function ur(n,e,t){var r;let s=(r=DN[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$s.warn(c.join(" "));return}Gi(new Us(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN="firebase-heartbeat-database",VN=1,fc="firebase-heartbeat-store";let ng=null;function jC(){return ng||(ng=tN(jN,VN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ui.create("idb-open",{originalErrorMessage:n.message})})),ng}async function FN(n){try{const t=(await jC()).transaction(fc),r=await t.objectStore(fc).get(VC(n));return await t.done,r}catch(e){if(e instanceof ds)$s.warn(e.message);else{const t=Ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$s.warn(t.message)}}}async function vE(n,e){try{const r=(await jC()).transaction(fc,"readwrite");await r.objectStore(fc).put(e,VC(n)),await r.done}catch(t){if(t instanceof ds)$s.warn(t.message);else{const r=Ui.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});$s.warn(r.message)}}}function VC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=1024,$N=30;class BN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new WN(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=_E();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>$N){const l=HN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){$s.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=_E(),{heartbeatsToSend:r,unsentEntries:s}=zN(this._heartbeatsCache.heartbeats),o=Hh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return $s.warn(t),""}}}function _E(){return new Date().toISOString().substring(0,10)}function zN(n,e=UN){const t=[];let r=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),wE(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),wE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class WN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sk()?Rk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await FN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return vE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return vE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function wE(n){return Hh(JSON.stringify({version:2,heartbeats:n})).length}function HN(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(n){Gi(new Us("platform-logger",e=>new sN(e),"PRIVATE")),Gi(new Us("heartbeat",e=>new BN(e),"PRIVATE")),ur(Mg,gE,n),ur(Mg,gE,"esm2017"),ur("fire-js","")}qN("");function Xy(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function FC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GN=FC,UC=new bc("auth","Firebase",FC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=new bf("@firebase/auth");function KN(n,...e){Qh.logLevel<=Me.WARN&&Qh.warn(`Auth (${oo}): ${n}`,...e)}function bh(n,...e){Qh.logLevel<=Me.ERROR&&Qh.error(`Auth (${oo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(n,...e){throw Zy(n,...e)}function Lr(n,...e){return Zy(n,...e)}function Jy(n,e,t){const r=Object.assign(Object.assign({},GN()),{[e]:t});return new bc("auth","Firebase",r).create(e,{appName:n.name})}function ss(n){return Jy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function QN(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&dr(n,"argument-error"),Jy(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Zy(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return UC.create(n,...e)}function Ce(n,e,...t){if(!n)throw Zy(e,...t)}function Ns(n){const e="INTERNAL ASSERTION FAILED: "+n;throw bh(e),new Error(e)}function Bs(n,e){n||Ns(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function YN(){return EE()==="http:"||EE()==="https:"}function EE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YN()||Tk()||"connection"in navigator)?navigator.onLine:!0}function JN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Bs(t>e,"Short delay should be less than long delay!"),this.isMobile=Qy()||NC()}get(){return XN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(n,e){Bs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=new Nc(3e4,6e4);function ao(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function hs(n,e,t,r,s={}){return BC(n,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=Nl(Object.assign({key:n.config.apiKey},l)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:h},o);return Ek()||(p.referrerPolicy="no-referrer"),$C.fetch()(zC(n,n.config.apiHost,t,c),p)})}async function BC(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},ZN),e);try{const s=new nD(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw ph(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,p]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw ph(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw ph(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw ph(n,"user-disabled",l);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Jy(n,g,p);dr(n,g)}}catch(s){if(s instanceof ds)throw s;dr(n,"network-request-failed",{message:String(s)})}}async function Dc(n,e,t,r,s={}){const o=await hs(n,e,t,r,s);return"mfaPendingCredential"in o&&dr(n,"multi-factor-auth-required",{_serverResponse:o}),o}function zC(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?ev(n.config,s):`${n.config.apiScheme}://${s}`}function tD(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Lr(this.auth,"network-request-failed")),eD.get())})}}function ph(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Lr(n,e,r);return s.customData._tokenResponse=t,s}function TE(n){return n!==void 0&&n.enterprise!==void 0}class rD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return tD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function sD(n,e){return hs(n,"GET","/v2/recaptchaConfig",ao(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iD(n,e){return hs(n,"POST","/v1/accounts:delete",e)}async function WC(n,e){return hs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oD(n,e=!1){const t=ot(n),r=await t.getIdToken(e),s=tv(r);Ce(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Yu(rg(s.auth_time)),issuedAtTime:Yu(rg(s.iat)),expirationTime:Yu(rg(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function rg(n){return Number(n)*1e3}function tv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return bh("JWT malformed, contained fewer than 3 sections"),null;try{const s=qh(t);return s?JSON.parse(s):(bh("Failed to decode base64 JWT payload"),null)}catch(s){return bh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function IE(n){const e=tv(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ds&&aD(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function aD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yu(this.lastLoginAt),this.creationTime=Yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yh(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Qo(n,WC(t,{idToken:r}));Ce(s==null?void 0:s.users.length,t,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?HC(o.providerUserInfo):[],c=cD(n.providerData,l),h=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),g=h?p:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Ug(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,w)}async function uD(n){const e=ot(n);await Yh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cD(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function HC(n){return n.map(e=>{var{providerId:t}=e,r=Xy(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(n,e){const t=await BC(n,{},async()=>{const r=Nl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=zC(n,s,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",$C.fetch()(l,{method:"POST",headers:c,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function hD(n,e){return hs(n,"POST","/v2/accounts:revokeToken",ao(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):IE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=IE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await dD(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,l=new sl;return r&&(Ce(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Ce(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Ce(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new sl,this.toJSON())}_performRefresh(){return Ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ds{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,o=Xy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ug(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Qo(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return oD(this,e)}reload(){return uD(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ds(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Yh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hn(this.auth.app))return Promise.reject(ss(this.auth));const e=await this.getIdToken();return await Qo(this,iD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,o,l,c,h,p,g;const w=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(s=t.email)!==null&&s!==void 0?s:void 0,x=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,R=(l=t.photoURL)!==null&&l!==void 0?l:void 0,b=(c=t.tenantId)!==null&&c!==void 0?c:void 0,S=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,L=(p=t.createdAt)!==null&&p!==void 0?p:void 0,U=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:B,emailVerified:q,isAnonymous:X,providerData:Z,stsTokenManager:N}=t;Ce(B&&N,e,"internal-error");const P=sl.fromJSON(this.name,N);Ce(typeof B=="string",e,"internal-error"),Pi(w,e.name),Pi(E,e.name),Ce(typeof q=="boolean",e,"internal-error"),Ce(typeof X=="boolean",e,"internal-error"),Pi(x,e.name),Pi(R,e.name),Pi(b,e.name),Pi(S,e.name),Pi(L,e.name),Pi(U,e.name);const k=new Ds({uid:B,auth:e,email:E,emailVerified:q,displayName:w,isAnonymous:X,photoURL:R,phoneNumber:x,tenantId:b,stsTokenManager:P,createdAt:L,lastLoginAt:U});return Z&&Array.isArray(Z)&&(k.providerData=Z.map(M=>Object.assign({},M))),S&&(k._redirectEventId=S),k}static async _fromIdTokenResponse(e,t,r=!1){const s=new sl;s.updateFromServerResponse(t);const o=new Ds({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Yh(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Ce(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?HC(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),c=new sl;c.updateFromIdToken(r);const h=new Ds({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Ug(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,p),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE=new Map;function Os(n){Bs(n instanceof Function,"Expected a class definition");let e=CE.get(n);return e?(Bs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,CE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qC.type="NONE";const xE=qC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(n,e,t){return`firebase:${n}:${e}:${t}`}class il{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=kh(this.userKey,s.apiKey,o),this.fullPersistenceKey=kh("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ds._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new il(Os(xE),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||Os(xE);const l=kh(r,e.config.apiKey,e.name);let c=null;for(const p of t)try{const g=await p._get(l);if(g){const w=Ds._fromJSON(e,g);p!==o&&(c=w),o=p;break}}catch{}const h=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new il(o,e,r):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new il(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(GC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(JC(e))return"Blackberry";if(ZC(e))return"Webos";if(KC(e))return"Safari";if((e.includes("chrome/")||QC(e))&&!e.includes("edge/"))return"Chrome";if(XC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function GC(n=mn()){return/firefox\//i.test(n)}function KC(n=mn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QC(n=mn()){return/crios\//i.test(n)}function YC(n=mn()){return/iemobile/i.test(n)}function XC(n=mn()){return/android/i.test(n)}function JC(n=mn()){return/blackberry/i.test(n)}function ZC(n=mn()){return/webos/i.test(n)}function nv(n=mn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function fD(n=mn()){var e;return nv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function pD(){return Ik()&&document.documentMode===10}function ex(n=mn()){return nv(n)||XC(n)||ZC(n)||JC(n)||/windows phone/i.test(n)||YC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(n,e=[]){let t;switch(n){case"Browser":t=SE(mn());break;case"Worker":t=`${SE(mn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${oo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gD(n,e={}){return hs(n,"GET","/v2/passwordPolicy",ao(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=6;class vD{constructor(e){var t,r,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:yD,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,o,l,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(s=h.containsLowercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new RE(this),this.idTokenSubscription=new RE(this),this.beforeStateQueue=new mD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Os(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await il.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await WC(this,{idToken:e}),r=await Ds._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(hn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=s==null?void 0:s._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&(h!=null&&h.user)&&(s=h.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Yh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hn(this.app))return Promise.reject(ss(this));const t=e?ot(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hn(this.app)?Promise.reject(ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hn(this.app)?Promise.reject(ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Os(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gD(this),t=new vD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await hD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Os(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await il.create(this,[Os(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,s);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&KN(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function lo(n){return ot(n)}class RE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ok(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wD(n){Nf=n}function nx(n){return Nf.loadJS(n)}function ED(){return Nf.recaptchaEnterpriseScript}function TD(){return Nf.gapiScript}function ID(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class CD{constructor(){this.enterprise=new xD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class xD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const SD="recaptcha-enterprise",rx="NO_RECAPTCHA";class RD{constructor(e){this.type=SD,this.auth=lo(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{sD(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const p=new rD(h);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(h=>{c(h)})})}function s(o,l,c){const h=window.grecaptcha;TE(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(rx)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new CD().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!t&&TE(window.grecaptcha))s(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=ED();h.length!==0&&(h+=c),nx(h).then(()=>{s(c,o,l)}).catch(p=>{l(p)})}}).catch(c=>{l(c)})})}}async function AE(n,e,t,r=!1,s=!1){const o=new RD(n);let l;if(s)l=rx;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const c=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,p=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function $g(n,e,t,r,s){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await AE(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await AE(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(n,e){const t=kc(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(qi(o,e??{}))return s;dr(s,"already-initialized")}return t.initialize({options:e})}function PD(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Os);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function bD(n,e,t){const r=lo(n);Ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=sx(e),{host:l,port:c}=kD(e),h=c===null?"":`:${c}`,p={url:`${o}//${l}${h}/`},g=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ce(qi(p,r.config.emulator)&&qi(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,ND()}function sx(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function kD(n){const e=sx(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:PE(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:PE(l)}}}function PE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ND(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ns("not implemented")}_getIdTokenResponse(e){return Ns("not implemented")}_linkToIdToken(e,t){return Ns("not implemented")}_getReauthenticationResolver(e){return Ns("not implemented")}}async function DD(n,e){return hs(n,"POST","/v1/accounts:update",e)}async function OD(n,e){return hs(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LD(n,e){return Dc(n,"POST","/v1/accounts:signInWithPassword",ao(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MD(n,e){return Dc(n,"POST","/v1/accounts:signInWithEmailLink",ao(n,e))}async function jD(n,e){return Dc(n,"POST","/v1/accounts:signInWithEmailLink",ao(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends rv{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new pc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new pc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $g(e,t,"signInWithPassword",LD);case"emailLink":return MD(e,{email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $g(e,r,"signUpPassword",OD);case"emailLink":return jD(e,{idToken:t,email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(n,e){return Dc(n,"POST","/v1/accounts:signInWithIdp",ao(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD="http://localhost";class Yo extends rv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Yo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,o=Xy(t,["providerId","signInMethod"]);if(!r||!s)return null;const l=new Yo(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return ol(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ol(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ol(e,t)}buildRequest(){const e={requestUri:VD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UD(n){const e=Wu(Hu(n)).link,t=e?Wu(Hu(e)).deep_link_id:null,r=Wu(Hu(n)).deep_link_id;return(r?Wu(Hu(r)).link:null)||r||t||e||n}class sv{constructor(e){var t,r,s,o,l,c;const h=Wu(Hu(e)),p=(t=h.apiKey)!==null&&t!==void 0?t:null,g=(r=h.oobCode)!==null&&r!==void 0?r:null,w=FD((s=h.mode)!==null&&s!==void 0?s:null);Ce(p&&g&&w,"argument-error"),this.apiKey=p,this.operation=w,this.code=g,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=h.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(c=h.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=UD(e);try{return new sv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(){this.providerId=Dl.PROVIDER_ID}static credential(e,t){return pc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=sv.parseLink(t);return Ce(r,"argument-error"),pc._fromEmailAndCode(e,r.code,r.tenantId)}}Dl.PROVIDER_ID="password";Dl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Dl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends iv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends Oc{constructor(){super("facebook.com")}static credential(e){return Yo._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Di.credential(e.oauthAccessToken)}catch{return null}}}Di.FACEBOOK_SIGN_IN_METHOD="facebook.com";Di.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Oc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Yo._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ts.credential(t,r)}catch{return null}}}ts.GOOGLE_SIGN_IN_METHOD="google.com";ts.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends Oc{constructor(){super("github.com")}static credential(e){return Yo._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oi.credential(e.oauthAccessToken)}catch{return null}}}Oi.GITHUB_SIGN_IN_METHOD="github.com";Oi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Oc{constructor(){super("twitter.com")}static credential(e,t){return Yo._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Li.credential(t,r)}catch{return null}}}Li.TWITTER_SIGN_IN_METHOD="twitter.com";Li.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $D(n,e){return Dc(n,"POST","/v1/accounts:signUp",ao(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await Ds._fromIdTokenResponse(e,r,s),l=bE(r);return new Xo({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=bE(r);return new Xo({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function bE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh extends ds{constructor(e,t,r,s){var o;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Xh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Xh(e,t,r,s)}}function ix(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Xh._fromErrorAndOperation(n,o,e,r):o})}async function BD(n,e,t=!1){const r=await Qo(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Xo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zD(n,e,t=!1){const{auth:r}=n;if(hn(r.app))return Promise.reject(ss(r));const s="reauthenticate";try{const o=await Qo(n,ix(r,s,e,n),t);Ce(o.idToken,r,"internal-error");const l=tv(o.idToken);Ce(l,r,"internal-error");const{sub:c}=l;return Ce(n.uid===c,r,"user-mismatch"),Xo._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&dr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ox(n,e,t=!1){if(hn(n.app))return Promise.reject(ss(n));const r="signIn",s=await ix(n,r,e),o=await Xo._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function WD(n,e){return ox(lo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ax(n){const e=lo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function HD(n,e,t){if(hn(n.app))return Promise.reject(ss(n));const r=lo(n),l=await $g(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$D).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&ax(n),h}),c=await Xo._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function qD(n,e,t){return hn(n.app)?Promise.reject(ss(n)):WD(ot(n),Dl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ax(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(n,e){return hs(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bg(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=ot(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await Qo(r,GD(r.auth,o));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const c=r.providerData.find(({providerId:h})=>h==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function KD(n,e){const t=ot(n);return hn(t.auth.app)?Promise.reject(ss(t.auth)):QD(t,e)}async function QD(n,e,t){const{auth:r}=n,o={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(o.email=e);const l=await Qo(n,DD(r,o));await n._updateTokensIfNecessary(l,!0)}function YD(n,e,t,r){return ot(n).onIdTokenChanged(e,t,r)}function XD(n,e,t){return ot(n).beforeAuthStateChanged(e,t)}function lx(n,e,t,r){return ot(n).onAuthStateChanged(e,t,r)}const Jh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jh,"1"),this.storage.removeItem(Jh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=1e3,ZD=10;class cx extends ux{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ex(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);pD()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ZD):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},JD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}cx.type="LOCAL";const eO=cx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx extends ux{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}dx.type="SESSION";const hx=dx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Df(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(l).map(async p=>p(t.origin,o)),h=await tO(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Df.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const p=ov("",20);s.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(w){const E=w;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(E.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(){return window}function rO(n){is().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(){return typeof is().WorkerGlobalScope<"u"&&typeof is().importScripts=="function"}async function sO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iO(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function oO(){return fx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="firebaseLocalStorageDb",aO=1,Zh="firebaseLocalStorage",mx="fbase_key";class Lc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Of(n,e){return n.transaction([Zh],e?"readwrite":"readonly").objectStore(Zh)}function lO(){const n=indexedDB.deleteDatabase(px);return new Lc(n).toPromise()}function zg(){const n=indexedDB.open(px,aO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Zh,{keyPath:mx})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Zh)?e(r):(r.close(),await lO(),e(await zg()))})})}async function kE(n,e,t){const r=Of(n,!0).put({[mx]:e,value:t});return new Lc(r).toPromise()}async function uO(n,e){const t=Of(n,!1).get(e),r=await new Lc(t).toPromise();return r===void 0?null:r.value}function NE(n,e){const t=Of(n,!0).delete(e);return new Lc(t).toPromise()}const cO=800,dO=3;class gx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>dO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Df._getInstance(oO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await sO(),!this.activeServiceWorker)return;this.sender=new nO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zg();return await kE(e,Jh,"1"),await NE(e,Jh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>kE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>uO(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>NE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Of(s,!1).getAll();return new Lc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gx.type="LOCAL";const hO=gx;new Nc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(n,e){return e?Os(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av extends rv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ol(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ol(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ol(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function fO(n){return ox(n.auth,new av(n),n.bypassAuthState)}function pO(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),zD(t,new av(n),n.bypassAuthState)}async function mO(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),BD(t,new av(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fO;case"linkViaPopup":case"linkViaRedirect":return mO;case"reauthViaPopup":case"reauthViaRedirect":return pO;default:dr(this.auth,"internal-error")}}resolve(e){Bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO=new Nc(2e3,1e4);async function yO(n,e,t){if(hn(n.app))return Promise.reject(Lr(n,"operation-not-supported-in-this-environment"));const r=lo(n);QN(n,e,iv);const s=yx(r,t);return new Wo(r,"signInViaPopup",e,s).executeNotNull()}class Wo extends vx{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Wo.currentPopupAction&&Wo.currentPopupAction.cancel(),Wo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Bs(this.filter.length===1,"Popup operations only handle one event");const e=ov();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gO.get())};e()}}Wo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO="pendingRedirect",Nh=new Map;class _O extends vx{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Nh.get(this.auth._key());if(!e){try{const r=await wO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Nh.set(this.auth._key(),e)}return this.bypassAuthState||Nh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wO(n,e){const t=IO(e),r=TO(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function EO(n,e){Nh.set(n._key(),e)}function TO(n){return Os(n._redirectPersistence)}function IO(n){return kh(vO,n.config.apiKey,n.name)}async function CO(n,e,t=!1){if(hn(n.app))return Promise.reject(ss(n));const r=lo(n),s=yx(r,e),l=await new _O(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=10*60*1e3;class SO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!RO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!_x(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Lr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xO&&this.cachedEventUids.clear(),this.cachedEventUids.has(DE(e))}saveEventToCache(e){this.cachedEventUids.add(DE(e)),this.lastProcessedEventTime=Date.now()}}function DE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function _x({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function RO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _x(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AO(n,e={}){return hs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bO=/^https?/;async function kO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await AO(n);for(const t of e)try{if(NO(t))return}catch{}dr(n,"unauthorized-domain")}function NO(n){const e=Fg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!bO.test(t))return!1;if(PO.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=new Nc(3e4,6e4);function OE(){const n=is().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function OO(n){return new Promise((e,t)=>{var r,s,o;function l(){OE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{OE(),t(Lr(n,"network-request-failed"))},timeout:DO.get()})}if(!((s=(r=is().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=is().gapi)===null||o===void 0)&&o.load)l();else{const c=ID("iframefcb");return is()[c]=()=>{gapi.load?l():t(Lr(n,"network-request-failed"))},nx(`${TD()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw Dh=null,e})}let Dh=null;function LO(n){return Dh=Dh||OO(n),Dh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=new Nc(5e3,15e3),jO="__/auth/iframe",VO="emulator/auth/iframe",FO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $O(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ev(e,VO):`https://${n.config.authDomain}/${jO}`,r={apiKey:e.apiKey,appName:n.name,v:oo},s=UO.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Nl(r).slice(1)}`}async function BO(n){const e=await LO(n),t=is().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:$O(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FO,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Lr(n,"network-request-failed"),c=is().setTimeout(()=>{o(l)},MO.get());function h(){is().clearTimeout(c),s(r)}r.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WO=500,HO=600,qO="_blank",GO="http://localhost";class LE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KO(n,e,t,r=WO,s=HO){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h=Object.assign(Object.assign({},zO),{width:r.toString(),height:s.toString(),top:o,left:l}),p=mn().toLowerCase();t&&(c=QC(p)?qO:t),GC(p)&&(e=e||GO,h.scrollbars="yes");const g=Object.entries(h).reduce((E,[x,R])=>`${E}${x}=${R},`,"");if(fD(p)&&c!=="_self")return QO(e||"",c),new LE(null);const w=window.open(e||"",c,g);Ce(w,n,"popup-blocked");try{w.focus()}catch{}return new LE(w)}function QO(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO="__/auth/handler",XO="emulator/auth/handler",JO=encodeURIComponent("fac");async function ME(n,e,t,r,s,o){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:oo,eventId:s};if(e instanceof iv){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",Dg(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,w]of Object.entries({}))l[g]=w}if(e instanceof Oc){const g=e.getScopes().filter(w=>w!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const h=await n._getAppCheckToken(),p=h?`#${JO}=${encodeURIComponent(h)}`:"";return`${ZO(n)}?${Nl(c).slice(1)}${p}`}function ZO({config:n}){return n.emulator?ev(n,XO):`https://${n.authDomain}/${YO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="webStorageSupport";class eL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hx,this._completeRedirectFn=CO,this._overrideRedirectResult=EO}async _openPopup(e,t,r,s){var o;Bs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await ME(e,t,r,Fg(),s);return KO(e,l,ov())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await ME(e,t,r,Fg(),s);return rO(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(Bs(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await BO(e),r=new SO(e);return t.register("authEvent",s=>(Ce(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(sg,{type:sg},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[sg];l!==void 0&&t(!!l),dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=kO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ex()||KC()||nv()}}const tL=eL;var jE="@firebase/auth",VE="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sL(n){Gi(new Us("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Ce(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tx(n)},p=new _D(r,s,o,h);return PD(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Gi(new Us("auth-internal",e=>{const t=lo(e.getProvider("auth").getImmediate());return(r=>new nL(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ur(jE,VE,rL(n)),ur(jE,VE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=5*60,oL=kC("authIdTokenMaxAge")||iL;let FE=null;const aL=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>oL)return;const s=t==null?void 0:t.token;FE!==s&&(FE=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Lf(n=kf()){const e=kc(n,"auth");if(e.isInitialized())return e.getImmediate();const t=AD(n,{popupRedirectResolver:tL,persistence:[hO,eO,hx]}),r=kC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=aL(o.toString());XD(t,l,()=>l(t.currentUser)),YD(t,c=>l(c))}}const s=PC("auth");return s&&bD(t,`http://${s}`),t}function lL(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}wD({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=Lr("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",lL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sL("Browser");var uL="firebase",cL="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ur(uL,cL,"app");var UE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $i,wx;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,P){function k(){}k.prototype=P.prototype,N.D=P.prototype,N.prototype=new k,N.prototype.constructor=N,N.C=function(M,j,V){for(var D=Array(arguments.length-2),le=2;le<arguments.length;le++)D[le-2]=arguments[le];return P.prototype[j].apply(M,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,P,k){k||(k=0);var M=Array(16);if(typeof P=="string")for(var j=0;16>j;++j)M[j]=P.charCodeAt(k++)|P.charCodeAt(k++)<<8|P.charCodeAt(k++)<<16|P.charCodeAt(k++)<<24;else for(j=0;16>j;++j)M[j]=P[k++]|P[k++]<<8|P[k++]<<16|P[k++]<<24;P=N.g[0],k=N.g[1],j=N.g[2];var V=N.g[3],D=P+(V^k&(j^V))+M[0]+3614090360&4294967295;P=k+(D<<7&4294967295|D>>>25),D=V+(j^P&(k^j))+M[1]+3905402710&4294967295,V=P+(D<<12&4294967295|D>>>20),D=j+(k^V&(P^k))+M[2]+606105819&4294967295,j=V+(D<<17&4294967295|D>>>15),D=k+(P^j&(V^P))+M[3]+3250441966&4294967295,k=j+(D<<22&4294967295|D>>>10),D=P+(V^k&(j^V))+M[4]+4118548399&4294967295,P=k+(D<<7&4294967295|D>>>25),D=V+(j^P&(k^j))+M[5]+1200080426&4294967295,V=P+(D<<12&4294967295|D>>>20),D=j+(k^V&(P^k))+M[6]+2821735955&4294967295,j=V+(D<<17&4294967295|D>>>15),D=k+(P^j&(V^P))+M[7]+4249261313&4294967295,k=j+(D<<22&4294967295|D>>>10),D=P+(V^k&(j^V))+M[8]+1770035416&4294967295,P=k+(D<<7&4294967295|D>>>25),D=V+(j^P&(k^j))+M[9]+2336552879&4294967295,V=P+(D<<12&4294967295|D>>>20),D=j+(k^V&(P^k))+M[10]+4294925233&4294967295,j=V+(D<<17&4294967295|D>>>15),D=k+(P^j&(V^P))+M[11]+2304563134&4294967295,k=j+(D<<22&4294967295|D>>>10),D=P+(V^k&(j^V))+M[12]+1804603682&4294967295,P=k+(D<<7&4294967295|D>>>25),D=V+(j^P&(k^j))+M[13]+4254626195&4294967295,V=P+(D<<12&4294967295|D>>>20),D=j+(k^V&(P^k))+M[14]+2792965006&4294967295,j=V+(D<<17&4294967295|D>>>15),D=k+(P^j&(V^P))+M[15]+1236535329&4294967295,k=j+(D<<22&4294967295|D>>>10),D=P+(j^V&(k^j))+M[1]+4129170786&4294967295,P=k+(D<<5&4294967295|D>>>27),D=V+(k^j&(P^k))+M[6]+3225465664&4294967295,V=P+(D<<9&4294967295|D>>>23),D=j+(P^k&(V^P))+M[11]+643717713&4294967295,j=V+(D<<14&4294967295|D>>>18),D=k+(V^P&(j^V))+M[0]+3921069994&4294967295,k=j+(D<<20&4294967295|D>>>12),D=P+(j^V&(k^j))+M[5]+3593408605&4294967295,P=k+(D<<5&4294967295|D>>>27),D=V+(k^j&(P^k))+M[10]+38016083&4294967295,V=P+(D<<9&4294967295|D>>>23),D=j+(P^k&(V^P))+M[15]+3634488961&4294967295,j=V+(D<<14&4294967295|D>>>18),D=k+(V^P&(j^V))+M[4]+3889429448&4294967295,k=j+(D<<20&4294967295|D>>>12),D=P+(j^V&(k^j))+M[9]+568446438&4294967295,P=k+(D<<5&4294967295|D>>>27),D=V+(k^j&(P^k))+M[14]+3275163606&4294967295,V=P+(D<<9&4294967295|D>>>23),D=j+(P^k&(V^P))+M[3]+4107603335&4294967295,j=V+(D<<14&4294967295|D>>>18),D=k+(V^P&(j^V))+M[8]+1163531501&4294967295,k=j+(D<<20&4294967295|D>>>12),D=P+(j^V&(k^j))+M[13]+2850285829&4294967295,P=k+(D<<5&4294967295|D>>>27),D=V+(k^j&(P^k))+M[2]+4243563512&4294967295,V=P+(D<<9&4294967295|D>>>23),D=j+(P^k&(V^P))+M[7]+1735328473&4294967295,j=V+(D<<14&4294967295|D>>>18),D=k+(V^P&(j^V))+M[12]+2368359562&4294967295,k=j+(D<<20&4294967295|D>>>12),D=P+(k^j^V)+M[5]+4294588738&4294967295,P=k+(D<<4&4294967295|D>>>28),D=V+(P^k^j)+M[8]+2272392833&4294967295,V=P+(D<<11&4294967295|D>>>21),D=j+(V^P^k)+M[11]+1839030562&4294967295,j=V+(D<<16&4294967295|D>>>16),D=k+(j^V^P)+M[14]+4259657740&4294967295,k=j+(D<<23&4294967295|D>>>9),D=P+(k^j^V)+M[1]+2763975236&4294967295,P=k+(D<<4&4294967295|D>>>28),D=V+(P^k^j)+M[4]+1272893353&4294967295,V=P+(D<<11&4294967295|D>>>21),D=j+(V^P^k)+M[7]+4139469664&4294967295,j=V+(D<<16&4294967295|D>>>16),D=k+(j^V^P)+M[10]+3200236656&4294967295,k=j+(D<<23&4294967295|D>>>9),D=P+(k^j^V)+M[13]+681279174&4294967295,P=k+(D<<4&4294967295|D>>>28),D=V+(P^k^j)+M[0]+3936430074&4294967295,V=P+(D<<11&4294967295|D>>>21),D=j+(V^P^k)+M[3]+3572445317&4294967295,j=V+(D<<16&4294967295|D>>>16),D=k+(j^V^P)+M[6]+76029189&4294967295,k=j+(D<<23&4294967295|D>>>9),D=P+(k^j^V)+M[9]+3654602809&4294967295,P=k+(D<<4&4294967295|D>>>28),D=V+(P^k^j)+M[12]+3873151461&4294967295,V=P+(D<<11&4294967295|D>>>21),D=j+(V^P^k)+M[15]+530742520&4294967295,j=V+(D<<16&4294967295|D>>>16),D=k+(j^V^P)+M[2]+3299628645&4294967295,k=j+(D<<23&4294967295|D>>>9),D=P+(j^(k|~V))+M[0]+4096336452&4294967295,P=k+(D<<6&4294967295|D>>>26),D=V+(k^(P|~j))+M[7]+1126891415&4294967295,V=P+(D<<10&4294967295|D>>>22),D=j+(P^(V|~k))+M[14]+2878612391&4294967295,j=V+(D<<15&4294967295|D>>>17),D=k+(V^(j|~P))+M[5]+4237533241&4294967295,k=j+(D<<21&4294967295|D>>>11),D=P+(j^(k|~V))+M[12]+1700485571&4294967295,P=k+(D<<6&4294967295|D>>>26),D=V+(k^(P|~j))+M[3]+2399980690&4294967295,V=P+(D<<10&4294967295|D>>>22),D=j+(P^(V|~k))+M[10]+4293915773&4294967295,j=V+(D<<15&4294967295|D>>>17),D=k+(V^(j|~P))+M[1]+2240044497&4294967295,k=j+(D<<21&4294967295|D>>>11),D=P+(j^(k|~V))+M[8]+1873313359&4294967295,P=k+(D<<6&4294967295|D>>>26),D=V+(k^(P|~j))+M[15]+4264355552&4294967295,V=P+(D<<10&4294967295|D>>>22),D=j+(P^(V|~k))+M[6]+2734768916&4294967295,j=V+(D<<15&4294967295|D>>>17),D=k+(V^(j|~P))+M[13]+1309151649&4294967295,k=j+(D<<21&4294967295|D>>>11),D=P+(j^(k|~V))+M[4]+4149444226&4294967295,P=k+(D<<6&4294967295|D>>>26),D=V+(k^(P|~j))+M[11]+3174756917&4294967295,V=P+(D<<10&4294967295|D>>>22),D=j+(P^(V|~k))+M[2]+718787259&4294967295,j=V+(D<<15&4294967295|D>>>17),D=k+(V^(j|~P))+M[9]+3951481745&4294967295,N.g[0]=N.g[0]+P&4294967295,N.g[1]=N.g[1]+(j+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+j&4294967295,N.g[3]=N.g[3]+V&4294967295}r.prototype.u=function(N,P){P===void 0&&(P=N.length);for(var k=P-this.blockSize,M=this.B,j=this.h,V=0;V<P;){if(j==0)for(;V<=k;)s(this,N,V),V+=this.blockSize;if(typeof N=="string"){for(;V<P;)if(M[j++]=N.charCodeAt(V++),j==this.blockSize){s(this,M),j=0;break}}else for(;V<P;)if(M[j++]=N[V++],j==this.blockSize){s(this,M),j=0;break}}this.h=j,this.o+=P},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var P=1;P<N.length-8;++P)N[P]=0;var k=8*this.o;for(P=N.length-8;P<N.length;++P)N[P]=k&255,k/=256;for(this.u(N),N=Array(16),P=k=0;4>P;++P)for(var M=0;32>M;M+=8)N[k++]=this.g[P]>>>M&255;return N};function o(N,P){var k=c;return Object.prototype.hasOwnProperty.call(k,N)?k[N]:k[N]=P(N)}function l(N,P){this.h=P;for(var k=[],M=!0,j=N.length-1;0<=j;j--){var V=N[j]|0;M&&V==P||(k[j]=V,M=!1)}this.g=k}var c={};function h(N){return-128<=N&&128>N?o(N,function(P){return new l([P|0],0>P?-1:0)}):new l([N|0],0>N?-1:0)}function p(N){if(isNaN(N)||!isFinite(N))return w;if(0>N)return S(p(-N));for(var P=[],k=1,M=0;N>=k;M++)P[M]=N/k|0,k*=4294967296;return new l(P,0)}function g(N,P){if(N.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(N.charAt(0)=="-")return S(g(N.substring(1),P));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=p(Math.pow(P,8)),M=w,j=0;j<N.length;j+=8){var V=Math.min(8,N.length-j),D=parseInt(N.substring(j,j+V),P);8>V?(V=p(Math.pow(P,V)),M=M.j(V).add(p(D))):(M=M.j(k),M=M.add(p(D)))}return M}var w=h(0),E=h(1),x=h(16777216);n=l.prototype,n.m=function(){if(b(this))return-S(this).m();for(var N=0,P=1,k=0;k<this.g.length;k++){var M=this.i(k);N+=(0<=M?M:4294967296+M)*P,P*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(R(this))return"0";if(b(this))return"-"+S(this).toString(N);for(var P=p(Math.pow(N,6)),k=this,M="";;){var j=q(k,P).g;k=L(k,j.j(P));var V=((0<k.g.length?k.g[0]:k.h)>>>0).toString(N);if(k=j,R(k))return V+M;for(;6>V.length;)V="0"+V;M=V+M}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function R(N){if(N.h!=0)return!1;for(var P=0;P<N.g.length;P++)if(N.g[P]!=0)return!1;return!0}function b(N){return N.h==-1}n.l=function(N){return N=L(this,N),b(N)?-1:R(N)?0:1};function S(N){for(var P=N.g.length,k=[],M=0;M<P;M++)k[M]=~N.g[M];return new l(k,~N.h).add(E)}n.abs=function(){return b(this)?S(this):this},n.add=function(N){for(var P=Math.max(this.g.length,N.g.length),k=[],M=0,j=0;j<=P;j++){var V=M+(this.i(j)&65535)+(N.i(j)&65535),D=(V>>>16)+(this.i(j)>>>16)+(N.i(j)>>>16);M=D>>>16,V&=65535,D&=65535,k[j]=D<<16|V}return new l(k,k[k.length-1]&-2147483648?-1:0)};function L(N,P){return N.add(S(P))}n.j=function(N){if(R(this)||R(N))return w;if(b(this))return b(N)?S(this).j(S(N)):S(S(this).j(N));if(b(N))return S(this.j(S(N)));if(0>this.l(x)&&0>N.l(x))return p(this.m()*N.m());for(var P=this.g.length+N.g.length,k=[],M=0;M<2*P;M++)k[M]=0;for(M=0;M<this.g.length;M++)for(var j=0;j<N.g.length;j++){var V=this.i(M)>>>16,D=this.i(M)&65535,le=N.i(j)>>>16,xe=N.i(j)&65535;k[2*M+2*j]+=D*xe,U(k,2*M+2*j),k[2*M+2*j+1]+=V*xe,U(k,2*M+2*j+1),k[2*M+2*j+1]+=D*le,U(k,2*M+2*j+1),k[2*M+2*j+2]+=V*le,U(k,2*M+2*j+2)}for(M=0;M<P;M++)k[M]=k[2*M+1]<<16|k[2*M];for(M=P;M<2*P;M++)k[M]=0;return new l(k,0)};function U(N,P){for(;(N[P]&65535)!=N[P];)N[P+1]+=N[P]>>>16,N[P]&=65535,P++}function B(N,P){this.g=N,this.h=P}function q(N,P){if(R(P))throw Error("division by zero");if(R(N))return new B(w,w);if(b(N))return P=q(S(N),P),new B(S(P.g),S(P.h));if(b(P))return P=q(N,S(P)),new B(S(P.g),P.h);if(30<N.g.length){if(b(N)||b(P))throw Error("slowDivide_ only works with positive integers.");for(var k=E,M=P;0>=M.l(N);)k=X(k),M=X(M);var j=Z(k,1),V=Z(M,1);for(M=Z(M,2),k=Z(k,2);!R(M);){var D=V.add(M);0>=D.l(N)&&(j=j.add(k),V=D),M=Z(M,1),k=Z(k,1)}return P=L(N,j.j(P)),new B(j,P)}for(j=w;0<=N.l(P);){for(k=Math.max(1,Math.floor(N.m()/P.m())),M=Math.ceil(Math.log(k)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),V=p(k),D=V.j(P);b(D)||0<D.l(N);)k-=M,V=p(k),D=V.j(P);R(V)&&(V=E),j=j.add(V),N=L(N,D)}return new B(j,N)}n.A=function(N){return q(this,N).h},n.and=function(N){for(var P=Math.max(this.g.length,N.g.length),k=[],M=0;M<P;M++)k[M]=this.i(M)&N.i(M);return new l(k,this.h&N.h)},n.or=function(N){for(var P=Math.max(this.g.length,N.g.length),k=[],M=0;M<P;M++)k[M]=this.i(M)|N.i(M);return new l(k,this.h|N.h)},n.xor=function(N){for(var P=Math.max(this.g.length,N.g.length),k=[],M=0;M<P;M++)k[M]=this.i(M)^N.i(M);return new l(k,this.h^N.h)};function X(N){for(var P=N.g.length+1,k=[],M=0;M<P;M++)k[M]=N.i(M)<<1|N.i(M-1)>>>31;return new l(k,N.h)}function Z(N,P){var k=P>>5;P%=32;for(var M=N.g.length-k,j=[],V=0;V<M;V++)j[V]=0<P?N.i(V+k)>>>P|N.i(V+k+1)<<32-P:N.i(V+k);return new l(j,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wx=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=g,$i=l}).apply(typeof UE<"u"?UE:typeof self<"u"?self:typeof window<"u"?window:{});var mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ex,qu,Tx,Oh,Wg,Ix,Cx,xx;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,T){return d==Array.prototype||d==Object.prototype||(d[v]=T.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof mh=="object"&&mh];for(var v=0;v<d.length;++v){var T=d[v];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function s(d,v){if(v)e:{var T=r;d=d.split(".");for(var A=0;A<d.length-1;A++){var W=d[A];if(!(W in T))break e;T=T[W]}d=d[d.length-1],A=T[d],v=v(A),v!=A&&v!=null&&e(T,d,{configurable:!0,writable:!0,value:v})}}function o(d,v){d instanceof String&&(d+="");var T=0,A=!1,W={next:function(){if(!A&&T<d.length){var Q=T++;return{value:v(Q,d[Q]),done:!1}}return A=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}s("Array.prototype.values",function(d){return d||function(){return o(this,function(v,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function p(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function g(d,v,T){return d.call.apply(d.bind,arguments)}function w(d,v,T){if(!d)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,A),d.apply(v,W)}}return function(){return d.apply(v,arguments)}}function E(d,v,T){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:w,E.apply(null,arguments)}function x(d,v){var T=Array.prototype.slice.call(arguments,1);return function(){var A=T.slice();return A.push.apply(A,arguments),d.apply(this,A)}}function R(d,v){function T(){}T.prototype=v.prototype,d.aa=v.prototype,d.prototype=new T,d.prototype.constructor=d,d.Qb=function(A,W,Q){for(var ae=Array(arguments.length-2),et=2;et<arguments.length;et++)ae[et-2]=arguments[et];return v.prototype[W].apply(A,ae)}}function b(d){const v=d.length;if(0<v){const T=Array(v);for(let A=0;A<v;A++)T[A]=d[A];return T}return[]}function S(d,v){for(let T=1;T<arguments.length;T++){const A=arguments[T];if(h(A)){const W=d.length||0,Q=A.length||0;d.length=W+Q;for(let ae=0;ae<Q;ae++)d[W+ae]=A[ae]}else d.push(A)}}class L{constructor(v,T){this.i=v,this.j=T,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function U(d){return/^[\s\xa0]*$/.test(d)}function B(){var d=c.navigator;return d&&(d=d.userAgent)?d:""}function q(d){return q[" "](d),d}q[" "]=function(){};var X=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function Z(d,v,T){for(const A in d)v.call(T,d[A],A,d)}function N(d,v){for(const T in d)v.call(void 0,d[T],T,d)}function P(d){const v={};for(const T in d)v[T]=d[T];return v}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(d,v){let T,A;for(let W=1;W<arguments.length;W++){A=arguments[W];for(T in A)d[T]=A[T];for(let Q=0;Q<k.length;Q++)T=k[Q],Object.prototype.hasOwnProperty.call(A,T)&&(d[T]=A[T])}}function j(d){var v=1;d=d.split(":");const T=[];for(;0<v&&d.length;)T.push(d.shift()),v--;return d.length&&T.push(d.join(":")),T}function V(d){c.setTimeout(()=>{throw d},0)}function D(){var d=ue;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class le{constructor(){this.h=this.g=null}add(v,T){const A=xe.get();A.set(v,T),this.h?this.h.next=A:this.g=A,this.h=A}}var xe=new L(()=>new Re,d=>d.reset());class Re{constructor(){this.next=this.g=this.h=null}set(v,T){this.h=v,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,se=!1,ue=new le,ie=()=>{const d=c.Promise.resolve(void 0);Te=()=>{d.then(z)}};var z=()=>{for(var d;d=D();){try{d.h.call(d.g)}catch(T){V(T)}var v=xe;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}se=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var Ie=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const T=()=>{};c.addEventListener("test",T,v),c.removeEventListener("test",T,v)}catch{}return d}();function Ae(d,v){if(pe.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var T=this.type=d.type,A=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(X){e:{try{q(v.nodeName);var W=!0;break e}catch{}W=!1}W||(v=null)}}else T=="mouseover"?v=d.fromElement:T=="mouseout"&&(v=d.toElement);this.relatedTarget=v,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:De[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ae.aa.h.call(this)}}R(Ae,pe);var De={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),Oe=0;function Ye(d,v,T,A,W){this.listener=d,this.proxy=null,this.src=v,this.type=T,this.capture=!!A,this.ha=W,this.key=++Oe,this.da=this.fa=!1}function At(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function jn(d){this.src=d,this.g={},this.h=0}jn.prototype.add=function(d,v,T,A,W){var Q=d.toString();d=this.g[Q],d||(d=this.g[Q]=[],this.h++);var ae=yr(d,v,A,W);return-1<ae?(v=d[ae],T||(v.fa=!1)):(v=new Ye(v,this.src,Q,!!A,W),v.fa=T,d.push(v)),v};function Js(d,v){var T=v.type;if(T in d.g){var A=d.g[T],W=Array.prototype.indexOf.call(A,v,void 0),Q;(Q=0<=W)&&Array.prototype.splice.call(A,W,1),Q&&(At(v),d.g[T].length==0&&(delete d.g[T],d.h--))}}function yr(d,v,T,A){for(var W=0;W<d.length;++W){var Q=d[W];if(!Q.da&&Q.listener==v&&Q.capture==!!T&&Q.ha==A)return W}return-1}var ps="closure_lm_"+(1e6*Math.random()|0),Zs={};function ei(d,v,T,A,W){if(Array.isArray(v)){for(var Q=0;Q<v.length;Q++)ei(d,v[Q],T,A,W);return null}return T=si(T),d&&d[je]?d.K(v,T,p(A)?!!A.capture:!1,W):ti(d,v,T,!1,A,W)}function ti(d,v,T,A,W,Q){if(!v)throw Error("Invalid event type");var ae=p(W)?!!W.capture:!!W,et=ms(d);if(et||(d[ps]=et=new jn(d)),T=et.add(v,T,A,ae,Q),T.proxy)return T;if(A=ua(),T.proxy=A,A.src=d,A.listener=T,d.addEventListener)Ie||(W=ae),W===void 0&&(W=!1),d.addEventListener(v.toString(),A,W);else if(d.attachEvent)d.attachEvent(Tn(v.toString()),A);else if(d.addListener&&d.removeListener)d.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return T}function ua(){function d(T){return v.call(d.src,d.listener,T)}const v=ri;return d}function ni(d,v,T,A,W){if(Array.isArray(v))for(var Q=0;Q<v.length;Q++)ni(d,v[Q],T,A,W);else A=p(A)?!!A.capture:!!A,T=si(T),d&&d[je]?(d=d.i,v=String(v).toString(),v in d.g&&(Q=d.g[v],T=yr(Q,T,A,W),-1<T&&(At(Q[T]),Array.prototype.splice.call(Q,T,1),Q.length==0&&(delete d.g[v],d.h--)))):d&&(d=ms(d))&&(v=d.g[v.toString()],d=-1,v&&(d=yr(v,T,A,W)),(T=-1<d?v[d]:null)&&Gt(T))}function Gt(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[je])Js(v.i,d);else{var T=d.type,A=d.proxy;v.removeEventListener?v.removeEventListener(T,A,d.capture):v.detachEvent?v.detachEvent(Tn(T),A):v.addListener&&v.removeListener&&v.removeListener(A),(T=ms(v))?(Js(T,d),T.h==0&&(T.src=null,v[ps]=null)):At(d)}}}function Tn(d){return d in Zs?Zs[d]:Zs[d]="on"+d}function ri(d,v){if(d.da)d=!0;else{v=new Ae(v,this);var T=d.listener,A=d.ha||d.src;d.fa&&Gt(d),d=T.call(A,v)}return d}function ms(d){return d=d[ps],d instanceof jn?d:null}var Br="__closure_events_fn_"+(1e9*Math.random()>>>0);function si(d){return typeof d=="function"?d:(d[Br]||(d[Br]=function(v){return d.handleEvent(v)}),d[Br])}function _t(){Y.call(this),this.i=new jn(this),this.M=this,this.F=null}R(_t,Y),_t.prototype[je]=!0,_t.prototype.removeEventListener=function(d,v,T,A){ni(this,d,v,T,A)};function wt(d,v){var T,A=d.F;if(A)for(T=[];A;A=A.F)T.push(A);if(d=d.M,A=v.type||v,typeof v=="string")v=new pe(v,d);else if(v instanceof pe)v.target=v.target||d;else{var W=v;v=new pe(A,d),M(v,W)}if(W=!0,T)for(var Q=T.length-1;0<=Q;Q--){var ae=v.g=T[Q];W=Xn(ae,A,!0,v)&&W}if(ae=v.g=d,W=Xn(ae,A,!0,v)&&W,W=Xn(ae,A,!1,v)&&W,T)for(Q=0;Q<T.length;Q++)ae=v.g=T[Q],W=Xn(ae,A,!1,v)&&W}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var T=d.g[v],A=0;A<T.length;A++)At(T[A]);delete d.g[v],d.h--}}this.F=null},_t.prototype.K=function(d,v,T,A){return this.i.add(String(d),v,!1,T,A)},_t.prototype.L=function(d,v,T,A){return this.i.add(String(d),v,!0,T,A)};function Xn(d,v,T,A){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var W=!0,Q=0;Q<v.length;++Q){var ae=v[Q];if(ae&&!ae.da&&ae.capture==T){var et=ae.listener,Ot=ae.ha||ae.src;ae.fa&&Js(d.i,ae),W=et.call(Ot,A)!==!1&&W}}return W&&!A.defaultPrevented}function zl(d,v,T){if(typeof d=="function")T&&(d=E(d,T));else if(d&&typeof d.handleEvent=="function")d=E(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:c.setTimeout(d,v||0)}function ii(d){d.g=zl(()=>{d.g=null,d.i&&(d.i=!1,ii(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class mo extends Y{constructor(v,T){super(),this.m=v,this.l=T,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ii(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function go(d){Y.call(this),this.h=d,this.g={}}R(go,Y);var Wl=[];function Hl(d){Z(d.g,function(v,T){this.g.hasOwnProperty(T)&&Gt(v)},d),d.g={}}go.prototype.N=function(){go.aa.N.call(this),Hl(this)},go.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ql=c.JSON.stringify,Gl=c.JSON.parse,Kl=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function yo(){}yo.prototype.h=null;function ca(d){return d.h||(d.h=d.i())}function da(){}var Jn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zr(){pe.call(this,"d")}R(zr,pe);function ha(){pe.call(this,"c")}R(ha,pe);var Wr={},Ql=null;function vo(){return Ql=Ql||new _t}Wr.La="serverreachability";function Yl(d){pe.call(this,Wr.La,d)}R(Yl,pe);function gs(d){const v=vo();wt(v,new Yl(v))}Wr.STAT_EVENT="statevent";function Xl(d,v){pe.call(this,Wr.STAT_EVENT,d),this.stat=v}R(Xl,pe);function xt(d){const v=vo();wt(v,new Xl(v,d))}Wr.Ma="timingevent";function fa(d,v){pe.call(this,Wr.Ma,d),this.size=v}R(fa,pe);function vr(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},v)}function _o(){this.g=!0}_o.prototype.xa=function(){this.g=!1};function wo(d,v,T,A,W,Q){d.info(function(){if(d.g)if(Q)for(var ae="",et=Q.split("&"),Ot=0;Ot<et.length;Ot++){var Be=et[Ot].split("=");if(1<Be.length){var Ft=Be[0];Be=Be[1];var Pt=Ft.split("_");ae=2<=Pt.length&&Pt[1]=="type"?ae+(Ft+"="+Be+"&"):ae+(Ft+"=redacted&")}}else ae=null;else ae=Q;return"XMLHTTP REQ ("+A+") [attempt "+W+"]: "+v+`
`+T+`
`+ae})}function pa(d,v,T,A,W,Q,ae){d.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+W+"]: "+v+`
`+T+`
`+Q+" "+ae})}function _r(d,v,T,A){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+_p(d,T)+(A?" "+A:"")})}function Jl(d,v){d.info(function(){return"TIMEOUT: "+v})}_o.prototype.info=function(){};function _p(d,v){if(!d.g)return v;if(!v)return null;try{var T=JSON.parse(v);if(T){for(d=0;d<T.length;d++)if(Array.isArray(T[d])){var A=T[d];if(!(2>A.length)){var W=A[1];if(Array.isArray(W)&&!(1>W.length)){var Q=W[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ae=1;ae<W.length;ae++)W[ae]=""}}}}return ql(T)}catch{return v}}var ma={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wr;function Eo(){}R(Eo,yo),Eo.prototype.g=function(){return new XMLHttpRequest},Eo.prototype.i=function(){return{}},wr=new Eo;function Er(d,v,T,A){this.j=d,this.i=v,this.l=T,this.R=A||1,this.U=new go(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zc}function Zc(){this.i=null,this.g="",this.h=!1}var Zl={},ga={};function ya(d,v,T){d.L=1,d.v=ci(Fn(v)),d.m=T,d.P=!0,eu(d,null)}function eu(d,v){d.F=Date.now(),st(d),d.A=Fn(d.v);var T=d.A,A=d.R;Array.isArray(A)||(A=[String(A)]),hi(T.i,"t",A),d.C=0,T=d.j.J,d.h=new Zc,d.g=yd(d.j,T?v:null,!d.m),0<d.O&&(d.M=new mo(E(d.Y,d,d.g),d.O)),v=d.U,T=d.g,A=d.ca;var W="readystatechange";Array.isArray(W)||(W&&(Wl[0]=W.toString()),W=Wl);for(var Q=0;Q<W.length;Q++){var ae=ei(T,W[Q],A||v.handleEvent,!1,v.h||v);if(!ae)break;v.g[ae.key]=ae}v=d.H?P(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),gs(),wo(d.i,d.u,d.A,d.l,d.R,d.m)}Er.prototype.ca=function(d){d=d.target;const v=this.M;v&&Cn(d)==3?v.j():this.Y(d)},Er.prototype.Y=function(d){try{if(d==this.g)e:{const Pt=Cn(this.g);var v=this.g.Ba();const tr=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||ou(this.g)))){this.J||Pt!=4||v==7||(v==8||0>=tr?gs(3):gs(2)),To(this);var T=this.g.Z();this.X=T;t:if(ed(this)){var A=ou(this.g);d="";var W=A.length,Q=Cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zn(this),oi(this);var ae="";break t}this.h.i=new c.TextDecoder}for(v=0;v<W;v++)this.h.h=!0,d+=this.h.i.decode(A[v],{stream:!(Q&&v==W-1)});A.length=0,this.h.g+=d,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=T==200,pa(this.i,this.u,this.A,this.l,this.R,Pt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var et,Ot=this.g;if((et=Ot.g?Ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(et)){var Be=et;break t}}Be=null}if(T=Be)_r(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tu(this,T);else{this.o=!1,this.s=3,xt(12),Zn(this),oi(this);break e}}if(this.P){T=!0;let $n;for(;!this.J&&this.C<ae.length;)if($n=wp(this,ae),$n==ga){Pt==4&&(this.s=4,xt(14),T=!1),_r(this.i,this.l,null,"[Incomplete Response]");break}else if($n==Zl){this.s=4,xt(15),_r(this.i,this.l,ae,"[Invalid Chunk]"),T=!1;break}else _r(this.i,this.l,$n,null),tu(this,$n);if(ed(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||ae.length!=0||this.h.h||(this.s=1,xt(16),T=!1),this.o=this.o&&T,!T)_r(this.i,this.l,ae,"[Invalid Chunked Response]"),Zn(this),oi(this);else if(0<ae.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),lu(Ft),Ft.M=!0,xt(11))}}else _r(this.i,this.l,ae,null),tu(this,ae);Pt==4&&Zn(this),this.o&&!this.J&&(Pt==4?Aa(this.j,this):(this.o=!1,st(this)))}else Ia(this.g),T==400&&0<ae.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),Zn(this),oi(this)}}}catch{}finally{}};function ed(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function wp(d,v){var T=d.C,A=v.indexOf(`
`,T);return A==-1?ga:(T=Number(v.substring(T,A)),isNaN(T)?Zl:(A+=1,A+T>v.length?ga:(v=v.slice(A,A+T),d.C=A+T,v)))}Er.prototype.cancel=function(){this.J=!0,Zn(this)};function st(d){d.S=Date.now()+d.I,td(d,d.I)}function td(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=vr(E(d.ba,d),v)}function To(d){d.B&&(c.clearTimeout(d.B),d.B=null)}Er.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Jl(this.i,this.A),this.L!=2&&(gs(),xt(17)),Zn(this),this.s=2,oi(this)):td(this,this.S-d)};function oi(d){d.j.G==0||d.J||Aa(d.j,d)}function Zn(d){To(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,Hl(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function tu(d,v){try{var T=d.j;if(T.G!=0&&(T.g==d||gn(T.h,d))){if(!d.K&&gn(T.h,d)&&T.G==3){try{var A=T.Da.g.parse(v)}catch{A=null}if(Array.isArray(A)&&A.length==3){var W=A;if(W[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<d.F)Ra(T),Sr(T);else break e;Sa(T),xt(18)}}else T.za=W[1],0<T.za-T.T&&37500>W[2]&&T.F&&T.v==0&&!T.C&&(T.C=vr(E(T.Za,T),6e3));if(1>=rd(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Es(T,11)}else if((d.K||T.g==d)&&Ra(T),!U(v))for(W=T.Da.g.parse(v),v=0;v<W.length;v++){let Be=W[v];if(T.T=Be[0],Be=Be[1],T.G==2)if(Be[0]=="c"){T.K=Be[1],T.ia=Be[2];const Ft=Be[3];Ft!=null&&(T.la=Ft,T.j.info("VER="+T.la));const Pt=Be[4];Pt!=null&&(T.Aa=Pt,T.j.info("SVER="+T.Aa));const tr=Be[5];tr!=null&&typeof tr=="number"&&0<tr&&(A=1.5*tr,T.L=A,T.j.info("backChannelRequestTimeoutMs_="+A)),A=T;const $n=d.g;if($n){const Po=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Po){var Q=A.h;Q.g||Po.indexOf("spdy")==-1&&Po.indexOf("quic")==-1&&Po.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(nu(Q,Q.h),Q.h=null))}if(A.D){const ba=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;ba&&(A.ya=ba,rt(A.I,A.D,ba))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-d.F,T.j.info("Handshake RTT: "+T.R+"ms")),A=T;var ae=d;if(A.qa=gd(A,A.J?A.ia:null,A.W),ae.K){sd(A.h,ae);var et=ae,Ot=A.L;Ot&&(et.I=Ot),et.B&&(To(et),st(et)),A.g=ae}else Ao(A);0<T.i.length&&Kr(T)}else Be[0]!="stop"&&Be[0]!="close"||Es(T,7);else T.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Es(T,7):Qt(T):Be[0]!="noop"&&T.l&&T.l.ta(Be),T.v=0)}}gs(4)}catch{}}var nd=class{constructor(d,v){this.g=d,this.map=v}};function Io(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vn(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function rd(d){return d.h?1:d.g?d.g.size:0}function gn(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function nu(d,v){d.g?d.g.add(v):d.h=v}function sd(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}Io.prototype.cancel=function(){if(this.i=id(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function id(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const T of d.g.values())v=v.concat(T.D);return v}return b(d.i)}function va(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(h(d)){for(var v=[],T=d.length,A=0;A<T;A++)v.push(d[A]);return v}v=[],T=0;for(A in d)v[T++]=d[A];return v}function _a(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(h(d)||typeof d=="string"){var v=[];d=d.length;for(var T=0;T<d;T++)v.push(T);return v}v=[],T=0;for(const A in d)v[T++]=A;return v}}}function ai(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(h(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var T=_a(d),A=va(d),W=A.length,Q=0;Q<W;Q++)v.call(void 0,A[Q],T&&T[Q],d)}var Co=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ep(d,v){if(d){d=d.split("&");for(var T=0;T<d.length;T++){var A=d[T].indexOf("="),W=null;if(0<=A){var Q=d[T].substring(0,A);W=d[T].substring(A+1)}else Q=d[T];v(Q,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function ys(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof ys){this.h=d.h,xo(this,d.j),this.o=d.o,this.g=d.g,li(this,d.s),this.l=d.l;var v=d.i,T=new Hr;T.i=v.i,v.g&&(T.g=new Map(v.g),T.h=v.h),ui(this,T),this.m=d.m}else d&&(v=String(d).match(Co))?(this.h=!1,xo(this,v[1]||"",!0),this.o=Fe(v[2]||""),this.g=Fe(v[3]||"",!0),li(this,v[4]),this.l=Fe(v[5]||"",!0),ui(this,v[6]||"",!0),this.m=Fe(v[7]||"")):(this.h=!1,this.i=new Hr(null,this.h))}ys.prototype.toString=function(){var d=[],v=this.j;v&&d.push(di(v,wa,!0),":");var T=this.g;return(T||v=="file")&&(d.push("//"),(v=this.o)&&d.push(di(v,wa,!0),"@"),d.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&d.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&d.push("/"),d.push(di(T,T.charAt(0)=="/"?ld:ad,!0))),(T=this.i.toString())&&d.push("?",T),(T=this.m)&&d.push("#",di(T,ru)),d.join("")};function Fn(d){return new ys(d)}function xo(d,v,T){d.j=T?Fe(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function li(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function ui(d,v,T){v instanceof Hr?(d.i=v,qr(d.i,d.h)):(T||(v=di(v,ud)),d.i=new Hr(v,d.h))}function rt(d,v,T){d.i.set(v,T)}function ci(d){return rt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Fe(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function di(d,v,T){return typeof d=="string"?(d=encodeURI(d).replace(v,od),T&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function od(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var wa=/[#\/\?@]/g,ad=/[#\?:]/g,ld=/[#\?]/g,ud=/[#\?@]/g,ru=/#/g;function Hr(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Kt(d){d.g||(d.g=new Map,d.h=0,d.i&&Ep(d.i,function(v,T){d.add(decodeURIComponent(v.replace(/\+/g," ")),T)}))}n=Hr.prototype,n.add=function(d,v){Kt(this),this.i=null,d=er(this,d);var T=this.g.get(d);return T||this.g.set(d,T=[]),T.push(v),this.h+=1,this};function Tr(d,v){Kt(d),v=er(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Ir(d,v){return Kt(d),v=er(d,v),d.g.has(v)}n.forEach=function(d,v){Kt(this),this.g.forEach(function(T,A){T.forEach(function(W){d.call(v,W,A,this)},this)},this)},n.na=function(){Kt(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),T=[];for(let A=0;A<v.length;A++){const W=d[A];for(let Q=0;Q<W.length;Q++)T.push(v[A])}return T},n.V=function(d){Kt(this);let v=[];if(typeof d=="string")Ir(this,d)&&(v=v.concat(this.g.get(er(this,d))));else{d=Array.from(this.g.values());for(let T=0;T<d.length;T++)v=v.concat(d[T])}return v},n.set=function(d,v){return Kt(this),this.i=null,d=er(this,d),Ir(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},n.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function hi(d,v,T){Tr(d,v),0<T.length&&(d.i=null,d.g.set(er(d,v),b(T)),d.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var T=0;T<v.length;T++){var A=v[T];const Q=encodeURIComponent(String(A)),ae=this.V(A);for(A=0;A<ae.length;A++){var W=Q;ae[A]!==""&&(W+="="+encodeURIComponent(String(ae[A]))),d.push(W)}}return this.i=d.join("&")};function er(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function qr(d,v){v&&!d.j&&(Kt(d),d.i=null,d.g.forEach(function(T,A){var W=A.toLowerCase();A!=W&&(Tr(this,A),hi(this,W,T))},d)),d.j=v}function Tp(d,v){const T=new _o;if(c.Image){const A=new Image;A.onload=x(In,T,"TestLoadImage: loaded",!0,v,A),A.onerror=x(In,T,"TestLoadImage: error",!1,v,A),A.onabort=x(In,T,"TestLoadImage: abort",!1,v,A),A.ontimeout=x(In,T,"TestLoadImage: timeout",!1,v,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=d}else v(!1)}function cd(d,v){const T=new _o,A=new AbortController,W=setTimeout(()=>{A.abort(),In(T,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:A.signal}).then(Q=>{clearTimeout(W),Q.ok?In(T,"TestPingServer: ok",!0,v):In(T,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(W),In(T,"TestPingServer: error",!1,v)})}function In(d,v,T,A,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),A(T)}catch{}}function Ip(){this.g=new Kl}function dd(d,v,T){const A=T||"";try{ai(d,function(W,Q){let ae=W;p(W)&&(ae=ql(W)),v.push(A+Q+"="+encodeURIComponent(ae))})}catch(W){throw v.push(A+"type="+encodeURIComponent("_badmap")),W}}function vs(d){this.l=d.Ub||null,this.j=d.eb||!1}R(vs,yo),vs.prototype.g=function(){return new So(this.l,this.j)},vs.prototype.i=function(d){return function(){return d}}({});function So(d,v){_t.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(So,_t),n=So.prototype,n.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,xr(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||c).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cr(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,xr(this)),this.g&&(this.readyState=3,xr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hd(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function hd(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?Cr(this):xr(this),this.readyState==3&&hd(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Cr(this))},n.Qa=function(d){this.g&&(this.response=d,Cr(this))},n.ga=function(){this.g&&Cr(this)};function Cr(d){d.readyState=4,d.l=null,d.j=null,d.v=null,xr(d)}n.setRequestHeader=function(d,v){this.u.append(d,v)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var T=v.next();!T.done;)T=T.value,d.push(T[0]+": "+T[1]),T=v.next();return d.join(`\r
`)};function xr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(So.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function _s(d){let v="";return Z(d,function(T,A){v+=A,v+=":",v+=T,v+=`\r
`}),v}function fi(d,v,T){e:{for(A in T){var A=!1;break e}A=!0}A||(T=_s(T),typeof d=="string"?T!=null&&encodeURIComponent(String(T)):rt(d,v,T))}function pt(d){_t.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(pt,_t);var Cp=/^https?$/i,su=["POST","PUT"];n=pt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,v,T,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wr.g(),this.v=this.o?ca(this.o):ca(wr),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(Q){Ro(this,Q);return}if(d=T||"",T=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var W in A)T.set(W,A[W]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Q of A.keys())T.set(Q,A.get(Q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(T.keys()).find(Q=>Q.toLowerCase()=="content-type"),W=c.FormData&&d instanceof c.FormData,!(0<=Array.prototype.indexOf.call(su,v,void 0))||A||W||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ae]of T)this.g.setRequestHeader(Q,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ta(this),this.u=!0,this.g.send(d),this.u=!1}catch(Q){Ro(this,Q)}};function Ro(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,Ea(d),Un(d)}function Ea(d){d.A||(d.A=!0,wt(d,"complete"),wt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,wt(this,"complete"),wt(this,"abort"),Un(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Un(this,!0)),pt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?iu(this):this.bb())},n.bb=function(){iu(this)};function iu(d){if(d.h&&typeof l<"u"&&(!d.v[1]||Cn(d)!=4||d.Z()!=2)){if(d.u&&Cn(d)==4)zl(d.Ea,0,d);else if(wt(d,"readystatechange"),Cn(d)==4){d.h=!1;try{const ae=d.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var T;if(!(T=v)){var A;if(A=ae===0){var W=String(d.D).match(Co)[1]||null;!W&&c.self&&c.self.location&&(W=c.self.location.protocol.slice(0,-1)),A=!Cp.test(W?W.toLowerCase():"")}T=A}if(T)wt(d,"complete"),wt(d,"success");else{d.m=6;try{var Q=2<Cn(d)?d.g.statusText:""}catch{Q=""}d.l=Q+" ["+d.Z()+"]",Ea(d)}}finally{Un(d)}}}}function Un(d,v){if(d.g){Ta(d);const T=d.g,A=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||wt(d,"ready");try{T.onreadystatechange=A}catch{}}}function Ta(d){d.I&&(c.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Cn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Cn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),Gl(v)}};function ou(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ia(d){const v={};d=(d.g&&2<=Cn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<d.length;A++){if(U(d[A]))continue;var T=j(d[A]);const W=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Q=v[W]||[];v[W]=Q,Q.push(T)}N(v,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gr(d,v,T){return T&&T.internalChannelParams&&T.internalChannelParams[d]||v}function au(d){this.Aa=0,this.i=[],this.j=new _o,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gr("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gr("baseRetryDelayMs",5e3,d),this.cb=Gr("retryDelaySeedMs",1e4,d),this.Wa=Gr("forwardChannelMaxRetries",2,d),this.wa=Gr("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Io(d&&d.concurrentRequestLimit),this.Da=new Ip,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=au.prototype,n.la=8,n.G=1,n.connect=function(d,v,T,A){xt(0),this.W=d,this.H=v||{},T&&A!==void 0&&(this.H.OSID=T,this.H.OAID=A),this.F=this.X,this.I=gd(this,null,this.W),Kr(this)};function Qt(d){if(Ca(d),d.G==3){var v=d.U++,T=Fn(d.I);if(rt(T,"SID",d.K),rt(T,"RID",v),rt(T,"TYPE","terminate"),ws(d,T),v=new Er(d,d.j,v),v.L=2,v.v=ci(Fn(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(v.v.toString(),"")}catch{}!T&&c.Image&&(new Image().src=v.v,T=!0),T||(v.g=yd(v.j,null),v.g.ea(v.v)),v.F=Date.now(),st(v)}md(d)}function Sr(d){d.g&&(lu(d),d.g.cancel(),d.g=null)}function Ca(d){Sr(d),d.u&&(c.clearTimeout(d.u),d.u=null),Ra(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&c.clearTimeout(d.s),d.s=null)}function Kr(d){if(!Vn(d.h)&&!d.s){d.s=!0;var v=d.Ga;Te||ie(),se||(Te(),se=!0),ue.add(v,d),d.B=0}}function xp(d,v){return rd(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=vr(E(d.Ga,d,v),pd(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const W=new Er(this,this.j,d);let Q=this.o;if(this.S&&(Q?(Q=P(Q),M(Q,this.S)):Q=this.S),this.m!==null||this.O||(W.H=Q,Q=null),this.P)e:{for(var v=0,T=0;T<this.i.length;T++){t:{var A=this.i[T];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(v+=A,4096<v){v=T;break e}if(v===4096||T===this.i.length-1){v=T+1;break e}}v=1e3}else v=1e3;v=pi(this,W,v),T=Fn(this.I),rt(T,"RID",d),rt(T,"CVER",22),this.D&&rt(T,"X-HTTP-Session-Id",this.D),ws(this,T),Q&&(this.O?v="headers="+encodeURIComponent(String(_s(Q)))+"&"+v:this.m&&fi(T,this.m,Q)),nu(this.h,W),this.Ua&&rt(T,"TYPE","init"),this.P?(rt(T,"$req",v),rt(T,"SID","null"),W.T=!0,ya(W,T,null)):ya(W,T,v),this.G=2}}else this.G==3&&(d?xa(this,d):this.i.length==0||Vn(this.h)||xa(this))};function xa(d,v){var T;v?T=v.l:T=d.U++;const A=Fn(d.I);rt(A,"SID",d.K),rt(A,"RID",T),rt(A,"AID",d.T),ws(d,A),d.m&&d.o&&fi(A,d.m,d.o),T=new Er(d,d.j,T,d.B+1),d.m===null&&(T.H=d.o),v&&(d.i=v.D.concat(d.i)),v=pi(d,T,1e3),T.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),nu(d.h,T),ya(T,A,v)}function ws(d,v){d.H&&Z(d.H,function(T,A){rt(v,A,T)}),d.l&&ai({},function(T,A){rt(v,A,T)})}function pi(d,v,T){T=Math.min(d.i.length,T);var A=d.l?E(d.l.Na,d.l,d):null;e:{var W=d.i;let Q=-1;for(;;){const ae=["count="+T];Q==-1?0<T?(Q=W[0].g,ae.push("ofs="+Q)):Q=0:ae.push("ofs="+Q);let et=!0;for(let Ot=0;Ot<T;Ot++){let Be=W[Ot].g;const Ft=W[Ot].map;if(Be-=Q,0>Be)Q=Math.max(0,W[Ot].g-100),et=!1;else try{dd(Ft,ae,"req"+Be+"_")}catch{A&&A(Ft)}}if(et){A=ae.join("&");break e}}}return d=d.i.splice(0,T),v.D=d,A}function Ao(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;Te||ie(),se||(Te(),se=!0),ue.add(v,d),d.v=0}}function Sa(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=vr(E(d.Fa,d),pd(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,fd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=vr(E(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),Sr(this),fd(this))};function lu(d){d.A!=null&&(c.clearTimeout(d.A),d.A=null)}function fd(d){d.g=new Er(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=Fn(d.qa);rt(v,"RID","rpc"),rt(v,"SID",d.K),rt(v,"AID",d.T),rt(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&rt(v,"TO",d.ja),rt(v,"TYPE","xmlhttp"),ws(d,v),d.m&&d.o&&fi(v,d.m,d.o),d.L&&(d.g.I=d.L);var T=d.g;d=d.ia,T.L=1,T.v=ci(Fn(v)),T.m=null,T.P=!0,eu(T,d)}n.Za=function(){this.C!=null&&(this.C=null,Sr(this),Sa(this),xt(19))};function Ra(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function Aa(d,v){var T=null;if(d.g==v){Ra(d),lu(d),d.g=null;var A=2}else if(gn(d.h,v))T=v.D,sd(d.h,v),A=1;else return;if(d.G!=0){if(v.o)if(A==1){T=v.m?v.m.length:0,v=Date.now()-v.F;var W=d.B;A=vo(),wt(A,new fa(A,T)),Kr(d)}else Ao(d);else if(W=v.s,W==3||W==0&&0<v.X||!(A==1&&xp(d,v)||A==2&&Sa(d)))switch(T&&0<T.length&&(v=d.h,v.i=v.i.concat(T)),W){case 1:Es(d,5);break;case 4:Es(d,10);break;case 3:Es(d,6);break;default:Es(d,2)}}}function pd(d,v){let T=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(T*=2),T*v}function Es(d,v){if(d.j.info("Error code "+v),v==2){var T=E(d.fb,d),A=d.Xa;const W=!A;A=new ys(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||xo(A,"https"),ci(A),W?Tp(A.toString(),T):cd(A.toString(),T)}else xt(2);d.G=0,d.l&&d.l.sa(v),md(d),Ca(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function md(d){if(d.G=0,d.ka=[],d.l){const v=id(d.h);(v.length!=0||d.i.length!=0)&&(S(d.ka,v),S(d.ka,d.i),d.h.i.length=0,b(d.i),d.i.length=0),d.l.ra()}}function gd(d,v,T){var A=T instanceof ys?Fn(T):new ys(T);if(A.g!="")v&&(A.g=v+"."+A.g),li(A,A.s);else{var W=c.location;A=W.protocol,v=v?v+"."+W.hostname:W.hostname,W=+W.port;var Q=new ys(null);A&&xo(Q,A),v&&(Q.g=v),W&&li(Q,W),T&&(Q.l=T),A=Q}return T=d.D,v=d.ya,T&&v&&rt(A,T,v),rt(A,"VER",d.la),ws(d,A),A}function yd(d,v,T){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new pt(new vs({eb:T})):new pt(d.pa),v.Ha(d.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function uu(){}n=uu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Pa(){}Pa.prototype.g=function(d,v){return new yn(d,v)};function yn(d,v){_t.call(this),this.g=new au(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!U(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!U(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Qr(this)}R(yn,_t),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Qt(this.g)},yn.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var T={};T.__data__=d,d=T}else this.u&&(T={},T.__data__=ql(d),d=T);v.i.push(new nd(v.Ya++,d)),v.G==3&&Kr(v)},yn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,yn.aa.N.call(this)};function vd(d){zr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const T in v){d=T;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}R(vd,zr);function _d(){ha.call(this),this.status=1}R(_d,ha);function Qr(d){this.g=d}R(Qr,uu),Qr.prototype.ua=function(){wt(this.g,"a")},Qr.prototype.ta=function(d){wt(this.g,new vd(d))},Qr.prototype.sa=function(d){wt(this.g,new _d)},Qr.prototype.ra=function(){wt(this.g,"b")},Pa.prototype.createWebChannel=Pa.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,xx=function(){return new Pa},Cx=function(){return vo()},Ix=Wr,Wg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ma.NO_ERROR=0,ma.TIMEOUT=8,ma.HTTP_ERROR=6,Oh=ma,Jc.COMPLETE="complete",Tx=Jc,da.EventType=Jn,Jn.OPEN="a",Jn.CLOSE="b",Jn.ERROR="c",Jn.MESSAGE="d",_t.prototype.listen=_t.prototype.K,qu=da,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,Ex=pt}).apply(typeof mh<"u"?mh:typeof self<"u"?self:typeof window<"u"?window:{});const $E="@firebase/firestore",BE="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new bf("@firebase/firestore");function Ja(){return Ki.logLevel}function dL(n){Ki.setLogLevel(n)}function he(n,...e){if(Ki.logLevel<=Me.DEBUG){const t=e.map(lv);Ki.debug(`Firestore (${Ol}): ${n}`,...t)}}function zs(n,...e){if(Ki.logLevel<=Me.ERROR){const t=e.map(lv);Ki.error(`Firestore (${Ol}): ${n}`,...t)}}function fl(n,...e){if(Ki.logLevel<=Me.WARN){const t=e.map(lv);Ki.warn(`Firestore (${Ol}): ${n}`,...t)}}function lv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n="Unexpected state"){const e=`FIRESTORE (${Ol}) INTERNAL ASSERTION FAILED: `+n;throw zs(e),new Error(e)}function Je(n,e){n||Se()}function ke(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends ds{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ln.UNAUTHENTICATED))}shutdown(){}}class fL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class pL{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0);let r=this.i;const s=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new js;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new js,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await s(this.currentUser)})},c=h=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new js)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Je(typeof r.accessToken=="string"),new Sx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string"),new ln(e)}}class mL{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class gL{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new mL(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yL{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,hn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Je(this.o===void 0);const r=o=>{o.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,he("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new zE(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Je(typeof t.token=="string"),this.R=t.token,new zE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=vL(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Ue(n,e){return n<e?-1:n>e?1:0}function pl(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=-62135596800,HE=1e6;class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*HE);return new jt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<WE)throw new fe(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/HE}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-WE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new jt(0,0))}static max(){return new be(new jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="__name__";class es{constructor(e,t,r){t===void 0?t=0:t>e.length&&Se(),r===void 0?r=e.length-t:r>e.length-t&&Se(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return es.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof es?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=es.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=es.isNumericId(e),s=es.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?es.extractNumericId(e).compare(es.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $i.fromString(e.substring(4,e.length-2))}}class ht extends es{construct(e,t,r){return new ht(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new ht(t)}static emptyPath(){return new ht([])}}const _L=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends es{construct(e,t,r){return new Zt(e,t,r)}static isValidIdentifier(e){return _L.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qE}static keyField(){return new Zt([qE])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new fe(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new fe(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new fe(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(r+=c,s++):(o(),s++)}if(o(),l)throw new fe(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(t)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(ht.fromString(e))}static fromName(e){return new _e(ht.fromString(e).popFirst(5))}static empty(){return new _e(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new ht(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=-1;function wL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=be.fromTimestamp(r===1e9?new jt(t+1,0):new jt(t,r));return new Qi(s,_e.empty(),e)}function EL(n){return new Qi(n.readTime,n.key,mc)}class Qi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Qi(be.min(),_e.empty(),mc)}static max(){return new Qi(be.max(),_e.empty(),mc)}}function TL(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Ue(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==IL)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,r)=>{t(e)})}static reject(e){return new ee((t,r)=>{r(e)})}static waitFor(e){return new ee((t,r)=>{let s=0,o=0,l=!1;e.forEach(c=>{++s,c.next(()=>{++o,l&&o===s&&t()},h=>r(h))}),l=!0,o===s&&t()})}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next(s=>s?ee.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,o)=>{r.push(t.call(this,s,o))}),this.waitFor(r)}static mapArray(e,t){return new ee((r,s)=>{const o=e.length,l=new Array(o);let c=0;for(let h=0;h<o;h++){const p=h;t(e[p]).next(g=>{l[p]=g,++c,c===o&&r(l)},g=>s(g))}})}static doWhile(e,t){return new ee((r,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):r()};o()})}}function xL(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ml(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Mf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=-1;function jf(n){return n==null}function ef(n){return n===0&&1/n==-1/0}function SL(n){return typeof n=="number"&&Number.isInteger(n)&&!ef(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="";function RL(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=GE(e)),e=AL(n.get(t),e);return GE(e)}function AL(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case Ax:t+="";break;default:t+=o}}return t}function GE(n){return n+Ax+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function uo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Px(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dt=class Hg{constructor(e,t){this.comparator=e,this.root=t||Bi.EMPTY}insert(e,t){return new Hg(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bi.BLACK,null,null))}remove(e){return new Hg(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gh(this.root,e,this.comparator,!1)}getReverseIterator(){return new gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gh(this.root,e,this.comparator,!0)}},gh=class{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Bi=class ks{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??ks.RED,this.left=s??ks.EMPTY,this.right=o??ks.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new ks(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ks.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return ks.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ks.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ks.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Se();const e=this.left.check();if(e!==this.right.check())throw Se();return e+(this.isRed()?0:1)}};Bi.EMPTY=null,Bi.RED=!0,Bi.BLACK=!1;Bi.EMPTY=new class{constructor(){this.size=0}get key(){throw Se()}get value(){throw Se()}get color(){throw Se()}get left(){throw Se()}get right(){throw Se()}copy(e,t,r,s,o){return this}insert(e,t,r){return new Bi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new QE(this.data.getIterator())}getIteratorFrom(e){return new QE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Vt(this.comparator);return t.data=e,t}}class QE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new Gn([])}unionWith(e){let t=new Vt(Zt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new bx("Invalid base64 string: "+o):o}}(e);return new en(t)}static fromUint8Array(e){const t=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const PL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yi(n){if(Je(!!n),typeof n=="string"){let e=0;const t=PL.exec(n);if(Je(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rt(n.seconds),nanos:Rt(n.nanos)}}function Rt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Xi(n){return typeof n=="string"?en.fromBase64String(n):en.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="server_timestamp",Nx="__type__",Dx="__previous_value__",Ox="__local_write_time__";function cv(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Nx])===null||t===void 0?void 0:t.stringValue)===kx}function Vf(n){const e=n.mapValue.fields[Dx];return cv(e)?Vf(e):e}function gc(n){const e=Yi(n.mapValue.fields[Ox].timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,t,r,s,o,l,c,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=p}}const tf="(default)";class yc{constructor(e,t){this.projectId=e,this.database=t||tf}static empty(){return new yc("","")}get isDefaultDatabase(){return this.database===tf}isEqual(e){return e instanceof yc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx="__type__",kL="__max__",yh={mapValue:{}},Mx="__vector__",nf="value";function Ji(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cv(n)?4:DL(n)?9007199254740991:NL(n)?10:11:Se()}function cs(n,e){if(n===e)return!0;const t=Ji(n);if(t!==Ji(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gc(n).isEqual(gc(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Yi(s.timestampValue),c=Yi(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return Xi(s.bytesValue).isEqual(Xi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return Rt(s.geoPointValue.latitude)===Rt(o.geoPointValue.latitude)&&Rt(s.geoPointValue.longitude)===Rt(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Rt(s.integerValue)===Rt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Rt(s.doubleValue),c=Rt(o.doubleValue);return l===c?ef(l)===ef(c):isNaN(l)&&isNaN(c)}return!1}(n,e);case 9:return pl(n.arrayValue.values||[],e.arrayValue.values||[],cs);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},c=o.mapValue.fields||{};if(KE(l)!==KE(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!cs(l[h],c[h])))return!1;return!0}(n,e);default:return Se()}}function vc(n,e){return(n.values||[]).find(t=>cs(t,e))!==void 0}function ml(n,e){if(n===e)return 0;const t=Ji(n),r=Ji(e);if(t!==r)return Ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(n.booleanValue,e.booleanValue);case 2:return function(o,l){const c=Rt(o.integerValue||o.doubleValue),h=Rt(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return YE(n.timestampValue,e.timestampValue);case 4:return YE(gc(n),gc(e));case 5:return Ue(n.stringValue,e.stringValue);case 6:return function(o,l){const c=Xi(o),h=Xi(l);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),h=l.split("/");for(let p=0;p<c.length&&p<h.length;p++){const g=Ue(c[p],h[p]);if(g!==0)return g}return Ue(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const c=Ue(Rt(o.latitude),Rt(l.latitude));return c!==0?c:Ue(Rt(o.longitude),Rt(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return XE(n.arrayValue,e.arrayValue);case 10:return function(o,l){var c,h,p,g;const w=o.fields||{},E=l.fields||{},x=(c=w[nf])===null||c===void 0?void 0:c.arrayValue,R=(h=E[nf])===null||h===void 0?void 0:h.arrayValue,b=Ue(((p=x==null?void 0:x.values)===null||p===void 0?void 0:p.length)||0,((g=R==null?void 0:R.values)===null||g===void 0?void 0:g.length)||0);return b!==0?b:XE(x,R)}(n.mapValue,e.mapValue);case 11:return function(o,l){if(o===yh.mapValue&&l===yh.mapValue)return 0;if(o===yh.mapValue)return 1;if(l===yh.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),p=l.fields||{},g=Object.keys(p);h.sort(),g.sort();for(let w=0;w<h.length&&w<g.length;++w){const E=Ue(h[w],g[w]);if(E!==0)return E;const x=ml(c[h[w]],p[g[w]]);if(x!==0)return x}return Ue(h.length,g.length)}(n.mapValue,e.mapValue);default:throw Se()}}function YE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ue(n,e);const t=Yi(n),r=Yi(e),s=Ue(t.seconds,r.seconds);return s!==0?s:Ue(t.nanos,r.nanos)}function XE(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=ml(t[s],r[s]);if(o)return o}return Ue(t.length,r.length)}function gl(n){return qg(n)}function qg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Yi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Xi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return _e.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=qg(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${qg(t.fields[l])}`;return s+"}"}(n.mapValue):Se()}function Lh(n){switch(Ji(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vf(n);return e?16+Lh(e):16;case 5:return 2*n.stringValue.length;case 6:return Xi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+Lh(o),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return uo(r.fields,(o,l)=>{s+=o.length+Lh(l)}),s}(n.mapValue);default:throw Se()}}function JE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gg(n){return!!n&&"integerValue"in n}function dv(n){return!!n&&"arrayValue"in n}function ZE(n){return!!n&&"nullValue"in n}function eT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mh(n){return!!n&&"mapValue"in n}function NL(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Lx])===null||t===void 0?void 0:t.stringValue)===Mx}function Xu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return uo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Xu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function DL(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===kL}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Mh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xu(t)}setAll(e){let t=Zt.emptyPath(),r={},s=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,s),r={},s=[],t=c.popLast()}l?r[c.lastSegment()]=Xu(l):s.push(c.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());Mh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Mh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){uo(t,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Nn(Xu(this.value))}}function jx(n){const e=[];return uo(n.fields,(t,r)=>{const s=new Zt([t]);if(Mh(r)){const o=jx(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new Gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,t,r,s,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new un(e,0,be.min(),be.min(),be.min(),Nn.empty(),0)}static newFoundDocument(e,t,r,s){return new un(e,1,t,be.min(),r,s,0)}static newNoDocument(e,t){return new un(e,2,t,be.min(),be.min(),Nn.empty(),0)}static newUnknownDocument(e,t){return new un(e,3,t,be.min(),be.min(),Nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,t){this.position=e,this.inclusive=t}}function tT(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?r=_e.comparator(_e.fromName(l.referenceValue),t.key):r=ml(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function nT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!cs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,t="asc"){this.field=e,this.dir=t}}function OL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{}class Nt extends Vx{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ML(e,t,r):t==="array-contains"?new FL(e,r):t==="in"?new UL(e,r):t==="not-in"?new $L(e,r):t==="array-contains-any"?new BL(e,r):new Nt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new jL(e,r):new VL(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ml(t,this.value)):t!==null&&Ji(this.value)===Ji(t)&&this.matchesComparison(ml(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vr extends Vx{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Vr(e,t)}matches(e){return Fx(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Fx(n){return n.op==="and"}function Ux(n){return LL(n)&&Fx(n)}function LL(n){for(const e of n.filters)if(e instanceof Vr)return!1;return!0}function Kg(n){if(n instanceof Nt)return n.field.canonicalString()+n.op.toString()+gl(n.value);if(Ux(n))return n.filters.map(e=>Kg(e)).join(",");{const e=n.filters.map(t=>Kg(t)).join(",");return`${n.op}(${e})`}}function $x(n,e){return n instanceof Nt?function(r,s){return s instanceof Nt&&r.op===s.op&&r.field.isEqual(s.field)&&cs(r.value,s.value)}(n,e):n instanceof Vr?function(r,s){return s instanceof Vr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,l,c)=>o&&$x(l,s.filters[c]),!0):!1}(n,e):void Se()}function Bx(n){return n instanceof Nt?function(t){return`${t.field.canonicalString()} ${t.op} ${gl(t.value)}`}(n):n instanceof Vr?function(t){return t.op.toString()+" {"+t.getFilters().map(Bx).join(" ,")+"}"}(n):"Filter"}class ML extends Nt{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class jL extends Nt{constructor(e,t){super(e,"in",t),this.keys=zx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class VL extends Nt{constructor(e,t){super(e,"not-in",t),this.keys=zx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function zx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>_e.fromName(r.referenceValue))}class FL extends Nt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dv(t)&&vc(t.arrayValue,this.value)}}class UL extends Nt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&vc(this.value.arrayValue,t)}}class $L extends Nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!vc(this.value.arrayValue,t)}}class BL extends Nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e,t=null,r=[],s=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=c,this.le=null}}function rT(n,e=null,t=[],r=[],s=null,o=null,l=null){return new zL(n,e,t,r,s,o,l)}function hv(n){const e=ke(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Kg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),jf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gl(r)).join(",")),e.le=t}return e.le}function fv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!OL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$x(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nT(n.startAt,e.startAt)&&nT(n.endAt,e.endAt)}function Qg(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,t=null,r=[],s=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function WL(n,e,t,r,s,o,l,c){return new jl(n,e,t,r,s,o,l,c)}function Ff(n){return new jl(n)}function sT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Wx(n){return n.collectionGroup!==null}function Ju(n){const e=ke(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Vt(Zt.comparator);return l.filters.forEach(h=>{h.getFlattenedFilters().forEach(p=>{p.isInequality()&&(c=c.add(p.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new _c(o,r))}),t.has(Zt.keyField().canonicalString())||e.he.push(new _c(Zt.keyField(),r))}return e.he}function os(n){const e=ke(n);return e.Pe||(e.Pe=HL(e,Ju(n))),e.Pe}function HL(n,e){if(n.limitType==="F")return rT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new _c(s.field,o)});const t=n.endAt?new rf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new rf(n.startAt.position,n.startAt.inclusive):null;return rT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Yg(n,e){const t=n.filters.concat([e]);return new jl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Xg(n,e,t){return new jl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Uf(n,e){return fv(os(n),os(e))&&n.limitType===e.limitType}function Hx(n){return`${hv(os(n))}|lt:${n.limitType}`}function Za(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>Bx(s)).join(", ")}]`),jf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>gl(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>gl(s)).join(",")),`Target(${r})`}(os(n))}; limitType=${n.limitType})`}function $f(n,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):_e.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,s){for(const o of Ju(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(l,c,h){const p=tT(l,c,h);return l.inclusive?p<=0:p<0}(r.startAt,Ju(r),s)||r.endAt&&!function(l,c,h){const p=tT(l,c,h);return l.inclusive?p>=0:p>0}(r.endAt,Ju(r),s))}(n,e)}function qL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qx(n){return(e,t)=>{let r=!1;for(const s of Ju(n)){const o=GL(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function GL(n,e,t){const r=n.field.isKeyField()?_e.comparator(e.key,t.key):function(o,l,c){const h=l.data.field(o),p=c.data.field(o);return h!==null&&p!==null?ml(h,p):Se()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){uo(this.inner,(t,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return Px(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=new Dt(_e.comparator);function Ws(){return KL}const Gx=new Dt(_e.comparator);function Gu(...n){let e=Gx;for(const t of n)e=e.insert(t.key,t);return e}function Kx(n){let e=Gx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ho(){return Zu()}function Qx(){return Zu()}function Zu(){return new ia(n=>n.toString(),(n,e)=>n.isEqual(e))}const QL=new Dt(_e.comparator),YL=new Vt(_e.comparator);function Ve(...n){let e=YL;for(const t of n)e=e.add(t);return e}const XL=new Vt(Ue);function JL(){return XL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ef(e)?"-0":e}}function Yx(n){return{integerValue:""+n}}function ZL(n,e){return SL(e)?Yx(e):pv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(){this._=void 0}}function eM(n,e,t){return n instanceof wc?function(s,o){const l={fields:{[Nx]:{stringValue:kx},[Ox]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&cv(o)&&(o=Vf(o)),o&&(l.fields[Dx]=o),{mapValue:l}}(t,e):n instanceof Ec?Jx(n,e):n instanceof Tc?Zx(n,e):function(s,o){const l=Xx(s,o),c=iT(l)+iT(s.Ie);return Gg(l)&&Gg(s.Ie)?Yx(c):pv(s.serializer,c)}(n,e)}function tM(n,e,t){return n instanceof Ec?Jx(n,e):n instanceof Tc?Zx(n,e):t}function Xx(n,e){return n instanceof sf?function(r){return Gg(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class wc extends Bf{}class Ec extends Bf{constructor(e){super(),this.elements=e}}function Jx(n,e){const t=eS(e);for(const r of n.elements)t.some(s=>cs(s,r))||t.push(r);return{arrayValue:{values:t}}}class Tc extends Bf{constructor(e){super(),this.elements=e}}function Zx(n,e){let t=eS(e);for(const r of n.elements)t=t.filter(s=>!cs(s,r));return{arrayValue:{values:t}}}class sf extends Bf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function iT(n){return Rt(n.integerValue||n.doubleValue)}function eS(n){return dv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,t){this.field=e,this.transform=t}}function rM(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Ec&&s instanceof Ec||r instanceof Tc&&s instanceof Tc?pl(r.elements,s.elements,cs):r instanceof sf&&s instanceof sf?cs(r.Ie,s.Ie):r instanceof wc&&s instanceof wc}(n.transform,e.transform)}class sM{constructor(e,t){this.version=e,this.transformResults=t}}class cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class zf{}function tS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new mv(n.key,cr.none()):new Mc(n.key,n.data,cr.none());{const t=n.data,r=Nn.empty();let s=new Vt(Zt.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new co(n.key,r,new Gn(s.toArray()),cr.none())}}function iM(n,e,t){n instanceof Mc?function(s,o,l){const c=s.value.clone(),h=aT(s.fieldTransforms,o,l.transformResults);c.setAll(h),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,e,t):n instanceof co?function(s,o,l){if(!jh(s.precondition,o))return void o.convertToUnknownDocument(l.version);const c=aT(s.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(nS(s)),h.setAll(c),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function ec(n,e,t,r){return n instanceof Mc?function(o,l,c,h){if(!jh(o.precondition,l))return c;const p=o.value.clone(),g=lT(o.fieldTransforms,h,l);return p.setAll(g),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof co?function(o,l,c,h){if(!jh(o.precondition,l))return c;const p=lT(o.fieldTransforms,h,l),g=l.data;return g.setAll(nS(o)),g.setAll(p),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(w=>w.field))}(n,e,t,r):function(o,l,c){return jh(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(n,e,t)}function oM(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=Xx(r.transform,s||null);o!=null&&(t===null&&(t=Nn.empty()),t.set(r.field,o))}return t||null}function oT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&pl(r,s,(o,l)=>rM(o,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Mc extends zf{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class co extends zf{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function nS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function aT(n,e,t){const r=new Map;Je(n.length===t.length);for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,c=e.data.field(o.field);r.set(o.field,tM(l,c,t[s]))}return r}function lT(n,e,t){const r=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);r.set(s.field,eM(o,l,e))}return r}class mv extends zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aM extends zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&iM(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ec(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ec(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Qx();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(s.key)?null:c;const h=tS(l,c);h!==null&&r.set(s.key,h),l.isValidDocument()||l.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ve())}isEqual(e){return this.batchId===e.batchId&&pl(this.mutations,e.mutations,(t,r)=>oT(t,r))&&pl(this.baseMutations,e.baseMutations,(t,r)=>oT(t,r))}}class gv{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Je(e.mutations.length===r.length);let s=function(){return QL}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new gv(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,ze;function dM(n){switch(n){case J.OK:return Se();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Se()}}function rS(n){if(n===void 0)return zs("GRPC error has no .code"),J.UNKNOWN;switch(n){case kt.OK:return J.OK;case kt.CANCELLED:return J.CANCELLED;case kt.UNKNOWN:return J.UNKNOWN;case kt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case kt.INTERNAL:return J.INTERNAL;case kt.UNAVAILABLE:return J.UNAVAILABLE;case kt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case kt.NOT_FOUND:return J.NOT_FOUND;case kt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case kt.ABORTED:return J.ABORTED;case kt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case kt.DATA_LOSS:return J.DATA_LOSS;default:return Se()}}(ze=kt||(kt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM=new $i([4294967295,4294967295],0);function uT(n){const e=hM().encode(n),t=new wx;return t.update(e),new Uint8Array(t.digest())}function cT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new $i([t,r],0),new $i([s,o],0)]}class yv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ku(`Invalid padding: ${t}`);if(r<0)throw new Ku(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ku(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ku(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=$i.fromNumber(this.Ee)}Ae(e,t,r){let s=e.add(t.multiply($i.fromNumber(r)));return s.compare(fM)===1&&(s=new $i([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=uT(e),[r,s]=cT(t);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,s,o);if(!this.Re(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new yv(o,s,t);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.Ee===0)return;const t=uT(e),[r,s]=cT(t);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,s,o);this.Ve(l)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ku extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,jc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Wf(be.min(),s,new Dt(Ue),Ws(),Ve())}}class jc{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new jc(r,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t,r,s){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=s}}class sS{constructor(e,t){this.targetId=e,this.ge=t}}class iS{constructor(e,t,r=en.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class dT{constructor(){this.pe=0,this.ye=hT(),this.we=en.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Ve(),t=Ve(),r=Ve();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Se()}}),new jc(this.we,this.be,e,t,r)}Me(){this.Se=!1,this.ye=hT()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Je(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class pM{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ws(),this.$e=vh(),this.Ke=vh(),this.Ue=new Dt(Ue)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Se()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,s)=>{this.Je(s)&&t(s)})}Ze(e){const t=e.targetId,r=e.ge.count,s=this.Xe(t);if(s){const o=s.target;if(Qg(o))if(r===0){const l=new _e(o.path);this.ze(t,l,un.newNoDocument(l,be.min()))}else Je(r===1);else{const l=this.et(t);if(l!==r){const c=this.tt(e),h=c?this.nt(c,e,l):1;if(h!==0){this.Ye(t);const p=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let l,c;try{l=Xi(r).toUint8Array()}catch(h){if(h instanceof bx)return fl("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new yv(l,s,o)}catch(h){return fl(h instanceof Ku?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.Ee===0?null:c}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let s=0;return r.forEach(o=>{const l=this.ke.it(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.ze(t,o,null),s++)}),s}ot(e){const t=new Map;this.qe.forEach((o,l)=>{const c=this.Xe(l);if(c){if(o.current&&Qg(c.target)){const h=new _e(c.target.path);this._t(h).has(l)||this.ut(l,h)||this.ze(l,h,un.newNoDocument(h,e))}o.ve&&(t.set(l,o.Fe()),o.Me())}});let r=Ve();this.Ke.forEach((o,l)=>{let c=!0;l.forEachWhile(h=>{const p=this.Xe(h);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.Qe.forEach((o,l)=>l.setReadTime(e));const s=new Wf(e,t,this.Ue,this.Qe,r);return this.Qe=Ws(),this.$e=vh(),this.Ke=vh(),this.Ue=new Dt(Ue),s}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new dT,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new Vt(Ue),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Vt(Ue),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new dT),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function vh(){return new Dt(_e.comparator)}function hT(){return new Dt(_e.comparator)}const mM={asc:"ASCENDING",desc:"DESCENDING"},gM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yM={and:"AND",or:"OR"};class vM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jg(n,e){return n.useProto3Json||jf(e)?e:{value:e}}function of(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function _M(n,e){return of(n,e.toTimestamp())}function as(n){return Je(!!n),be.fromTimestamp(function(t){const r=Yi(t);return new jt(r.seconds,r.nanos)}(n))}function vv(n,e){return Zg(n,e).canonicalString()}function Zg(n,e){const t=function(s){return new ht(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function aS(n){const e=ht.fromString(n);return Je(hS(e)),e}function ey(n,e){return vv(n.databaseId,e.path)}function ig(n,e){const t=aS(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(uS(t))}function lS(n,e){return vv(n.databaseId,e)}function wM(n){const e=aS(n);return e.length===4?ht.emptyPath():uS(e)}function ty(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uS(n){return Je(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function fT(n,e,t){return{name:ey(n,e),fields:t.value.mapValue.fields}}function EM(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Se()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(p,g){return p.useProto3Json?(Je(g===void 0||typeof g=="string"),en.fromBase64String(g||"")):(Je(g===void 0||g instanceof Buffer||g instanceof Uint8Array),en.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(p){const g=p.code===void 0?J.UNKNOWN:rS(p.code);return new fe(g,p.message||"")}(l);t=new iS(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ig(n,r.document.name),o=as(r.document.updateTime),l=r.document.createTime?as(r.document.createTime):be.min(),c=new Nn({mapValue:{fields:r.document.fields}}),h=un.newFoundDocument(s,o,l,c),p=r.targetIds||[],g=r.removedTargetIds||[];t=new Vh(p,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ig(n,r.document),o=r.readTime?as(r.readTime):be.min(),l=un.newNoDocument(s,o),c=r.removedTargetIds||[];t=new Vh([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ig(n,r.document),o=r.removedTargetIds||[];t=new Vh([],o,s,null)}else{if(!("filter"in e))return Se();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new cM(s,o),c=r.targetId;t=new sS(c,l)}}return t}function TM(n,e){let t;if(e instanceof Mc)t={update:fT(n,e.key,e.value)};else if(e instanceof mv)t={delete:ey(n,e.key)};else if(e instanceof co)t={update:fT(n,e.key,e.data),updateMask:kM(e.fieldMask)};else{if(!(e instanceof aM))return Se();t={verify:ey(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof wc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ec)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Tc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof sf)return{fieldPath:l.field.canonicalString(),increment:c.Ie};throw Se()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:_M(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Se()}(n,e.precondition)),t}function IM(n,e){return n&&n.length>0?(Je(e!==void 0),n.map(t=>function(s,o){let l=s.updateTime?as(s.updateTime):as(o);return l.isEqual(be.min())&&(l=as(o)),new sM(l,s.transformResults||[])}(t,e))):[]}function CM(n,e){return{documents:[lS(n,e.path)]}}function xM(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=lS(n,s);const o=function(p){if(p.length!==0)return dS(Vr.create(p,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(g=>function(E){return{field:el(E.field),direction:AM(E.dir)}}(g))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=Jg(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:s}}function SM(n){let e=wM(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Je(r===1);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=function(w){const E=cS(w);return E instanceof Vr&&Ux(E)?E.getFilters():[E]}(t.where));let l=[];t.orderBy&&(l=function(w){return w.map(E=>function(R){return new _c(tl(R.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(E))}(t.orderBy));let c=null;t.limit&&(c=function(w){let E;return E=typeof w=="object"?w.value:w,jf(E)?null:E}(t.limit));let h=null;t.startAt&&(h=function(w){const E=!!w.before,x=w.values||[];return new rf(x,E)}(t.startAt));let p=null;return t.endAt&&(p=function(w){const E=!w.before,x=w.values||[];return new rf(x,E)}(t.endAt)),WL(e,s,l,o,c,"F",h,p)}function RM(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function cS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=tl(t.unaryFilter.field);return Nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=tl(t.unaryFilter.field);return Nt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=tl(t.unaryFilter.field);return Nt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=tl(t.unaryFilter.field);return Nt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Se()}}(n):n.fieldFilter!==void 0?function(t){return Nt.create(tl(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Se()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Vr.create(t.compositeFilter.filters.map(r=>cS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Se()}}(t.compositeFilter.op))}(n):Se()}function AM(n){return mM[n]}function PM(n){return gM[n]}function bM(n){return yM[n]}function el(n){return{fieldPath:n.canonicalString()}}function tl(n){return Zt.fromServerFormat(n.fieldPath)}function dS(n){return n instanceof Nt?function(t){if(t.op==="=="){if(eT(t.value))return{unaryFilter:{field:el(t.field),op:"IS_NAN"}};if(ZE(t.value))return{unaryFilter:{field:el(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(eT(t.value))return{unaryFilter:{field:el(t.field),op:"IS_NOT_NAN"}};if(ZE(t.value))return{unaryFilter:{field:el(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:el(t.field),op:PM(t.op),value:t.value}}}(n):n instanceof Vr?function(t){const r=t.getFilters().map(s=>dS(s));return r.length===1?r[0]:{compositeFilter:{op:bM(t.op),filters:r}}}(n):Se()}function kM(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,t,r,s,o=be.min(),l=be.min(),c=en.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e){this.Tt=e}}function DM(n){const e=SM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Xg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(){this.Tn=new LM}addToCollectionParentIndex(e,t){return this.Tn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(Qi.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(Qi.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class LM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Vt(ht.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Vt(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fS=41943040;class kn{static withCacheSize(e){return new kn(e,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(fS,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new yl(0)}static Un(){return new yl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="LruGarbageCollector",MM=1048576;function gT([n,e],[t,r]){const s=Ue(n,t);return s===0?Ue(e,r):s}class jM{constructor(e){this.Hn=e,this.buffer=new Vt(gT),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();gT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){he(mT,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ml(t)?he(mT,"Ignoring IndexedDB error during garbage collection: ",t):await Ll(t)}await this.er(3e5)})}}class FM{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(Mf.ae);const r=new jM(t);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(pT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pT):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,s,o,l,c,h,p;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,l=Date.now(),this.nthSequenceNumber(e,s))).next(w=>(r=w,c=Date.now(),this.removeTargets(e,r,t))).next(w=>(o=w,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(w=>(p=Date.now(),Ja()<=Me.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${w} documents in `+(p-h)+`ms
Total Duration: ${p-g}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:w})))}}function UM(n,e){return new FM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this.changes=new ia(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&ec(r.mutation,s,Gn.empty(),jt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ve()){const s=Ho();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(o=>{let l=Gu();return o.forEach((c,h)=>{l=l.insert(c,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Ho();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ve()))}populateOverlays(e,t,r){const s=[];return r.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,r,s){let o=Ws();const l=Zu(),c=function(){return Zu()}();return t.forEach((h,p)=>{const g=r.get(p.key);s.has(p.key)&&(g===void 0||g.mutation instanceof co)?o=o.insert(p.key,p):g!==void 0?(l.set(p.key,g.mutation.getFieldMask()),ec(g.mutation,p,g.mutation.getFieldMask(),jt.now())):l.set(p.key,Gn.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((p,g)=>l.set(p,g)),t.forEach((p,g)=>{var w;return c.set(p,new BM(g,(w=l.get(p))!==null&&w!==void 0?w:null))}),c))}recalculateAndSaveOverlays(e,t){const r=Zu();let s=new Dt((l,c)=>l-c),o=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(h=>{const p=t.get(h);if(p===null)return;let g=r.get(h)||Gn.empty();g=c.applyToLocalView(p,g),r.set(h,g);const w=(s.get(c.batchId)||Ve()).add(h);s=s.insert(c.batchId,w)})}).next(()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),p=h.key,g=h.value,w=Qx();g.forEach(E=>{if(!o.has(E)){const x=tS(t.get(E),r.get(E));x!==null&&w.set(E,x),o=o.add(E)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,w))}return ee.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(l){return _e.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Wx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):ee.resolve(Ho());let c=mc,h=o;return l.next(p=>ee.forEach(p,(g,w)=>(c<w.largestBatchId&&(c=w.largestBatchId),o.get(g)?ee.resolve():this.remoteDocumentCache.getEntry(e,g).next(E=>{h=h.insert(g,E)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,h,p,Ve())).next(g=>({batchId:c,changes:Kx(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next(r=>{let s=Gu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let l=Gu();return this.indexManager.getCollectionParents(e,o).next(c=>ee.forEach(c,h=>{const p=function(w,E){return new jl(E,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next(g=>{g.forEach((w,E)=>{l=l.insert(w,E)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s))).next(l=>{o.forEach((h,p)=>{const g=p.getKey();l.get(g)===null&&(l=l.insert(g,un.newInvalidDocument(g)))});let c=Gu();return l.forEach((h,p)=>{const g=o.get(h);g!==void 0&&ec(g.mutation,p,Gn.empty(),jt.now()),$f(t,p)&&(c=c.insert(h,p))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ee.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:as(s.createTime)}}(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(s){return{name:s.name,query:DM(s.bundledQuery),readTime:as(s.readTime)}}(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(){this.overlays=new Dt(_e.comparator),this.Rr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ho();return ee.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,o)=>{this.Et(e,t,o)}),ee.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const s=Ho(),o=t.length+1,l=new _e(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,p=h.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&h.largestBatchId>r&&s.set(h.getKey(),h)}return ee.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new Dt((p,g)=>p-g);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let g=o.get(p.largestBatchId);g===null&&(g=Ho(),o=o.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const c=Ho(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((p,g)=>c.set(p,g)),!(c.size()>=s)););return ee.resolve(c)}Et(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new uM(t,r));let o=this.Rr.get(t);o===void 0&&(o=Ve(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(){this.Vr=new Vt(Wt.mr),this.gr=new Vt(Wt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new Wt(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new Wt(e,t))}br(e,t){e.forEach(r=>this.removeReference(r,t))}Sr(e){const t=new _e(new ht([])),r=new Wt(t,e),s=new Wt(t,e+1),o=[];return this.gr.forEachInRange([r,s],l=>{this.wr(l),o.push(l.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new _e(new ht([])),r=new Wt(t,e),s=new Wt(t,e+1);let o=Ve();return this.gr.forEachInRange([r,s],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new Wt(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Wt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return _e.comparator(e.key,t.key)||Ue(e.Cr,t.Cr)}static pr(e,t){return Ue(e.Cr,t.Cr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Vt(Wt.mr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new lM(o,t,r,s);this.mutationQueue.push(l);for(const c of s)this.Mr=this.Mr.add(new Wt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ee.resolve(l)}lookupMutationBatch(e,t){return ee.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Nr(r),o=s<0?0:s;return ee.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?uv:this.Fr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Wt(t,0),s=new Wt(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,s],l=>{const c=this.Or(l.Cr);o.push(c)}),ee.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vt(Ue);return t.forEach(s=>{const o=new Wt(s,0),l=new Wt(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,l],c=>{r=r.add(c.Cr)})}),ee.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;_e.isDocumentKey(o)||(o=o.child(""));const l=new Wt(new _e(o),0);let c=new Vt(Ue);return this.Mr.forEachWhile(h=>{const p=h.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(c=c.add(h.Cr)),!0)},l),ee.resolve(this.Br(c))}Br(e){const t=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Je(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return ee.forEach(t.mutations,s=>{const o=new Wt(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new Wt(t,0),s=this.Mr.firstAfterOrEqual(r);return ee.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e){this.kr=e,this.docs=function(){return new Dt(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,l=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():un.newInvalidDocument(t))}getEntries(e,t){let r=Ws();return t.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():un.newInvalidDocument(s))}),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=Ws();const l=t.path,c=new _e(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:p,value:{document:g}}=h.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||TL(EL(g),r)<=0||(s.has(g.key)||$f(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return ee.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Se()}qr(e,t){return ee.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new QM(this)}getSize(e){return ee.resolve(this.size)}}class QM extends $M{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),ee.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e){this.persistence=e,this.Qr=new ia(t=>hv(t),fv),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.$r=0,this.Kr=new _v,this.targetCount=0,this.Ur=yl.Kn()}forEachTarget(e,t){return this.Qr.forEach((r,s)=>t(s)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),ee.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new yl(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.zn(t),ee.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.Qr.forEach((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Qr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),ee.waitFor(o).next(()=>s)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.Kr.yr(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.Kr.br(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),ee.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Kr.vr(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Mf(0),this.zr=!1,this.zr=!0,this.jr=new qM,this.referenceDelegate=e(this),this.Hr=new YM(this),this.indexManager=new OM,this.remoteDocumentCache=function(s){return new KM(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new NM(t),this.Yr=new WM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new GM(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){he("MemoryPersistence","Starting transaction:",e);const s=new XM(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,t){return ee.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class XM extends CL{constructor(e){super(),this.currentSequenceNumber=e}}class wv{constructor(e){this.persistence=e,this.ti=new _v,this.ni=null}static ri(e){return new wv(e)}get ii(){if(this.ni)return this.ni;throw Se()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ee.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.ii,r=>{const s=_e.fromPath(r);return this.si(e,s).next(o=>{o||t.removeEntry(s,be.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ee.or([()=>ee.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class af{constructor(e,t){this.persistence=e,this.oi=new ia(r=>RL(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=UM(this,t)}static ri(e,t){return new af(e,t)}Zr(){}Xr(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return ee.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(o=>o?ee.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,l=>this.ar(e,l,t).next(c=>{c||(r++,o.removeEntry(l,be.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ee.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Lh(e.data.value)),t}ar(e,t,r){return ee.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return ee.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=s}static Yi(e,t){let r=Ve(),s=Ve();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Ev(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return xk()?8:xL(mn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.rs(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ss(e,t,s,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new JM;return this._s(e,t,l).next(c=>{if(o.result=c,this.Xi)return this.us(e,t,l,c.size)})}).next(()=>o.result)}us(e,t,r,s){return r.documentReadCount<this.es?(Ja()<=Me.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Za(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ee.resolve()):(Ja()<=Me.DEBUG&&he("QueryEngine","Query:",Za(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(Ja()<=Me.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Za(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,os(t))):ee.resolve())}rs(e,t){if(sT(t))return ee.resolve(null);let r=os(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Xg(t,null,"F"),r=os(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Ve(...o);return this.ns.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(h=>{const p=this.cs(t,c);return this.ls(t,p,l,h.readTime)?this.rs(e,Xg(t,null,"F")):this.hs(e,p,t,h)}))})))}ss(e,t,r,s){return sT(t)||s.isEqual(be.min())?ee.resolve(null):this.ns.getDocuments(e,r).next(o=>{const l=this.cs(t,o);return this.ls(t,l,r,s)?ee.resolve(null):(Ja()<=Me.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Za(t)),this.hs(e,l,t,wL(s,mc)).next(c=>c))})}cs(e,t){let r=new Vt(qx(e));return t.forEach((s,o)=>{$f(e,o)&&(r=r.add(o))}),r}ls(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,t,r){return Ja()<=Me.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Za(t)),this.ns.getDocumentsMatchingQuery(e,t,Qi.min(),r)}hs(e,t,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="LocalStore",e4=3e8;class t4{constructor(e,t,r,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new Dt(Ue),this.Is=new ia(o=>hv(o),fv),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zM(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function n4(n,e,t,r){return new t4(n,e,t,r)}async function mS(n,e){const t=ke(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let h=Ve();for(const p of s){l.push(p.batchId);for(const g of p.mutations)h=h.add(g.key)}for(const p of o){c.push(p.batchId);for(const g of p.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(r,h).next(p=>({Rs:p,removedBatchIds:l,addedBatchIds:c}))})})}function r4(n,e){const t=ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(c,h,p,g){const w=p.batch,E=w.keys();let x=ee.resolve();return E.forEach(R=>{x=x.next(()=>g.getEntry(h,R)).next(b=>{const S=p.docVersions.get(R);Je(S!==null),b.version.compareTo(S)<0&&(w.applyToRemoteDocument(b,p),b.isValidDocument()&&(b.setReadTime(p.commitVersion),g.addEntry(b)))})}),x.next(()=>c.mutationQueue.removeMutationBatch(h,w))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=Ve();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(h=h.add(c.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function gS(n){const e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function s4(n,e){const t=ke(n),r=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const c=[];e.targetChanges.forEach((g,w)=>{const E=s.get(w);if(!E)return;c.push(t.Hr.removeMatchingKeys(o,g.removedDocuments,w).next(()=>t.Hr.addMatchingKeys(o,g.addedDocuments,w)));let x=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(w)!==null?x=x.withResumeToken(en.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):g.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(g.resumeToken,r)),s=s.insert(w,x),function(b,S,L){return b.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=e4?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(E,x,g)&&c.push(t.Hr.updateTargetData(o,x))});let h=Ws(),p=Ve();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),c.push(i4(o,l,e.documentUpdates).next(g=>{h=g.Vs,p=g.fs})),!r.isEqual(be.min())){const g=t.Hr.getLastRemoteSnapshotVersion(o).next(w=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(g)}return ee.waitFor(c).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,h,p)).next(()=>h)}).then(o=>(t.Ts=s,o))}function i4(n,e,t){let r=Ve(),s=Ve();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=Ws();return t.forEach((c,h)=>{const p=o.get(c);h.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(c)),h.isNoDocument()&&h.version.isEqual(be.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):he(Tv,"Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",h.version)}),{Vs:l,fs:s}})}function o4(n,e){const t=ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=uv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function a4(n,e){const t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Hr.getTargetData(r,e).next(o=>o?(s=o,ee.resolve(s)):t.Hr.allocateTargetId(r).next(l=>(s=new ji(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function ny(n,e,t){const r=ke(n),s=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Ml(l))throw l;he(Tv,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function yT(n,e,t){const r=ke(n);let s=be.min(),o=Ve();return r.persistence.runTransaction("Execute query","readwrite",l=>function(h,p,g){const w=ke(h),E=w.Is.get(g);return E!==void 0?ee.resolve(w.Ts.get(E)):w.Hr.getTargetData(p,g)}(r,l,os(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(l,c.targetId).next(h=>{o=h})}).next(()=>r.Ps.getDocumentsMatchingQuery(l,e,t?s:be.min(),t?o:Ve())).next(c=>(l4(r,qL(e),c),{documents:c,gs:o})))}function l4(n,e,t){let r=n.Es.get(e)||be.min();t.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}class vT{constructor(){this.activeTargetIds=JL()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class u4{constructor(){this.ho=new vT,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new vT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="ConnectivityMonitor";class wT{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){he(_T,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){he(_T,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _h=null;function ry(){return _h===null?_h=function(){return 268435456+Math.round(2147483648*Math.random())}():_h++,"0x"+_h.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="RestConnection",d4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class h4{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===tf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}bo(e,t,r,s,o){const l=ry(),c=this.So(e,t.toUriEncodedString());he(og,`Sending RPC '${e}' ${l}:`,c,r);const h={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(h,s,o),this.vo(e,c,h,r).then(p=>(he(og,`Received RPC '${e}' ${l}: `,p),p),p=>{throw fl(og,`RPC '${e}' ${l} failed with error: `,p,"url: ",c,"request:",r),p})}Co(e,t,r,s,o,l){return this.bo(e,t,r,s,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ol}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}So(e,t){const r=d4[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class p4 extends h4{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,s){const o=ry();return new Promise((l,c)=>{const h=new Ex;h.setWithCredentials(!0),h.listenOnce(Tx.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Oh.NO_ERROR:const g=h.getResponseJson();he(on,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),l(g);break;case Oh.TIMEOUT:he(on,`RPC '${e}' ${o} timed out`),c(new fe(J.DEADLINE_EXCEEDED,"Request time out"));break;case Oh.HTTP_ERROR:const w=h.getStatus();if(he(on,`RPC '${e}' ${o} failed with status:`,w,"response text:",h.getResponseText()),w>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const x=E==null?void 0:E.error;if(x&&x.status&&x.message){const R=function(S){const L=S.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(L)>=0?L:J.UNKNOWN}(x.status);c(new fe(R,x.message))}else c(new fe(J.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new fe(J.UNAVAILABLE,"Connection failed."));break;default:Se()}}finally{he(on,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(s);he(on,`RPC '${e}' ${o} sending request:`,s),h.send(t,"POST",p,r,15)})}Wo(e,t,r){const s=ry(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=xx(),c=Cx(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(h.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Do(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const g=o.join("");he(on,`Creating RPC '${e}' stream ${s}: ${g}`,h);const w=l.createWebChannel(g,h);let E=!1,x=!1;const R=new f4({Fo:S=>{x?he(on,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(E||(he(on,`Opening RPC '${e}' stream ${s} transport.`),w.open(),E=!0),he(on,`RPC '${e}' stream ${s} sending:`,S),w.send(S))},Mo:()=>w.close()}),b=(S,L,U)=>{S.listen(L,B=>{try{U(B)}catch(q){setTimeout(()=>{throw q},0)}})};return b(w,qu.EventType.OPEN,()=>{x||(he(on,`RPC '${e}' stream ${s} transport opened.`),R.Qo())}),b(w,qu.EventType.CLOSE,()=>{x||(x=!0,he(on,`RPC '${e}' stream ${s} transport closed`),R.Ko())}),b(w,qu.EventType.ERROR,S=>{x||(x=!0,fl(on,`RPC '${e}' stream ${s} transport errored:`,S),R.Ko(new fe(J.UNAVAILABLE,"The operation could not be completed")))}),b(w,qu.EventType.MESSAGE,S=>{var L;if(!x){const U=S.data[0];Je(!!U);const B=U,q=(B==null?void 0:B.error)||((L=B[0])===null||L===void 0?void 0:L.error);if(q){he(on,`RPC '${e}' stream ${s} received error:`,q);const X=q.status;let Z=function(k){const M=kt[k];if(M!==void 0)return rS(M)}(X),N=q.message;Z===void 0&&(Z=J.INTERNAL,N="Unknown error status: "+X+" with message "+q.message),x=!0,R.Ko(new fe(Z,N)),w.close()}else he(on,`RPC '${e}' stream ${s} received:`,U),R.Uo(U)}}),b(c,Ix.STAT_EVENT,S=>{S.stat===Wg.PROXY?he(on,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===Wg.NOPROXY&&he(on,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.$o()},0),R}}function ag(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(n){return new vM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-r);s>0&&he("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="PersistentStream";class vS{constructor(e,t,r,s,o,l,c,h){this.Ti=e,this.n_=r,this.r_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new yS(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(zs(t.toString()),zs("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===t&&this.V_(r,s)},r=>{e(()=>{const s=new fe(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return he(ET,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(he(ET,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class m4 extends vS{constructor(e,t,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=EM(this.serializer,e),r=function(o){if(!("targetChange"in o))return be.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?be.min():l.readTime?as(l.readTime):be.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=ty(this.serializer),t.addTarget=function(o,l){let c;const h=l.target;if(c=Qg(h)?{documents:CM(o,h)}:{query:xM(o,h).ht},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=oS(o,l.resumeToken);const p=Jg(o,l.expectedCount);p!==null&&(c.expectedCount=p)}else if(l.snapshotVersion.compareTo(be.min())>0){c.readTime=of(o,l.snapshotVersion.toTimestamp());const p=Jg(o,l.expectedCount);p!==null&&(c.expectedCount=p)}return c}(this.serializer,e);const r=RM(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=ty(this.serializer),t.removeTarget=e,this.I_(t)}}class g4 extends vS{constructor(e,t,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Je(!!e.streamToken),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=IM(e.writeResults,e.commitTime),r=as(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=ty(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>TM(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{}class v4 extends y4{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new fe(J.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.bo(e,Zg(t,r),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(J.UNKNOWN,o.toString())})}Co(e,t,r,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Co(e,Zg(t,r),s,l,c,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(J.UNKNOWN,l.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class _4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(zs(t),this.N_=!1):he("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo="RemoteStore";class w4{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(l=>{r.enqueueAndForget(async()=>{oa(this)&&(he(Jo,"Restarting streams for network reachability change."),await async function(h){const p=ke(h);p.W_.add(4),await Vc(p),p.j_.set("Unknown"),p.W_.delete(4),await qf(p)}(this))})}),this.j_=new _4(r,s)}}async function qf(n){if(oa(n))for(const e of n.G_)await e(!0)}async function Vc(n){for(const e of n.G_)await e(!1)}function _S(n,e){const t=ke(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),Sv(t)?xv(t):Vl(t).c_()&&Cv(t,e))}function Iv(n,e){const t=ke(n),r=Vl(t);t.U_.delete(e),r.c_()&&wS(t,e),t.U_.size===0&&(r.c_()?r.P_():oa(t)&&t.j_.set("Unknown"))}function Cv(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vl(n).y_(e)}function wS(n,e){n.H_.Ne(e),Vl(n).w_(e)}function xv(n){n.H_=new pM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Vl(n).start(),n.j_.B_()}function Sv(n){return oa(n)&&!Vl(n).u_()&&n.U_.size>0}function oa(n){return ke(n).W_.size===0}function ES(n){n.H_=void 0}async function E4(n){n.j_.set("Online")}async function T4(n){n.U_.forEach((e,t)=>{Cv(n,e)})}async function I4(n,e){ES(n),Sv(n)?(n.j_.q_(e),xv(n)):n.j_.set("Unknown")}async function C4(n,e,t){if(n.j_.set("Online"),e instanceof iS&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const c of o.targetIds)s.U_.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.U_.delete(c),s.H_.removeTarget(c))}(n,e)}catch(r){he(Jo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lf(n,r)}else if(e instanceof Vh?n.H_.We(e):e instanceof sS?n.H_.Ze(e):n.H_.je(e),!t.isEqual(be.min()))try{const r=await gS(n.localStore);t.compareTo(r)>=0&&await function(o,l){const c=o.H_.ot(l);return c.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.U_.get(p);g&&o.U_.set(p,g.withResumeToken(h.resumeToken,l))}}),c.targetMismatches.forEach((h,p)=>{const g=o.U_.get(h);if(!g)return;o.U_.set(h,g.withResumeToken(en.EMPTY_BYTE_STRING,g.snapshotVersion)),wS(o,h);const w=new ji(g.target,h,p,g.sequenceNumber);Cv(o,w)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){he(Jo,"Failed to raise snapshot:",r),await lf(n,r)}}async function lf(n,e,t){if(!Ml(e))throw e;n.W_.add(1),await Vc(n),n.j_.set("Offline"),t||(t=()=>gS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{he(Jo,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await qf(n)})}function TS(n,e){return e().catch(t=>lf(n,t,e))}async function Gf(n){const e=ke(n),t=Zi(e);let r=e.K_.length>0?e.K_[e.K_.length-1].batchId:uv;for(;x4(e);)try{const s=await o4(e.localStore,r);if(s===null){e.K_.length===0&&t.P_();break}r=s.batchId,S4(e,s)}catch(s){await lf(e,s)}IS(e)&&CS(e)}function x4(n){return oa(n)&&n.K_.length<10}function S4(n,e){n.K_.push(e);const t=Zi(n);t.c_()&&t.b_&&t.S_(e.mutations)}function IS(n){return oa(n)&&!Zi(n).u_()&&n.K_.length>0}function CS(n){Zi(n).start()}async function R4(n){Zi(n).C_()}async function A4(n){const e=Zi(n);for(const t of n.K_)e.S_(t.mutations)}async function P4(n,e,t){const r=n.K_.shift(),s=gv.from(r,e,t);await TS(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Gf(n)}async function b4(n,e){e&&Zi(n).b_&&await async function(r,s){if(function(l){return dM(l)&&l!==J.ABORTED}(s.code)){const o=r.K_.shift();Zi(r).h_(),await TS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Gf(r)}}(n,e),IS(n)&&CS(n)}async function TT(n,e){const t=ke(n);t.asyncQueue.verifyOperationInProgress(),he(Jo,"RemoteStore received new credentials");const r=oa(t);t.W_.add(3),await Vc(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await qf(t)}async function k4(n,e){const t=ke(n);e?(t.W_.delete(2),await qf(t)):e||(t.W_.add(2),await Vc(t),t.j_.set("Unknown"))}function Vl(n){return n.J_||(n.J_=function(t,r,s){const o=ke(t);return o.M_(),new m4(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:E4.bind(null,n),No:T4.bind(null,n),Lo:I4.bind(null,n),p_:C4.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),Sv(n)?xv(n):n.j_.set("Unknown")):(await n.J_.stop(),ES(n))})),n.J_}function Zi(n){return n.Y_||(n.Y_=function(t,r,s){const o=ke(t);return o.M_(),new g4(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:R4.bind(null,n),Lo:b4.bind(null,n),D_:A4.bind(null,n),v_:P4.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await Gf(n)):(await n.Y_.stop(),n.K_.length>0&&(he(Jo,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new js,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const l=Date.now()+r,c=new Rv(e,t,l,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Av(n,e){if(zs("AsyncQueue",`${e}: ${n}`),Ml(n))return new fe(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{static emptySet(e){return new al(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=Gu(),this.sortedSet=new Dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof al)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new al;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(){this.Z_=new Dt(_e.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Se():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class vl{constructor(e,t,r,s,o,l,c,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,o){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new vl(e,t,al.emptySet(t),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class D4{constructor(){this.queries=CT(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const s=ke(t),o=s.queries;s.queries=CT(),o.forEach((l,c)=>{for(const h of c.ta)h.onError(r)})})(this,new fe(J.ABORTED,"Firestore shutting down"))}}function CT(){return new ia(n=>Hx(n),Uf)}async function Pv(n,e){const t=ke(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.na()&&e.ra()&&(r=2):(o=new N4,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await t.onListen(s,!0);break;case 1:o.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const c=Av(l,`Initialization of query '${Za(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&kv(t)}async function bv(n,e){const t=ke(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const l=o.ta.indexOf(e);l>=0&&(o.ta.splice(l,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function O4(n,e){const t=ke(n);let r=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const c of l.ta)c.oa(s)&&(r=!0);l.ea=s}}r&&kv(t)}function L4(n,e,t){const r=ke(n),s=r.queries.get(e);if(s)for(const o of s.ta)o.onError(t);r.queries.delete(e)}function kv(n){n.ia.forEach(e=>{e.next()})}var sy,xT;(xT=sy||(sy={}))._a="default",xT.Cache="cache";class Nv{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new vl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==sy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.key=e}}class SS{constructor(e){this.key=e}}class M4{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ve(),this.mutatedKeys=Ve(),this.ya=qx(e),this.wa=new al(this.ya)}get ba(){return this.fa}Sa(e,t){const r=t?t.Da:new IT,s=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,c=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,w)=>{const E=s.get(g),x=$f(this.query,w)?w:null,R=!!E&&this.mutatedKeys.has(E.key),b=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let S=!1;E&&x?E.data.isEqual(x.data)?R!==b&&(r.track({type:3,doc:x}),S=!0):this.va(E,x)||(r.track({type:2,doc:x}),S=!0,(h&&this.ya(x,h)>0||p&&this.ya(x,p)<0)&&(c=!0)):!E&&x?(r.track({type:0,doc:x}),S=!0):E&&!x&&(r.track({type:1,doc:E}),S=!0,(h||p)&&(c=!0)),S&&(x?(l=l.add(x),o=b?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{wa:l,Da:r,ls:c,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const l=e.Da.X_();l.sort((g,w)=>function(x,R){const b=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se()}};return b(x)-b(R)}(g.type,w.type)||this.ya(g.doc,w.doc)),this.Ca(r),s=s!=null&&s;const c=t&&!s?this.Fa():[],h=this.pa.size===0&&this.current&&!s?1:0,p=h!==this.ga;return this.ga=h,l.length!==0||p?{snapshot:new vl(this.query,e.wa,o,l,e.mutatedKeys,h===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:c}:{Ma:c}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new IT,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ve(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new SS(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new xS(r))}),t}Oa(e){this.fa=e.gs,this.pa=Ve();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return vl.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Dv="SyncEngine";class j4{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class V4{constructor(e){this.key=e,this.Ba=!1}}class F4{constructor(e,t,r,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.La={},this.ka=new ia(c=>Hx(c),Uf),this.qa=new Map,this.Qa=new Set,this.$a=new Dt(_e.comparator),this.Ka=new Map,this.Ua=new _v,this.Wa={},this.Ga=new Map,this.za=yl.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function U4(n,e,t=!0){const r=NS(n);let s;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await RS(r,e,t,!0),s}async function $4(n,e){const t=NS(n);await RS(t,e,!0,!1)}async function RS(n,e,t,r){const s=await a4(n.localStore,os(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await B4(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&_S(n.remoteStore,s),c}async function B4(n,e,t,r,s){n.Ha=(w,E,x)=>async function(b,S,L,U){let B=S.view.Sa(L);B.ls&&(B=await yT(b.localStore,S.query,!1).then(({documents:N})=>S.view.Sa(N,B)));const q=U&&U.targetChanges.get(S.targetId),X=U&&U.targetMismatches.get(S.targetId)!=null,Z=S.view.applyChanges(B,b.isPrimaryClient,q,X);return RT(b,S.targetId,Z.Ma),Z.snapshot}(n,w,E,x);const o=await yT(n.localStore,e,!0),l=new M4(e,o.gs),c=l.Sa(o.documents),h=jc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=l.applyChanges(c,n.isPrimaryClient,h);RT(n,t,p.Ma);const g=new j4(e,t,l);return n.ka.set(e,g),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),p.snapshot}async function z4(n,e,t){const r=ke(n),s=r.ka.get(e),o=r.qa.get(s.targetId);if(o.length>1)return r.qa.set(s.targetId,o.filter(l=>!Uf(l,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ny(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Iv(r.remoteStore,s.targetId),iy(r,s.targetId)}).catch(Ll)):(iy(r,s.targetId),await ny(r.localStore,s.targetId,!0))}async function W4(n,e){const t=ke(n),r=t.ka.get(e),s=t.qa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Iv(t.remoteStore,r.targetId))}async function H4(n,e,t){const r=J4(n);try{const s=await function(l,c){const h=ke(l),p=jt.now(),g=c.reduce((x,R)=>x.add(R.key),Ve());let w,E;return h.persistence.runTransaction("Locally write mutations","readwrite",x=>{let R=Ws(),b=Ve();return h.ds.getEntries(x,g).next(S=>{R=S,R.forEach((L,U)=>{U.isValidDocument()||(b=b.add(L))})}).next(()=>h.localDocuments.getOverlayedDocuments(x,R)).next(S=>{w=S;const L=[];for(const U of c){const B=oM(U,w.get(U.key).overlayedDocument);B!=null&&L.push(new co(U.key,B,jx(B.value.mapValue),cr.exists(!0)))}return h.mutationQueue.addMutationBatch(x,p,L,c)}).next(S=>{E=S;const L=S.applyToLocalDocumentSet(w,b);return h.documentOverlayCache.saveOverlays(x,S.batchId,L)})}).then(()=>({batchId:E.batchId,changes:Kx(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,c,h){let p=l.Wa[l.currentUser.toKey()];p||(p=new Dt(Ue)),p=p.insert(c,h),l.Wa[l.currentUser.toKey()]=p}(r,s.batchId,t),await Fc(r,s.changes),await Gf(r.remoteStore)}catch(s){const o=Av(s,"Failed to persist write");t.reject(o)}}async function AS(n,e){const t=ke(n);try{const r=await s4(t.localStore,e);e.targetChanges.forEach((s,o)=>{const l=t.Ka.get(o);l&&(Je(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.Ba=!0:s.modifiedDocuments.size>0?Je(l.Ba):s.removedDocuments.size>0&&(Je(l.Ba),l.Ba=!1))}),await Fc(t,r,e)}catch(r){await Ll(r)}}function ST(n,e,t){const r=ke(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.ka.forEach((o,l)=>{const c=l.view.sa(e);c.snapshot&&s.push(c.snapshot)}),function(l,c){const h=ke(l);h.onlineState=c;let p=!1;h.queries.forEach((g,w)=>{for(const E of w.ta)E.sa(c)&&(p=!0)}),p&&kv(h)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function q4(n,e,t){const r=ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Ka.get(e),o=s&&s.key;if(o){let l=new Dt(_e.comparator);l=l.insert(o,un.newNoDocument(o,be.min()));const c=Ve().add(o),h=new Wf(be.min(),new Map,new Dt(Ue),l,c);await AS(r,h),r.$a=r.$a.remove(o),r.Ka.delete(e),Ov(r)}else await ny(r.localStore,e,!1).then(()=>iy(r,e,t)).catch(Ll)}async function G4(n,e){const t=ke(n),r=e.batch.batchId;try{const s=await r4(t.localStore,e);bS(t,r,null),PS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Fc(t,s)}catch(s){await Ll(s)}}async function K4(n,e,t){const r=ke(n);try{const s=await function(l,c){const h=ke(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let g;return h.mutationQueue.lookupMutationBatch(p,c).next(w=>(Je(w!==null),g=w.keys(),h.mutationQueue.removeMutationBatch(p,w))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,g,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g)).next(()=>h.localDocuments.getDocuments(p,g))})}(r.localStore,e);bS(r,e,t),PS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Fc(r,s)}catch(s){await Ll(s)}}function PS(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function bS(n,e,t){const r=ke(n);let s=r.Wa[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function iy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(r=>{n.Ua.containsKey(r)||kS(n,r)})}function kS(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(Iv(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),Ov(n))}function RT(n,e,t){for(const r of t)r instanceof xS?(n.Ua.addReference(r.key,e),Q4(n,r)):r instanceof SS?(he(Dv,"Document no longer in limbo: "+r.key),n.Ua.removeReference(r.key,e),n.Ua.containsKey(r.key)||kS(n,r.key)):Se()}function Q4(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(he(Dv,"New document in limbo: "+t),n.Qa.add(r),Ov(n))}function Ov(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new _e(ht.fromString(e)),r=n.za.next();n.Ka.set(r,new V4(t)),n.$a=n.$a.insert(t,r),_S(n.remoteStore,new ji(os(Ff(t.path)),r,"TargetPurposeLimboResolution",Mf.ae))}}async function Fc(n,e,t){const r=ke(n),s=[],o=[],l=[];r.ka.isEmpty()||(r.ka.forEach((c,h)=>{l.push(r.Ha(h,e,t).then(p=>{var g;if((p||t)&&r.isPrimaryClient){const w=p?!p.fromCache:(g=t==null?void 0:t.targetChanges.get(h.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(h.targetId,w?"current":"not-current")}if(p){s.push(p);const w=Ev.Yi(h.targetId,p);o.push(w)}}))}),await Promise.all(l),r.La.p_(s),await async function(h,p){const g=ke(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>ee.forEach(p,E=>ee.forEach(E.Hi,x=>g.persistence.referenceDelegate.addReference(w,E.targetId,x)).next(()=>ee.forEach(E.Ji,x=>g.persistence.referenceDelegate.removeReference(w,E.targetId,x)))))}catch(w){if(!Ml(w))throw w;he(Tv,"Failed to update sequence numbers: "+w)}for(const w of p){const E=w.targetId;if(!w.fromCache){const x=g.Ts.get(E),R=x.snapshotVersion,b=x.withLastLimboFreeSnapshotVersion(R);g.Ts=g.Ts.insert(E,b)}}}(r.localStore,o))}async function Y4(n,e){const t=ke(n);if(!t.currentUser.isEqual(e)){he(Dv,"User change. New user:",e.toKey());const r=await mS(t.localStore,e);t.currentUser=e,function(o,l){o.Ga.forEach(c=>{c.forEach(h=>{h.reject(new fe(J.CANCELLED,l))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Fc(t,r.Rs)}}function X4(n,e){const t=ke(n),r=t.Ka.get(e);if(r&&r.Ba)return Ve().add(r.key);{let s=Ve();const o=t.qa.get(e);if(!o)return s;for(const l of o){const c=t.ka.get(l);s=s.unionWith(c.view.ba)}return s}}function NS(n){const e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=AS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=X4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=q4.bind(null,e),e.La.p_=O4.bind(null,e.eventManager),e.La.Ja=L4.bind(null,e.eventManager),e}function J4(n){const e=ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=G4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=K4.bind(null,e),e}class uf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return n4(this.persistence,new ZM,e.initialUser,this.serializer)}Xa(e){return new pS(wv.ri,this.serializer)}Za(e){return new u4}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uf.provider={build:()=>new uf};class Z4 extends uf{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Je(this.persistence.referenceDelegate instanceof af);const r=this.persistence.referenceDelegate.garbageCollector;return new VM(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new pS(r=>af.ri(r,t),this.serializer)}}class oy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ST(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Y4.bind(null,this.syncEngine),await k4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new D4}()}createDatastore(e){const t=Hf(e.databaseInfo.databaseId),r=function(o){return new p4(o)}(e.databaseInfo);return function(o,l,c,h){return new v4(o,l,c,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,o,l,c){return new w4(r,s,o,l,c)}(this.localStore,this.datastore,e.asyncQueue,t=>ST(this.syncEngine,t,0),function(){return wT.D()?new wT:new c4}())}createSyncEngine(e,t){return function(s,o,l,c,h,p,g){const w=new F4(s,o,l,c,h,p);return g&&(w.ja=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const o=ke(s);he(Jo,"RemoteStore shutting down."),o.W_.add(5),await Vc(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}oy.provider={build:()=>new oy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):zs("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo="FirestoreClient";class ej{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=ln.UNAUTHENTICATED,this.clientId=Rx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{he(eo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(he(eo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new js;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Av(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function lg(n,e){n.asyncQueue.verifyOperationInProgress(),he(eo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await mS(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function AT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await tj(n);he(eo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>TT(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>TT(e.remoteStore,s)),n._onlineComponents=e}async function tj(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(eo,"Using user provided OfflineComponentProvider");try{await lg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===J.FAILED_PRECONDITION||s.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;fl("Error using user provided cache. Falling back to memory cache: "+t),await lg(n,new uf)}}else he(eo,"Using default OfflineComponentProvider"),await lg(n,new Z4(void 0));return n._offlineComponents}async function DS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(eo,"Using user provided OnlineComponentProvider"),await AT(n,n._uninitializedComponentsProvider._online)):(he(eo,"Using default OnlineComponentProvider"),await AT(n,new oy))),n._onlineComponents}function nj(n){return DS(n).then(e=>e.syncEngine)}async function cf(n){const e=await DS(n),t=e.eventManager;return t.onListen=U4.bind(null,e.syncEngine),t.onUnlisten=z4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=W4.bind(null,e.syncEngine),t}function rj(n,e,t={}){const r=new js;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,h,p){const g=new Lv({next:E=>{g.su(),l.enqueueAndForget(()=>bv(o,w));const x=E.docs.has(c);!x&&E.fromCache?p.reject(new fe(J.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&E.fromCache&&h&&h.source==="server"?p.reject(new fe(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),w=new Nv(Ff(c.path),g,{includeMetadataChanges:!0,Ta:!0});return Pv(o,w)}(await cf(n),n.asyncQueue,e,t,r)),r.promise}function sj(n,e,t={}){const r=new js;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,h,p){const g=new Lv({next:E=>{g.su(),l.enqueueAndForget(()=>bv(o,w)),E.fromCache&&h.source==="server"?p.reject(new fe(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),w=new Nv(c,g,{includeMetadataChanges:!0,Ta:!0});return Pv(o,w)}(await cf(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(n,e,t){if(!t)throw new fe(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ij(n,e,t,r){if(e===!0&&r===!0)throw new fe(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bT(n){if(!_e.isDocumentKey(n))throw new fe(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function kT(n){if(_e.isDocumentKey(n))throw new fe(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Kf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se()}function On(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kf(n);throw new fe(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="firestore.googleapis.com",NT=!0;class DT{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MS,this.ssl=NT}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:NT;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<MM)throw new fe(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ij("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new fe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new fe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new fe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qf{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new hL;switch(r.type){case"firstParty":return new gL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=PT.get(t);r&&(he("ComponentProvider","Removing Datastore"),PT.delete(t),r.terminate())}(this),Promise.resolve()}}function oj(n,e,t,r={}){var s;const o=(n=On(n,Qf))._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o.host!==MS&&o.host!==c&&fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},o),{host:c,ssl:!1,emulatorOptions:r});if(!qi(h,l)&&(n._setSettings(h),r.mockUserToken)){let p,g;if(typeof r.mockUserToken=="string")p=r.mockUserToken,g=ln.MOCK_USER;else{p=Ky(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new fe(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new ln(w)}n._authCredentials=new fL(new Sx(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ho(this.firestore,e,this._query)}}class pn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}}class zi extends ho{constructor(e,t,r){super(e,t,Ff(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new _e(e))}withConverter(e){return new zi(this.firestore,e,this._path)}}function Fr(n,e,...t){if(n=ot(n),LS("collection","path",e),n instanceof Qf){const r=ht.fromString(e,...t);return kT(r),new zi(n,null,r)}{if(!(n instanceof pn||n instanceof zi))throw new fe(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ht.fromString(e,...t));return kT(r),new zi(n.firestore,null,r)}}function to(n,e,...t){if(n=ot(n),arguments.length===1&&(e=Rx.newId()),LS("doc","path",e),n instanceof Qf){const r=ht.fromString(e,...t);return bT(r),new pn(n,null,new _e(r))}{if(!(n instanceof pn||n instanceof zi))throw new fe(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ht.fromString(e,...t));return bT(r),new pn(n.firestore,n instanceof zi?n.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="AsyncQueue";class LT{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new yS(this,"async_queue_retry"),this.bu=()=>{const r=ag();r&&he(OT,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=e;const t=ag();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=ag();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new js;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Ml(e))throw e;he(OT,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),c}(r);throw zs("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.Su=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=Rv.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&Se()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function MT(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1}(n,["next","error","complete"])}class Hs extends Qf{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new LT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new LT(e),this._firestoreClient=void 0,await e}}}function no(n,e){const t=typeof n=="object"?n:kf(),r=typeof n=="string"?n:tf,s=kc(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=qy("firestore");o&&oj(s,...o)}return s}function Yf(n){if(n._terminated)throw new fe(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||aj(n),n._firestoreClient}function aj(n){var e,t,r;const s=n._freezeSettings(),o=function(c,h,p,g){return new bL(c,h,p,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,OS(g.experimentalLongPollingOptions),g.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new ej(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _l(en.fromBase64String(e))}catch(t){throw new fe(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _l(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=/^__.*__$/;class uj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new co(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mc(e,this.data,t,this.fieldTransforms)}}class jS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new co(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function VS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se()}}class Vv{constructor(e,t,r,s,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Vv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Ku(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return df(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(VS(this.Lu)&&lj.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class cj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Hf(e)}ju(e,t,r,s=!1){return new Vv({Lu:e,methodName:t,zu:r,path:Zt.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zf(n){const e=n._freezeSettings(),t=Hf(n._databaseId);return new cj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function FS(n,e,t,r,s,o={}){const l=n.ju(o.merge||o.mergeFields?2:0,e,t,s);Uv("Data must be an object, but it was:",l,r);const c=US(r,l);let h,p;if(o.merge)h=new Gn(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const w of o.mergeFields){const E=ay(e,w,t);if(!l.contains(E))throw new fe(J.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);BS(g,E)||g.push(E)}h=new Gn(g),p=l.fieldTransforms.filter(w=>h.covers(w.field))}else h=null,p=l.fieldTransforms;return new uj(new Nn(c),h,p)}class ep extends Jf{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ep}}class Fv extends Jf{_toFieldTransform(e){return new nM(e.path,new wc)}isEqual(e){return e instanceof Fv}}function dj(n,e,t,r){const s=n.ju(1,e,t);Uv("Data must be an object, but it was:",s,r);const o=[],l=Nn.empty();uo(r,(h,p)=>{const g=$v(e,h,t);p=ot(p);const w=s.Ku(g);if(p instanceof ep)o.push(g);else{const E=Uc(p,w);E!=null&&(o.push(g),l.set(g,E))}});const c=new Gn(o);return new jS(l,c,s.fieldTransforms)}function hj(n,e,t,r,s,o){const l=n.ju(1,e,t),c=[ay(e,r,t)],h=[s];if(o.length%2!=0)throw new fe(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)c.push(ay(e,o[E])),h.push(o[E+1]);const p=[],g=Nn.empty();for(let E=c.length-1;E>=0;--E)if(!BS(p,c[E])){const x=c[E];let R=h[E];R=ot(R);const b=l.Ku(x);if(R instanceof ep)p.push(x);else{const S=Uc(R,b);S!=null&&(p.push(x),g.set(x,S))}}const w=new Gn(p);return new jS(g,w,l.fieldTransforms)}function fj(n,e,t,r=!1){return Uc(t,n.ju(r?4:3,e))}function Uc(n,e){if($S(n=ot(n)))return Uv("Unsupported field value:",e,n),US(n,e);if(n instanceof Jf)return function(r,s){if(!VS(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const o=[];let l=0;for(const c of r){let h=Uc(c,s.Uu(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}}(n,e)}return function(r,s){if((r=ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZL(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=jt.fromDate(r);return{timestampValue:of(s.serializer,o)}}if(r instanceof jt){const o=new jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:of(s.serializer,o)}}if(r instanceof Mv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _l)return{bytesValue:oS(s.serializer,r._byteString)};if(r instanceof pn){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Wu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:vv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof jv)return function(l,c){return{mapValue:{fields:{[Lx]:{stringValue:Mx},[nf]:{arrayValue:{values:l.toArray().map(p=>{if(typeof p!="number")throw c.Wu("VectorValues must only contain numeric values.");return pv(c.serializer,p)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${Kf(r)}`)}(n,e)}function US(n,e){const t={};return Px(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uo(n,(r,s)=>{const o=Uc(s,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function $S(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof jt||n instanceof Mv||n instanceof _l||n instanceof pn||n instanceof Jf||n instanceof jv)}function Uv(n,e,t){if(!$S(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=Kf(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function ay(n,e,t){if((e=ot(e))instanceof Xf)return e._internalPath;if(typeof e=="string")return $v(n,e);throw df("Field path arguments must be of type string or ",n,!1,void 0,t)}const pj=new RegExp("[~\\*/\\[\\]]");function $v(n,e,t){if(e.search(pj)>=0)throw df(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xf(...e.split("."))._internalPath}catch{throw df(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function df(n,e,t,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${r}`),l&&(h+=` in document ${s}`),h+=")"),new fe(J.INVALID_ARGUMENT,c+n+h)}function BS(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class mj extends zS{data(){return super.data()}}function tp(n,e){return typeof e=="string"?$v(n,e):e instanceof Xf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bv{}class HS extends Bv{}function wl(n,e,...t){let r=[];e instanceof Bv&&r.push(e),r=r.concat(t),function(o){const l=o.filter(h=>h instanceof zv).length,c=o.filter(h=>h instanceof np).length;if(l>1||l>0&&c>0)throw new fe(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class np extends HS{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new np(e,t,r)}_apply(e){const t=this._parse(e);return qS(e._query,t),new ho(e.firestore,e.converter,Yg(e._query,t))}_parse(e){const t=Zf(e.firestore);return function(o,l,c,h,p,g,w){let E;if(p.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new fe(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){VT(w,g);const R=[];for(const b of w)R.push(jT(h,o,b));E={arrayValue:{values:R}}}else E=jT(h,o,w)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||VT(w,g),E=fj(c,l,w,g==="in"||g==="not-in");return Nt.create(p,g,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function rp(n,e,t){const r=e,s=tp("where",n);return np._create(s,r,t)}class zv extends Bv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Vr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,o){let l=s;const c=o.getFlattenedFilters();for(const h of c)qS(l,h),l=Yg(l,h)}(e._query,t),new ho(e.firestore,e.converter,Yg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wv extends HS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Wv(e,t)}_apply(e){const t=function(s,o,l){if(s.startAt!==null)throw new fe(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new fe(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _c(o,l)}(e._query,this._field,this._direction);return new ho(e.firestore,e.converter,function(s,o){const l=s.explicitOrderBy.concat([o]);return new jl(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function gj(n,e="asc"){const t=e,r=tp("orderBy",n);return Wv._create(r,t)}function jT(n,e,t){if(typeof(t=ot(t))=="string"){if(t==="")throw new fe(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wx(e)&&t.indexOf("/")!==-1)throw new fe(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ht.fromString(t));if(!_e.isDocumentKey(r))throw new fe(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return JE(n,new _e(r))}if(t instanceof pn)return JE(n,t._key);throw new fe(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kf(t)}.`)}function VT(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qS(n,e){const t=function(s,o){for(const l of s)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new fe(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class yj{convertValue(e,t="none"){switch(Ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return uo(e,(s,o)=>{r[s]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,s;const o=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[nf].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(l=>Rt(l.doubleValue));return new jv(o)}convertGeoPoint(e){return new Mv(Rt(e.latitude),Rt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Vf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gc(e));default:return null}}convertTimestamp(e){const t=Yi(e);return new jt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ht.fromString(e);Je(hS(r));const s=new yc(r.get(1),r.get(3)),o=new _e(r.popFirst(5));return s.isEqual(t)||zs(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class KS extends zS{constructor(e,t,r,s,o,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Fh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(tp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Fh extends KS{data(e={}){return super.data(e)}}class QS{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Qu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Fh(this._firestore,this._userDataWriter,r.key,r,new Qu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(c=>{const h=new Fh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Qu(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const h=new Fh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Qu(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,g=-1;return c.type!==0&&(p=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),g=l.indexOf(c.doc.key)),{type:vj(c.type),doc:h,oldIndex:p,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function vj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(n){n=On(n,pn);const e=On(n.firestore,Hs);return rj(Yf(e),n._key).then(t=>JS(e,n,t))}class Hv extends yj{constructor(e){super(),this.firestore=e}convertBytes(e){return new _l(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,t)}}function El(n){n=On(n,ho);const e=On(n.firestore,Hs),t=Yf(e),r=new Hv(e);return WS(n._query),sj(t,n._query).then(s=>new QS(e,r,n,s))}function YS(n,e,t){n=On(n,pn);const r=On(n.firestore,Hs),s=GS(n.converter,e,t);return sp(r,[FS(Zf(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,cr.none())])}function XS(n,e,t,...r){n=On(n,pn);const s=On(n.firestore,Hs),o=Zf(s);let l;return l=typeof(e=ot(e))=="string"||e instanceof Xf?hj(o,"updateDoc",n._key,e,t,r):dj(o,"updateDoc",n._key,e),sp(s,[l.toMutation(n._key,cr.exists(!0))])}function _j(n){return sp(On(n.firestore,Hs),[new mv(n._key,cr.none())])}function qv(n,e){const t=On(n.firestore,Hs),r=to(n),s=GS(n.converter,e);return sp(t,[FS(Zf(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,cr.exists(!1))]).then(()=>r)}function Gv(n,...e){var t,r,s;n=ot(n);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||MT(e[l])||(o=e[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(MT(e[l])){const w=e[l];e[l]=(t=w.next)===null||t===void 0?void 0:t.bind(w),e[l+1]=(r=w.error)===null||r===void 0?void 0:r.bind(w),e[l+2]=(s=w.complete)===null||s===void 0?void 0:s.bind(w)}let h,p,g;if(n instanceof pn)p=On(n.firestore,Hs),g=Ff(n._key.path),h={next:w=>{e[l]&&e[l](JS(p,n,w))},error:e[l+1],complete:e[l+2]};else{const w=On(n,ho);p=On(w.firestore,Hs),g=w._query;const E=new Hv(p);h={next:x=>{e[l]&&e[l](new QS(p,E,w,x))},error:e[l+1],complete:e[l+2]},WS(n._query)}return function(E,x,R,b){const S=new Lv(b),L=new Nv(x,S,R);return E.asyncQueue.enqueueAndForget(async()=>Pv(await cf(E),L)),()=>{S.su(),E.asyncQueue.enqueueAndForget(async()=>bv(await cf(E),L))}}(Yf(p),g,c,h)}function sp(n,e){return function(r,s){const o=new js;return r.asyncQueue.enqueueAndForget(async()=>H4(await nj(r),s,o)),o.promise}(Yf(n),e)}function JS(n,e,t){const r=t.docs.get(e._key),s=new Hv(n);return new KS(n,s,e._key,r,new Qu(t.hasPendingWrites,t.fromCache),e.converter)}function tc(){return new Fv("serverTimestamp")}(function(e,t=!0){(function(s){Ol=s})(oo),Gi(new Us("firestore",(r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new Hs(new pL(r.getProvider("auth-internal")),new yL(l,r.getProvider("app-check-internal")),function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new fe(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yc(p.options.projectId,g)}(l,s),l);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),ur($E,BE,e),ur($E,BE,"esm2017")})();var FT={};const UT="@firebase/database",$T="1.0.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZS="";function wj(n){ZS=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Jt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:hc(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Xs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ej(e)}}catch{}return new Tj},qo=eR("localStorage"),Ij=eR("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=new bf("@firebase/database"),Cj=function(){let n=1;return function(){return n++}}(),tR=function(n){const e=Vk(n),t=new Dk;t.update(e);const r=t.digest();return Hy.encodeByteArray(r)},$c=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=$c.apply(null,r):typeof r=="object"?e+=Jt(r):e+=r,e+=" "}return e};let nc=null,BT=!0;const xj=function(n,e){ce(!0,"Can't turn on custom loggers persistently."),ll.logLevel=Me.VERBOSE,nc=ll.log.bind(ll)},cn=function(...n){if(BT===!0&&(BT=!1,nc===null&&Ij.get("logging_enabled")===!0&&xj()),nc){const e=$c.apply(null,n);nc(e)}},Bc=function(n){return function(...e){cn(n,...e)}},uy=function(...n){const e="FIREBASE INTERNAL ERROR: "+$c(...n);ll.error(e)},qs=function(...n){const e=`FIREBASE FATAL ERROR: ${$c(...n)}`;throw ll.error(e),new Error(e)},Qn=function(...n){const e="FIREBASE WARNING: "+$c(...n);ll.warn(e)},Sj=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Qn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},nR=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Rj=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Tl="[MIN_NAME]",Zo="[MAX_NAME]",Fl=function(n,e){if(n===e)return 0;if(n===Tl||e===Zo)return-1;if(e===Tl||n===Zo)return 1;{const t=zT(n),r=zT(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},Aj=function(n,e){return n===e?0:n<e?-1:1},Mu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Jt(e))},Kv=function(n){if(typeof n!="object"||n===null)return Jt(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=Jt(e[r]),t+=":",t+=Kv(n[e[r]]);return t+="}",t},rR=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let s=0;s<t;s+=e)s+e>t?r.push(n.substring(s,t)):r.push(n.substring(s,s+e));return r};function hr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const sR=function(n){ce(!nR(n),"Invalid JSON number");const e=11,t=52,r=(1<<e-1)-1;let s,o,l,c,h;n===0?(o=0,l=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=c+r,l=Math.round(n*Math.pow(2,t-c)-Math.pow(2,t))):(o=0,l=Math.round(n/Math.pow(2,1-r-t))));const p=[];for(h=t;h;h-=1)p.push(l%2?1:0),l=Math.floor(l/2);for(h=e;h;h-=1)p.push(o%2?1:0),o=Math.floor(o/2);p.push(s?1:0),p.reverse();const g=p.join("");let w="";for(h=0;h<64;h+=8){let E=parseInt(g.substr(h,8),2).toString(16);E.length===1&&(E="0"+E),w=w+E}return w.toLowerCase()},Pj=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},bj=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},kj=new RegExp("^-?(0*)\\d{1,10}$"),Nj=-2147483648,Dj=2147483647,zT=function(n){if(kj.test(n)){const e=Number(n);if(e>=Nj&&e<=Dj)return e}return null},zc=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Qn("Exception was thrown by user callback.",t),e},Math.floor(0))}},Oj=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},rc=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,hn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Qn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(cn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qn(e)}}class Uh{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Uh.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="5",iR="v",oR="s",aR="r",lR="f",uR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,cR="ls",dR="p",cy="ac",hR="websocket",fR="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,t,r,s,o=!1,l="",c=!1,h=!1,p=null){this.secure=t,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=h,this.emulatorOptions=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=qo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&qo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function jj(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function mR(n,e,t){ce(typeof e=="string","typeof type must == string"),ce(typeof t=="object","typeof params must == object");let r;if(e===hR)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===fR)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);jj(n)&&(t.ns=n.namespace);const s=[];return hr(t,(o,l)=>{s.push(o+"="+l)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(){this.counters_={}}incrementCounter(e,t=1){Xs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return pk(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug={},cg={};function Yv(n){const e=n.toString();return ug[e]||(ug[e]=new Vj),ug[e]}function Fj(n,e){const t=n.toString();return cg[t]||(cg[t]=e()),cg[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&zc(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="start",$j="close",Bj="pLPCommand",zj="pRTLPCB",gR="id",yR="pw",vR="ser",Wj="cb",Hj="seg",qj="ts",Gj="d",Kj="dframe",_R=1870,wR=30,Qj=_R-wR,Yj=25e3,Xj=3e4;class nl{constructor(e,t,r,s,o,l,c){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.transportSessionId=l,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Bc(e),this.stats_=Yv(t),this.urlFn=h=>(this.appCheckToken&&(h[cy]=this.appCheckToken),mR(t,fR,h))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Uj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Xj)),Rj(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Xv((...o)=>{const[l,c,h,p,g]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===WT)this.id=c,this.password=h;else if(l===$j)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...o)=>{const[l,c]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,c)},()=>{this.onClosed_()},this.urlFn);const r={};r[WT]="t",r[vR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Wj]=this.scriptTagHolder.uniqueCallbackIdentifier),r[iR]=Qv,this.transportSessionId&&(r[oR]=this.transportSessionId),this.lastSessionId&&(r[cR]=this.lastSessionId),this.applicationId&&(r[dR]=this.applicationId),this.appCheckToken&&(r[cy]=this.appCheckToken),typeof location<"u"&&location.hostname&&uR.test(location.hostname)&&(r[aR]=lR);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){nl.forceAllow_=!0}static forceDisallow(){nl.forceDisallow_=!0}static isAvailable(){return nl.forceAllow_?!0:!nl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Pj()&&!bj()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Jt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=RC(t),s=rR(r,Qj);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={};r[Kj]="t",r[gR]=e,r[yR]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Jt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Xv{constructor(e,t,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Cj(),window[Bj+this.uniqueCallbackIdentifier]=e,window[zj+this.uniqueCallbackIdentifier]=t,this.myIFrame=Xv.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(c){cn("frame writing exception"),c.stack&&cn(c.stack),cn(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||cn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[gR]=this.myID,e[yR]=this.myPW,e[vR]=this.currentSerial;let t=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+wR+r.length<=_R;){const l=this.pendingSegs.shift();r=r+"&"+Hj+s+"="+l.seg+"&"+qj+s+"="+l.ts+"&"+Gj+s+"="+l.d,s++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(r,Math.floor(Yj)),o=()=>{clearTimeout(s),r()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{cn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj=16384,Zj=45e3;let hf=null;typeof MozWebSocket<"u"?hf=MozWebSocket:typeof WebSocket<"u"&&(hf=WebSocket);class Dr{constructor(e,t,r,s,o,l,c){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Bc(this.connId),this.stats_=Yv(t),this.connURL=Dr.connectionURL_(t,l,c,s,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,s,o){const l={};return l[iR]=Qv,typeof location<"u"&&location.hostname&&uR.test(location.hostname)&&(l[aR]=lR),t&&(l[oR]=t),r&&(l[cR]=r),s&&(l[cy]=s),o&&(l[dR]=o),mR(e,hR,l)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,qo.set("previous_websocket_failure",!0);try{let r;Ck(),this.mySock=new hf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Dr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&hf!==null&&!Dr.forceDisallow_}static previouslyFailed(){return qo.isInMemoryStorage||qo.get("previous_websocket_failure")===!0}markConnectionHealthy(){qo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=hc(t);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ce(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const t=Jt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=rR(t,Jj);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Zj))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Dr.responsesRequiredToBeHealthy=2;Dr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{static get ALL_TRANSPORTS(){return[nl,Dr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Dr&&Dr.isAvailable();let r=t&&!Dr.previouslyFailed();if(e.webSocketOnly&&(t||Qn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Dr];else{const s=this.transports_=[];for(const o of Ic.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);Ic.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ic.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV=6e4,tV=5e3,nV=10*1024,rV=100*1024,dg="t",HT="d",sV="s",qT="r",iV="e",GT="o",KT="a",QT="n",YT="p",oV="h";class aV{constructor(e,t,r,s,o,l,c,h,p,g){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=l,this.onReady_=c,this.onDisconnect_=h,this.onKill_=p,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Bc("c:"+this.id+":"),this.transportManager_=new Ic(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=rc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>rV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>nV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(dg in e){const t=e[dg];t===KT?this.upgradeIfSecondaryHealthy_():t===qT?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===GT&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Mu("t",e),r=Mu("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:YT,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:KT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:QT,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Mu("t",e),r=Mu("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Mu(dg,e);if(HT in e){const r=e[HT];if(t===oV){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===QT){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===sV?this.onConnectionShutdown_(r):t===qT?this.onReset_(r):t===iV?uy("Server Error: "+r):t===GT?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):uy("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Qv!==r&&Qn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),rc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(eV))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):rc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(tV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:YT,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(qo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{put(e,t,r,s){}merge(e,t,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.allowedEvents_=e,this.listeners_={},ce(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const s=this.getInitialEvent(e);s&&t.apply(r,s)}off(e,t,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let o=0;o<s.length;o++)if(s[o].callback===t&&(!r||r===s[o].context)){s.splice(o,1);return}}validateEventType_(e){ce(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff extends TR{static getInstance(){return new ff}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Qy()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ce(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=32,JT=768;class ft{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function nt(){return new ft("")}function He(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ro(n){return n.pieces_.length-n.pieceNum_}function dt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ft(n.pieces_,e)}function IR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function lV(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function CR(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function xR(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ft(e,0)}function qt(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof ft)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&t.push(r[s])}return new ft(t,0)}function $e(n){return n.pieceNum_>=n.pieces_.length}function lr(n,e){const t=He(n),r=He(e);if(t===null)return e;if(t===r)return lr(dt(n),dt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function SR(n,e){if(ro(n)!==ro(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Or(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(ro(n)>ro(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class uV{constructor(e,t){this.errorPrefix_=t,this.parts_=CR(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Pf(this.parts_[r]);RR(this)}}function cV(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Pf(e),RR(n)}function dV(n){const e=n.parts_.pop();n.byteLength_-=Pf(e),n.parts_.length>0&&(n.byteLength_-=1)}function RR(n){if(n.byteLength_>JT)throw new Error(n.errorPrefix_+"has a key path longer than "+JT+" bytes ("+n.byteLength_+").");if(n.parts_.length>XT)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+XT+") or object contains a cycle "+zo(n))}function zo(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv extends TR{static getInstance(){return new Jv}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return ce(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=1e3,hV=60*5*1e3,ZT=30*1e3,fV=1.3,pV=3e4,mV="server_kill",eI=3;class Vs extends ER{constructor(e,t,r,s,o,l,c,h){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=l,this.appCheckTokenProvider_=c,this.authOverride_=h,this.id=Vs.nextPersistentConnectionId_++,this.log_=Bc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ju,this.maxReconnectDelay_=hV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Jv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ff.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const s=++this.requestNumber_,o={r:s,a:e,b:t};this.log_(Jt(o)),ce(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const t=new Gy,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const c=l.d;l.s==="ok"?t.resolve(c):t.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,r,s){this.initConnection_();const o=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ce(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:t,query:e,tag:r};this.listens.get(l).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(e){const t=e.query,r=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r},l="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(l,o,c=>{const h=c.d,p=c.s;Vs.warnOnListenWarnings_(h,t),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",c),p!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(p,h))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Xs(e,"w")){const r=hl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();Qn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Nk(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ZT)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=kk(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(t,r,s=>{const o=s.s,l=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,r=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(e,t){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,t)}sendUnlisten_(e,t,r,s){this.log_("Unlisten on "+e+" for "+t);const o={p:e},l="n";s&&(o.q=r,o.t=s),this.sendRequest(l,o)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,s){const o={p:t,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,l=>{s&&setTimeout(()=>{s(l.s,l.d)},Math.floor(0))})}put(e,t,r,s){this.putInternal("p",e,t,r,s)}merge(e,t,r,s){this.putInternal("m",e,t,r,s)}putInternal(e,t,r,s,o){this.initConnection_();const l={p:t,d:r};o!==void 0&&(l.h=o),this.outstandingPuts_.push({action:e,request:l,onComplete:s}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,r=>{if(r.s!=="ok"){const o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Jt(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):uy("Unrecognized action received from server: "+Jt(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ce(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ju,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ju,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>pV&&(this.reconnectDelay_=ju),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*fV)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Vs.nextConnectionId_++,o=this.lastSessionId;let l=!1,c=null;const h=function(){c?c.close():(l=!0,r())},p=function(w){ce(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(w)};this.realtime_={close:h,sendRequest:p};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[w,E]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);l?cn("getToken() completed but was canceled"):(cn("getToken() completed. Creating connection."),this.authToken_=w&&w.accessToken,this.appCheckToken_=E&&E.token,c=new aV(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,x=>{Qn(x+" ("+this.repoInfo_.toString()+")"),this.interrupt(mV)},o))}catch(w){this.log_("Failed to get token: "+w),l||(this.repoInfo_.nodeAdmin&&Qn(w),h())}}}interrupt(e){cn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){cn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Dg(this.interruptReasons_)&&(this.reconnectDelay_=ju,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;t?r=t.map(o=>Kv(o)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const r=new ft(e).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(t),o.delete(t),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,t){cn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=eI&&(this.reconnectDelay_=ZT,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){cn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=eI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+ZS.replace(/\./g,"-")]=1,Qy()?e["framework.cordova"]=1:NC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ff.getInstance().currentlyOnline();return Dg(this.interruptReasons_)&&e}}Vs.nextPersistentConnectionId_=0;Vs.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new qe(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new qe(Tl,e),s=new qe(Tl,t);return this.compare(r,s)!==0}minPost(){return qe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wh;class AR extends ip{static get __EMPTY_NODE(){return wh}static set __EMPTY_NODE(e){wh=e}compare(e,t){return Fl(e.name,t.name)}isDefinedOn(e){throw kl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return qe.MIN}maxPost(){return new qe(Zo,wh)}makePost(e,t){return ce(typeof e=="string","KeyIndex indexValue must always be a string."),new qe(e,wh)}toString(){return".key"}}const ul=new AR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,t,r,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,s&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ht{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??Ht.RED,this.left=s??Dn.EMPTY_NODE,this.right=o??Dn.EMPTY_NODE}copy(e,t,r,s,o){return new Ht(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s=s.copy(null,t,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Dn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,s;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return Dn.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ht.RED=!0;Ht.BLACK=!1;class gV{copy(e,t,r,s,o){return this}insert(e,t,r){return new Ht(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Dn{constructor(e,t=Dn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Dn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ht.BLACK,null,null))}remove(e){return new Dn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ht.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,s=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Eh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Eh(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Eh(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Eh(this.root_,null,this.comparator_,!0,e)}}Dn.EMPTY_NODE=new gV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yV(n,e){return Fl(n.name,e.name)}function Zv(n,e){return Fl(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dy;function vV(n){dy=n}const PR=function(n){return typeof n=="number"?"number:"+sR(n):"string:"+n},bR=function(n){if(n.isLeafNode()){const e=n.val();ce(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Xs(e,".sv"),"Priority must be a string or number.")}else ce(n===dy||n.isEmpty(),"priority of unexpected type.");ce(n===dy||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tI;class zt{static set __childrenNodeConstructor(e){tI=e}static get __childrenNodeConstructor(){return tI}constructor(e,t=zt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ce(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),bR(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new zt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:zt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return $e(e)?this:He(e)===".priority"?this.priorityNode_:zt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:zt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=He(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(ce(r!==".priority"||ro(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,zt.__childrenNodeConstructor.EMPTY_NODE.updateChild(dt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+PR(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=sR(this.value_):e+=this.value_,this.lazyHash_=tR(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===zt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof zt.__childrenNodeConstructor?-1:(ce(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,s=zt.VALUE_TYPE_ORDER.indexOf(t),o=zt.VALUE_TYPE_ORDER.indexOf(r);return ce(s>=0,"Unknown leaf type: "+t),ce(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}zt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kR,NR;function _V(n){kR=n}function wV(n){NR=n}class EV extends ip{compare(e,t){const r=e.node.getPriority(),s=t.node.getPriority(),o=r.compareTo(s);return o===0?Fl(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return qe.MIN}maxPost(){return new qe(Zo,new zt("[PRIORITY-POST]",NR))}makePost(e,t){const r=kR(e);return new qe(t,new zt("[PRIORITY-POST]",r))}toString(){return".priority"}}const fn=new EV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=Math.log(2);class IV{constructor(e){const t=o=>parseInt(Math.log(o)/TV,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const pf=function(n,e,t,r){n.sort(e);const s=function(h,p){const g=p-h;let w,E;if(g===0)return null;if(g===1)return w=n[h],E=t?t(w):w,new Ht(E,w.node,Ht.BLACK,null,null);{const x=parseInt(g/2,10)+h,R=s(h,x),b=s(x+1,p);return w=n[x],E=t?t(w):w,new Ht(E,w.node,Ht.BLACK,R,b)}},o=function(h){let p=null,g=null,w=n.length;const E=function(R,b){const S=w-R,L=w;w-=R;const U=s(S+1,L),B=n[S],q=t?t(B):B;x(new Ht(q,B.node,b,null,U))},x=function(R){p?(p.left=R,p=R):(g=R,p=R)};for(let R=0;R<h.count;++R){const b=h.nextBitIsOne(),S=Math.pow(2,h.count-(R+1));b?E(S,Ht.BLACK):(E(S,Ht.BLACK),E(S,Ht.RED))}return g},l=new IV(n.length),c=o(l);return new Dn(r||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hg;const Xa={};class Ls{static get Default(){return ce(Xa&&fn,"ChildrenNode.ts has not been loaded"),hg=hg||new Ls({".priority":Xa},{".priority":fn}),hg}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=hl(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Dn?t:null}hasIndex(e){return Xs(this.indexSet_,e.toString())}addIndex(e,t){ce(e!==ul,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const o=t.getIterator(qe.Wrap);let l=o.getNext();for(;l;)s=s||e.isDefinedOn(l.node),r.push(l),l=o.getNext();let c;s?c=pf(r,e.getCompare()):c=Xa;const h=e.toString(),p=Object.assign({},this.indexSet_);p[h]=e;const g=Object.assign({},this.indexes_);return g[h]=c,new Ls(g,p)}addToIndexes(e,t){const r=Gh(this.indexes_,(s,o)=>{const l=hl(this.indexSet_,o);if(ce(l,"Missing index implementation for "+o),s===Xa)if(l.isDefinedOn(e.node)){const c=[],h=t.getIterator(qe.Wrap);let p=h.getNext();for(;p;)p.name!==e.name&&c.push(p),p=h.getNext();return c.push(e),pf(c,l.getCompare())}else return Xa;else{const c=t.get(e.name);let h=s;return c&&(h=h.remove(new qe(e.name,c))),h.insert(e,e.node)}});return new Ls(r,this.indexSet_)}removeFromIndexes(e,t){const r=Gh(this.indexes_,s=>{if(s===Xa)return s;{const o=t.get(e.name);return o?s.remove(new qe(e.name,o)):s}});return new Ls(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vu;class Xe{static get EMPTY_NODE(){return Vu||(Vu=new Xe(new Dn(Zv),null,Ls.Default))}constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&bR(this.priorityNode_),this.children_.isEmpty()&&ce(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Vu}updatePriority(e){return this.children_.isEmpty()?this:new Xe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Vu:t}}getChild(e){const t=He(e);return t===null?this:this.getImmediateChild(t).getChild(dt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ce(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const r=new qe(e,t);let s,o;t.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(r,this.children_));const l=s.isEmpty()?Vu:this.priorityNode_;return new Xe(s,l,o)}}updateChild(e,t){const r=He(e);if(r===null)return t;{ce(He(e)!==".priority"||ro(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(dt(e),t);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,s=0,o=!0;if(this.forEachChild(fn,(l,c)=>{t[l]=c.val(e),r++,o&&Xe.INTEGER_REGEXP_.test(l)?s=Math.max(s,Number(l)):o=!1}),!e&&o&&s<2*r){const l=[];for(const c in t)l[c]=t[c];return l}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+PR(this.getPriority().val())+":"),this.forEachChild(fn,(t,r)=>{const s=r.hash();s!==""&&(e+=":"+t+":"+s)}),this.lazyHash_=e===""?"":tR(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new qe(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new qe(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new qe(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,qe.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,qe.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Wc?-1:0}withIndex(e){if(e===ul||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Xe(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===ul||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const r=this.getIterator(fn),s=t.getIterator(fn);let o=r.getNext(),l=s.getNext();for(;o&&l;){if(o.name!==l.name||!o.node.equals(l.node))return!1;o=r.getNext(),l=s.getNext()}return o===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===ul?null:this.indexMap_.get(e.toString())}}Xe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class CV extends Xe{constructor(){super(new Dn(Zv),Xe.EMPTY_NODE,Ls.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Xe.EMPTY_NODE}isEmpty(){return!1}}const Wc=new CV;Object.defineProperties(qe,{MIN:{value:new qe(Tl,Xe.EMPTY_NODE)},MAX:{value:new qe(Zo,Wc)}});AR.__EMPTY_NODE=Xe.EMPTY_NODE;zt.__childrenNodeConstructor=Xe;vV(Wc);wV(Wc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=!0;function dn(n,e=null){if(n===null)return Xe.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ce(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new zt(t,dn(e))}if(!(n instanceof Array)&&xV){const t=[];let r=!1;if(hr(n,(l,c)=>{if(l.substring(0,1)!=="."){const h=dn(c);h.isEmpty()||(r=r||!h.getPriority().isEmpty(),t.push(new qe(l,h)))}}),t.length===0)return Xe.EMPTY_NODE;const o=pf(t,yV,l=>l.name,Zv);if(r){const l=pf(t,fn.getCompare());return new Xe(o,dn(e),new Ls({".priority":l},{".priority":fn}))}else return new Xe(o,dn(e),Ls.Default)}else{let t=Xe.EMPTY_NODE;return hr(n,(r,s)=>{if(Xs(n,r)&&r.substring(0,1)!=="."){const o=dn(s);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(dn(e))}}_V(dn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV extends ip{constructor(e){super(),this.indexPath_=e,ce(!$e(e)&&He(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),s=this.extractChild(t.node),o=r.compareTo(s);return o===0?Fl(e.name,t.name):o}makePost(e,t){const r=dn(e),s=Xe.EMPTY_NODE.updateChild(this.indexPath_,r);return new qe(t,s)}maxPost(){const e=Xe.EMPTY_NODE.updateChild(this.indexPath_,Wc);return new qe(Zo,e)}toString(){return CR(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV extends ip{compare(e,t){const r=e.node.compareTo(t.node);return r===0?Fl(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return qe.MIN}maxPost(){return qe.MAX}makePost(e,t){const r=dn(e);return new qe(t,r)}toString(){return".value"}}const AV=new RV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(n){return{type:"value",snapshotNode:n}}function bV(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function kV(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function nI(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function NV(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=fn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ce(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ce(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Tl}hasEnd(){return this.endSet_}getIndexEndValue(){return ce(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ce(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Zo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ce(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===fn}copy(){const e=new e_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function rI(n){const e={};if(n.isDefault())return e;let t;if(n.index_===fn?t="$priority":n.index_===AV?t="$value":n.index_===ul?t="$key":(ce(n.index_ instanceof SV,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Jt(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=Jt(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Jt(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Jt(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Jt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function sI(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==fn&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends ER{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ce(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Bc("p:rest:"),this.listens_={}}listen(e,t,r,s){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=mf.getListenId_(e,r),c={};this.listens_[l]=c;const h=rI(e._queryParams);this.restRequest_(o+".json",h,(p,g)=>{let w=g;if(p===404&&(w=null,p=null),p===null&&this.onDataUpdate_(o,w,!1,r),hl(this.listens_,l)===c){let E;p?p===401?E="permission_denied":E="rest_error:"+p:E="ok",s(E,null)}})}unlisten(e,t){const r=mf.getListenId_(e,t);delete this.listens_[r]}get(e){const t=rI(e._queryParams),r=e._path.toString(),s=new Gy;return this.restRequest_(r+".json",t,(o,l)=>{let c=l;o===404&&(c=null,o=null),o===null?(this.onDataUpdate_(r,c,!1,null),s.resolve(c)):s.reject(new Error(c))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(t.auth=s.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Nl(t);this.log_("Sending REST request for "+l);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&c.readyState===4){this.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);let h=null;if(c.status>=200&&c.status<300){try{h=hc(c.responseText)}catch{Qn("Failed to parse JSON response for "+l+": "+c.responseText)}r(null,h)}else c.status!==401&&c.status!==404&&Qn("Got unsuccessful REST response for "+l+" Status: "+c.status),r(c.status);r=null}},c.open("GET",l,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(){this.rootNode_=Xe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(){return{value:null,children:new Map}}function DR(n,e,t){if($e(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const r=He(e);n.children.has(r)||n.children.set(r,gf());const s=n.children.get(r);e=dt(e),DR(s,e,t)}}function hy(n,e,t){n.value!==null?t(e,n.value):OV(n,(r,s)=>{const o=new ft(e.toString()+"/"+r);hy(s,o,t)})}function OV(n,e){n.children.forEach((t,r)=>{e(r,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&hr(this.last_,(r,s)=>{t[r]=t[r]-s}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=10*1e3,MV=30*1e3,jV=5*60*1e3;class VV{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new LV(e);const r=iI+(MV-iI)*Math.random();rc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;hr(e,(s,o)=>{o>0&&Xs(this.statsToReport_,s)&&(t[s]=o,r=!0)}),r&&this.server_.reportStats(t),rc(this.reportStats_.bind(this),Math.floor(Math.random()*2*jV))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ns;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ns||(ns={}));function OR(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function LR(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function MR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ns.ACK_USER_WRITE,this.source=OR()}operationForChild(e){if($e(this.path)){if(this.affectedTree.value!=null)return ce(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ft(e));return new yf(nt(),t,this.revert)}}else return ce(He(this.path)===e,"operationForChild called for unrelated child."),new yf(dt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ns.OVERWRITE}operationForChild(e){return $e(this.path)?new ea(this.source,nt(),this.snap.getImmediateChild(e)):new ea(this.source,dt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ns.MERGE}operationForChild(e){if($e(this.path)){const t=this.children.subtree(new ft(e));return t.isEmpty()?null:t.value?new ea(this.source,nt(),t.value):new Cc(this.source,nt(),t)}else return ce(He(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Cc(this.source,dt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($e(e))return this.isFullyInitialized()&&!this.filtered_;const t=He(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function FV(n,e,t,r){const s=[],o=[];return e.forEach(l=>{l.type==="child_changed"&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(NV(l.childName,l.snapshotNode))}),Fu(n,s,"child_removed",e,r,t),Fu(n,s,"child_added",e,r,t),Fu(n,s,"child_moved",o,r,t),Fu(n,s,"child_changed",e,r,t),Fu(n,s,"value",e,r,t),s}function Fu(n,e,t,r,s,o){const l=r.filter(c=>c.type===t);l.sort((c,h)=>$V(n,c,h)),l.forEach(c=>{const h=UV(n,c,o);s.forEach(p=>{p.respondsTo(c.type)&&e.push(p.createEvent(h,n.query_))})})}function UV(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function $V(n,e,t){if(e.childName==null||t.childName==null)throw kl("Should only compare child_ events.");const r=new qe(e.childName,e.snapshotNode),s=new qe(t.childName,t.snapshotNode);return n.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(n,e){return{eventCache:n,serverCache:e}}function sc(n,e,t,r){return jR(new t_(e,t,r),n.serverCache)}function VR(n,e,t,r){return jR(n.eventCache,new t_(e,t,r))}function fy(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ta(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fg;const BV=()=>(fg||(fg=new Dn(Aj)),fg);class ct{static fromObject(e){let t=new ct(null);return hr(e,(r,s)=>{t=t.set(new ft(r),s)}),t}constructor(e,t=BV()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:nt(),value:this.value};if($e(e))return null;{const r=He(e),s=this.children.get(r);if(s!==null){const o=s.findRootMostMatchingPathAndValue(dt(e),t);return o!=null?{path:qt(new ft(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($e(e))return this;{const t=He(e),r=this.children.get(t);return r!==null?r.subtree(dt(e)):new ct(null)}}set(e,t){if($e(e))return new ct(t,this.children);{const r=He(e),o=(this.children.get(r)||new ct(null)).set(dt(e),t),l=this.children.insert(r,o);return new ct(this.value,l)}}remove(e){if($e(e))return this.children.isEmpty()?new ct(null):new ct(null,this.children);{const t=He(e),r=this.children.get(t);if(r){const s=r.remove(dt(e));let o;return s.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,s),this.value===null&&o.isEmpty()?new ct(null):new ct(this.value,o)}else return this}}get(e){if($e(e))return this.value;{const t=He(e),r=this.children.get(t);return r?r.get(dt(e)):null}}setTree(e,t){if($e(e))return t;{const r=He(e),o=(this.children.get(r)||new ct(null)).setTree(dt(e),t);let l;return o.isEmpty()?l=this.children.remove(r):l=this.children.insert(r,o),new ct(this.value,l)}}fold(e){return this.fold_(nt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((s,o)=>{r[s]=o.fold_(qt(e,s),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,nt(),t)}findOnPath_(e,t,r){const s=this.value?r(t,this.value):!1;if(s)return s;if($e(e))return null;{const o=He(e),l=this.children.get(o);return l?l.findOnPath_(dt(e),qt(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,nt(),t)}foreachOnPath_(e,t,r){if($e(e))return this;{this.value&&r(t,this.value);const s=He(e),o=this.children.get(s);return o?o.foreachOnPath_(dt(e),qt(t,s),r):new ct(null)}}foreach(e){this.foreach_(nt(),e)}foreach_(e,t){this.children.inorderTraversal((r,s)=>{s.foreach_(qt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this.writeTree_=e}static empty(){return new Mr(new ct(null))}}function ic(n,e,t){if($e(e))return new Mr(new ct(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let o=r.value;const l=lr(s,e);return o=o.updateChild(l,t),new Mr(n.writeTree_.set(s,o))}else{const s=new ct(t),o=n.writeTree_.setTree(e,s);return new Mr(o)}}}function oI(n,e,t){let r=n;return hr(t,(s,o)=>{r=ic(r,qt(e,s),o)}),r}function aI(n,e){if($e(e))return Mr.empty();{const t=n.writeTree_.setTree(e,new ct(null));return new Mr(t)}}function py(n,e){return aa(n,e)!=null}function aa(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(lr(t.path,e)):null}function lI(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(fn,(r,s)=>{e.push(new qe(r,s))}):n.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new qe(r,s.value))}),e}function Wi(n,e){if($e(e))return n;{const t=aa(n,e);return t!=null?new Mr(new ct(t)):new Mr(n.writeTree_.subtree(e))}}function my(n){return n.writeTree_.isEmpty()}function Il(n,e){return FR(nt(),n.writeTree_,e)}function FR(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((s,o)=>{s===".priority"?(ce(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=FR(qt(n,s),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(qt(n,".priority"),r)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(n,e){return HR(e,n)}function zV(n,e,t,r,s){ce(r>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:s}),s&&(n.visibleWrites=ic(n.visibleWrites,e,t)),n.lastWriteId=r}function WV(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}function HV(n,e){const t=n.allWrites.findIndex(c=>c.writeId===e);ce(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let s=r.visible,o=!1,l=n.allWrites.length-1;for(;s&&l>=0;){const c=n.allWrites[l];c.visible&&(l>=t&&qV(c,r.path)?s=!1:Or(r.path,c.path)&&(o=!0)),l--}if(s){if(o)return GV(n),!0;if(r.snap)n.visibleWrites=aI(n.visibleWrites,r.path);else{const c=r.children;hr(c,h=>{n.visibleWrites=aI(n.visibleWrites,qt(r.path,h))})}return!0}else return!1}function qV(n,e){if(n.snap)return Or(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Or(qt(n.path,t),e))return!0;return!1}function GV(n){n.visibleWrites=$R(n.allWrites,KV,nt()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function KV(n){return n.visible}function $R(n,e,t){let r=Mr.empty();for(let s=0;s<n.length;++s){const o=n[s];if(e(o)){const l=o.path;let c;if(o.snap)Or(t,l)?(c=lr(t,l),r=ic(r,c,o.snap)):Or(l,t)&&(c=lr(l,t),r=ic(r,nt(),o.snap.getChild(c)));else if(o.children){if(Or(t,l))c=lr(t,l),r=oI(r,c,o.children);else if(Or(l,t))if(c=lr(l,t),$e(c))r=oI(r,nt(),o.children);else{const h=hl(o.children,He(c));if(h){const p=h.getChild(dt(c));r=ic(r,nt(),p)}}}else throw kl("WriteRecord should have .snap or .children")}}return r}function BR(n,e,t,r,s){if(!r&&!s){const o=aa(n.visibleWrites,e);if(o!=null)return o;{const l=Wi(n.visibleWrites,e);if(my(l))return t;if(t==null&&!py(l,nt()))return null;{const c=t||Xe.EMPTY_NODE;return Il(l,c)}}}else{const o=Wi(n.visibleWrites,e);if(!s&&my(o))return t;if(!s&&t==null&&!py(o,nt()))return null;{const l=function(p){return(p.visible||s)&&(!r||!~r.indexOf(p.writeId))&&(Or(p.path,e)||Or(e,p.path))},c=$R(n.allWrites,l,e),h=t||Xe.EMPTY_NODE;return Il(c,h)}}}function QV(n,e,t){let r=Xe.EMPTY_NODE;const s=aa(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(fn,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(t){const o=Wi(n.visibleWrites,e);return t.forEachChild(fn,(l,c)=>{const h=Il(Wi(o,new ft(l)),c);r=r.updateImmediateChild(l,h)}),lI(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}else{const o=Wi(n.visibleWrites,e);return lI(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}}function YV(n,e,t,r,s){ce(r||s,"Either existingEventSnap or existingServerSnap must exist");const o=qt(e,t);if(py(n.visibleWrites,o))return null;{const l=Wi(n.visibleWrites,o);return my(l)?s.getChild(t):Il(l,s.getChild(t))}}function XV(n,e,t,r){const s=qt(e,t),o=aa(n.visibleWrites,s);if(o!=null)return o;if(r.isCompleteForChild(t)){const l=Wi(n.visibleWrites,s);return Il(l,r.getNode().getImmediateChild(t))}else return null}function JV(n,e){return aa(n.visibleWrites,e)}function ZV(n,e,t,r,s,o,l){let c;const h=Wi(n.visibleWrites,e),p=aa(h,nt());if(p!=null)c=p;else if(t!=null)c=Il(h,t);else return[];if(c=c.withIndex(l),!c.isEmpty()&&!c.isLeafNode()){const g=[],w=l.getCompare(),E=o?c.getReverseIteratorFrom(r,l):c.getIteratorFrom(r,l);let x=E.getNext();for(;x&&g.length<s;)w(x,r)!==0&&g.push(x),x=E.getNext();return g}else return[]}function e3(){return{visibleWrites:Mr.empty(),allWrites:[],lastWriteId:-1}}function gy(n,e,t,r){return BR(n.writeTree,n.treePath,e,t,r)}function zR(n,e){return QV(n.writeTree,n.treePath,e)}function uI(n,e,t,r){return YV(n.writeTree,n.treePath,e,t,r)}function vf(n,e){return JV(n.writeTree,qt(n.treePath,e))}function t3(n,e,t,r,s,o){return ZV(n.writeTree,n.treePath,e,t,r,s,o)}function n_(n,e,t){return XV(n.writeTree,n.treePath,e,t)}function WR(n,e){return HR(qt(n.treePath,e),n.writeTree)}function HR(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;ce(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ce(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const o=s.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,nI(r,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,kV(r,s.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,bV(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,nI(r,e.snapshotNode,s.oldSnap));else throw kl("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}}const qR=new r3;class r_{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new t_(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return n_(this.writes_,e,r)}}getChildAfterChild(e,t,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ta(this.viewCache_),o=t3(this.writes_,s,t,1,r,e);return o.length===0?null:o[0]}}function s3(n,e){ce(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ce(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function i3(n,e,t,r,s){const o=new n3;let l,c;if(t.type===ns.OVERWRITE){const p=t;p.source.fromUser?l=yy(n,e,p.path,p.snap,r,s,o):(ce(p.source.fromServer,"Unknown source."),c=p.source.tagged||e.serverCache.isFiltered()&&!$e(p.path),l=_f(n,e,p.path,p.snap,r,s,c,o))}else if(t.type===ns.MERGE){const p=t;p.source.fromUser?l=a3(n,e,p.path,p.children,r,s,o):(ce(p.source.fromServer,"Unknown source."),c=p.source.tagged||e.serverCache.isFiltered(),l=vy(n,e,p.path,p.children,r,s,c,o))}else if(t.type===ns.ACK_USER_WRITE){const p=t;p.revert?l=c3(n,e,p.path,r,s,o):l=l3(n,e,p.path,p.affectedTree,r,s,o)}else if(t.type===ns.LISTEN_COMPLETE)l=u3(n,e,t.path,r,o);else throw kl("Unknown operation type: "+t.type);const h=o.getChanges();return o3(e,l,h),{viewCache:l,changes:h}}function o3(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=fy(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(PV(fy(e)))}}function GR(n,e,t,r,s,o){const l=e.eventCache;if(vf(r,t)!=null)return e;{let c,h;if($e(t))if(ce(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=ta(e),g=p instanceof Xe?p:Xe.EMPTY_NODE,w=zR(r,g);c=n.filter.updateFullNode(e.eventCache.getNode(),w,o)}else{const p=gy(r,ta(e));c=n.filter.updateFullNode(e.eventCache.getNode(),p,o)}else{const p=He(t);if(p===".priority"){ce(ro(t)===1,"Can't have a priority with additional path components");const g=l.getNode();h=e.serverCache.getNode();const w=uI(r,t,g,h);w!=null?c=n.filter.updatePriority(g,w):c=l.getNode()}else{const g=dt(t);let w;if(l.isCompleteForChild(p)){h=e.serverCache.getNode();const E=uI(r,t,l.getNode(),h);E!=null?w=l.getNode().getImmediateChild(p).updateChild(g,E):w=l.getNode().getImmediateChild(p)}else w=n_(r,p,e.serverCache);w!=null?c=n.filter.updateChild(l.getNode(),p,w,g,s,o):c=l.getNode()}}return sc(e,c,l.isFullyInitialized()||$e(t),n.filter.filtersNodes())}}function _f(n,e,t,r,s,o,l,c){const h=e.serverCache;let p;const g=l?n.filter:n.filter.getIndexedFilter();if($e(t))p=g.updateFullNode(h.getNode(),r,null);else if(g.filtersNodes()&&!h.isFiltered()){const x=h.getNode().updateChild(t,r);p=g.updateFullNode(h.getNode(),x,null)}else{const x=He(t);if(!h.isCompleteForPath(t)&&ro(t)>1)return e;const R=dt(t),S=h.getNode().getImmediateChild(x).updateChild(R,r);x===".priority"?p=g.updatePriority(h.getNode(),S):p=g.updateChild(h.getNode(),x,S,R,qR,null)}const w=VR(e,p,h.isFullyInitialized()||$e(t),g.filtersNodes()),E=new r_(s,w,o);return GR(n,w,t,s,E,c)}function yy(n,e,t,r,s,o,l){const c=e.eventCache;let h,p;const g=new r_(s,e,o);if($e(t))p=n.filter.updateFullNode(e.eventCache.getNode(),r,l),h=sc(e,p,!0,n.filter.filtersNodes());else{const w=He(t);if(w===".priority")p=n.filter.updatePriority(e.eventCache.getNode(),r),h=sc(e,p,c.isFullyInitialized(),c.isFiltered());else{const E=dt(t),x=c.getNode().getImmediateChild(w);let R;if($e(E))R=r;else{const b=g.getCompleteChild(w);b!=null?IR(E)===".priority"&&b.getChild(xR(E)).isEmpty()?R=b:R=b.updateChild(E,r):R=Xe.EMPTY_NODE}if(x.equals(R))h=e;else{const b=n.filter.updateChild(c.getNode(),w,R,E,g,l);h=sc(e,b,c.isFullyInitialized(),n.filter.filtersNodes())}}}return h}function cI(n,e){return n.eventCache.isCompleteForChild(e)}function a3(n,e,t,r,s,o,l){let c=e;return r.foreach((h,p)=>{const g=qt(t,h);cI(e,He(g))&&(c=yy(n,c,g,p,s,o,l))}),r.foreach((h,p)=>{const g=qt(t,h);cI(e,He(g))||(c=yy(n,c,g,p,s,o,l))}),c}function dI(n,e,t){return t.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function vy(n,e,t,r,s,o,l,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h=e,p;$e(t)?p=r:p=new ct(null).setTree(t,r);const g=e.serverCache.getNode();return p.children.inorderTraversal((w,E)=>{if(g.hasChild(w)){const x=e.serverCache.getNode().getImmediateChild(w),R=dI(n,x,E);h=_f(n,h,new ft(w),R,s,o,l,c)}}),p.children.inorderTraversal((w,E)=>{const x=!e.serverCache.isCompleteForChild(w)&&E.value===null;if(!g.hasChild(w)&&!x){const R=e.serverCache.getNode().getImmediateChild(w),b=dI(n,R,E);h=_f(n,h,new ft(w),b,s,o,l,c)}}),h}function l3(n,e,t,r,s,o,l){if(vf(s,t)!=null)return e;const c=e.serverCache.isFiltered(),h=e.serverCache;if(r.value!=null){if($e(t)&&h.isFullyInitialized()||h.isCompleteForPath(t))return _f(n,e,t,h.getNode().getChild(t),s,o,c,l);if($e(t)){let p=new ct(null);return h.getNode().forEachChild(ul,(g,w)=>{p=p.set(new ft(g),w)}),vy(n,e,t,p,s,o,c,l)}else return e}else{let p=new ct(null);return r.foreach((g,w)=>{const E=qt(t,g);h.isCompleteForPath(E)&&(p=p.set(g,h.getNode().getChild(E)))}),vy(n,e,t,p,s,o,c,l)}}function u3(n,e,t,r,s){const o=e.serverCache,l=VR(e,o.getNode(),o.isFullyInitialized()||$e(t),o.isFiltered());return GR(n,l,t,r,qR,s)}function c3(n,e,t,r,s,o){let l;if(vf(r,t)!=null)return e;{const c=new r_(r,e,s),h=e.eventCache.getNode();let p;if($e(t)||He(t)===".priority"){let g;if(e.serverCache.isFullyInitialized())g=gy(r,ta(e));else{const w=e.serverCache.getNode();ce(w instanceof Xe,"serverChildren would be complete if leaf node"),g=zR(r,w)}g=g,p=n.filter.updateFullNode(h,g,o)}else{const g=He(t);let w=n_(r,g,e.serverCache);w==null&&e.serverCache.isCompleteForChild(g)&&(w=h.getImmediateChild(g)),w!=null?p=n.filter.updateChild(h,g,w,dt(t),c,o):e.eventCache.getNode().hasChild(g)?p=n.filter.updateChild(h,g,Xe.EMPTY_NODE,dt(t),c,o):p=h,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=gy(r,ta(e)),l.isLeafNode()&&(p=n.filter.updateFullNode(p,l,o)))}return l=e.serverCache.isFullyInitialized()||vf(r,nt())!=null,sc(e,p,l,n.filter.filtersNodes())}}function d3(n,e){const t=ta(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!$e(e)&&!t.getImmediateChild(He(e)).isEmpty())?t.getChild(e):null}function hI(n,e,t,r){e.type===ns.MERGE&&e.source.queryId!==null&&(ce(ta(n.viewCache_),"We should always have a full cache before handling merges"),ce(fy(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,o=i3(n.processor_,s,e,t,r);return s3(n.processor_,o.viewCache),ce(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,h3(n,o.changes,o.viewCache.eventCache.getNode())}function h3(n,e,t,r){const s=n.eventRegistrations_;return FV(n.eventGenerator_,e,t,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fI;function f3(n){ce(!fI,"__referenceConstructor has already been defined"),fI=n}function s_(n,e,t,r){const s=e.source.queryId;if(s!==null){const o=n.views.get(s);return ce(o!=null,"SyncTree gave us an op for an invalid query."),hI(o,e,t,r)}else{let o=[];for(const l of n.views.values())o=o.concat(hI(l,e,t,r));return o}}function i_(n,e){let t=null;for(const r of n.views.values())t=t||d3(r,e);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pI;function p3(n){ce(!pI,"__referenceConstructor has already been defined"),pI=n}class mI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ct(null),this.pendingWriteTree_=e3(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function m3(n,e,t,r,s){return zV(n.pendingWriteTree_,e,t,r,s),s?ap(n,new ea(OR(),e,t)):[]}function rl(n,e,t=!1){const r=WV(n.pendingWriteTree_,e);if(HV(n.pendingWriteTree_,e)){let o=new ct(null);return r.snap!=null?o=o.set(nt(),!0):hr(r.children,l=>{o=o.set(new ft(l),!0)}),ap(n,new yf(r.path,o,t))}else return[]}function op(n,e,t){return ap(n,new ea(LR(),e,t))}function g3(n,e,t){const r=ct.fromObject(t);return ap(n,new Cc(LR(),e,r))}function y3(n,e,t,r){const s=XR(n,r);if(s!=null){const o=JR(s),l=o.path,c=o.queryId,h=lr(l,e),p=new ea(MR(c),h,t);return ZR(n,l,p)}else return[]}function v3(n,e,t,r){const s=XR(n,r);if(s){const o=JR(s),l=o.path,c=o.queryId,h=lr(l,e),p=ct.fromObject(t),g=new Cc(MR(c),h,p);return ZR(n,l,g)}else return[]}function KR(n,e,t){const s=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(l,c)=>{const h=lr(l,e),p=i_(c,h);if(p)return p});return BR(s,e,o,t,!0)}function ap(n,e){return QR(e,n.syncPointTree_,null,UR(n.pendingWriteTree_,nt()))}function QR(n,e,t,r){if($e(n.path))return YR(n,e,t,r);{const s=e.get(nt());t==null&&s!=null&&(t=i_(s,nt()));let o=[];const l=He(n.path),c=n.operationForChild(l),h=e.children.get(l);if(h&&c){const p=t?t.getImmediateChild(l):null,g=WR(r,l);o=o.concat(QR(c,h,p,g))}return s&&(o=o.concat(s_(s,n,r,t))),o}}function YR(n,e,t,r){const s=e.get(nt());t==null&&s!=null&&(t=i_(s,nt()));let o=[];return e.children.inorderTraversal((l,c)=>{const h=t?t.getImmediateChild(l):null,p=WR(r,l),g=n.operationForChild(l);g&&(o=o.concat(YR(g,c,h,p)))}),s&&(o=o.concat(s_(s,n,r,t))),o}function XR(n,e){return n.tagToQueryMap.get(e)}function JR(n){const e=n.indexOf("$");return ce(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ft(n.substr(0,e))}}function ZR(n,e,t){const r=n.syncPointTree_.get(e);ce(r,"Missing sync point for query tag that we're tracking");const s=UR(n.pendingWriteTree_,e);return s_(r,t,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new o_(t)}node(){return this.node_}}class a_{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=qt(this.path_,e);return new a_(this.syncTree_,t)}node(){return KR(this.syncTree_,this.path_)}}const _3=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},gI=function(n,e,t){if(!n||typeof n!="object")return n;if(ce(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return w3(n[".sv"],e,t);if(typeof n[".sv"]=="object")return E3(n[".sv"],e);ce(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},w3=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ce(!1,"Unexpected server value: "+n)}},E3=function(n,e,t){n.hasOwnProperty("increment")||ce(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&ce(!1,"Unexpected increment value: "+r);const s=e.node();if(ce(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const l=s.getValue();return typeof l!="number"?r:l+r},T3=function(n,e,t,r){return l_(e,new a_(t,n),r)},I3=function(n,e,t){return l_(n,new o_(e),t)};function l_(n,e,t){const r=n.getPriority().val(),s=gI(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const l=n,c=gI(l.getValue(),e,t);return c!==l.getValue()||s!==l.getPriority().val()?new zt(c,dn(s)):n}else{const l=n;return o=l,s!==l.getPriority().val()&&(o=o.updatePriority(new zt(s))),l.forEachChild(fn,(c,h)=>{const p=l_(h,e.getImmediateChild(c),t);p!==h&&(o=o.updateImmediateChild(c,p))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function c_(n,e){let t=e instanceof ft?e:new ft(e),r=n,s=He(t);for(;s!==null;){const o=hl(r.node.children,s)||{children:{},childCount:0};r=new u_(s,r,o),t=dt(t),s=He(t)}return r}function Ul(n){return n.node.value}function e1(n,e){n.node.value=e,_y(n)}function t1(n){return n.node.childCount>0}function C3(n){return Ul(n)===void 0&&!t1(n)}function lp(n,e){hr(n.node.children,(t,r)=>{e(new u_(t,n,r))})}function n1(n,e,t,r){t&&e(n),lp(n,s=>{n1(s,e,!0)})}function x3(n,e,t){let r=n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Hc(n){return new ft(n.parent===null?n.name:Hc(n.parent)+"/"+n.name)}function _y(n){n.parent!==null&&S3(n.parent,n.name,n)}function S3(n,e,t){const r=C3(t),s=Xs(n.node.children,e);r&&s?(delete n.node.children[e],n.node.childCount--,_y(n)):!r&&!s&&(n.node.children[e]=t.node,n.node.childCount++,_y(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3=/[\[\].#$\/\u0000-\u001F\u007F]/,A3=/[\[\].#$\u0000-\u001F\u007F]/,pg=10*1024*1024,r1=function(n){return typeof n=="string"&&n.length!==0&&!R3.test(n)},P3=function(n){return typeof n=="string"&&n.length!==0&&!A3.test(n)},b3=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),P3(n)},s1=function(n,e,t){const r=t instanceof ft?new uV(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+zo(r));if(typeof e=="function")throw new Error(n+"contains a function "+zo(r)+" with contents = "+e.toString());if(nR(e))throw new Error(n+"contains "+e.toString()+" "+zo(r));if(typeof e=="string"&&e.length>pg/3&&Pf(e)>pg)throw new Error(n+"contains a string greater than "+pg+" utf8 bytes "+zo(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,o=!1;if(hr(e,(l,c)=>{if(l===".value")s=!0;else if(l!==".priority"&&l!==".sv"&&(o=!0,!r1(l)))throw new Error(n+" contains an invalid key ("+l+") "+zo(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);cV(r,l),s1(n,c,r),dV(r)}),s&&o)throw new Error(n+' contains ".value" child '+zo(r)+" in addition to actual children.")}},k3=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!r1(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!b3(t))throw new Error(jk(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function D3(n,e){let t=null;for(let r=0;r<e.length;r++){const s=e[r],o=s.getPath();t!==null&&!SR(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(s)}t&&n.eventLists_.push(t)}function la(n,e,t){D3(n,t),O3(n,r=>Or(r,e)||Or(e,r))}function O3(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const s=n.eventLists_[r];if(s){const o=s.path;e(o)?(L3(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function L3(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const r=t.getEventRunner();nc&&cn("event: "+t.toString()),zc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3="repo_interrupt",j3=25;class V3{constructor(e,t,r,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new N3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=gf(),this.transactionQueueTree_=new u_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function F3(n,e,t){if(n.stats_=Yv(n.repoInfo_),n.forceRestClient_||Oj())n.server_=new mf(n.repoInfo_,(r,s,o,l)=>{yI(n,r,s,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>vI(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Jt(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Vs(n.repoInfo_,e,(r,s,o,l)=>{yI(n,r,s,o,l)},r=>{vI(n,r)},r=>{$3(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=Fj(n.repoInfo_,()=>new VV(n.stats_,n.server_)),n.infoData_=new DV,n.infoSyncTree_=new mI({startListening:(r,s,o,l)=>{let c=[];const h=n.infoData_.getNode(r._path);return h.isEmpty()||(c=op(n.infoSyncTree_,r._path,h),setTimeout(()=>{l("ok")},0)),c},stopListening:()=>{}}),d_(n,"connected",!1),n.serverSyncTree_=new mI({startListening:(r,s,o,l)=>(n.server_.listen(r,o,s,(c,h)=>{const p=l(c,h);la(n.eventQueue_,r._path,p)}),[]),stopListening:(r,s)=>{n.server_.unlisten(r,s)}})}function U3(n){const t=n.infoData_.getNode(new ft(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function i1(n){return _3({timestamp:U3(n)})}function yI(n,e,t,r,s){n.dataUpdateCount++;const o=new ft(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(s)if(r){const h=Gh(t,p=>dn(p));l=v3(n.serverSyncTree_,o,h,s)}else{const h=dn(t);l=y3(n.serverSyncTree_,o,h,s)}else if(r){const h=Gh(t,p=>dn(p));l=g3(n.serverSyncTree_,o,h)}else{const h=dn(t);l=op(n.serverSyncTree_,o,h)}let c=o;l.length>0&&(c=f_(n,o)),la(n.eventQueue_,c,l)}function vI(n,e){d_(n,"connected",e),e===!1&&z3(n)}function $3(n,e){hr(e,(t,r)=>{d_(n,t,r)})}function d_(n,e,t){const r=new ft("/.info/"+e),s=dn(t);n.infoData_.updateSnapshot(r,s);const o=op(n.infoSyncTree_,r,s);la(n.eventQueue_,r,o)}function B3(n){return n.nextWriteId_++}function z3(n){o1(n,"onDisconnectEvents");const e=i1(n),t=gf();hy(n.onDisconnect_,nt(),(s,o)=>{const l=T3(s,o,n.serverSyncTree_,e);DR(t,s,l)});let r=[];hy(t,nt(),(s,o)=>{r=r.concat(op(n.serverSyncTree_,s,o));const l=G3(n,s);f_(n,l)}),n.onDisconnect_=gf(),la(n.eventQueue_,nt(),r)}function W3(n){n.persistentConnection_&&n.persistentConnection_.interrupt(M3)}function o1(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),cn(t,...e)}function a1(n,e,t){return KR(n.serverSyncTree_,e,t)||Xe.EMPTY_NODE}function h_(n,e=n.transactionQueueTree_){if(e||up(n,e),Ul(e)){const t=u1(n,e);ce(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&H3(n,Hc(e),t)}else t1(e)&&lp(e,t=>{h_(n,t)})}function H3(n,e,t){const r=t.map(p=>p.currentWriteId),s=a1(n,e,r);let o=s;const l=s.hash();for(let p=0;p<t.length;p++){const g=t[p];ce(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const w=lr(e,g.path);o=o.updateChild(w,g.currentOutputSnapshotRaw)}const c=o.val(!0),h=e;n.server_.put(h.toString(),c,p=>{o1(n,"transaction put response",{path:h.toString(),status:p});let g=[];if(p==="ok"){const w=[];for(let E=0;E<t.length;E++)t[E].status=2,g=g.concat(rl(n.serverSyncTree_,t[E].currentWriteId)),t[E].onComplete&&w.push(()=>t[E].onComplete(null,!0,t[E].currentOutputSnapshotResolved)),t[E].unwatcher();up(n,c_(n.transactionQueueTree_,e)),h_(n,n.transactionQueueTree_),la(n.eventQueue_,e,g);for(let E=0;E<w.length;E++)zc(w[E])}else{if(p==="datastale")for(let w=0;w<t.length;w++)t[w].status===3?t[w].status=4:t[w].status=0;else{Qn("transaction at "+h.toString()+" failed: "+p);for(let w=0;w<t.length;w++)t[w].status=4,t[w].abortReason=p}f_(n,e)}},l)}function f_(n,e){const t=l1(n,e),r=Hc(t),s=u1(n,t);return q3(n,s,r),r}function q3(n,e,t){if(e.length===0)return;const r=[];let s=[];const l=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const h=e[c],p=lr(t,h.path);let g=!1,w;if(ce(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===4)g=!0,w=h.abortReason,s=s.concat(rl(n.serverSyncTree_,h.currentWriteId,!0));else if(h.status===0)if(h.retryCount>=j3)g=!0,w="maxretry",s=s.concat(rl(n.serverSyncTree_,h.currentWriteId,!0));else{const E=a1(n,h.path,l);h.currentInputSnapshot=E;const x=e[c].update(E.val());if(x!==void 0){s1("transaction failed: Data returned ",x,h.path);let R=dn(x);typeof x=="object"&&x!=null&&Xs(x,".priority")||(R=R.updatePriority(E.getPriority()));const S=h.currentWriteId,L=i1(n),U=I3(R,E,L);h.currentOutputSnapshotRaw=R,h.currentOutputSnapshotResolved=U,h.currentWriteId=B3(n),l.splice(l.indexOf(S),1),s=s.concat(m3(n.serverSyncTree_,h.path,U,h.currentWriteId,h.applyLocally)),s=s.concat(rl(n.serverSyncTree_,S,!0))}else g=!0,w="nodata",s=s.concat(rl(n.serverSyncTree_,h.currentWriteId,!0))}la(n.eventQueue_,t,s),s=[],g&&(e[c].status=2,function(E){setTimeout(E,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(w==="nodata"?r.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):r.push(()=>e[c].onComplete(new Error(w),!1,null))))}up(n,n.transactionQueueTree_);for(let c=0;c<r.length;c++)zc(r[c]);h_(n,n.transactionQueueTree_)}function l1(n,e){let t,r=n.transactionQueueTree_;for(t=He(e);t!==null&&Ul(r)===void 0;)r=c_(r,t),e=dt(e),t=He(e);return r}function u1(n,e){const t=[];return c1(n,e,t),t.sort((r,s)=>r.order-s.order),t}function c1(n,e,t){const r=Ul(e);if(r)for(let s=0;s<r.length;s++)t.push(r[s]);lp(e,s=>{c1(n,s,t)})}function up(n,e){const t=Ul(e);if(t){let r=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[r]=t[s],r++);t.length=r,e1(e,t.length>0?t:void 0)}lp(e,r=>{up(n,r)})}function G3(n,e){const t=Hc(l1(n,e)),r=c_(n.transactionQueueTree_,e);return x3(r,s=>{mg(n,s)}),mg(n,r),n1(r,s=>{mg(n,s)}),t}function mg(n,e){const t=Ul(e);if(t){const r=[];let s=[],o=-1;for(let l=0;l<t.length;l++)t[l].status===3||(t[l].status===1?(ce(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):(ce(t[l].status===0,"Unexpected transaction status in abort"),t[l].unwatcher(),s=s.concat(rl(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));o===-1?e1(e,void 0):t.length=o+1,la(n.eventQueue_,Hc(e),s);for(let l=0;l<r.length;l++)zc(r[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let s=t[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function Q3(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Qn(`Invalid query segment '${t}' in query '${n}'`)}return e}const _I=function(n,e){const t=Y3(n),r=t.namespace;t.domain==="firebase.com"&&qs(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&qs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||Sj();const s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new pR(t.host,t.secure,r,s,e,"",r!==t.subdomain),path:new ft(t.pathString)}},Y3=function(n){let e="",t="",r="",s="",o="",l=!0,c="https",h=443;if(typeof n=="string"){let p=n.indexOf("//");p>=0&&(c=n.substring(0,p-1),n=n.substring(p+2));let g=n.indexOf("/");g===-1&&(g=n.length);let w=n.indexOf("?");w===-1&&(w=n.length),e=n.substring(0,Math.min(g,w)),g<w&&(s=K3(n.substring(g,w)));const E=Q3(n.substring(Math.min(n.length,w)));p=e.indexOf(":"),p>=0?(l=c==="https"||c==="wss",h=parseInt(e.substring(p+1),10)):p=e.length;const x=e.slice(0,p);if(x.toLowerCase()==="localhost")t="localhost";else if(x.split(".").length<=2)t=x;else{const R=e.indexOf(".");r=e.substring(0,R).toLowerCase(),t=e.substring(R+1),o=r}"ns"in E&&(o=E.ns)}return{host:e,port:h,domain:t,subdomain:r,secure:l,scheme:c,pathString:s,namespace:o}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,t,r,s){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=s}get key(){return $e(this._path)?null:IR(this._path)}get ref(){return new $l(this._repo,this._path)}get _queryIdentifier(){const e=sI(this._queryParams),t=Kv(e);return t==="{}"?"default":t}get _queryObject(){return sI(this._queryParams)}isEqual(e){if(e=ot(e),!(e instanceof p_))return!1;const t=this._repo===e._repo,r=SR(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+lV(this._path)}}class $l extends p_{constructor(e,t){super(e,t,new e_,!1)}get parent(){const e=xR(this._path);return e===null?null:new $l(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}f3($l);p3($l);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3="FIREBASE_DATABASE_EMULATOR_HOST",wy={};let J3=!1;function Z3(n,e,t,r){n.repoInfo_=new pR(e,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),r&&(n.authTokenProvider_=r)}function eF(n,e,t,r,s){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||qs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),cn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l=_I(o,s),c=l.repoInfo,h;typeof process<"u"&&FT&&(h=FT[X3]),h?(o=`http://${h}?ns=${c.namespace}`,l=_I(o,s),c=l.repoInfo):l.repoInfo.secure;const p=new Mj(n.name,n.options,e);k3("Invalid Firebase Database URL",l),$e(l.path)||qs("Database URL must point to the root of a Firebase Database (not including a child path).");const g=nF(c,n,p,new Lj(n,t));return new rF(g,n)}function tF(n,e){const t=wy[e];(!t||t[n.key]!==n)&&qs(`Database ${e}(${n.repoInfo_}) has already been deleted.`),W3(n),delete t[n.key]}function nF(n,e,t,r){let s=wy[e.name];s||(s={},wy[e.name]=s);let o=s[n.toURLString()];return o&&qs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new V3(n,J3,t,r),s[n.toURLString()]=o,o}class rF{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(F3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new $l(this._repo,nt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(tF(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&qs("Cannot call "+e+" on a deleted database.")}}function sF(n=kf(),e){const t=kc(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=qy("database");r&&iF(t,...r)}return t}function iF(n,e,t,r={}){n=ot(n),n._checkNotDeleted("useEmulator");const s=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&qi(r,o.repoInfo_.emulatorOptions))return;qs("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&qs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new Uh(Uh.OWNER);else if(r.mockUserToken){const c=typeof r.mockUserToken=="string"?r.mockUserToken:Ky(r.mockUserToken,n.app.options.projectId);l=new Uh(c)}Z3(o,s,r,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(n){wj(oo),Gi(new Us("database",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return eF(r,s,o,t)},"PUBLIC").setMultipleInstances(!0)),ur(UT,$T,n),ur(UT,$T,"esm2017")}Vs.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Vs.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};oF();const m_=async(n,e,t,r,s,o,l)=>{const c=no();let h;e||t?h=`${e||""} ${t||""}`.trim():h=o||"";const p={displayName:h,firstName:e||(o?o.split(" ")[0]:""),lastName:t||(o?o.split(" ").slice(1).join(" "):""),email:r,phoneNumber:s,createdAt:new Date};typeof l=="boolean"&&(p.isAdmin=l),await YS(to(c,"users",n),p,{merge:!0})},d1={apiKey:"AIzaSyDX3sdS3txwVb8u3XA-3_D3l1psaT1TDzU",authDomain:"ureno-b0c23.firebaseapp.com",projectId:"ureno-b0c23",storageBucket:"ureno-b0c23.appspot.com",messagingSenderId:"750721636991",appId:"1:750721636991:web:1dee0acc728519b7f7fd4a",measurementId:"G-V8LVMN8932",databaseURL:"https://ureno-b0c23.firebaseio.com"};console.log("FIREBASE CONFIG:",d1);const g_=MC(d1),cp=Lf(g_);new ts;const Gs=no(g_);dL("debug");const h1=En.createContext();function gr(){return I.useContext(h1)}function aF({children:n}){const[e,t]=I.useState(null),[r,s]=I.useState(!1),[o,l]=I.useState(!0),[c,h]=I.useState(!1),[p,g]=I.useState(!1),[w,E]=I.useState(!1),x={currentUser:e,userLoggedIn:r,isEmailUser:c,isGoogleUser:p,loading:o,redirectAfterAuth:w,setRedirectAfterAuth:E};return I.useEffect(()=>{const R=Lf(),b=lx(R,S=>{var L;if(t(S),s(!!S),S){const U=(L=S.providerData[0])==null?void 0:L.providerId;h(U==="password"),g(U==="google.com")}else h(!1),g(!1);l(!1),console.log("AuthProvider state updated: userLogggedIn =",r)});return()=>b}),y.jsx(h1.Provider,{value:x,children:!o&&n})}const Ey=no(g_),lF=async n=>{try{const e=to(Ey,"users",n),t=await ly(e);return t.exists()?t.data():null}catch(e){throw console.error("Error fetching user profile:",e),e}},dp=I.createContext(),f1=()=>I.useContext(dp),uF=({children:n})=>{const[e,t]=I.useState(null),[r,s]=I.useState(null),[o,l]=I.useState(!0);return I.useEffect(()=>{const c=lx(cp,async h=>{if(t(h),!h){s(null),l(!1);return}console.log("Current user UID:",h==null?void 0:h.uid);let p=null,g=null;if(h.displayName){const x=h.displayName.split(" ");p=x[0]||"",g=x.slice(1).join(" ")||""}const w=to(Ey,"users",h.uid);(await ly(w)).exists()?console.log("User profile already exists, skipping creation."):(console.log("User profile doesn't exist yet, creating it."),await m_(h.uid,p,g,h.email,null,h.displayName));try{const x=await lF(h.uid),R={displayName:h.displayName||"",email:h.email||"",photoURL:h.photoURL||""};s(x||R),l(!1);try{const b=to(Ey,"users",h.uid);console.log("Setting up Firestore listener on: /users/"+h.uid),(await ly(b)).exists()||(console.log("Document doesn't exist yet, creating it first"),await YS(b,{displayName:r.displayName,email:r.email,photoURL:r.photoURL,createdAt:new Date},{merge:!0}));const L=Gv(b,U=>{U.exists()?(console.log("Received profile update for UID:",h.uid,"Data:",U.data()),s(U.data())):console.warn("User document does not exist for UID:",h.uid)},U=>{console.error("Error listening to profile updates:",U)});return()=>L()}catch(b){console.error("Error setting up profile listener:",b)}}catch(x){console.error("Failed to fetch user profile:",x.message),l(!1)}});return()=>c()},[]),y.jsx(dp.Provider,{value:{user:e,profile:r,loading:o},children:n})},p1=I.createContext(),cF={conversations:[],selectedConversation:null,messages:[],loading:!1};function dF(n,e){switch(e.type){case"SET_CONVERSATIONS":return{...n,conversations:e.payload};case"SELECT_CONVERSATION":return n.selectedConversation===e.payload?n:{...n,selectedConversation:e.payload,messages:[]};case"SET_MESSAGES":return{...n,messages:e.payload};case"ADD_MESSAGE":return{...n,messages:[...n.messages,e.payload]};case"SET_LOADING":return{...n,loading:e.payload};default:return n}}function hF({children:n}){const[e,t]=I.useReducer(dF,cF);return y.jsx(p1.Provider,{value:{state:e,dispatch:t},children:n})}function hp(){return I.useContext(p1)}const fF="/Ureno_webdesign/assets/flooring-background-D6oQgrl-.png",pF="/Ureno_webdesign/assets/paint-background-DV-ynsPo.png",wI="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24px'%20height='24px'%3e%3cpath%20d='M12,2C6.477,2,2,6.477,2,12c0,5.013,3.693,9.153,8.505,9.876V14.65H8.031v-2.629h2.474v-1.749%20c0-2.896,1.411-4.167,3.818-4.167c1.153,0,1.762,0.085,2.051,0.124v2.294h-1.642c-1.022,0-1.379,0.969-1.379,2.061v1.437h2.995%20l-0.406,2.629h-2.588v7.247C18.235,21.236,22,17.062,22,12C22,6.477,17.523,2,12,2z'/%3e%3c/svg%3e",EI="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24px'%20height='24px'%3e%3cpath%20d='M%208%203%20C%205.243%203%203%205.243%203%208%20L%203%2016%20C%203%2018.757%205.243%2021%208%2021%20L%2016%2021%20C%2018.757%2021%2021%2018.757%2021%2016%20L%2021%208%20C%2021%205.243%2018.757%203%2016%203%20L%208%203%20z%20M%208%205%20L%2016%205%20C%2017.654%205%2019%206.346%2019%208%20L%2019%2016%20C%2019%2017.654%2017.654%2019%2016%2019%20L%208%2019%20C%206.346%2019%205%2017.654%205%2016%20L%205%208%20C%205%206.346%206.346%205%208%205%20z%20M%2017%206%20A%201%201%200%200%200%2016%207%20A%201%201%200%200%200%2017%208%20A%201%201%200%200%200%2018%207%20A%201%201%200%200%200%2017%206%20z%20M%2012%207%20C%209.243%207%207%209.243%207%2012%20C%207%2014.757%209.243%2017%2012%2017%20C%2014.757%2017%2017%2014.757%2017%2012%20C%2017%209.243%2014.757%207%2012%207%20z%20M%2012%209%20C%2013.654%209%2015%2010.346%2015%2012%20C%2015%2013.654%2013.654%2015%2012%2015%20C%2010.346%2015%209%2013.654%209%2012%20C%209%2010.346%2010.346%209%2012%209%20z'/%3e%3c/svg%3e",TI="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24px'%20height='24px'%3e%3cpath%20d='M%205%203%20C%203.895%203%203%203.895%203%205%20L%203%2019%20C%203%2020.105%203.895%2021%205%2021%20L%2019%2021%20C%2020.105%2021%2021%2020.105%2021%2019%20L%2021%205%20C%2021%203.895%2020.105%203%2019%203%20L%205%203%20z%20M%205%205%20L%2019%205%20L%2019%2019%20L%205%2019%20L%205%205%20z%20M%207.7792969%206.3164062%20C%206.9222969%206.3164062%206.4082031%206.8315781%206.4082031%207.5175781%20C%206.4082031%208.2035781%206.9223594%208.7167969%207.6933594%208.7167969%20C%208.5503594%208.7167969%209.0644531%208.2035781%209.0644531%207.5175781%20C%209.0644531%206.8315781%208.5502969%206.3164062%207.7792969%206.3164062%20z%20M%206.4765625%2010%20L%206.4765625%2017%20L%209%2017%20L%209%2010%20L%206.4765625%2010%20z%20M%2011.082031%2010%20L%2011.082031%2017%20L%2013.605469%2017%20L%2013.605469%2013.173828%20C%2013.605469%2012.034828%2014.418109%2011.871094%2014.662109%2011.871094%20C%2014.906109%2011.871094%2015.558594%2012.115828%2015.558594%2013.173828%20L%2015.558594%2017%20L%2018%2017%20L%2018%2013.173828%20C%2018%2010.976828%2017.023734%2010%2015.802734%2010%20C%2014.581734%2010%2013.930469%2010.406562%2013.605469%2010.976562%20L%2013.605469%2010%20L%2011.082031%2010%20z'/%3e%3c/svg%3e",II="/Ureno_webdesign/assets/icons8-youtube-logo-CImQkwOS.svg",qc=()=>y.jsxs("div",{className:"footer",children:[y.jsxs("div",{className:"left",children:[y.jsx("div",{className:"logo",children:"URENO"}),y.jsxs("div",{className:"social-sites",children:[y.jsx("object",{data:wI,type:"image/svg+xml",children:y.jsx("img",{src:wI})}),y.jsx("object",{data:EI,type:"image/svg+xml",children:y.jsx("img",{src:EI})}),y.jsx("object",{data:TI,type:"image/svg+xml",children:y.jsx("img",{src:TI})}),y.jsx("object",{data:II,type:"image/svg+xml",children:y.jsx("img",{src:II})})]})]}),y.jsxs("div",{className:"right",children:[y.jsxs("menu",{children:[y.jsx("li",{children:"Topic"}),y.jsx("li",{children:"Page"}),y.jsx("li",{children:"Page"}),y.jsx("li",{children:"Page"})]}),y.jsxs("menu",{children:[y.jsx("li",{children:"Topic"}),y.jsx("li",{children:"Page"}),y.jsx("li",{children:"Page"}),y.jsx("li",{children:"Page"})]}),y.jsxs("menu",{children:[y.jsx("li",{children:"Topic"}),y.jsx("li",{children:"Page"}),y.jsx("li",{children:"Page"}),y.jsx("li",{children:"Page"})]})]})]}),Ty="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20height='40px'%20width='40px'%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20402.161%20402.161'%20xml:space='preserve'%3e%3cg%3e%3cg%3e%3cg%3e%3cpath%20d='M201.08,49.778c-38.794,0-70.355,31.561-70.355,70.355c0,18.828,7.425,40.193,19.862,57.151%20c14.067,19.181,32,29.745,50.493,29.745c18.494,0,36.426-10.563,50.494-29.745c12.437-16.958,19.862-38.323,19.862-57.151%20C271.436,81.339,239.874,49.778,201.08,49.778z%20M201.08,192.029c-13.396,0-27.391-8.607-38.397-23.616%20c-10.46-14.262-16.958-32.762-16.958-48.28c0-30.523,24.832-55.355,55.355-55.355s55.355,24.832,55.355,55.355%20C256.436,151.824,230.372,192.029,201.08,192.029z'/%3e%3cpath%20d='M201.08,0C109.387,0,34.788,74.598,34.788,166.292c0,91.693,74.598,166.292,166.292,166.292%20s166.292-74.598,166.292-166.292C367.372,74.598,292.773,0,201.08,0z%20M201.08,317.584c-30.099-0.001-58.171-8.839-81.763-24.052%20c0.82-22.969,11.218-44.503,28.824-59.454c6.996-5.941,17.212-6.59,25.422-1.615c8.868,5.374,18.127,8.099,27.52,8.099%20c9.391,0,18.647-2.724,27.511-8.095c8.201-4.97,18.39-4.345,25.353,1.555c17.619,14.93,28.076,36.526,28.895,59.512%20C259.25,308.746,231.178,317.584,201.08,317.584z%20M296.981,283.218c-3.239-23.483-15.011-45.111-33.337-60.64%20c-11.89-10.074-29.1-11.256-42.824-2.939c-12.974,7.861-26.506,7.86-39.483-0.004c-13.74-8.327-30.981-7.116-42.906,3.01%20c-18.31,15.549-30.035,37.115-33.265,60.563c-33.789-27.77-55.378-69.868-55.378-116.915C49.788,82.869,117.658,15,201.08,15%20c83.423,0,151.292,67.869,151.292,151.292C352.372,213.345,330.778,255.448,296.981,283.218z'/%3e%3cpath%20d='M302.806,352.372H99.354c-4.142,0-7.5,3.358-7.5,7.5c0,4.142,3.358,7.5,7.5,7.5h203.452c4.142,0,7.5-3.358,7.5-7.5%20C310.307,355.73,306.948,352.372,302.806,352.372z'/%3e%3cpath%20d='M302.806,387.161H99.354c-4.142,0-7.5,3.358-7.5,7.5c0,4.142,3.358,7.5,7.5,7.5h203.452c4.142,0,7.5-3.358,7.5-7.5%20C310.307,390.519,306.948,387.161,302.806,387.161z'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",mF=async(n,e)=>HD(cp,n,e),gF=(n,e)=>qD(cp,n,e),yF=async()=>{var t;const n=Lf(),e=new ts;try{const r=await yO(n,e),s=(t=r==null?void 0:r.additionalUserInfo)==null?void 0:t.isNewUser,o=r.user;return s?(console.log("New user signed up with Google:",r.user),await m_(o.uid,o.displayname||"Google User",o.email,o.photoURL)):console.log("Existing user logged in with Google: ",r.user),r}catch(r){console.error("Google Sign-In Error:",r)}},y_=()=>cp.signOut();var gg={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var CI;function vF(){return CI||(CI=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",l=0;l<arguments.length;l++){var c=arguments[l];c&&(o=s(o,r(c)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var l="";for(var c in o)e.call(o,c)&&o[c]&&(l=s(l,c));return l}function s(o,l){return l?o?o+" "+l:o+l:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(gg)),gg.exports}var _F=vF();const Ke=Rc(_F);var wF=Function.prototype.bind.call(Function.prototype.call,[].slice);function xI(n,e){return wF(n.querySelectorAll(e))}const m1=!!(typeof window<"u"&&window.document&&window.document.createElement);var Iy=!1,Cy=!1;try{var yg={get passive(){return Iy=!0},get once(){return Cy=Iy=!0}};m1&&(window.addEventListener("test",yg,yg),window.removeEventListener("test",yg,!0))}catch{}function g1(n,e,t,r){if(r&&typeof r!="boolean"&&!Cy){var s=r.once,o=r.capture,l=t;!Cy&&s&&(l=t.__once||function c(h){this.removeEventListener(e,c,o),t.call(this,h)},t.__once=l),n.addEventListener(e,l,Iy?r:o)}n.addEventListener(e,t,r)}function EF(n,e,t){const r=I.useRef(n!==void 0),[s,o]=I.useState(e),l=n!==void 0,c=r.current;return r.current=l,!l&&c&&s!==e&&o(e),[l?n:s,I.useCallback((...h)=>{const[p,...g]=h;let w=t==null?void 0:t(p,...g);return o(p),w},[t])]}function TF(n){const e=I.useRef(null);return I.useEffect(()=>{e.current=n}),e.current}function IF(){const[,n]=I.useReducer(e=>e+1,0);return n}function CF(n){const e=I.useRef(n);return I.useEffect(()=>{e.current=n},[n]),e}function Hi(n){const e=CF(n);return I.useCallback(function(...t){return e.current&&e.current(...t)},[e])}function xF(n,e,t,r=!1){const s=Hi(t);I.useEffect(()=>{const o=typeof n=="function"?n():n;return o.addEventListener(e,s,r),()=>o.removeEventListener(e,s,r)},[n])}const fp=I.createContext(null);function SF(){return I.useState(null)}var SI=Object.prototype.hasOwnProperty;function RI(n,e,t){for(t of n.keys())if(oc(t,e))return t}function oc(n,e){var t,r,s;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&oc(n[r],e[r]););return r===-1}if(t===Set){if(n.size!==e.size)return!1;for(r of n)if(s=r,s&&typeof s=="object"&&(s=RI(e,s),!s)||!e.has(s))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(r of n)if(s=r[0],s&&typeof s=="object"&&(s=RI(e,s),!s)||!oc(r[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((r=n.byteLength)===e.byteLength)for(;r--&&n.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(n)){if((r=n.byteLength)===e.byteLength)for(;r--&&n[r]===e[r];);return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(SI.call(n,t)&&++r&&!SI.call(e,t)||!(t in e)||!oc(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}function RF(){const n=I.useRef(!0),e=I.useRef(()=>n.current);return I.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),e.current}function AF(n){const e=RF();return[n[0],I.useCallback(t=>{if(e())return n[1](t)},[e,n[1]])]}var Ln="top",fr="bottom",pr="right",Mn="left",v_="auto",Gc=[Ln,fr,pr,Mn],Cl="start",xc="end",PF="clippingParents",y1="viewport",Uu="popper",bF="reference",AI=Gc.reduce(function(n,e){return n.concat([e+"-"+Cl,e+"-"+xc])},[]),v1=[].concat(Gc,[v_]).reduce(function(n,e){return n.concat([e,e+"-"+Cl,e+"-"+xc])},[]),kF="beforeRead",NF="read",DF="afterRead",OF="beforeMain",LF="main",MF="afterMain",jF="beforeWrite",VF="write",FF="afterWrite",UF=[kF,NF,DF,OF,LF,MF,jF,VF,FF];function ls(n){return n.split("-")[0]}function Yn(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function na(n){var e=Yn(n).Element;return n instanceof e||n instanceof Element}function us(n){var e=Yn(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function __(n){if(typeof ShadowRoot>"u")return!1;var e=Yn(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}var Go=Math.max,wf=Math.min,xl=Math.round;function xy(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function _1(){return!/^((?!chrome|android).)*safari/i.test(xy())}function Sl(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=n.getBoundingClientRect(),s=1,o=1;e&&us(n)&&(s=n.offsetWidth>0&&xl(r.width)/n.offsetWidth||1,o=n.offsetHeight>0&&xl(r.height)/n.offsetHeight||1);var l=na(n)?Yn(n):window,c=l.visualViewport,h=!_1()&&t,p=(r.left+(h&&c?c.offsetLeft:0))/s,g=(r.top+(h&&c?c.offsetTop:0))/o,w=r.width/s,E=r.height/o;return{width:w,height:E,top:g,right:p+w,bottom:g+E,left:p,x:p,y:g}}function w_(n){var e=Sl(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function w1(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&__(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function so(n){return n?(n.nodeName||"").toLowerCase():null}function Ks(n){return Yn(n).getComputedStyle(n)}function $F(n){return["table","td","th"].indexOf(so(n))>=0}function fo(n){return((na(n)?n.ownerDocument:n.document)||window.document).documentElement}function pp(n){return so(n)==="html"?n:n.assignedSlot||n.parentNode||(__(n)?n.host:null)||fo(n)}function PI(n){return!us(n)||Ks(n).position==="fixed"?null:n.offsetParent}function BF(n){var e=/firefox/i.test(xy()),t=/Trident/i.test(xy());if(t&&us(n)){var r=Ks(n);if(r.position==="fixed")return null}var s=pp(n);for(__(s)&&(s=s.host);us(s)&&["html","body"].indexOf(so(s))<0;){var o=Ks(s);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return s;s=s.parentNode}return null}function Kc(n){for(var e=Yn(n),t=PI(n);t&&$F(t)&&Ks(t).position==="static";)t=PI(t);return t&&(so(t)==="html"||so(t)==="body"&&Ks(t).position==="static")?e:t||BF(n)||e}function E_(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function ac(n,e,t){return Go(n,wf(e,t))}function zF(n,e,t){var r=ac(n,e,t);return r>t?t:r}function E1(){return{top:0,right:0,bottom:0,left:0}}function T1(n){return Object.assign({},E1(),n)}function I1(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var WF=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,T1(typeof e!="number"?e:I1(e,Gc))};function HF(n){var e,t=n.state,r=n.name,s=n.options,o=t.elements.arrow,l=t.modifiersData.popperOffsets,c=ls(t.placement),h=E_(c),p=[Mn,pr].indexOf(c)>=0,g=p?"height":"width";if(!(!o||!l)){var w=WF(s.padding,t),E=w_(o),x=h==="y"?Ln:Mn,R=h==="y"?fr:pr,b=t.rects.reference[g]+t.rects.reference[h]-l[h]-t.rects.popper[g],S=l[h]-t.rects.reference[h],L=Kc(o),U=L?h==="y"?L.clientHeight||0:L.clientWidth||0:0,B=b/2-S/2,q=w[x],X=U-E[g]-w[R],Z=U/2-E[g]/2+B,N=ac(q,Z,X),P=h;t.modifiersData[r]=(e={},e[P]=N,e.centerOffset=N-Z,e)}}function qF(n){var e=n.state,t=n.options,r=t.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||w1(e.elements.popper,s)&&(e.elements.arrow=s))}const GF={name:"arrow",enabled:!0,phase:"main",fn:HF,effect:qF,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Rl(n){return n.split("-")[1]}var KF={top:"auto",right:"auto",bottom:"auto",left:"auto"};function QF(n,e){var t=n.x,r=n.y,s=e.devicePixelRatio||1;return{x:xl(t*s)/s||0,y:xl(r*s)/s||0}}function bI(n){var e,t=n.popper,r=n.popperRect,s=n.placement,o=n.variation,l=n.offsets,c=n.position,h=n.gpuAcceleration,p=n.adaptive,g=n.roundOffsets,w=n.isFixed,E=l.x,x=E===void 0?0:E,R=l.y,b=R===void 0?0:R,S=typeof g=="function"?g({x,y:b}):{x,y:b};x=S.x,b=S.y;var L=l.hasOwnProperty("x"),U=l.hasOwnProperty("y"),B=Mn,q=Ln,X=window;if(p){var Z=Kc(t),N="clientHeight",P="clientWidth";if(Z===Yn(t)&&(Z=fo(t),Ks(Z).position!=="static"&&c==="absolute"&&(N="scrollHeight",P="scrollWidth")),Z=Z,s===Ln||(s===Mn||s===pr)&&o===xc){q=fr;var k=w&&Z===X&&X.visualViewport?X.visualViewport.height:Z[N];b-=k-r.height,b*=h?1:-1}if(s===Mn||(s===Ln||s===fr)&&o===xc){B=pr;var M=w&&Z===X&&X.visualViewport?X.visualViewport.width:Z[P];x-=M-r.width,x*=h?1:-1}}var j=Object.assign({position:c},p&&KF),V=g===!0?QF({x,y:b},Yn(t)):{x,y:b};if(x=V.x,b=V.y,h){var D;return Object.assign({},j,(D={},D[q]=U?"0":"",D[B]=L?"0":"",D.transform=(X.devicePixelRatio||1)<=1?"translate("+x+"px, "+b+"px)":"translate3d("+x+"px, "+b+"px, 0)",D))}return Object.assign({},j,(e={},e[q]=U?b+"px":"",e[B]=L?x+"px":"",e.transform="",e))}function YF(n){var e=n.state,t=n.options,r=t.gpuAcceleration,s=r===void 0?!0:r,o=t.adaptive,l=o===void 0?!0:o,c=t.roundOffsets,h=c===void 0?!0:c,p={placement:ls(e.placement),variation:Rl(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,bI(Object.assign({},p,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:h})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,bI(Object.assign({},p,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const XF={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:YF,data:{}};var Th={passive:!0};function JF(n){var e=n.state,t=n.instance,r=n.options,s=r.scroll,o=s===void 0?!0:s,l=r.resize,c=l===void 0?!0:l,h=Yn(e.elements.popper),p=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&p.forEach(function(g){g.addEventListener("scroll",t.update,Th)}),c&&h.addEventListener("resize",t.update,Th),function(){o&&p.forEach(function(g){g.removeEventListener("scroll",t.update,Th)}),c&&h.removeEventListener("resize",t.update,Th)}}const ZF={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:JF,data:{}};var e6={left:"right",right:"left",bottom:"top",top:"bottom"};function $h(n){return n.replace(/left|right|bottom|top/g,function(e){return e6[e]})}var t6={start:"end",end:"start"};function kI(n){return n.replace(/start|end/g,function(e){return t6[e]})}function T_(n){var e=Yn(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function I_(n){return Sl(fo(n)).left+T_(n).scrollLeft}function n6(n,e){var t=Yn(n),r=fo(n),s=t.visualViewport,o=r.clientWidth,l=r.clientHeight,c=0,h=0;if(s){o=s.width,l=s.height;var p=_1();(p||!p&&e==="fixed")&&(c=s.offsetLeft,h=s.offsetTop)}return{width:o,height:l,x:c+I_(n),y:h}}function r6(n){var e,t=fo(n),r=T_(n),s=(e=n.ownerDocument)==null?void 0:e.body,o=Go(t.scrollWidth,t.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),l=Go(t.scrollHeight,t.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),c=-r.scrollLeft+I_(n),h=-r.scrollTop;return Ks(s||t).direction==="rtl"&&(c+=Go(t.clientWidth,s?s.clientWidth:0)-o),{width:o,height:l,x:c,y:h}}function C_(n){var e=Ks(n),t=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+s+r)}function C1(n){return["html","body","#document"].indexOf(so(n))>=0?n.ownerDocument.body:us(n)&&C_(n)?n:C1(pp(n))}function lc(n,e){var t;e===void 0&&(e=[]);var r=C1(n),s=r===((t=n.ownerDocument)==null?void 0:t.body),o=Yn(r),l=s?[o].concat(o.visualViewport||[],C_(r)?r:[]):r,c=e.concat(l);return s?c:c.concat(lc(pp(l)))}function Sy(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function s6(n,e){var t=Sl(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function NI(n,e,t){return e===y1?Sy(n6(n,t)):na(e)?s6(e,t):Sy(r6(fo(n)))}function i6(n){var e=lc(pp(n)),t=["absolute","fixed"].indexOf(Ks(n).position)>=0,r=t&&us(n)?Kc(n):n;return na(r)?e.filter(function(s){return na(s)&&w1(s,r)&&so(s)!=="body"}):[]}function o6(n,e,t,r){var s=e==="clippingParents"?i6(n):[].concat(e),o=[].concat(s,[t]),l=o[0],c=o.reduce(function(h,p){var g=NI(n,p,r);return h.top=Go(g.top,h.top),h.right=wf(g.right,h.right),h.bottom=wf(g.bottom,h.bottom),h.left=Go(g.left,h.left),h},NI(n,l,r));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function x1(n){var e=n.reference,t=n.element,r=n.placement,s=r?ls(r):null,o=r?Rl(r):null,l=e.x+e.width/2-t.width/2,c=e.y+e.height/2-t.height/2,h;switch(s){case Ln:h={x:l,y:e.y-t.height};break;case fr:h={x:l,y:e.y+e.height};break;case pr:h={x:e.x+e.width,y:c};break;case Mn:h={x:e.x-t.width,y:c};break;default:h={x:e.x,y:e.y}}var p=s?E_(s):null;if(p!=null){var g=p==="y"?"height":"width";switch(o){case Cl:h[p]=h[p]-(e[g]/2-t[g]/2);break;case xc:h[p]=h[p]+(e[g]/2-t[g]/2);break}}return h}function Sc(n,e){e===void 0&&(e={});var t=e,r=t.placement,s=r===void 0?n.placement:r,o=t.strategy,l=o===void 0?n.strategy:o,c=t.boundary,h=c===void 0?PF:c,p=t.rootBoundary,g=p===void 0?y1:p,w=t.elementContext,E=w===void 0?Uu:w,x=t.altBoundary,R=x===void 0?!1:x,b=t.padding,S=b===void 0?0:b,L=T1(typeof S!="number"?S:I1(S,Gc)),U=E===Uu?bF:Uu,B=n.rects.popper,q=n.elements[R?U:E],X=o6(na(q)?q:q.contextElement||fo(n.elements.popper),h,g,l),Z=Sl(n.elements.reference),N=x1({reference:Z,element:B,placement:s}),P=Sy(Object.assign({},B,N)),k=E===Uu?P:Z,M={top:X.top-k.top+L.top,bottom:k.bottom-X.bottom+L.bottom,left:X.left-k.left+L.left,right:k.right-X.right+L.right},j=n.modifiersData.offset;if(E===Uu&&j){var V=j[s];Object.keys(M).forEach(function(D){var le=[pr,fr].indexOf(D)>=0?1:-1,xe=[Ln,fr].indexOf(D)>=0?"y":"x";M[D]+=V[xe]*le})}return M}function a6(n,e){e===void 0&&(e={});var t=e,r=t.placement,s=t.boundary,o=t.rootBoundary,l=t.padding,c=t.flipVariations,h=t.allowedAutoPlacements,p=h===void 0?v1:h,g=Rl(r),w=g?c?AI:AI.filter(function(R){return Rl(R)===g}):Gc,E=w.filter(function(R){return p.indexOf(R)>=0});E.length===0&&(E=w);var x=E.reduce(function(R,b){return R[b]=Sc(n,{placement:b,boundary:s,rootBoundary:o,padding:l})[ls(b)],R},{});return Object.keys(x).sort(function(R,b){return x[R]-x[b]})}function l6(n){if(ls(n)===v_)return[];var e=$h(n);return[kI(n),e,kI(e)]}function u6(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var s=t.mainAxis,o=s===void 0?!0:s,l=t.altAxis,c=l===void 0?!0:l,h=t.fallbackPlacements,p=t.padding,g=t.boundary,w=t.rootBoundary,E=t.altBoundary,x=t.flipVariations,R=x===void 0?!0:x,b=t.allowedAutoPlacements,S=e.options.placement,L=ls(S),U=L===S,B=h||(U||!R?[$h(S)]:l6(S)),q=[S].concat(B).reduce(function(Ie,Ae){return Ie.concat(ls(Ae)===v_?a6(e,{placement:Ae,boundary:g,rootBoundary:w,padding:p,flipVariations:R,allowedAutoPlacements:b}):Ae)},[]),X=e.rects.reference,Z=e.rects.popper,N=new Map,P=!0,k=q[0],M=0;M<q.length;M++){var j=q[M],V=ls(j),D=Rl(j)===Cl,le=[Ln,fr].indexOf(V)>=0,xe=le?"width":"height",Re=Sc(e,{placement:j,boundary:g,rootBoundary:w,altBoundary:E,padding:p}),Te=le?D?pr:Mn:D?fr:Ln;X[xe]>Z[xe]&&(Te=$h(Te));var se=$h(Te),ue=[];if(o&&ue.push(Re[V]<=0),c&&ue.push(Re[Te]<=0,Re[se]<=0),ue.every(function(Ie){return Ie})){k=j,P=!1;break}N.set(j,ue)}if(P)for(var ie=R?3:1,z=function(Ae){var De=q.find(function(je){var Oe=N.get(je);if(Oe)return Oe.slice(0,Ae).every(function(Ye){return Ye})});if(De)return k=De,"break"},Y=ie;Y>0;Y--){var pe=z(Y);if(pe==="break")break}e.placement!==k&&(e.modifiersData[r]._skip=!0,e.placement=k,e.reset=!0)}}const c6={name:"flip",enabled:!0,phase:"main",fn:u6,requiresIfExists:["offset"],data:{_skip:!1}};function DI(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function OI(n){return[Ln,pr,fr,Mn].some(function(e){return n[e]>=0})}function d6(n){var e=n.state,t=n.name,r=e.rects.reference,s=e.rects.popper,o=e.modifiersData.preventOverflow,l=Sc(e,{elementContext:"reference"}),c=Sc(e,{altBoundary:!0}),h=DI(l,r),p=DI(c,s,o),g=OI(h),w=OI(p);e.modifiersData[t]={referenceClippingOffsets:h,popperEscapeOffsets:p,isReferenceHidden:g,hasPopperEscaped:w},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":g,"data-popper-escaped":w})}const h6={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:d6};function f6(n,e,t){var r=ls(n),s=[Mn,Ln].indexOf(r)>=0?-1:1,o=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,l=o[0],c=o[1];return l=l||0,c=(c||0)*s,[Mn,pr].indexOf(r)>=0?{x:c,y:l}:{x:l,y:c}}function p6(n){var e=n.state,t=n.options,r=n.name,s=t.offset,o=s===void 0?[0,0]:s,l=v1.reduce(function(g,w){return g[w]=f6(w,e.rects,o),g},{}),c=l[e.placement],h=c.x,p=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=p),e.modifiersData[r]=l}const m6={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:p6};function g6(n){var e=n.state,t=n.name;e.modifiersData[t]=x1({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const y6={name:"popperOffsets",enabled:!0,phase:"read",fn:g6,data:{}};function v6(n){return n==="x"?"y":"x"}function _6(n){var e=n.state,t=n.options,r=n.name,s=t.mainAxis,o=s===void 0?!0:s,l=t.altAxis,c=l===void 0?!1:l,h=t.boundary,p=t.rootBoundary,g=t.altBoundary,w=t.padding,E=t.tether,x=E===void 0?!0:E,R=t.tetherOffset,b=R===void 0?0:R,S=Sc(e,{boundary:h,rootBoundary:p,padding:w,altBoundary:g}),L=ls(e.placement),U=Rl(e.placement),B=!U,q=E_(L),X=v6(q),Z=e.modifiersData.popperOffsets,N=e.rects.reference,P=e.rects.popper,k=typeof b=="function"?b(Object.assign({},e.rects,{placement:e.placement})):b,M=typeof k=="number"?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),j=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,V={x:0,y:0};if(Z){if(o){var D,le=q==="y"?Ln:Mn,xe=q==="y"?fr:pr,Re=q==="y"?"height":"width",Te=Z[q],se=Te+S[le],ue=Te-S[xe],ie=x?-P[Re]/2:0,z=U===Cl?N[Re]:P[Re],Y=U===Cl?-P[Re]:-N[Re],pe=e.elements.arrow,Ie=x&&pe?w_(pe):{width:0,height:0},Ae=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:E1(),De=Ae[le],je=Ae[xe],Oe=ac(0,N[Re],Ie[Re]),Ye=B?N[Re]/2-ie-Oe-De-M.mainAxis:z-Oe-De-M.mainAxis,At=B?-N[Re]/2+ie+Oe+je+M.mainAxis:Y+Oe+je+M.mainAxis,jn=e.elements.arrow&&Kc(e.elements.arrow),Js=jn?q==="y"?jn.clientTop||0:jn.clientLeft||0:0,yr=(D=j==null?void 0:j[q])!=null?D:0,ps=Te+Ye-yr-Js,Zs=Te+At-yr,ei=ac(x?wf(se,ps):se,Te,x?Go(ue,Zs):ue);Z[q]=ei,V[q]=ei-Te}if(c){var ti,ua=q==="x"?Ln:Mn,ni=q==="x"?fr:pr,Gt=Z[X],Tn=X==="y"?"height":"width",ri=Gt+S[ua],ms=Gt-S[ni],Br=[Ln,Mn].indexOf(L)!==-1,si=(ti=j==null?void 0:j[X])!=null?ti:0,_t=Br?ri:Gt-N[Tn]-P[Tn]-si+M.altAxis,wt=Br?Gt+N[Tn]+P[Tn]-si-M.altAxis:ms,Xn=x&&Br?zF(_t,Gt,wt):ac(x?_t:ri,Gt,x?wt:ms);Z[X]=Xn,V[X]=Xn-Gt}e.modifiersData[r]=V}}const w6={name:"preventOverflow",enabled:!0,phase:"main",fn:_6,requiresIfExists:["offset"]};function E6(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function T6(n){return n===Yn(n)||!us(n)?T_(n):E6(n)}function I6(n){var e=n.getBoundingClientRect(),t=xl(e.width)/n.offsetWidth||1,r=xl(e.height)/n.offsetHeight||1;return t!==1||r!==1}function C6(n,e,t){t===void 0&&(t=!1);var r=us(e),s=us(e)&&I6(e),o=fo(e),l=Sl(n,s,t),c={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(r||!r&&!t)&&((so(e)!=="body"||C_(o))&&(c=T6(e)),us(e)?(h=Sl(e,!0),h.x+=e.clientLeft,h.y+=e.clientTop):o&&(h.x=I_(o))),{x:l.left+c.scrollLeft-h.x,y:l.top+c.scrollTop-h.y,width:l.width,height:l.height}}function x6(n){var e=new Map,t=new Set,r=[];n.forEach(function(o){e.set(o.name,o)});function s(o){t.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(c){if(!t.has(c)){var h=e.get(c);h&&s(h)}}),r.push(o)}return n.forEach(function(o){t.has(o.name)||s(o)}),r}function S6(n){var e=x6(n);return UF.reduce(function(t,r){return t.concat(e.filter(function(s){return s.phase===r}))},[])}function R6(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function A6(n){var e=n.reduce(function(t,r){var s=t[r.name];return t[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var LI={placement:"bottom",modifiers:[],strategy:"absolute"};function MI(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function P6(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,s=e.defaultOptions,o=s===void 0?LI:s;return function(c,h,p){p===void 0&&(p=o);var g={placement:"bottom",orderedModifiers:[],options:Object.assign({},LI,o),modifiersData:{},elements:{reference:c,popper:h},attributes:{},styles:{}},w=[],E=!1,x={state:g,setOptions:function(L){var U=typeof L=="function"?L(g.options):L;b(),g.options=Object.assign({},o,g.options,U),g.scrollParents={reference:na(c)?lc(c):c.contextElement?lc(c.contextElement):[],popper:lc(h)};var B=S6(A6([].concat(r,g.options.modifiers)));return g.orderedModifiers=B.filter(function(q){return q.enabled}),R(),x.update()},forceUpdate:function(){if(!E){var L=g.elements,U=L.reference,B=L.popper;if(MI(U,B)){g.rects={reference:C6(U,Kc(B),g.options.strategy==="fixed"),popper:w_(B)},g.reset=!1,g.placement=g.options.placement,g.orderedModifiers.forEach(function(M){return g.modifiersData[M.name]=Object.assign({},M.data)});for(var q=0;q<g.orderedModifiers.length;q++){if(g.reset===!0){g.reset=!1,q=-1;continue}var X=g.orderedModifiers[q],Z=X.fn,N=X.options,P=N===void 0?{}:N,k=X.name;typeof Z=="function"&&(g=Z({state:g,options:P,name:k,instance:x})||g)}}}},update:R6(function(){return new Promise(function(S){x.forceUpdate(),S(g)})}),destroy:function(){b(),E=!0}};if(!MI(c,h))return x;x.setOptions(p).then(function(S){!E&&p.onFirstUpdate&&p.onFirstUpdate(S)});function R(){g.orderedModifiers.forEach(function(S){var L=S.name,U=S.options,B=U===void 0?{}:U,q=S.effect;if(typeof q=="function"){var X=q({state:g,name:L,instance:x,options:B}),Z=function(){};w.push(X||Z)}})}function b(){w.forEach(function(S){return S()}),w=[]}return x}}const b6=P6({defaultModifiers:[h6,y6,XF,ZF,m6,c6,w6,GF]}),k6=["enabled","placement","strategy","modifiers"];function N6(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}const D6={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},O6={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:n})=>()=>{const{reference:e,popper:t}=n.elements;if("removeAttribute"in e){const r=(e.getAttribute("aria-describedby")||"").split(",").filter(s=>s.trim()!==t.id);r.length?e.setAttribute("aria-describedby",r.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:n})=>{var e;const{popper:t,reference:r}=n.elements,s=(e=t.getAttribute("role"))==null?void 0:e.toLowerCase();if(t.id&&s==="tooltip"&&"setAttribute"in r){const o=r.getAttribute("aria-describedby");if(o&&o.split(",").indexOf(t.id)!==-1)return;r.setAttribute("aria-describedby",o?`${o},${t.id}`:t.id)}}},L6=[];function M6(n,e,t={}){let{enabled:r=!0,placement:s="bottom",strategy:o="absolute",modifiers:l=L6}=t,c=N6(t,k6);const h=I.useRef(l),p=I.useRef(),g=I.useCallback(()=>{var S;(S=p.current)==null||S.update()},[]),w=I.useCallback(()=>{var S;(S=p.current)==null||S.forceUpdate()},[]),[E,x]=AF(I.useState({placement:s,update:g,forceUpdate:w,attributes:{},styles:{popper:{},arrow:{}}})),R=I.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:S})=>{const L={},U={};Object.keys(S.elements).forEach(B=>{L[B]=S.styles[B],U[B]=S.attributes[B]}),x({state:S,styles:L,attributes:U,update:g,forceUpdate:w,placement:S.placement})}}),[g,w,x]),b=I.useMemo(()=>(oc(h.current,l)||(h.current=l),h.current),[l]);return I.useEffect(()=>{!p.current||!r||p.current.setOptions({placement:s,strategy:o,modifiers:[...b,R,D6]})},[o,s,R,r,b]),I.useEffect(()=>{if(!(!r||n==null||e==null))return p.current=b6(n,e,Object.assign({},c,{placement:s,strategy:o,modifiers:[...b,O6,R]})),()=>{p.current!=null&&(p.current.destroy(),p.current=void 0,x(S=>Object.assign({},S,{attributes:{},styles:{popper:{}}})))}},[r,n,e]),E}function jI(n,e){if(n.contains)return n.contains(e);if(n.compareDocumentPosition)return n===e||!!(n.compareDocumentPosition(e)&16)}function j6(n,e,t,r){var s=r&&typeof r!="boolean"?r.capture:r;n.removeEventListener(e,t,s),t.__once&&n.removeEventListener(e,t.__once,s)}function Ih(n,e,t,r){return g1(n,e,t,r),function(){j6(n,e,t,r)}}function V6(n){return n&&n.ownerDocument||document}var vg,VI;function F6(){if(VI)return vg;VI=1;var n=function(){};return vg=n,vg}var U6=F6();const $6=Rc(U6),FI=()=>{};function B6(n){return n.button===0}function z6(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}const _g=n=>n&&("current"in n?n.current:n),UI={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function W6(n,e=FI,{disabled:t,clickTrigger:r="click"}={}){const s=I.useRef(!1),o=I.useRef(!1),l=I.useCallback(p=>{const g=_g(n);$6(!!g,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),s.current=!g||z6(p)||!B6(p)||!!jI(g,p.target)||o.current,o.current=!1},[n]),c=Hi(p=>{const g=_g(n);g&&jI(g,p.target)?o.current=!0:o.current=!1}),h=Hi(p=>{s.current||e(p)});I.useEffect(()=>{var p,g;if(t||n==null)return;const w=V6(_g(n)),E=w.defaultView||window;let x=(p=E.event)!=null?p:(g=E.parent)==null?void 0:g.event,R=null;UI[r]&&(R=Ih(w,UI[r],c,!0));const b=Ih(w,r,l,!0),S=Ih(w,r,U=>{if(U===x){x=void 0;return}h(U)});let L=[];return"ontouchstart"in w.documentElement&&(L=[].slice.call(w.body.children).map(U=>Ih(U,"mousemove",FI))),()=>{R==null||R(),b(),S(),L.forEach(U=>U())}},[n,t,r,l,c,h])}function H6(n){const e={};return Array.isArray(n)?(n==null||n.forEach(t=>{e[t.name]=t}),e):n||e}function q6(n={}){return Array.isArray(n)?n:Object.keys(n).map(e=>(n[e].name=e,n[e]))}function G6({enabled:n,enableEvents:e,placement:t,flip:r,offset:s,fixed:o,containerPadding:l,arrowElement:c,popperConfig:h={}}){var p,g,w,E,x;const R=H6(h.modifiers);return Object.assign({},h,{placement:t,enabled:n,strategy:o?"fixed":h.strategy,modifiers:q6(Object.assign({},R,{eventListeners:{enabled:e,options:(p=R.eventListeners)==null?void 0:p.options},preventOverflow:Object.assign({},R.preventOverflow,{options:l?Object.assign({padding:l},(g=R.preventOverflow)==null?void 0:g.options):(w=R.preventOverflow)==null?void 0:w.options}),offset:{options:Object.assign({offset:s},(E=R.offset)==null?void 0:E.options)},arrow:Object.assign({},R.arrow,{enabled:!!c,options:Object.assign({},(x=R.arrow)==null?void 0:x.options,{element:c})}),flip:Object.assign({enabled:!!r},R.flip)}))})}const K6=["children","usePopper"];function Q6(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}const Y6=()=>{};function S1(n={}){const e=I.useContext(fp),[t,r]=SF(),s=I.useRef(!1),{flip:o,offset:l,rootCloseEvent:c,fixed:h=!1,placement:p,popperConfig:g={},enableEventListeners:w=!0,usePopper:E=!!e}=n,x=(e==null?void 0:e.show)==null?!!n.show:e.show;x&&!s.current&&(s.current=!0);const R=Z=>{e==null||e.toggle(!1,Z)},{placement:b,setMenu:S,menuElement:L,toggleElement:U}=e||{},B=M6(U,L,G6({placement:p||b||"bottom-start",enabled:E,enableEvents:w??x,offset:l,flip:o,fixed:h,arrowElement:t,popperConfig:g})),q=Object.assign({ref:S||Y6,"aria-labelledby":U==null?void 0:U.id},B.attributes.popper,{style:B.styles.popper}),X={show:x,placement:b,hasShown:s.current,toggle:e==null?void 0:e.toggle,popper:E?B:null,arrowProps:E?Object.assign({ref:r},B.attributes.arrow,{style:B.styles.arrow}):{}};return W6(L,R,{clickTrigger:c,disabled:!x}),[q,X]}function R1(n){let{children:e,usePopper:t=!0}=n,r=Q6(n,K6);const[s,o]=S1(Object.assign({},r,{usePopper:t}));return y.jsx(y.Fragment,{children:e(s,o)})}R1.displayName="DropdownMenu";const x_={prefix:String(Math.round(Math.random()*1e10)),current:0},A1=En.createContext(x_),X6=En.createContext(!1);let J6=!!(typeof window<"u"&&window.document&&window.document.createElement),wg=new WeakMap;function Z6(n=!1){let e=I.useContext(A1),t=I.useRef(null);if(t.current===null&&!n){var r,s;let o=(s=En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||s===void 0||(r=s.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(o){let l=wg.get(o);l==null?wg.set(o,{id:e.current,state:o.memoizedState}):o.memoizedState!==l.state&&(e.current=l.id,wg.delete(o))}t.current=++e.current}return t.current}function e9(n){let e=I.useContext(A1);e===x_&&!J6&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let t=Z6(!!n),r=`react-aria${e.prefix}`;return n||`${r}-${t}`}function t9(n){let e=En.useId(),[t]=I.useState(o9()),r=t?"react-aria":`react-aria${x_.prefix}`;return n||`${r}-${e}`}const n9=typeof En.useId=="function"?t9:e9;function r9(){return!1}function s9(){return!0}function i9(n){return()=>{}}function o9(){return typeof En.useSyncExternalStore=="function"?En.useSyncExternalStore(i9,r9,s9):I.useContext(X6)}const P1=n=>{var e;return((e=n.getAttribute("role"))==null?void 0:e.toLowerCase())==="menu"},$I=()=>{};function b1(){const n=n9(),{show:e=!1,toggle:t=$I,setToggle:r,menuElement:s}=I.useContext(fp)||{},o=I.useCallback(c=>{t(!e,c)},[e,t]),l={id:n,ref:r||$I,onClick:o,"aria-expanded":!!e};return s&&P1(s)&&(l["aria-haspopup"]=!0),[l,{show:e,toggle:t}]}function k1({children:n}){const[e,t]=b1();return y.jsx(y.Fragment,{children:n(e,t)})}k1.displayName="DropdownToggle";const Ry=I.createContext(null),BI=(n,e=null)=>n!=null?String(n):e||null,N1=I.createContext(null);N1.displayName="NavContext";const a9=["as","disabled"];function l9(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function u9(n){return!n||n.trim()==="#"}function S_({tagName:n,disabled:e,href:t,target:r,rel:s,role:o,onClick:l,tabIndex:c=0,type:h}){n||(t!=null||r!=null||s!=null?n="a":n="button");const p={tagName:n};if(n==="button")return[{type:h||"button",disabled:e},p];const g=E=>{if((e||n==="a"&&u9(t))&&E.preventDefault(),e){E.stopPropagation();return}l==null||l(E)},w=E=>{E.key===" "&&(E.preventDefault(),g(E))};return n==="a"&&(t||(t="#"),e&&(t=void 0)),[{role:o??"button",disabled:void 0,tabIndex:e?void 0:c,href:t,target:n==="a"?r:void 0,"aria-disabled":e||void 0,rel:n==="a"?s:void 0,onClick:g,onKeyDown:w},p]}const D1=I.forwardRef((n,e)=>{let{as:t,disabled:r}=n,s=l9(n,a9);const[o,{tagName:l}]=S_(Object.assign({tagName:t,disabled:r},s));return y.jsx(l,Object.assign({},s,o,{ref:e}))});D1.displayName="Button";const c9="data-rr-ui-";function O1(n){return`${c9}${n}`}const d9=["eventKey","disabled","onClick","active","as"];function h9(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function L1({key:n,href:e,active:t,disabled:r,onClick:s}){const o=I.useContext(Ry),l=I.useContext(N1),{activeKey:c}=l||{},h=BI(n,e),p=t==null&&n!=null?BI(c)===h:t;return[{onClick:Hi(w=>{r||(s==null||s(w),o&&!w.isPropagationStopped()&&o(h,w))}),"aria-disabled":r||void 0,"aria-selected":p,[O1("dropdown-item")]:""},{isActive:p}]}const M1=I.forwardRef((n,e)=>{let{eventKey:t,disabled:r,onClick:s,active:o,as:l=D1}=n,c=h9(n,d9);const[h]=L1({key:t,href:c.href,disabled:r,onClick:s,active:o});return y.jsx(l,Object.assign({},c,{ref:e},h))});M1.displayName="DropdownItem";const j1=I.createContext(m1?window:void 0);j1.Provider;function f9(){return I.useContext(j1)}function zI(){const n=IF(),e=I.useRef(null),t=I.useCallback(r=>{e.current=r,n()},[n]);return[e,t]}function Qc({defaultShow:n,show:e,onSelect:t,onToggle:r,itemSelector:s=`* [${O1("dropdown-item")}]`,focusFirstItemOnShow:o,placement:l="bottom-start",children:c}){const h=f9(),[p,g]=EF(e,n,r),[w,E]=zI(),x=w.current,[R,b]=zI(),S=R.current,L=TF(p),U=I.useRef(null),B=I.useRef(!1),q=I.useContext(Ry),X=I.useCallback((j,V,D=V==null?void 0:V.type)=>{g(j,{originalEvent:V,source:D})},[g]),Z=Hi((j,V)=>{t==null||t(j,V),X(!1,V,"select"),V.isPropagationStopped()||q==null||q(j,V)}),N=I.useMemo(()=>({toggle:X,placement:l,show:p,menuElement:x,toggleElement:S,setMenu:E,setToggle:b}),[X,l,p,x,S,E,b]);x&&L&&!p&&(B.current=x.contains(x.ownerDocument.activeElement));const P=Hi(()=>{S&&S.focus&&S.focus()}),k=Hi(()=>{const j=U.current;let V=o;if(V==null&&(V=w.current&&P1(w.current)?"keyboard":!1),V===!1||V==="keyboard"&&!/^key.+$/.test(j))return;const D=xI(w.current,s)[0];D&&D.focus&&D.focus()});I.useEffect(()=>{p?k():B.current&&(B.current=!1,P())},[p,B,P,k]),I.useEffect(()=>{U.current=null});const M=(j,V)=>{if(!w.current)return null;const D=xI(w.current,s);let le=D.indexOf(j)+V;return le=Math.max(0,Math.min(le,D.length)),D[le]};return xF(I.useCallback(()=>h.document,[h]),"keydown",j=>{var V,D;const{key:le}=j,xe=j.target,Re=(V=w.current)==null?void 0:V.contains(xe),Te=(D=R.current)==null?void 0:D.contains(xe);if(/input|textarea/i.test(xe.tagName)&&(le===" "||le!=="Escape"&&Re||le==="Escape"&&xe.type==="search")||!Re&&!Te||le==="Tab"&&(!w.current||!p))return;U.current=j.type;const ue={originalEvent:j,source:j.type};switch(le){case"ArrowUp":{const ie=M(xe,-1);ie&&ie.focus&&ie.focus(),j.preventDefault();return}case"ArrowDown":if(j.preventDefault(),!p)g(!0,ue);else{const ie=M(xe,1);ie&&ie.focus&&ie.focus()}return;case"Tab":g1(xe.ownerDocument,"keyup",ie=>{var z;(ie.key==="Tab"&&!ie.target||!((z=w.current)!=null&&z.contains(ie.target)))&&g(!1,ue)},{once:!0});break;case"Escape":le==="Escape"&&(j.preventDefault(),j.stopPropagation()),g(!1,ue);break}}),y.jsx(Ry.Provider,{value:Z,children:y.jsx(fp.Provider,{value:N,children:c})})}Qc.displayName="Dropdown";Qc.Menu=R1;Qc.Toggle=k1;Qc.Item=M1;function Ay(){return Ay=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ay.apply(null,arguments)}function p9(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function WI(n){return"default"+n.charAt(0).toUpperCase()+n.substr(1)}function m9(n){var e=g9(n,"string");return typeof e=="symbol"?e:String(e)}function g9(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function y9(n,e,t){var r=I.useRef(n!==void 0),s=I.useState(e),o=s[0],l=s[1],c=n!==void 0,h=r.current;return r.current=c,!c&&h&&o!==e&&l(e),[c?n:o,I.useCallback(function(p){for(var g=arguments.length,w=new Array(g>1?g-1:0),E=1;E<g;E++)w[E-1]=arguments[E];t&&t.apply(void 0,[p].concat(w)),l(p)},[t])]}function v9(n,e){return Object.keys(e).reduce(function(t,r){var s,o=t,l=o[WI(r)],c=o[r],h=p9(o,[WI(r),r].map(m9)),p=e[r],g=y9(c,l,n[p]),w=g[0],E=g[1];return Ay({},h,(s={},s[r]=w,s[p]=E,s))},n)}function _9(n){const e=I.useRef(n);return I.useEffect(()=>{e.current=n},[n]),e}function w9(n){const e=_9(n);return I.useCallback(function(...t){return e.current&&e.current(...t)},[e])}const R_=I.createContext({});R_.displayName="DropdownContext";const E9=["xxl","xl","lg","md","sm","xs"],T9="xs",Yc=I.createContext({prefixes:{},breakpoints:E9,minBreakpoint:T9}),{Consumer:D8,Provider:O8}=Yc;function Ze(n,e){const{prefixes:t}=I.useContext(Yc);return n||t[e]||e}function I9(){const{breakpoints:n}=I.useContext(Yc);return n}function C9(){const{minBreakpoint:n}=I.useContext(Yc);return n}function x9(){const{dir:n}=I.useContext(Yc);return n==="rtl"}const V1=I.forwardRef(({className:n,bsPrefix:e,as:t="hr",role:r="separator",...s},o)=>(e=Ze(e,"dropdown-divider"),y.jsx(t,{ref:o,className:Ke(n,e),role:r,...s})));V1.displayName="DropdownDivider";const F1=I.forwardRef(({className:n,bsPrefix:e,as:t="div",role:r="heading",...s},o)=>(e=Ze(e,"dropdown-header"),y.jsx(t,{ref:o,className:Ke(n,e),role:r,...s})));F1.displayName="DropdownHeader";const S9=["onKeyDown"];function R9(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function A9(n){return!n||n.trim()==="#"}const U1=I.forwardRef((n,e)=>{let{onKeyDown:t}=n,r=R9(n,S9);const[s]=S_(Object.assign({tagName:"a"},r)),o=Hi(l=>{s.onKeyDown(l),t==null||t(l)});return A9(r.href)||r.role==="button"?y.jsx("a",Object.assign({ref:e},r,s,{onKeyDown:o})):y.jsx("a",Object.assign({ref:e},r,{onKeyDown:t}))});U1.displayName="Anchor";const $1=I.forwardRef(({bsPrefix:n,className:e,eventKey:t,disabled:r=!1,onClick:s,active:o,as:l=U1,...c},h)=>{const p=Ze(n,"dropdown-item"),[g,w]=L1({key:t,href:c.href,disabled:r,onClick:s,active:o});return y.jsx(l,{...c,...g,ref:h,className:Ke(e,p,w.isActive&&"active",r&&"disabled")})});$1.displayName="DropdownItem";const B1=I.forwardRef(({className:n,bsPrefix:e,as:t="span",...r},s)=>(e=Ze(e,"dropdown-item-text"),y.jsx(t,{ref:s,className:Ke(n,e),...r})));B1.displayName="DropdownItemText";const P9=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",b9=typeof document<"u",k9=b9||P9?I.useLayoutEffect:I.useEffect,HI=n=>!n||typeof n=="function"?n:e=>{n.current=e};function N9(n,e){const t=HI(n),r=HI(e);return s=>{t&&t(s),r&&r(s)}}function z1(n,e){return I.useMemo(()=>N9(n,e),[n,e])}const A_=I.createContext(null);A_.displayName="InputGroupContext";const W1=I.createContext(null);W1.displayName="NavbarContext";function H1(n,e){return n}var Eg={exports:{}},Tg,qI;function D9(){if(qI)return Tg;qI=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Tg=n,Tg}var Ig,GI;function O9(){if(GI)return Ig;GI=1;var n=D9();function e(){}function t(){}return t.resetWarningCache=e,Ig=function(){function r(l,c,h,p,g,w){if(w!==n){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}r.isRequired=r;function s(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},Ig}var KI;function L9(){return KI||(KI=1,Eg.exports=O9()()),Eg.exports}var M9=L9();const cl=Rc(M9);function q1(n,e,t){const r=t?"top-end":"top-start",s=t?"top-start":"top-end",o=t?"bottom-end":"bottom-start",l=t?"bottom-start":"bottom-end",c=t?"right-start":"left-start",h=t?"right-end":"left-end",p=t?"left-start":"right-start",g=t?"left-end":"right-end";let w=n?l:o;return e==="up"?w=n?s:r:e==="end"?w=n?g:p:e==="start"?w=n?h:c:e==="down-centered"?w="bottom":e==="up-centered"&&(w="top"),w}const G1=I.forwardRef(({bsPrefix:n,className:e,align:t,rootCloseEvent:r,flip:s=!0,show:o,renderOnMount:l,as:c="div",popperConfig:h,variant:p,...g},w)=>{let E=!1;const x=I.useContext(W1),R=Ze(n,"dropdown-menu"),{align:b,drop:S,isRTL:L}=I.useContext(R_);t=t||b;const U=I.useContext(A_),B=[];if(t)if(typeof t=="object"){const j=Object.keys(t);if(j.length){const V=j[0],D=t[V];E=D==="start",B.push(`${R}-${V}-${D}`)}}else t==="end"&&(E=!0);const q=q1(E,S,L),[X,{hasShown:Z,popper:N,show:P,toggle:k}]=S1({flip:s,rootCloseEvent:r,show:o,usePopper:!x&&B.length===0,offset:[0,2],popperConfig:h,placement:q});if(X.ref=z1(H1(w),X.ref),k9(()=>{P&&(N==null||N.update())},[P]),!Z&&!l&&!U)return null;typeof c!="string"&&(X.show=P,X.close=()=>k==null?void 0:k(!1),X.align=t);let M=g.style;return N!=null&&N.placement&&(M={...g.style,...X.style},g["x-placement"]=N.placement),y.jsx(c,{...g,...X,style:M,...(B.length||x)&&{"data-bs-popper":"static"},className:Ke(e,R,P&&"show",E&&`${R}-end`,p&&`${R}-${p}`,...B)})});G1.displayName="DropdownMenu";const Vi=I.forwardRef(({as:n,bsPrefix:e,variant:t="primary",size:r,active:s=!1,disabled:o=!1,className:l,...c},h)=>{const p=Ze(e,"btn"),[g,{tagName:w}]=S_({tagName:n,disabled:o,...c}),E=w;return y.jsx(E,{...g,...c,ref:h,disabled:o,className:Ke(l,p,s&&"active",t&&`${p}-${t}`,r&&`${p}-${r}`,c.href&&o&&"disabled")})});Vi.displayName="Button";const K1=I.forwardRef(({bsPrefix:n,split:e,className:t,childBsPrefix:r,as:s=Vi,...o},l)=>{const c=Ze(n,"dropdown-toggle"),h=I.useContext(fp);r!==void 0&&(o.bsPrefix=r);const[p]=b1();return p.ref=z1(p.ref,H1(l)),y.jsx(s,{className:Ke(t,c,e&&`${c}-split`,(h==null?void 0:h.show)&&"show"),...p,...o})});K1.displayName="DropdownToggle";const Q1=I.forwardRef((n,e)=>{const{bsPrefix:t,drop:r="down",show:s,className:o,align:l="start",onSelect:c,onToggle:h,focusFirstItemOnShow:p,as:g="div",navbar:w,autoClose:E=!0,...x}=v9(n,{show:"onToggle"}),R=I.useContext(A_),b=Ze(t,"dropdown"),S=x9(),L=N=>E===!1?N==="click":E==="inside"?N!=="rootClose":E==="outside"?N!=="select":!0,U=w9((N,P)=>{var k;!((k=P.originalEvent)==null||(k=k.target)==null)&&k.classList.contains("dropdown-toggle")&&P.source==="mousedown"||(P.originalEvent.currentTarget===document&&(P.source!=="keydown"||P.originalEvent.key==="Escape")&&(P.source="rootClose"),L(P.source)&&(h==null||h(N,P)))}),q=q1(l==="end",r,S),X=I.useMemo(()=>({align:l,drop:r,isRTL:S}),[l,r,S]),Z={down:b,"down-centered":`${b}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return y.jsx(R_.Provider,{value:X,children:y.jsx(Qc,{placement:q,show:s,onSelect:c,onToggle:U,focusFirstItemOnShow:p,itemSelector:`.${b}-item:not(.disabled):not(:disabled)`,children:R?x.children:y.jsx(g,{...x,ref:e,className:Ke(o,s&&"show",Z[r])})})})});Q1.displayName="Dropdown";const bi=Object.assign(Q1,{Toggle:K1,Menu:G1,Item:$1,ItemText:B1,Divider:V1,Header:F1}),j9=()=>{const n=mr(),{currentUser:e}=gr(),{profile:t}=I.useContext(dp),r=async()=>{await y_(),n("/")};return y.jsxs(bi,{children:[y.jsx(bi.Toggle,{variant:"success",id:"dropdown-basic",children:y.jsx("img",{src:Ty})}),y.jsxs(bi.Menu,{children:[y.jsx(bi.Item,{as:Tt,to:"/ProfileDashboard",children:"Profile"}),y.jsx(bi.Item,{as:Tt,to:"/designerPage",children:"Designs"}),(e==null?void 0:e.isAdmin)&&y.jsx(bi.Item,{as:Tt,to:"/Admin",children:"Admin"}),y.jsx(bi.Item,{href:"#/action-3",children:"Action"}),y.jsx(bi.Item,{onClick:r,children:"Log Out"})]})]})},mp=()=>{const{userLoggedIn:n}=gr()||{userLoggedIn:!1},e=mr(),t=async()=>{await y_(),e("/")};return y.jsxs("div",{className:"nav",children:[y.jsx(Tt,{to:"/",children:y.jsx("div",{className:"logo",children:"URENO"})}),y.jsxs("div",{className:"Right",children:[y.jsxs("menu",{children:[y.jsx("li",{children:"AI Design"}),y.jsx("li",{children:"Architects & Designers"}),y.jsx("li",{children:"Projects"}),y.jsx("li",{children:"Messages"})]}),n?y.jsx("button",{className:"btn login-btn",onClick:t,children:"Log Out"}):y.jsx(Tt,{to:"/sign-in",children:y.jsx("button",{className:"btn login-btn",children:"Log In"})}),n?y.jsx(j9,{}):y.jsx("button",{className:"btn profile-btn",children:y.jsx("object",{data:Ty,type:"image/svg+xml",children:y.jsx("img",{src:Ty})})})]})]})};function V9(){return y.jsxs(y.Fragment,{children:[y.jsx("meta",{charSet:"UTF-8"}),y.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),y.jsx("title",{children:"Ureno"}),y.jsx(mp,{}),y.jsx("div",{className:"center-logo",children:y.jsxs("div",{className:"container",children:[y.jsx("h1",{children:"URENO"}),y.jsx("p",{children:"Renovation Made Simple"}),y.jsx("button",{className:"btn try-now",children:"Try it Now"})]})}),y.jsxs("div",{className:"services",children:[y.jsx("div",{className:"our-services",children:y.jsx("p",{children:"Our Services"})}),y.jsxs("div",{className:"floor-content",children:[y.jsx("div",{className:"flooring fadeInRight",children:y.jsx("p",{children:y.jsx(Tt,{to:"/product-page",children:y.jsx("img",{src:fF,alt:"light oak wooden floor"})})})}),y.jsxs("div",{className:"floor-txt fadeInRight",children:[y.jsx("h3",{children:"flooring"}),y.jsx("p",{children:"Lorem ipsum dolor sit amet. A reiciendis repellat in cupiditate temporibus est tenetur architecto sed voluptatibus saepe."})]})]}),y.jsxs("div",{className:"paint-content",children:[y.jsx("div",{className:"painting fadeInLeft",children:y.jsx("img",{src:pF,alt:"blue painted walls"})}),y.jsxs("div",{className:"paint-txt fadeInLeft",children:[y.jsx("h3",{children:"paint"}),y.jsx("p",{children:"Lorem ipsum dolor sit amet. A reiciendis repellat in cupiditate temporibus est tenetur architecto sed voluptatibus saepe."})]})]})]}),y.jsx(qc,{})]})}const F9="/Ureno_webdesign/assets/Harvest-grove-rigid-CaKY0j96.png",U9="/Ureno_webdesign/assets/tavertine-BlkzyBiO.png",Y1=({productId:n,image:e,title:t,description:r,price:s,link:o})=>y.jsx("div",{className:"products",children:y.jsxs(Tt,{to:`/productDetail/${n}`,className:"container",children:[y.jsx("img",{src:e,alt:t}),y.jsx("div",{className:"prod-title",children:t}),y.jsx("p",{children:r}),y.jsx("p",{children:s})]})});Y1.defaultProps={productId:"default-id",image:"../assets/images/defaultImage.jpg.webp",title:"Default Title",description:"No description available",price:"Price not available.",link:"/productDetail"};function $9(){const[n,e]=I.useState(0),{userLoggedIn:t}=gr()||{userLoggedIn:!1},[r,s]=I.useState([]);return I.useEffect(()=>{(async()=>{try{const l=no();console.log("Attempting to fetch products from Firestore...");const c=await El(Fr(l,"products"));console.log("Products fetched successfully:",c.size);const h=c.docs.map(p=>({id:p.id,...p.data()}));s(h)}catch(l){console.error("Error fetching products:",l),s([{id:"HarvestGrove",image:F9,title:"Harvest Grove Rigid Luxury Vinyl",description:"Floor and Decor",price:"$2.19/sqft"},{id:"tavertine",image:U9,title:"Inverness Tavertine Vinyl",description:"Floor and Decor",price:"$2.19/sqft"}])}})()},[]),I.useEffect(()=>{const o=()=>{const l=document.querySelector(".nav");l&&e(l.offsetHeight)};return o(),window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}},[]),y.jsxs(y.Fragment,{children:[y.jsx("meta",{charSet:"UTF-8"}),y.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),y.jsx("title",{children:"URENO"}),y.jsx(mp,{}),y.jsxs("div",{className:"body",children:[y.jsxs("div",{className:`main-content ${t?"logged-in":""}`,children:[y.jsx("h1",{children:"Flooring"}),y.jsxs("div",{className:"search",children:[y.jsx("div",{className:"input",children:y.jsx("input",{type:"text",className:"search-bar",placeholder:"Search"})}),y.jsx("div",{className:"filter",children:"Filter"})]}),y.jsx("p",{children:"Popular"}),y.jsx("div",{className:"products",children:r.map(o=>y.jsx(Y1,{productId:o.id,image:o.image,title:o.title,description:o.description,price:o.price,link:o.link},o.id))})]}),y.jsx(qc,{})]})]})}function X1(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=X1(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function J1(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=X1(n))&&(r&&(r+=" "),r+=e);return r}const P_="-",B9=n=>{const e=W9(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:l=>{const c=l.split(P_);return c[0]===""&&c.length!==1&&c.shift(),Z1(c,e)||z9(l)},getConflictingClassGroupIds:(l,c)=>{const h=t[l]||[];return c&&r[l]?[...h,...r[l]]:h}}},Z1=(n,e)=>{var l;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?Z1(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const o=n.join(P_);return(l=e.validators.find(({validator:c})=>c(o)))==null?void 0:l.classGroupId},QI=/^\[(.+)\]$/,z9=n=>{if(QI.test(n)){const e=QI.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},W9=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return q9(Object.entries(n.classGroups),t).forEach(([o,l])=>{Py(l,r,o,e)}),r},Py=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const o=s===""?e:YI(e,s);o.classGroupId=t;return}if(typeof s=="function"){if(H9(s)){Py(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([o,l])=>{Py(l,YI(e,o),t,r)})})},YI=(n,e)=>{let t=n;return e.split(P_).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},H9=n=>n.isThemeGetter,q9=(n,e)=>e?n.map(([t,r])=>{const s=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([l,c])=>[e+l,c])):o);return[t,s]}):n,G9=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(o,l)=>{t.set(o,l),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let l=t.get(o);if(l!==void 0)return l;if((l=r.get(o))!==void 0)return s(o,l),l},set(o,l){t.has(o)?t.set(o,l):s(o,l)}}},eA="!",K9=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],o=e.length,l=c=>{const h=[];let p=0,g=0,w;for(let S=0;S<c.length;S++){let L=c[S];if(p===0){if(L===s&&(r||c.slice(S,S+o)===e)){h.push(c.slice(g,S)),g=S+o;continue}if(L==="/"){w=S;continue}}L==="["?p++:L==="]"&&p--}const E=h.length===0?c:c.substring(g),x=E.startsWith(eA),R=x?E.substring(1):E,b=w&&w>g?w-g:void 0;return{modifiers:h,hasImportantModifier:x,baseClassName:R,maybePostfixModifierPosition:b}};return t?c=>t({className:c,parseClassName:l}):l},Q9=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},Y9=n=>({cache:G9(n.cacheSize),parseClassName:K9(n),...B9(n)}),X9=/\s+/,J9=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,o=[],l=n.trim().split(X9);let c="";for(let h=l.length-1;h>=0;h-=1){const p=l[h],{modifiers:g,hasImportantModifier:w,baseClassName:E,maybePostfixModifierPosition:x}=t(p);let R=!!x,b=r(R?E.substring(0,x):E);if(!b){if(!R){c=p+(c.length>0?" "+c:c);continue}if(b=r(E),!b){c=p+(c.length>0?" "+c:c);continue}R=!1}const S=Q9(g).join(":"),L=w?S+eA:S,U=L+b;if(o.includes(U))continue;o.push(U);const B=s(b,R);for(let q=0;q<B.length;++q){const X=B[q];o.push(L+X)}c=p+(c.length>0?" "+c:c)}return c};function Z9(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=tA(e))&&(r&&(r+=" "),r+=t);return r}const tA=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=tA(n[r]))&&(t&&(t+=" "),t+=e);return t};function eU(n,...e){let t,r,s,o=l;function l(h){const p=e.reduce((g,w)=>w(g),n());return t=Y9(p),r=t.cache.get,s=t.cache.set,o=c,c(h)}function c(h){const p=r(h);if(p)return p;const g=J9(h,t);return s(h,g),g}return function(){return o(Z9.apply(null,arguments))}}const ut=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},nA=/^\[(?:([a-z-]+):)?(.+)\]$/i,tU=/^\d+\/\d+$/,nU=new Set(["px","full","screen"]),rU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,sU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,iU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,oU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,aU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,bs=n=>dl(n)||nU.has(n)||tU.test(n),ki=n=>Bl(n,"length",mU),dl=n=>!!n&&!Number.isNaN(Number(n)),Cg=n=>Bl(n,"number",dl),$u=n=>!!n&&Number.isInteger(Number(n)),lU=n=>n.endsWith("%")&&dl(n.slice(0,-1)),Ne=n=>nA.test(n),Ni=n=>rU.test(n),uU=new Set(["length","size","percentage"]),cU=n=>Bl(n,uU,rA),dU=n=>Bl(n,"position",rA),hU=new Set(["image","url"]),fU=n=>Bl(n,hU,yU),pU=n=>Bl(n,"",gU),Bu=()=>!0,Bl=(n,e,t)=>{const r=nA.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},mU=n=>sU.test(n)&&!iU.test(n),rA=()=>!1,gU=n=>oU.test(n),yU=n=>aU.test(n),vU=()=>{const n=ut("colors"),e=ut("spacing"),t=ut("blur"),r=ut("brightness"),s=ut("borderColor"),o=ut("borderRadius"),l=ut("borderSpacing"),c=ut("borderWidth"),h=ut("contrast"),p=ut("grayscale"),g=ut("hueRotate"),w=ut("invert"),E=ut("gap"),x=ut("gradientColorStops"),R=ut("gradientColorStopPositions"),b=ut("inset"),S=ut("margin"),L=ut("opacity"),U=ut("padding"),B=ut("saturate"),q=ut("scale"),X=ut("sepia"),Z=ut("skew"),N=ut("space"),P=ut("translate"),k=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",Ne,e],V=()=>[Ne,e],D=()=>["",bs,ki],le=()=>["auto",dl,Ne],xe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Re=()=>["solid","dashed","dotted","double","none"],Te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],se=()=>["start","end","center","between","around","evenly","stretch"],ue=()=>["","0",Ne],ie=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>[dl,Ne];return{cacheSize:500,separator:":",theme:{colors:[Bu],spacing:[bs,ki],blur:["none","",Ni,Ne],brightness:z(),borderColor:[n],borderRadius:["none","","full",Ni,Ne],borderSpacing:V(),borderWidth:D(),contrast:z(),grayscale:ue(),hueRotate:z(),invert:ue(),gap:V(),gradientColorStops:[n],gradientColorStopPositions:[lU,ki],inset:j(),margin:j(),opacity:z(),padding:V(),saturate:z(),scale:z(),sepia:ue(),skew:z(),space:V(),translate:V()},classGroups:{aspect:[{aspect:["auto","square","video",Ne]}],container:["container"],columns:[{columns:[Ni]}],"break-after":[{"break-after":ie()}],"break-before":[{"break-before":ie()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...xe(),Ne]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",$u,Ne]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ne]}],grow:[{grow:ue()}],shrink:[{shrink:ue()}],order:[{order:["first","last","none",$u,Ne]}],"grid-cols":[{"grid-cols":[Bu]}],"col-start-end":[{col:["auto",{span:["full",$u,Ne]},Ne]}],"col-start":[{"col-start":le()}],"col-end":[{"col-end":le()}],"grid-rows":[{"grid-rows":[Bu]}],"row-start-end":[{row:["auto",{span:[$u,Ne]},Ne]}],"row-start":[{"row-start":le()}],"row-end":[{"row-end":le()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ne]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ne]}],gap:[{gap:[E]}],"gap-x":[{"gap-x":[E]}],"gap-y":[{"gap-y":[E]}],"justify-content":[{justify:["normal",...se()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...se(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...se(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[U]}],px:[{px:[U]}],py:[{py:[U]}],ps:[{ps:[U]}],pe:[{pe:[U]}],pt:[{pt:[U]}],pr:[{pr:[U]}],pb:[{pb:[U]}],pl:[{pl:[U]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ne,e]}],"min-w":[{"min-w":[Ne,e,"min","max","fit"]}],"max-w":[{"max-w":[Ne,e,"none","full","min","max","fit","prose",{screen:[Ni]},Ni]}],h:[{h:[Ne,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ne,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ne,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ne,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ni,ki]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Cg]}],"font-family":[{font:[Bu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ne]}],"line-clamp":[{"line-clamp":["none",dl,Cg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",bs,Ne]}],"list-image":[{"list-image":["none",Ne]}],"list-style-type":[{list:["none","disc","decimal",Ne]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[L]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[L]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Re(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",bs,ki]}],"underline-offset":[{"underline-offset":["auto",bs,Ne]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ne]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ne]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[L]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...xe(),dU]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",cU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},fU]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[R]}],"gradient-via-pos":[{via:[R]}],"gradient-to-pos":[{to:[R]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[L]}],"border-style":[{border:[...Re(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[L]}],"divide-style":[{divide:Re()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Re()]}],"outline-offset":[{"outline-offset":[bs,Ne]}],"outline-w":[{outline:[bs,ki]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[L]}],"ring-offset-w":[{"ring-offset":[bs,ki]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Ni,pU]}],"shadow-color":[{shadow:[Bu]}],opacity:[{opacity:[L]}],"mix-blend":[{"mix-blend":[...Te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Te()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",Ni,Ne]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[w]}],saturate:[{saturate:[B]}],sepia:[{sepia:[X]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[w]}],"backdrop-opacity":[{"backdrop-opacity":[L]}],"backdrop-saturate":[{"backdrop-saturate":[B]}],"backdrop-sepia":[{"backdrop-sepia":[X]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ne]}],duration:[{duration:z()}],ease:[{ease:["linear","in","out","in-out",Ne]}],delay:[{delay:z()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ne]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[q]}],"scale-x":[{"scale-x":[q]}],"scale-y":[{"scale-y":[q]}],rotate:[{rotate:[$u,Ne]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[Z]}],"skew-y":[{"skew-y":[Z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ne]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ne]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ne]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[bs,ki,Cg]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},_U=eU(vU);function po(...n){return _U(J1(n))}const XI=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,JI=J1,sA=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return JI(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:o}=e,l=Object.keys(s).map(p=>{const g=t==null?void 0:t[p],w=o==null?void 0:o[p];if(g===null)return null;const E=XI(g)||XI(w);return s[p][E]}),c=t&&Object.entries(t).reduce((p,g)=>{let[w,E]=g;return E===void 0||(p[w]=E),p},{}),h=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((p,g)=>{let{class:w,className:E,...x}=g;return Object.entries(x).every(R=>{let[b,S]=R;return Array.isArray(S)?S.includes({...o,...c}[b]):{...o,...c}[b]===S})?[...p,w,E]:p},[]);return JI(n,l,h,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),iA=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var EU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=I.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...c},h)=>I.createElement("svg",{ref:h,...EU,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:iA("lucide",s),...c},[...l.map(([p,g])=>I.createElement(p,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=(n,e)=>{const t=I.forwardRef(({className:r,...s},o)=>I.createElement(TU,{ref:o,iconNode:e,className:iA(`lucide-${wU(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],CU=Xc("Bell",IU);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],SU=Xc("LoaderCircle",xU);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],AU=Xc("LogOut",RU);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],bU=Xc("Settings",PU);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],NU=Xc("X",kU),DU=sA("active:scale-95 inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:opacity-50 dark:focus:ring-slate-400 disabled:pointer-events-none dark:focus:ring-offset-slate-900",{variants:{variant:{default:"bg-zinc-900 text-zinc-100 hover:bg-zinc-800",destructive:"text-white hover:bg-red-600 dark:hover:bg-red-600",outline:"bg-zinc-100 text-zinc-900 hover:bg-zinc-200 outline outline-1 outline-zinc-300",subtle:"hover:bg-zinc-200 bg-zinc-100 text-zinc-900",ghost:"bg-transparent hover:bg-zinc-100 text-zinc-800 data-[state=open]:bg-transparent data-[state=open]:bg-transparent",link:"bg-transparent dark:bg-transparent underline-offset-4 hover:underline text-slate-900 dark:text-slate-100 hover:bg-transparent dark:hover:bg-transparent"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-2 rounded-md",xs:"h-8 px-1.5 rounded-sm",lg:"h-11 px-8 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),Ef=I.forwardRef(({className:n,children:e,variant:t,isLoading:r,size:s,...o},l)=>y.jsxs("button",{className:po(DU({variant:t,size:s,className:n})),ref:l,disabled:r,...o,children:[r?y.jsx(SU,{className:"mr-2 h-4 w-4 animate-spin"}):null,e]}));Ef.displayName="Button";const b_={logo:n=>y.jsx("svg",{width:"271.015",height:"70.315",viewBox:"-145.011144365309036 -30.49067544250989 331.0151672857927 130.31489419250988",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("g",{id:"svgGroup",strokeLinecap:"round",fillRule:"nonzero",fontSize:"9pt",stroke:"#000",strokeWidth:"0.25mm",fill:"#000",children:y.jsx("path",{d:"M 0.871 42.383 L 9.367 0 L 22.306 0 L 13.81 42.383 A 30.417 30.417 0 0 0 13.441 44.675 Q 11.706 59.082 27.58 59.082 A 25.912 25.912 0 0 0 35.582 57.938 Q 43.671 55.317 46.807 46.686 A 29.378 29.378 0 0 0 47.99 42.383 L 56.486 0 L 69.425 0 L 60.929 42.383 Q 56.437 64.922 36.013 69.272 A 51.3 51.3 0 0 1 25.333 70.312 Q -4.549 70.313 0.817 42.655 A 54.603 54.603 0 0 1 0.871 42.383 Z M 170.255 69.824 L 157.316 69.824 L 167.57 18.555 L 179.044 18.555 L 177.042 35.84 A 48.043 48.043 0 0 1 182.438 27.877 Q 190.364 18.555 200.871 18.555 Q 215.284 18.555 212.504 34.358 A 37.97 37.97 0 0 1 212.345 35.205 L 205.412 69.824 L 192.472 69.824 L 199.406 35.059 A 9.722 9.722 0 0 0 199.542 34.192 Q 200.038 29.64 195.123 29.082 A 13.143 13.143 0 0 0 193.644 29.004 A 12.397 12.397 0 0 0 186.867 31.196 Q 182.454 34.051 178.041 40.623 A 72.792 72.792 0 0 0 175.187 45.264 L 170.255 69.824 Z M 131.242 49.219 L 118.4 49.219 A 14.778 14.778 0 0 0 118.188 50.62 Q 117.295 59.57 129.826 59.57 A 32.356 32.356 0 0 0 147.217 54.447 A 40.076 40.076 0 0 0 149.064 53.223 L 147.013 63.477 A 29.1 29.1 0 0 1 133.997 69.204 A 40.091 40.091 0 0 1 126.798 69.824 A 35.673 35.673 0 0 1 118.704 68.991 Q 102.573 65.217 106.442 44.34 A 55.876 55.876 0 0 1 106.583 43.604 Q 111.086 21.176 131.247 18.829 A 42.614 42.614 0 0 1 136.173 18.555 A 46.684 46.684 0 0 1 142.691 18.969 Q 157.543 21.075 154.972 33.887 A 16.984 16.984 0 0 1 144.095 47.13 Q 140.663 48.501 136.2 48.972 A 47.285 47.285 0 0 1 131.242 49.219 Z M 120.304 39.746 L 133.244 39.746 Q 137.059 39.746 139.319 38.509 A 6.004 6.004 0 0 0 142.423 34.229 A 6.024 6.024 0 0 0 142.521 33.509 Q 142.836 29.111 135.517 28.744 A 27.909 27.909 0 0 0 134.122 28.711 A 15.659 15.659 0 0 0 128.354 29.709 Q 124.114 31.377 121.81 35.833 A 20.477 20.477 0 0 0 120.304 39.746 Z M 81.828 69.824 L 68.888 69.824 L 79.142 18.555 L 90.617 18.555 L 88.81 34.863 A 59.862 59.862 0 0 1 92.813 28.311 Q 97.632 21.541 102.816 19.469 A 12.42 12.42 0 0 1 107.462 18.555 L 105.265 29.492 A 13.431 13.431 0 0 0 97.693 31.996 Q 92.076 35.776 86.759 45.264 L 81.828 69.824 Z M 224.146 32.761 Q 230.67 20.161 245.33 18.365 A 41.947 41.947 0 0 1 250.431 18.066 A 34.33 34.33 0 0 1 258.326 18.89 Q 274.406 22.705 270.109 44.189 A 43.09 43.09 0 0 1 266.267 55.597 Q 259.743 68.173 245.083 69.966 A 42.024 42.024 0 0 1 239.982 70.264 Q 215.53 70.264 220.164 44.926 A 56.584 56.584 0 0 1 220.304 44.189 A 43.226 43.226 0 0 1 224.146 32.761 Z M 233.292 43.994 Q 230.07 60.059 242.033 60.059 A 12.969 12.969 0 0 0 253.572 53.783 Q 255.134 51.371 256.191 48.032 A 38.445 38.445 0 0 0 257.218 43.994 Q 259.879 30.648 251.601 28.666 A 13.851 13.851 0 0 0 248.38 28.32 Q 236.417 28.32 233.292 43.994 Z",vectorEffect:"non-scaling-stroke"})})}),google:n=>y.jsxs("svg",{...n,viewBox:"0 0 24 24",children:[y.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),y.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),y.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),y.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"}),y.jsx("path",{d:"M1 1h22v22H1z",fill:"none"})]})},OU=1,LU=1e6;let xg=0;function MU(){return xg=(xg+1)%Number.MAX_SAFE_INTEGER,xg.toString()}const Sg=new Map,ZI=n=>{if(Sg.has(n))return;const e=setTimeout(()=>{Sg.delete(n),uc({type:"REMOVE_TOAST",toastId:n})},LU);Sg.set(n,e)},jU=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,OU)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?ZI(t):n.toasts.forEach(r=>{ZI(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Bh=[];let zh={toasts:[]};function uc(n){zh=jU(zh,n),Bh.forEach(e=>{e(zh)})}function VU({...n}){const e=MU(),t=s=>uc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>uc({type:"DISMISS_TOAST",toastId:e});return uc({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function oA(){const[n,e]=I.useState(zh);return I.useEffect(()=>(Bh.push(e),()=>{const t=Bh.indexOf(e);t>-1&&Bh.splice(t,1)}),[n]),{...n,toast:VU,dismiss:t=>uc({type:"DISMISS_TOAST",toastId:t})}}function qn(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function eC(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function aA(...n){return e=>{let t=!1;const r=n.map(s=>{const o=eC(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():eC(n[s],null)}}}}function ra(...n){return I.useCallback(aA(...n),n)}function lA(n,e=[]){let t=[];function r(o,l){const c=I.createContext(l),h=t.length;t=[...t,l];const p=w=>{var L;const{scope:E,children:x,...R}=w,b=((L=E==null?void 0:E[n])==null?void 0:L[h])||c,S=I.useMemo(()=>R,Object.values(R));return y.jsx(b.Provider,{value:S,children:x})};p.displayName=o+"Provider";function g(w,E){var b;const x=((b=E==null?void 0:E[n])==null?void 0:b[h])||c,R=I.useContext(x);if(R)return R;if(l!==void 0)return l;throw new Error(`\`${w}\` must be used within \`${o}\``)}return[p,g]}const s=()=>{const o=t.map(l=>I.createContext(l));return function(c){const h=(c==null?void 0:c[n])||o;return I.useMemo(()=>({[`__scope${n}`]:{...c,[n]:h}}),[c,h])}};return s.scopeName=n,[r,FU(s,...e)]}function FU(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const l=r.reduce((c,{useScope:h,scopeName:p})=>{const w=h(o)[`__scope${p}`];return{...c,...w}},{});return I.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}var Tf=I.forwardRef((n,e)=>{const{children:t,...r}=n,s=I.Children.toArray(t),o=s.find($U);if(o){const l=o.props.children,c=s.map(h=>h===o?I.Children.count(l)>1?I.Children.only(null):I.isValidElement(l)?l.props.children:null:h);return y.jsx(by,{...r,ref:e,children:I.isValidElement(l)?I.cloneElement(l,void 0,c):null})}return y.jsx(by,{...r,ref:e,children:t})});Tf.displayName="Slot";var by=I.forwardRef((n,e)=>{const{children:t,...r}=n;if(I.isValidElement(t)){const s=zU(t),o=BU(r,t.props);return t.type!==I.Fragment&&(o.ref=e?aA(e,s):s),I.cloneElement(t,o)}return I.Children.count(t)>1?I.Children.only(null):null});by.displayName="SlotClone";var UU=({children:n})=>y.jsx(y.Fragment,{children:n});function $U(n){return I.isValidElement(n)&&n.type===UU}function BU(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...c)=>{o(...c),s(...c)}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function zU(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function WU(n){const e=n+"CollectionProvider",[t,r]=lA(e),[s,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=x=>{const{scope:R,children:b}=x,S=En.useRef(null),L=En.useRef(new Map).current;return y.jsx(s,{scope:R,itemMap:L,collectionRef:S,children:b})};l.displayName=e;const c=n+"CollectionSlot",h=En.forwardRef((x,R)=>{const{scope:b,children:S}=x,L=o(c,b),U=ra(R,L.collectionRef);return y.jsx(Tf,{ref:U,children:S})});h.displayName=c;const p=n+"CollectionItemSlot",g="data-radix-collection-item",w=En.forwardRef((x,R)=>{const{scope:b,children:S,...L}=x,U=En.useRef(null),B=ra(R,U),q=o(p,b);return En.useEffect(()=>(q.itemMap.set(U,{ref:U,...L}),()=>void q.itemMap.delete(U))),y.jsx(Tf,{[g]:"",ref:B,children:S})});w.displayName=p;function E(x){const R=o(n+"CollectionConsumer",x);return En.useCallback(()=>{const S=R.collectionRef.current;if(!S)return[];const L=Array.from(S.querySelectorAll(`[${g}]`));return Array.from(R.itemMap.values()).sort((q,X)=>L.indexOf(q.ref.current)-L.indexOf(X.ref.current))},[R.collectionRef,R.itemMap])}return[{Provider:l,Slot:h,ItemSlot:w},E,r]}var HU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],fs=HU.reduce((n,e)=>{const t=I.forwardRef((r,s)=>{const{asChild:o,...l}=r,c=o?Tf:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(c,{...l,ref:s})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function uA(n,e){n&&Wy.flushSync(()=>n.dispatchEvent(e))}function Qs(n){const e=I.useRef(n);return I.useEffect(()=>{e.current=n}),I.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function qU(n,e=globalThis==null?void 0:globalThis.document){const t=Qs(n);I.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var GU="DismissableLayer",ky="dismissableLayer.update",KU="dismissableLayer.pointerDownOutside",QU="dismissableLayer.focusOutside",tC,cA=I.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),dA=I.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...h}=n,p=I.useContext(cA),[g,w]=I.useState(null),E=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=I.useState({}),R=ra(e,N=>w(N)),b=Array.from(p.layers),[S]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),L=b.indexOf(S),U=g?b.indexOf(g):-1,B=p.layersWithOutsidePointerEventsDisabled.size>0,q=U>=L,X=XU(N=>{const P=N.target,k=[...p.branches].some(M=>M.contains(P));!q||k||(s==null||s(N),l==null||l(N),N.defaultPrevented||c==null||c())},E),Z=JU(N=>{const P=N.target;[...p.branches].some(M=>M.contains(P))||(o==null||o(N),l==null||l(N),N.defaultPrevented||c==null||c())},E);return qU(N=>{U===p.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&c&&(N.preventDefault(),c()))},E),I.useEffect(()=>{if(g)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(tC=E.body.style.pointerEvents,E.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),nC(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(E.body.style.pointerEvents=tC)}},[g,E,t,p]),I.useEffect(()=>()=>{g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),nC())},[g,p]),I.useEffect(()=>{const N=()=>x({});return document.addEventListener(ky,N),()=>document.removeEventListener(ky,N)},[]),y.jsx(fs.div,{...h,ref:R,style:{pointerEvents:B?q?"auto":"none":void 0,...n.style},onFocusCapture:qn(n.onFocusCapture,Z.onFocusCapture),onBlurCapture:qn(n.onBlurCapture,Z.onBlurCapture),onPointerDownCapture:qn(n.onPointerDownCapture,X.onPointerDownCapture)})});dA.displayName=GU;var YU="DismissableLayerBranch",hA=I.forwardRef((n,e)=>{const t=I.useContext(cA),r=I.useRef(null),s=ra(e,r);return I.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),y.jsx(fs.div,{...n,ref:s})});hA.displayName=YU;function XU(n,e=globalThis==null?void 0:globalThis.document){const t=Qs(n),r=I.useRef(!1),s=I.useRef(()=>{});return I.useEffect(()=>{const o=c=>{if(c.target&&!r.current){let h=function(){fA(KU,t,p,{discrete:!0})};const p={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function JU(n,e=globalThis==null?void 0:globalThis.document){const t=Qs(n),r=I.useRef(!1);return I.useEffect(()=>{const s=o=>{o.target&&!r.current&&fA(QU,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function nC(){const n=new CustomEvent(ky);document.dispatchEvent(n)}function fA(n,e,t,{discrete:r}){const s=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?uA(s,o):s.dispatchEvent(o)}var ZU=dA,e5=hA,If=globalThis!=null&&globalThis.document?I.useLayoutEffect:()=>{},t5="Portal",pA=I.forwardRef((n,e)=>{var c;const{container:t,...r}=n,[s,o]=I.useState(!1);If(()=>o(!0),[]);const l=t||s&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return l?ck.createPortal(y.jsx(fs.div,{...r,ref:e}),l):null});pA.displayName=t5;function n5(n,e){return I.useReducer((t,r)=>e[t][r]??t,n)}var mA=n=>{const{present:e,children:t}=n,r=r5(e),s=typeof t=="function"?t({present:r.isPresent}):I.Children.only(t),o=ra(r.ref,s5(s));return typeof t=="function"||r.isPresent?I.cloneElement(s,{ref:o}):null};mA.displayName="Presence";function r5(n){const[e,t]=I.useState(),r=I.useRef({}),s=I.useRef(n),o=I.useRef("none"),l=n?"mounted":"unmounted",[c,h]=n5(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return I.useEffect(()=>{const p=Ch(r.current);o.current=c==="mounted"?p:"none"},[c]),If(()=>{const p=r.current,g=s.current;if(g!==n){const E=o.current,x=Ch(p);n?h("MOUNT"):x==="none"||(p==null?void 0:p.display)==="none"?h("UNMOUNT"):h(g&&E!==x?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,h]),If(()=>{if(e){let p;const g=e.ownerDocument.defaultView??window,w=x=>{const b=Ch(r.current).includes(x.animationName);if(x.target===e&&b&&(h("ANIMATION_END"),!s.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",p=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},E=x=>{x.target===e&&(o.current=Ch(r.current))};return e.addEventListener("animationstart",E),e.addEventListener("animationcancel",w),e.addEventListener("animationend",w),()=>{g.clearTimeout(p),e.removeEventListener("animationstart",E),e.removeEventListener("animationcancel",w),e.removeEventListener("animationend",w)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:I.useCallback(p=>{p&&(r.current=getComputedStyle(p)),t(p)},[])}}function Ch(n){return(n==null?void 0:n.animationName)||"none"}function s5(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function i5({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,s]=o5({defaultProp:e,onChange:t}),o=n!==void 0,l=o?n:r,c=Qs(t),h=I.useCallback(p=>{if(o){const w=typeof p=="function"?p(n):p;w!==n&&c(w)}else s(p)},[o,n,s,c]);return[l,h]}function o5({defaultProp:n,onChange:e}){const t=I.useState(n),[r]=t,s=I.useRef(r),o=Qs(e);return I.useEffect(()=>{s.current!==r&&(o(r),s.current=r)},[r,s,o]),t}var a5="VisuallyHidden",k_=I.forwardRef((n,e)=>y.jsx(fs.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));k_.displayName=a5;var N_="ToastProvider",[D_,l5,u5]=WU("Toast"),[gA,L8]=lA("Toast",[u5]),[c5,gp]=gA(N_),yA=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:l}=n,[c,h]=I.useState(null),[p,g]=I.useState(0),w=I.useRef(!1),E=I.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${N_}\`. Expected non-empty \`string\`.`),y.jsx(D_.Provider,{scope:e,children:y.jsx(c5,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:p,viewport:c,onViewportChange:h,onToastAdd:I.useCallback(()=>g(x=>x+1),[]),onToastRemove:I.useCallback(()=>g(x=>x-1),[]),isFocusedToastEscapeKeyDownRef:w,isClosePausedRef:E,children:l})})};yA.displayName=N_;var vA="ToastViewport",d5=["F8"],Ny="toast.viewportPause",Dy="toast.viewportResume",_A=I.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=d5,label:s="Notifications ({hotkey})",...o}=n,l=gp(vA,t),c=l5(t),h=I.useRef(null),p=I.useRef(null),g=I.useRef(null),w=I.useRef(null),E=ra(e,w,l.onViewportChange),x=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),R=l.toastCount>0;I.useEffect(()=>{const S=L=>{var B;r.length!==0&&r.every(q=>L[q]||L.code===q)&&((B=w.current)==null||B.focus())};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[r]),I.useEffect(()=>{const S=h.current,L=w.current;if(R&&S&&L){const U=()=>{if(!l.isClosePausedRef.current){const Z=new CustomEvent(Ny);L.dispatchEvent(Z),l.isClosePausedRef.current=!0}},B=()=>{if(l.isClosePausedRef.current){const Z=new CustomEvent(Dy);L.dispatchEvent(Z),l.isClosePausedRef.current=!1}},q=Z=>{!S.contains(Z.relatedTarget)&&B()},X=()=>{S.contains(document.activeElement)||B()};return S.addEventListener("focusin",U),S.addEventListener("focusout",q),S.addEventListener("pointermove",U),S.addEventListener("pointerleave",X),window.addEventListener("blur",U),window.addEventListener("focus",B),()=>{S.removeEventListener("focusin",U),S.removeEventListener("focusout",q),S.removeEventListener("pointermove",U),S.removeEventListener("pointerleave",X),window.removeEventListener("blur",U),window.removeEventListener("focus",B)}}},[R,l.isClosePausedRef]);const b=I.useCallback(({tabbingDirection:S})=>{const U=c().map(B=>{const q=B.ref.current,X=[q,...C5(q)];return S==="forwards"?X:X.reverse()});return(S==="forwards"?U.reverse():U).flat()},[c]);return I.useEffect(()=>{const S=w.current;if(S){const L=U=>{var X,Z,N;const B=U.altKey||U.ctrlKey||U.metaKey;if(U.key==="Tab"&&!B){const P=document.activeElement,k=U.shiftKey;if(U.target===S&&k){(X=p.current)==null||X.focus();return}const V=b({tabbingDirection:k?"backwards":"forwards"}),D=V.findIndex(le=>le===P);Rg(V.slice(D+1))?U.preventDefault():k?(Z=p.current)==null||Z.focus():(N=g.current)==null||N.focus()}};return S.addEventListener("keydown",L),()=>S.removeEventListener("keydown",L)}},[c,b]),y.jsxs(e5,{ref:h,role:"region","aria-label":s.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:R?void 0:"none"},children:[R&&y.jsx(Oy,{ref:p,onFocusFromOutsideViewport:()=>{const S=b({tabbingDirection:"forwards"});Rg(S)}}),y.jsx(D_.Slot,{scope:t,children:y.jsx(fs.ol,{tabIndex:-1,...o,ref:E})}),R&&y.jsx(Oy,{ref:g,onFocusFromOutsideViewport:()=>{const S=b({tabbingDirection:"backwards"});Rg(S)}})]})});_A.displayName=vA;var wA="ToastFocusProxy",Oy=I.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,o=gp(wA,t);return y.jsx(k_,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:l=>{var p;const c=l.relatedTarget;!((p=o.viewport)!=null&&p.contains(c))&&r()}})});Oy.displayName=wA;var yp="Toast",h5="toast.swipeStart",f5="toast.swipeMove",p5="toast.swipeCancel",m5="toast.swipeEnd",EA=I.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:o,...l}=n,[c=!0,h]=i5({prop:r,defaultProp:s,onChange:o});return y.jsx(mA,{present:t||c,children:y.jsx(v5,{open:c,...l,ref:e,onClose:()=>h(!1),onPause:Qs(n.onPause),onResume:Qs(n.onResume),onSwipeStart:qn(n.onSwipeStart,p=>{p.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:qn(n.onSwipeMove,p=>{const{x:g,y:w}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","move"),p.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${g}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${w}px`)}),onSwipeCancel:qn(n.onSwipeCancel,p=>{p.currentTarget.setAttribute("data-swipe","cancel"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:qn(n.onSwipeEnd,p=>{const{x:g,y:w}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","end"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${g}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${w}px`),h(!1)})})})});EA.displayName=yp;var[g5,y5]=gA(yp,{onClose(){}}),v5=I.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:o,onClose:l,onEscapeKeyDown:c,onPause:h,onResume:p,onSwipeStart:g,onSwipeMove:w,onSwipeCancel:E,onSwipeEnd:x,...R}=n,b=gp(yp,t),[S,L]=I.useState(null),U=ra(e,le=>L(le)),B=I.useRef(null),q=I.useRef(null),X=s||b.duration,Z=I.useRef(0),N=I.useRef(X),P=I.useRef(0),{onToastAdd:k,onToastRemove:M}=b,j=Qs(()=>{var xe;(S==null?void 0:S.contains(document.activeElement))&&((xe=b.viewport)==null||xe.focus()),l()}),V=I.useCallback(le=>{!le||le===1/0||(window.clearTimeout(P.current),Z.current=new Date().getTime(),P.current=window.setTimeout(j,le))},[j]);I.useEffect(()=>{const le=b.viewport;if(le){const xe=()=>{V(N.current),p==null||p()},Re=()=>{const Te=new Date().getTime()-Z.current;N.current=N.current-Te,window.clearTimeout(P.current),h==null||h()};return le.addEventListener(Ny,Re),le.addEventListener(Dy,xe),()=>{le.removeEventListener(Ny,Re),le.removeEventListener(Dy,xe)}}},[b.viewport,X,h,p,V]),I.useEffect(()=>{o&&!b.isClosePausedRef.current&&V(X)},[o,X,b.isClosePausedRef,V]),I.useEffect(()=>(k(),()=>M()),[k,M]);const D=I.useMemo(()=>S?AA(S):null,[S]);return b.viewport?y.jsxs(y.Fragment,{children:[D&&y.jsx(_5,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:D}),y.jsx(g5,{scope:t,onClose:j,children:Wy.createPortal(y.jsx(D_.ItemSlot,{scope:t,children:y.jsx(ZU,{asChild:!0,onEscapeKeyDown:qn(c,()=>{b.isFocusedToastEscapeKeyDownRef.current||j(),b.isFocusedToastEscapeKeyDownRef.current=!1}),children:y.jsx(fs.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":b.swipeDirection,...R,ref:U,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:qn(n.onKeyDown,le=>{le.key==="Escape"&&(c==null||c(le.nativeEvent),le.nativeEvent.defaultPrevented||(b.isFocusedToastEscapeKeyDownRef.current=!0,j()))}),onPointerDown:qn(n.onPointerDown,le=>{le.button===0&&(B.current={x:le.clientX,y:le.clientY})}),onPointerMove:qn(n.onPointerMove,le=>{if(!B.current)return;const xe=le.clientX-B.current.x,Re=le.clientY-B.current.y,Te=!!q.current,se=["left","right"].includes(b.swipeDirection),ue=["left","up"].includes(b.swipeDirection)?Math.min:Math.max,ie=se?ue(0,xe):0,z=se?0:ue(0,Re),Y=le.pointerType==="touch"?10:2,pe={x:ie,y:z},Ie={originalEvent:le,delta:pe};Te?(q.current=pe,xh(f5,w,Ie,{discrete:!1})):rC(pe,b.swipeDirection,Y)?(q.current=pe,xh(h5,g,Ie,{discrete:!1}),le.target.setPointerCapture(le.pointerId)):(Math.abs(xe)>Y||Math.abs(Re)>Y)&&(B.current=null)}),onPointerUp:qn(n.onPointerUp,le=>{const xe=q.current,Re=le.target;if(Re.hasPointerCapture(le.pointerId)&&Re.releasePointerCapture(le.pointerId),q.current=null,B.current=null,xe){const Te=le.currentTarget,se={originalEvent:le,delta:xe};rC(xe,b.swipeDirection,b.swipeThreshold)?xh(m5,x,se,{discrete:!0}):xh(p5,E,se,{discrete:!0}),Te.addEventListener("click",ue=>ue.preventDefault(),{once:!0})}})})})}),b.viewport)})]}):null}),_5=n=>{const{__scopeToast:e,children:t,...r}=n,s=gp(yp,e),[o,l]=I.useState(!1),[c,h]=I.useState(!1);return T5(()=>l(!0)),I.useEffect(()=>{const p=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(p)},[]),c?null:y.jsx(pA,{asChild:!0,children:y.jsx(k_,{...r,children:o&&y.jsxs(y.Fragment,{children:[s.label," ",t]})})})},w5="ToastTitle",TA=I.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return y.jsx(fs.div,{...r,ref:e})});TA.displayName=w5;var E5="ToastDescription",IA=I.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return y.jsx(fs.div,{...r,ref:e})});IA.displayName=E5;var CA="ToastAction",xA=I.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?y.jsx(RA,{altText:t,asChild:!0,children:y.jsx(O_,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${CA}\`. Expected non-empty \`string\`.`),null)});xA.displayName=CA;var SA="ToastClose",O_=I.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=y5(SA,t);return y.jsx(RA,{asChild:!0,children:y.jsx(fs.button,{type:"button",...r,ref:e,onClick:qn(n.onClick,s.onClose)})})});O_.displayName=SA;var RA=I.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return y.jsx(fs.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function AA(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),I5(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const l=r.dataset.radixToastAnnounceAlt;l&&e.push(l)}else e.push(...AA(r))}}),e}function xh(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,o=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?uA(s,o):s.dispatchEvent(o)}var rC=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),o=r>s;return e==="left"||e==="right"?o&&r>t:!o&&s>t};function T5(n=()=>{}){const e=Qs(n);If(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function I5(n){return n.nodeType===n.ELEMENT_NODE}function C5(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Rg(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var x5=yA,PA=_A,bA=EA,kA=TA,NA=IA,DA=xA,OA=O_;const S5=x5,LA=I.forwardRef(({className:n,...e},t)=>y.jsx(PA,{ref:t,className:po("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));LA.displayName=PA.displayName;const R5=sA("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),MA=I.forwardRef(({className:n,variant:e,...t},r)=>y.jsx(bA,{ref:r,className:po(R5({variant:e}),n),...t}));MA.displayName=bA.displayName;const A5=I.forwardRef(({className:n,...e},t)=>y.jsx(DA,{ref:t,className:po("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));A5.displayName=DA.displayName;const jA=I.forwardRef(({className:n,...e},t)=>y.jsx(OA,{ref:t,className:po("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:y.jsx(NU,{className:"h-4 w-4"})}));jA.displayName=OA.displayName;const VA=I.forwardRef(({className:n,...e},t)=>y.jsx(kA,{ref:t,className:po("text-sm font-semibold [&+div]:text-xs",n),...e}));VA.displayName=kA.displayName;const FA=I.forwardRef(({className:n,...e},t)=>y.jsx(NA,{ref:t,className:po("text-sm opacity-90",n),...e}));FA.displayName=NA.displayName;function P5(){const{toasts:n}=oA();return y.jsxs(S5,{children:[n.map(function({id:e,title:t,description:r,action:s,...o}){return y.jsxs(MA,{...o,children:[y.jsxs("div",{className:"grid gap-1",children:[t&&y.jsx(VA,{children:t}),r&&y.jsx(FA,{children:r})]}),s,y.jsx(jA,{})]},e)}),y.jsx(LA,{})]})}const b5=({className:n,...e})=>{const{userLoggedIn:t}=gr()||{userLoggedIn:!1},r=mr(),[s,o]=I.useState(""),[l,c]=I.useState(""),[h,p]=I.useState(!1),{toast:g}=oA();I.useEffect(()=>{console.log("Auth state changed: userLoggedIn = ",t),t&&r("/")},[t,r]);const w=async()=>{p(!0);try{const x=await yF();r("/")}catch(x){console.error("Google sign-in error:",x),g({title:"There was a problem.",description:"THere was an error logging in with Google",variant:"destructive"})}finally{p(!1),console.log("Logged in: ",t)}},E=async(x,R)=>{p(!0);try{const b=await gF(x,R);r("/"),g({title:"Success!",description:"Logged in",variant:"default"})}catch(b){let S="Error logging in with email and password";console.log(b.code),b.code==="auth/invalid-credential"?S="Incorrect email or password. Please try again.":b.code==="auth/user-not-found"?S="No account found with this email.":b.code==="auth/invalid-email"?S="Invalid email format":b.code==="auth/too-many-requests"&&(S="Too many failed login attempts. Try again later."),g({title:"There was a problem.",description:S,variant:"destructive"})}finally{p(!1),console.log("Logged in: ",t)}};return y.jsxs(y.Fragment,{children:[y.jsx(P5,{}),y.jsx("div",{className:po("flex flex-col items-center space-y-4 justify-center",n),...e,children:y.jsxs("div",{className:"flex flex-col space-y-4",children:[y.jsx("input",{type:"email",value:s,onChange:x=>o(x.currentTarget.value),placeholder:"Email",className:"input"}),y.jsx("input",{type:"password",value:l,onChange:x=>c(x.target.value),placeholder:"Password",className:"input"}),y.jsx(Ef,{onClick:()=>E(s,l),isLoading:h,size:"sm",className:"w-full",children:"Login with Email"}),y.jsxs("p",{className:"flex items-center text-gray-500 text-sm",children:[y.jsx("span",{className:"flex-grow border-t border-gray-300"}),y.jsx("span",{className:"px-3",children:" Or Login with Google "}),y.jsx("span",{className:"flex-grow border-t border-gray-300"})]}),y.jsxs(Ef,{onClick:w,isLoading:h,size:"sm",className:"w-full",children:[h?null:y.jsx(b_.google,{className:"sh-4 w-4 mr-2"}),"Google"]})]})})]})},k5=()=>{const n=mr();return y.jsx("div",{className:"flex items-center justify-center h-screen w-full px-4",children:y.jsx("div",{className:"w-full max-w-sm space-y-6 text-center",children:y.jsxs("div",{className:"flex flex-col space-y-2 text-center",children:[y.jsx("div",{className:"w-full flex justify-center",children:y.jsx("button",{onClick:()=>n("/"),"aria-label":"Go to home",children:y.jsx(b_.logo,{className:"h-12 w-auto"})})}),y.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Welcome back"}),y.jsx(b5,{}),y.jsxs("p",{className:"px-8 text-center text-sm text-zinc-700",children:["New to Ureno?"," ",y.jsx(Tt,{to:"/sign-up",className:"hover:text-zinc-800 text-sm underline underline-offset-4",children:"Sign Up"})]}),y.jsxs("p",{className:"text-sm max-w-xs mx-auto text-gray-500",children:["By clicking create account, you agree to our ",y.jsx("a",{href:"",className:"underline",children:"Terms of Service"})," and ",y.jsx("a",{href:"",className:"underline",children:"Privacy Policy"})]})]})})})},N5=()=>{const n=mr();sF();const{userLoggedIn:e,loading:t}=gr(),[r,s]=I.useState(""),[o,l]=I.useState(""),[c,h]=I.useState(""),[p,g]=I.useState(!1),[w,E]=I.useState(!1),[x,R]=I.useState(""),[b,S]=I.useState(""),[L,U]=I.useState(""),[B,q]=I.useState(!1),[X,Z]=I.useState(""),N=async k=>{if(k.preventDefault(),!B){if(Z(""),q(!0),b!==L){Z("Passwords don't match"),q(!1);return}try{const j=(await mF(x,b)).user;await Bg(j,{displayName:`${r} ${o}`}),await m_(j.uid,r,o,x,c),n("/"),console.log(e)}catch{Z("There was a problem creating your account"),q(!1)}}},P=async()=>{E(!0);try{const k=await doSignInWithGoogle();n("/")}catch{toast({title:"THere was a problem.",description:"THere was an error logging in with Google",variant:"destructive"})}finally{E(!1),console.log("Logged in: ",e)}};return I.useEffect(()=>{p&&(n("/"),g(!1))},[p,n,g]),t?y.jsx("div",{children:"Loading..."}):y.jsxs(y.Fragment,{children:[e&&y.jsx(Pb,{to:"/",replace:!0}),y.jsx("main",{className:"w-full h-screen flex self-center place-content-center place-items-center",children:y.jsxs("div",{className:"w-96 text-gray-600 space-y-5 p-4",children:[y.jsx("div",{className:"text-center mb-6",children:y.jsxs("div",{className:"mt-2",children:[y.jsx("h3",{className:"text-gray-800 text-xl font-semibold sm:text-2xl",children:"Account Information"}),y.jsx("p",{children:"Enter your information to sign up"})]})}),y.jsxs("form",{onSubmit:N,className:"space-y-4",children:[X&&y.jsx("span",{className:"text-red-600 font-bold",children:X}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-600 font-bold"}),y.jsx("input",{type:"text",autoComplete:"given-name",placeholder:"First Name",required:!0,value:r,onChange:k=>{s(k.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:indigo-600 shadow-sm rounded-lg transition duration-300"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-600 font-bold"}),y.jsx("input",{type:"text",autoComplete:"family-name",placeholder:"Last Name",required:!0,value:o,onChange:k=>{l(k.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:indigo-600 shadow-sm rounded-lg transition duration-300"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-600 font-bold"}),y.jsx("input",{type:"tel",autoComplete:"mobile",placeholder:"Phone Number",required:!0,value:c,onChange:k=>{h(k.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:indigo-600 shadow-sm rounded-lg transition duration-300"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-600 font-bold"}),y.jsx("input",{type:"email",autoComplete:"email",placeholder:"Email",required:!0,value:x,onChange:k=>{R(k.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:indigo-600 shadow-sm rounded-lg transition duration-300"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-600 font-bold"}),y.jsx("input",{type:"password",autoComplete:"new-password",placeholder:"Password",required:!0,value:b,onChange:k=>{S(k.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:border-indigo-600 shadow-sm rounded-lg transition duration-300"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-600 font-bold"}),y.jsx("input",{disabled:B,type:"password",autoComplete:"off",placeholder:"Confirm Password",required:!0,value:L,onChange:k=>{U(k.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:border-black shadow-sm rounded-lg transition duration-300"})]}),X&&y.jsx("span",{className:"text-red-600 font-bold",children:X}),y.jsx("button",{type:"submit",disabled:B,className:`w-full px-4 py-2 text-white font-medium rounded-lg ${B?" bg-gray-300 cursor-not-allowed":"bg-black hover:bg-black hover:shadow-xl transition duration-300"}`,children:B?"Signing Up...":"Create Account"})]}),y.jsxs("p",{className:"flex items-center text-gray-500 text-sm",children:[y.jsx("span",{className:"flex-grow border-t border-gray-300"}),y.jsx("span",{className:"px-3",children:" Or Sign up with Google "}),y.jsx("span",{className:"flex-grow border-t border-gray-300"})]}),y.jsxs(Ef,{onClick:P,isLoading:w,size:"sm",className:"w-full",children:[w?null:y.jsx(b_.google,{className:"sh-4 w-4 mr-2"}),"Google"]}),y.jsxs("div",{className:"text-sm text-center",children:["Already have an account? ","    ",y.jsx(Tt,{to:"/sign-in",className:"text-center text-sm hover:underline font-bold",children:"Continue"})]}),y.jsxs("p",{className:"text-sm max-w-xs mx-auto",children:["By clicking create account, you agree to our ",y.jsx("a",{href:"",className:"underline",children:"Terms of Service"})," and ",y.jsx("a",{href:"",className:"underline",children:"Privacy Policy"})]})]})})]})},D5=()=>y.jsx("div",{className:"container mx-auto flex h-screen w-full flex-col justify-center space-y-6 sm:w-[400px]",children:y.jsx("div",{className:"flex flex-col space-y-2 text-center",children:y.jsx(N5,{})})}),We="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAOVBMVEXz9Pa5vsq2u8jN0dnV2N/o6u7w8fTi5OnFydO+ws3f4ee6v8vY2+H29/jy9Pbu7/LJztbCx9HR1ty/NMEIAAACq0lEQVR42u3cYXaqMBBA4cyEgEAi4P4X+34oLSra9IA9E979FtDj7SAJUOocAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAqrQ3Y311iH5fsaktBTYn3d/Y2JljlM/orAR2IsdOHNqPFbY2TqKdXj/Orl/C24/sLHwV0ygiIv2466n0+kNlNFHYiohotfNyWKmIyKm2U9jsffqyU+gopLDMwiGE+sCFjRdV1SkOxyw8X2Rer6cNe2e7hfVJv3ddGg9YeNHlxrIPhyvs9GHvXB+sMJ2eLoDSsQrDwwhF/cFm+HiQikxvP+Prk63RwhSfCtt3i6J/fbK1Wlj9qvCiIjEd9yg9e32zZFotHPLPNOd55VyfotnVYsq9XVZ7fbvxsbviZx6kZ7+Y9toU7e7a/P1x+mI5qP3doRyLuraYlokxY4LrUzRcOPj56knaxmVMcP1XYfkKODW+VVWZqiHlTXBtisbvYgwhhKF22RNcmWLBd6JWJ/g8xXIL64u+eg5zl1huodfXj5riAQrPF333NG0xxVILvb5/YBhLKxzC8+XSD4mpqMLQt2F59hj158e+saDCFFrRacj9Dj5MsYTC0IuIfk9xzAoU7QopTKG93dq/7d3yJiiiVSqjMPTzJ25Dcu6cOUERjUUUzhP8mmLuBIsp/Jrg9Soq+OzAMgqXE7wm/uKvhIoovJ/gLxVQ+DTBwxVummABhRsnWEDhxgmaL9w8QfOFmydovTDlb11KLawopJBCCimk8E8Kbd+nGcJ2Q9F39fNRSKH5wtSZeyvI7/sm8O053MnCCOc/C/7Iu2vexIuyn3z/sLEQ6Orp4O+QOtf0HwrsGyOFrhP9QJ+qmUDnwtju/jp+PwZT/1chdNW+YuMAAAAAAAAAAAAAAAAAAAAAAAAAAACA/9s/LTI30XlcBHoAAAAASUVORK5CYII=",UA=()=>{const{productId:n}=mb(),t=[{id:"HarvestGrove",productTitle:"Harvest Grove Rigid Luxury Vinyl",productCategory:"Floor and Decor",price:"$2.19/sqft",description:"Default",mainIm:{defaultImage:We},alternate1:{defaultImage:We},alternate2:{defaultImage:We}},{id:"tavertine",productTitle:"Inverness Tavertine Vinyl",productCategory:"Floor and Decor",price:"$2.19/sqft",description:"Default",mainIm:{defaultImage:We},alternate1:{defaultImage:We},alternate2:{defaultImage:We}},{id:"Champagne",productTitle:"Champagne Limestone Rigid Core Luxury Vinyl",productCategory:"Floor and Decor",price:"$2.19/sqft",description:"Default",mainIm:{defaultImage:We},alternate1:{defaultImage:We},alternate2:{defaultImage:We}},{id:"Luxury",productTitle:"Harvest Grove Rigid Luxury Vinyl",productCategory:"Floor and Decor",price:"$2.19/sqft",description:"Default",mainIm:{defaultImage:We},alternate1:{defaultImage:We},alternate2:{defaultImage:We}},{id:"Harvest",productTitle:"Inverness Tavertine Vinyl",productCategory:"Floor and Decor",price:"$2.19/sqft",description:"Default",mainIm:{defaultImage:We},alternate1:{defaultImage:We},alternate2:{defaultImage:We}},{id:"Champagne2",productTitle:"Champagne Limestone Rigid Core luxiry Vinyl",productCategory:"Floor and Decor",price:"$2.19/sqft",description:"Default",mainIm:{defaultImage:We},alternate1:{defaultImage:We},alternate2:{defaultImage:We}}].find(r=>r.id===n);return t?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"main-content",children:[y.jsxs("div",{id:"left",children:[y.jsx("div",{className:"main-image",children:y.jsx("img",{src:t.mainIm,alt:""})}),y.jsxs("div",{className:"thumbnails",children:[y.jsx("img",{src:t.mainIm,alt:""}),y.jsx("img",{src:t.alternate1,alt:""}),y.jsx("img",{src:t.alternate2,alt:""})]})]}),y.jsxs("div",{id:"right",children:[y.jsxs("div",{className:"title-section",children:[y.jsxs("div",{className:"title",children:[y.jsx("p",{id:"main",children:t.productTitle}),y.jsx("p",{id:"sub",children:t.productCategory})]}),y.jsxs("div",{className:"price-link",children:[y.jsx("div",{className:"title-left",children:y.jsx("p",{children:"$"})}),y.jsx("div",{className:"title-right",children:y.jsx("a",{href:"",children:"See in my room"})})]}),y.jsx("a",{href:"",children:"View specifications"})]}),y.jsxs("div",{className:"description",children:[y.jsx("p",{children:t.description}),y.jsxs("ul",{children:[y.jsx("li",{children:"Install up to 6,400 square feetNo need for transition molding."}),y.jsx("li",{children:"You can install it right awayPre-installation acclimation is unnecessary."}),y.jsx("li",{children:"Attached foam underlayment makes for a quieter, warmer floor."}),y.jsx("li",{children:"Can be installed on, above, and below grade-level (perfect for basements!) and over most existing hard-surface flooring, including slightly irregular subfloors."}),y.jsx("li",{children:"This DuraLux Performance product is backed by a lifetime res./ 15 yr comm. warranty."}),y.jsx("li",{children:"It is recommended to use Sentinel Protect Plus Underlayment for optimal sound absorption and moisture resistance or a standard vapor barrier like 6mil PE Film."})]}),y.jsx("a",{href:"",children:"Product Details"}),y.jsx("a",{href:"",children:"Reviews"})]})]})]}),y.jsxs("div",{className:"secondary-content",children:[y.jsx("div",{className:"suggestedProduct",children:y.jsxs("div",{className:"container",children:[y.jsx("img",{src:We,alt:"{title}"}),y.jsxs("div",{className:"prod-title",children:["{","title","}"]}),y.jsxs("p",{children:["{","description","}"]}),y.jsxs("p",{children:["{","price","}"]})]})}),y.jsx("div",{className:"suggestedProduct",children:y.jsxs("div",{className:"container",children:[y.jsx("img",{src:We,alt:"{title}"}),y.jsxs("div",{className:"prod-title",children:["{","title","}"]}),y.jsxs("p",{children:["{","description","}"]}),y.jsxs("p",{children:["{","price","}"]})]})}),y.jsx("div",{className:"suggestedProduct",children:y.jsxs("div",{className:"container",children:[y.jsx("img",{src:We,alt:"{title}"}),y.jsxs("div",{className:"prod-title",children:["{","title","}"]}),y.jsxs("p",{children:["{","description","}"]}),y.jsxs("p",{children:["{","price","}"]})]})})]})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"main-content",children:[y.jsxs("div",{id:"left",children:[y.jsx("div",{className:"main-image",children:y.jsx("img",{src:We,alt:""})}),y.jsxs("div",{className:"thumbnails",children:[y.jsx("img",{src:We,alt:""}),y.jsx("img",{src:We,alt:""}),y.jsx("img",{src:We,alt:""})]})]}),y.jsxs("div",{id:"right",children:[y.jsxs("div",{className:"title-section",children:[y.jsxs("div",{className:"title",children:[y.jsx("p",{id:"main",children:"Deafult Title"}),y.jsx("p",{id:"sub",children:"Default Category"})]}),y.jsxs("div",{className:"price-link",children:[y.jsx("div",{className:"title-left",children:y.jsx("p",{children:"$"})}),y.jsx("div",{className:"title-right",children:y.jsx("a",{href:"",children:"See in my room"})})]}),y.jsx("a",{href:"",children:"View specifications"})]}),y.jsxs("div",{className:"description",children:[y.jsx("p",{children:"Default Description"}),y.jsx("a",{href:"",children:"Product Details"}),y.jsx("a",{href:"",children:"Reviews"})]})]})]}),y.jsxs("div",{className:"secondary-content",children:[y.jsx("div",{className:"suggestedProduct",children:y.jsxs("div",{className:"container",children:[y.jsx("img",{src:We,alt:"{title}"}),y.jsxs("div",{className:"prod-title",children:["{","title","}"]}),y.jsxs("p",{children:["{","description","}"]}),y.jsxs("p",{children:["{","price","}"]})]})}),y.jsx("div",{className:"suggestedProduct",children:y.jsxs("div",{className:"container",children:[y.jsx("img",{src:We,alt:"{title}"}),y.jsxs("div",{className:"prod-title",children:["{","title","}"]}),y.jsxs("p",{children:["{","description","}"]}),y.jsxs("p",{children:["{","price","}"]})]})}),y.jsx("div",{className:"suggestedProduct",children:y.jsxs("div",{className:"container",children:[y.jsx("img",{src:We,alt:"{title}"}),y.jsxs("div",{className:"prod-title",children:["{","title","}"]}),y.jsxs("p",{children:["{","description","}"]}),y.jsxs("p",{children:["{","price","}"]})]})})]})]})};UA.defaultProps={productTitle:"Default title",productCategory:"Default category",price:"Price not available",description:"No description available",mainIm:{defaultImage:We},alternate1:{defaultImage:We},alternate2:{defaultImage:We},suggested1:{defaultImage:We},suggested2:{defaultImage:We},suggested3:{defaultImage:We}};function O5(){return y.jsx(y.Fragment,{children:y.jsxs("div",{className:"product-detail-page",children:[y.jsx("meta",{charSet:"UTF-8"}),y.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),y.jsx("title",{children:"product detail"}),y.jsx(mp,{}),y.jsx(UA,{}),y.jsx(qc,{})]})})}function L5(){return y.jsxs(y.Fragment,{children:[y.jsx("meta",{charSet:"UTF-8"}),y.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),y.jsx("title",{children:"Designer"}),y.jsx(mp,{}),y.jsx(qc,{})]})}const M5=()=>{const n=mr(),e=async()=>{await y_(),n("/")};return y.jsxs("div",{className:"nav flex justify-between items-center p-4 border-b",children:[y.jsx(Tt,{to:"/",className:"text-2xl font-bold",children:y.jsx("div",{className:"logo",children:"URENO"})}),y.jsxs("div",{className:"flex items-center gap-4 ml-auto",children:[y.jsxs(Tt,{to:"/settings",className:"flex items-center gap-2 text-gray-600 hover:text-black",children:[y.jsx(bU,{className:"w-5 h-5"})," Settings"]}),y.jsxs(Tt,{to:"/notifications",className:"flex items-center gap-2 text-gray-600 hover:text-black",children:[y.jsx(CU,{className:"w-5 h-5"})," Notifications"]}),y.jsxs(Tt,{to:"/logout",onClick:e,className:"flex items-center gap-2 text-red-500 hover:text-red-700",children:[y.jsx(AU,{className:"w-5 h-5"})," Log Out"]})]})]})},$A=n=>I.forwardRef((e,t)=>y.jsx("div",{...e,ref:t,className:Ke(e.className,n)})),L_=I.forwardRef(({className:n,bsPrefix:e,as:t="div",...r},s)=>(e=Ze(e,"card-body"),y.jsx(t,{ref:s,className:Ke(n,e),...r})));L_.displayName="CardBody";const BA=I.forwardRef(({className:n,bsPrefix:e,as:t="div",...r},s)=>(e=Ze(e,"card-footer"),y.jsx(t,{ref:s,className:Ke(n,e),...r})));BA.displayName="CardFooter";const zA=I.createContext(null);zA.displayName="CardHeaderContext";const WA=I.forwardRef(({bsPrefix:n,className:e,as:t="div",...r},s)=>{const o=Ze(n,"card-header"),l=I.useMemo(()=>({cardHeaderBsPrefix:o}),[o]);return y.jsx(zA.Provider,{value:l,children:y.jsx(t,{ref:s,...r,className:Ke(e,o)})})});WA.displayName="CardHeader";const HA=I.forwardRef(({bsPrefix:n,className:e,variant:t,as:r="img",...s},o)=>{const l=Ze(n,"card-img");return y.jsx(r,{ref:o,className:Ke(t?`${l}-${t}`:l,e),...s})});HA.displayName="CardImg";const qA=I.forwardRef(({className:n,bsPrefix:e,as:t="div",...r},s)=>(e=Ze(e,"card-img-overlay"),y.jsx(t,{ref:s,className:Ke(n,e),...r})));qA.displayName="CardImgOverlay";const GA=I.forwardRef(({className:n,bsPrefix:e,as:t="a",...r},s)=>(e=Ze(e,"card-link"),y.jsx(t,{ref:s,className:Ke(n,e),...r})));GA.displayName="CardLink";const j5=$A("h6"),KA=I.forwardRef(({className:n,bsPrefix:e,as:t=j5,...r},s)=>(e=Ze(e,"card-subtitle"),y.jsx(t,{ref:s,className:Ke(n,e),...r})));KA.displayName="CardSubtitle";const QA=I.forwardRef(({className:n,bsPrefix:e,as:t="p",...r},s)=>(e=Ze(e,"card-text"),y.jsx(t,{ref:s,className:Ke(n,e),...r})));QA.displayName="CardText";const V5=$A("h5"),YA=I.forwardRef(({className:n,bsPrefix:e,as:t=V5,...r},s)=>(e=Ze(e,"card-title"),y.jsx(t,{ref:s,className:Ke(n,e),...r})));YA.displayName="CardTitle";const XA=I.forwardRef(({bsPrefix:n,className:e,bg:t,text:r,border:s,body:o=!1,children:l,as:c="div",...h},p)=>{const g=Ze(n,"card");return y.jsx(c,{ref:p,...h,className:Ke(e,g,t&&`bg-${t}`,r&&`text-${r}`,s&&`border-${s}`),children:o?y.jsx(L_,{children:l}):l})});XA.displayName="Card";const Ag=Object.assign(XA,{Img:HA,Title:YA,Subtitle:KA,Body:L_,Link:GA,Text:QA,Header:WA,Footer:BA,ImgOverlay:qA});function F5(n,e){return I.Children.toArray(n).some(t=>I.isValidElement(t)&&t.type===e)}function U5({as:n,bsPrefix:e,className:t,...r}){e=Ze(e,"col");const s=I9(),o=C9(),l=[],c=[];return s.forEach(h=>{const p=r[h];delete r[h];let g,w,E;typeof p=="object"&&p!=null?{span:g,offset:w,order:E}=p:g=p;const x=h!==o?`-${h}`:"";g&&l.push(g===!0?`${e}${x}`:`${e}${x}-${g}`),E!=null&&c.push(`order${x}-${E}`),w!=null&&c.push(`offset${x}-${w}`)}),[{...r,className:Ke(t,...l,...c)},{as:n,bsPrefix:e,spans:l}]}const JA=I.forwardRef((n,e)=>{const[{className:t,...r},{as:s="div",bsPrefix:o,spans:l}]=U5(n);return y.jsx(s,{...r,ref:e,className:Ke(t,!l.length&&o)})});JA.displayName="Col";const $5={type:cl.string,tooltip:cl.bool,as:cl.elementType},vp=I.forwardRef(({as:n="div",className:e,type:t="valid",tooltip:r=!1,...s},o)=>y.jsx(n,{...s,ref:o,className:Ke(e,`${t}-${r?"tooltip":"feedback"}`)}));vp.displayName="Feedback";vp.propTypes=$5;const Ys=I.createContext({}),M_=I.forwardRef(({id:n,bsPrefix:e,className:t,type:r="checkbox",isValid:s=!1,isInvalid:o=!1,as:l="input",...c},h)=>{const{controlId:p}=I.useContext(Ys);return e=Ze(e,"form-check-input"),y.jsx(l,{...c,ref:h,type:r,id:n||p,className:Ke(t,e,s&&"is-valid",o&&"is-invalid")})});M_.displayName="FormCheckInput";const Cf=I.forwardRef(({bsPrefix:n,className:e,htmlFor:t,...r},s)=>{const{controlId:o}=I.useContext(Ys);return n=Ze(n,"form-check-label"),y.jsx("label",{...r,ref:s,htmlFor:t||o,className:Ke(e,n)})});Cf.displayName="FormCheckLabel";const ZA=I.forwardRef(({id:n,bsPrefix:e,bsSwitchPrefix:t,inline:r=!1,reverse:s=!1,disabled:o=!1,isValid:l=!1,isInvalid:c=!1,feedbackTooltip:h=!1,feedback:p,feedbackType:g,className:w,style:E,title:x="",type:R="checkbox",label:b,children:S,as:L="input",...U},B)=>{e=Ze(e,"form-check"),t=Ze(t,"form-switch");const{controlId:q}=I.useContext(Ys),X=I.useMemo(()=>({controlId:n||q}),[q,n]),Z=!S&&b!=null&&b!==!1||F5(S,Cf),N=y.jsx(M_,{...U,type:R==="switch"?"checkbox":R,ref:B,isValid:l,isInvalid:c,disabled:o,as:L});return y.jsx(Ys.Provider,{value:X,children:y.jsx("div",{style:E,className:Ke(w,Z&&e,r&&`${e}-inline`,s&&`${e}-reverse`,R==="switch"&&t),children:S||y.jsxs(y.Fragment,{children:[N,Z&&y.jsx(Cf,{title:x,children:b}),p&&y.jsx(vp,{type:g,tooltip:h,children:p})]})})})});ZA.displayName="FormCheck";const xf=Object.assign(ZA,{Input:M_,Label:Cf}),e2=I.forwardRef(({bsPrefix:n,type:e,size:t,htmlSize:r,id:s,className:o,isValid:l=!1,isInvalid:c=!1,plaintext:h,readOnly:p,as:g="input",...w},E)=>{const{controlId:x}=I.useContext(Ys);return n=Ze(n,"form-control"),y.jsx(g,{...w,type:e,size:r,ref:E,readOnly:p,id:s||x,className:Ke(o,h?`${n}-plaintext`:n,t&&`${n}-${t}`,e==="color"&&`${n}-color`,l&&"is-valid",c&&"is-invalid")})});e2.displayName="FormControl";const B5=Object.assign(e2,{Feedback:vp}),t2=I.forwardRef(({className:n,bsPrefix:e,as:t="div",...r},s)=>(e=Ze(e,"form-floating"),y.jsx(t,{ref:s,className:Ke(n,e),...r})));t2.displayName="FormFloating";const j_=I.forwardRef(({controlId:n,as:e="div",...t},r)=>{const s=I.useMemo(()=>({controlId:n}),[n]);return y.jsx(Ys.Provider,{value:s,children:y.jsx(e,{...t,ref:r})})});j_.displayName="FormGroup";const n2=I.forwardRef(({as:n="label",bsPrefix:e,column:t=!1,visuallyHidden:r=!1,className:s,htmlFor:o,...l},c)=>{const{controlId:h}=I.useContext(Ys);e=Ze(e,"form-label");let p="col-form-label";typeof t=="string"&&(p=`${p} ${p}-${t}`);const g=Ke(s,e,r&&"visually-hidden",t&&p);return o=o||h,t?y.jsx(JA,{ref:c,as:"label",className:g,htmlFor:o,...l}):y.jsx(n,{ref:c,className:g,htmlFor:o,...l})});n2.displayName="FormLabel";const r2=I.forwardRef(({bsPrefix:n,className:e,id:t,...r},s)=>{const{controlId:o}=I.useContext(Ys);return n=Ze(n,"form-range"),y.jsx("input",{...r,type:"range",ref:s,className:Ke(e,n),id:t||o})});r2.displayName="FormRange";const s2=I.forwardRef(({bsPrefix:n,size:e,htmlSize:t,className:r,isValid:s=!1,isInvalid:o=!1,id:l,...c},h)=>{const{controlId:p}=I.useContext(Ys);return n=Ze(n,"form-select"),y.jsx("select",{...c,size:t,ref:h,className:Ke(r,n,e&&`${n}-${e}`,s&&"is-valid",o&&"is-invalid"),id:l||p})});s2.displayName="FormSelect";const i2=I.forwardRef(({bsPrefix:n,className:e,as:t="small",muted:r,...s},o)=>(n=Ze(n,"form-text"),y.jsx(t,{...s,ref:o,className:Ke(e,n,r&&"text-muted")})));i2.displayName="FormText";const o2=I.forwardRef((n,e)=>y.jsx(xf,{...n,ref:e,type:"switch"}));o2.displayName="Switch";const z5=Object.assign(o2,{Input:xf.Input,Label:xf.Label}),a2=I.forwardRef(({bsPrefix:n,className:e,children:t,controlId:r,label:s,...o},l)=>(n=Ze(n,"form-floating"),y.jsxs(j_,{ref:l,className:Ke(e,n),controlId:r,...o,children:[t,y.jsx("label",{htmlFor:r,children:s})]})));a2.displayName="FloatingLabel";const W5={_ref:cl.any,validated:cl.bool,as:cl.elementType},V_=I.forwardRef(({className:n,validated:e,as:t="form",...r},s)=>y.jsx(t,{...r,ref:s,className:Ke(n,e&&"was-validated")}));V_.displayName="Form";V_.propTypes=W5;const Hn=Object.assign(V_,{Group:j_,Control:B5,Floating:t2,Check:xf,Switch:z5,Label:n2,Text:i2,Range:r2,Select:s2,FloatingLabel:a2}),H5="/Ureno_webdesign/assets/default_pfp-bcxf0fN1.png";function q5(){const{user:n,profile:e,loading:t}=f1();hp();const[r,s]=I.useState([]),[o,l]=I.useState(!0),[c,h]=I.useState([]),[p,g]=I.useState(!0);return I.useEffect(()=>{const w=async()=>{if(!n)return;const x=Fr(Gs,"users",n.uid,"projects"),R=wl(x);try{const S=(await El(R)).docs.map(L=>({id:L.id,...L.data()}));s(S)}catch(b){console.error("Error fetching projects: ",b)}finally{l(!1)}},E=async()=>{if(!n)return;const x=Fr(Gs,"savedMaterials"),R=wl(x,rp("userId","==",n.uid));try{const S=(await El(R)).docs.map(L=>({id:L.id,...L.data()}));h(S)}catch{console.error("Error fetching saved materials:",errors)}finally{g(!1)}};w(),E()},[n]),t?y.jsx("p",{children:"Loading..."}):!n||!e?y.jsx("p",{children:"User not found nor not logged in."}):y.jsxs(y.Fragment,{children:[y.jsx("meta",{charSet:"UTF-8"}),y.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),y.jsx("title",{children:"Profile"}),y.jsx(M5,{}),y.jsx("div",{className:"main-content max-w-6xl mx-auto p-6",children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-24 ",children:[y.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsx(Ag,{children:y.jsxs("div",{className:"p-4",children:[y.jsx("h3",{className:"text-lg font-semibold",children:"Projects"}),o?y.jsx("p",{className:"text-gray-500",children:"Loading project stats..."}):y.jsxs("p",{className:"text-gray-500",children:[r.filter(w=>w.status==="in progress").length," Ongoing, "," ",r.filter(w=>w.status==="completed").length," Completed"]}),y.jsx(Tt,{to:"/projects",children:y.jsx(Vi,{variant:"link",className:"mt-2",children:"View projects"})})]})}),y.jsx(Ag,{children:y.jsxs("div",{className:"p-4",children:[y.jsx("h3",{className:"text-lg font-semibold",children:"Saved Items"}),p?y.jsx("p",{className:"text-gray-500",children:"Loading saved materials..."}):y.jsxs("p",{className:"text-gray-500",children:[c.length," Materials Favorited"]}),y.jsx(Tt,{to:"/savedItems",children:y.jsx(Vi,{variant:"link",className:"mt-2",children:"View Favorites"})})]})}),y.jsx(Ag,{children:y.jsxs("div",{className:"p-4",children:[y.jsx("h3",{className:"text-lg font-semibold",children:"Messages & Notifications"}),y.jsx("p",{className:"text-gray-500",children:"2 Unread Messages"}),y.jsx(Vi,{variant:"link",className:"mt-2",children:"Go to Messages"})]})})]}),y.jsxs("div",{className:"flex flex-col items-center md:col-span-1 text-center ",children:[y.jsx("h2",{className:"text-2xl font-bold mt-4",children:e.username||n.displayName}),y.jsx("img",{src:H5}),y.jsx("p",{className:"text-gray-500",children:n.email}),y.jsx(Tt,{to:"/edit-profile",children:y.jsx(Vi,{className:"mt-2",children:"Edit Profile"})})]})]})}),y.jsx(qc,{})]})}const G5=()=>{const[n,e]=I.useState([]),t=mr();I.useEffect(()=>{(async()=>{const o=no();await El(Fr(o,"products"));const l=snapshotEqual.docs.map(c=>({id:c.id,...c.data()}));e(l)})()},[]);const r=async s=>{const o=no();await _j(to(o,"products",s)),e(n.filter(l=>l.id!==s))};return y.jsxs("div",{className:"admin-dashboard",children:[y.jsx("h1",{children:"Product Admin Dashboard"}),y.jsx("button",{onClick:()=>t("/admin/add"),children:"Add New Product"}),y.jsx("ul",{children:n.map(s=>y.jsxs("li",{style:{marginBottom:"1rem"},children:[y.jsx("strong",{children:s.title})," - ",s.price,y.jsx("br",{}),y.jsx("button",{onClick:()=>t(`/admin/edit/${s.id}`),children:"Edit"}),y.jsx("button",{onClick:()=>r(s.id),children:"Delete"})]},s.id))})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="firebasestorage.googleapis.com",u2="storageBucket",K5=2*60*1e3,Q5=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct extends ds{constructor(e,t,r=0){super(Pg(e),`Firebase Storage: ${t} (${Pg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ct.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Pg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var It;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(It||(It={}));function Pg(n){return"storage/"+n}function F_(){const n="An unknown error occurred, please check the error payload for server response.";return new Ct(It.UNKNOWN,n)}function Y5(n){return new Ct(It.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function X5(n){return new Ct(It.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function J5(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ct(It.UNAUTHENTICATED,n)}function Z5(){return new Ct(It.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function e$(n){return new Ct(It.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function t$(){return new Ct(It.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function n$(){return new Ct(It.CANCELED,"User canceled the upload/download.")}function r$(n){return new Ct(It.INVALID_URL,"Invalid URL '"+n+"'.")}function s$(n){return new Ct(It.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function i$(){return new Ct(It.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+u2+"' property when initializing the app?")}function o$(){return new Ct(It.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function a$(){return new Ct(It.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function l$(n){return new Ct(It.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ly(n){return new Ct(It.INVALID_ARGUMENT,n)}function c2(){return new Ct(It.APP_DELETED,"The Firebase app was deleted.")}function u$(n){return new Ct(It.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function cc(n,e){return new Ct(It.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function zu(n){throw new Ct(It.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Kn.makeFromUrl(e,t)}catch{return new Kn(e,"")}if(r.path==="")return r;throw s$(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+s+l,"i"),h={bucket:1,path:3};function p(q){q.path_=decodeURIComponent(q.path)}const g="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",x=new RegExp(`^https?://${w}/${g}/b/${s}/o${E}`,"i"),R={bucket:1,path:3},b=t===l2?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",L=new RegExp(`^https?://${b}/${s}/${S}`,"i"),B=[{regex:c,indices:h,postModify:o},{regex:x,indices:R,postModify:p},{regex:L,indices:{bucket:1,path:2},postModify:p}];for(let q=0;q<B.length;q++){const X=B[q],Z=X.regex.exec(e);if(Z){const N=Z[X.indices.bucket];let P=Z[X.indices.path];P||(P=""),r=new Kn(N,P),X.postModify(r);break}}if(r==null)throw r$(e);return r}}class c${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d$(n,e,t){let r=1,s=null,o=null,l=!1,c=0;function h(){return c===2}let p=!1;function g(...S){p||(p=!0,e.apply(null,S))}function w(S){s=setTimeout(()=>{s=null,n(x,h())},S)}function E(){o&&clearTimeout(o)}function x(S,...L){if(p){E();return}if(S){E(),g.call(null,S,...L);return}if(h()||l){E(),g.call(null,S,...L);return}r<64&&(r*=2);let B;c===1?(c=2,B=0):B=(r+Math.random())*1e3,w(B)}let R=!1;function b(S){R||(R=!0,E(),!p&&(s!==null?(S||(c=2),clearTimeout(s),w(0)):S||(c=1)))}return w(0),o=setTimeout(()=>{l=!0,b(!0)},t),b}function h$(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f$(n){return n!==void 0}function p$(n){return typeof n=="object"&&!Array.isArray(n)}function U_(n){return typeof n=="string"||n instanceof String}function sC(n){return $_()&&n instanceof Blob}function $_(){return typeof Blob<"u"}function iC(n,e,t,r){if(r<e)throw Ly(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Ly(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function d2(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Ko;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ko||(Ko={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m$(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${constructor(e,t,r,s,o,l,c,h,p,g,w,E=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=h,this.timeout_=p,this.progressCallback_=g,this.connectionFactory_=w,this.retry=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,R)=>{this.resolve_=x,this.reject_=R,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Sh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const h=c.loaded,p=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,p)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===Ko.NO_ERROR,h=o.getStatus();if(!c||m$(h,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===Ko.ABORT;r(!1,new Sh(!1,null,g));return}const p=this.successCodes_.indexOf(h)!==-1;r(!0,new Sh(p,o))})},t=(r,s)=>{const o=this.resolve_,l=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(c,c.getResponse());f$(h)?o(h):o()}catch(h){l(h)}else if(c!==null){const h=F_();h.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,h)):l(h)}else if(s.canceled){const h=this.appDelete_?c2():n$();l(h)}else{const h=t$();l(h)}};this.canceled_?t(!1,new Sh(!1,null,!0)):this.backoffId_=d$(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&h$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Sh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function y$(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function v$(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _$(n,e){e&&(n["X-Firebase-GMPID"]=e)}function w$(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function E$(n,e,t,r,s,o,l=!0){const c=d2(n.urlParams),h=n.url+c,p=Object.assign({},n.headers);return _$(p,e),y$(p,t),v$(p,o),w$(p,r),new g$(h,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T$(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function I$(...n){const e=T$();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if($_())return new Blob(n);throw new Ct(It.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function C$(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x$(n){if(typeof atob>"u")throw l$("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bg{constructor(e,t){this.data=e,this.contentType=t||null}}function S$(n,e){switch(n){case rs.RAW:return new bg(h2(e));case rs.BASE64:case rs.BASE64URL:return new bg(f2(n,e));case rs.DATA_URL:return new bg(A$(e),P$(e))}throw F_()}function h2(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=n.charCodeAt(++t);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function R$(n){let e;try{e=decodeURIComponent(n)}catch{throw cc(rs.DATA_URL,"Malformed data URL.")}return h2(e)}function f2(n,e){switch(n){case rs.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw cc(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case rs.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw cc(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=x$(e)}catch(s){throw s.message.includes("polyfill")?s:cc(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class p2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw cc(rs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=b$(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function A$(n){const e=new p2(n);return e.base64?f2(rs.BASE64,e.rest):R$(e.rest)}function P$(n){return new p2(n).contentType}function b$(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,t){let r=0,s="";sC(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(sC(this.data_)){const r=this.data_,s=C$(r,e,t);return s===null?null:new Mi(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Mi(r,!0)}}static getBlob(...e){if($_()){const t=e.map(r=>r instanceof Mi?r.data_:r);return new Mi(I$.apply(null,t))}else{const t=e.map(l=>U_(l)?S$(rs.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let c=0;c<l.length;c++)s[o++]=l[c]}),new Mi(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(n){let e;try{e=JSON.parse(n)}catch{return null}return p$(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k$(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function N$(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function g2(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D$(n,e){return e}class wn{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||D$}}let Rh=null;function O$(n){return!U_(n)||n.length<2?n:g2(n)}function y2(){if(Rh)return Rh;const n=[];n.push(new wn("bucket")),n.push(new wn("generation")),n.push(new wn("metageneration")),n.push(new wn("name","fullPath",!0));function e(o,l){return O$(l)}const t=new wn("name");t.xform=e,n.push(t);function r(o,l){return l!==void 0?Number(l):l}const s=new wn("size");return s.xform=r,n.push(s),n.push(new wn("timeCreated")),n.push(new wn("updated")),n.push(new wn("md5Hash",null,!0)),n.push(new wn("cacheControl",null,!0)),n.push(new wn("contentDisposition",null,!0)),n.push(new wn("contentEncoding",null,!0)),n.push(new wn("contentLanguage",null,!0)),n.push(new wn("contentType",null,!0)),n.push(new wn("metadata","customMetadata",!0)),Rh=n,Rh}function L$(n,e){function t(){const r=n.bucket,s=n.fullPath,o=new Kn(r,s);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function M$(n,e,t){const r={};r.type="file";const s=t.length;for(let o=0;o<s;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return L$(r,n),r}function v2(n,e,t){const r=m2(e);return r===null?null:M$(n,r,t)}function j$(n,e,t,r){const s=m2(e);if(s===null||!U_(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(p=>{const g=n.bucket,w=n.fullPath,E="/b/"+l(g)+"/o/"+l(w),x=B_(E,t,r),R=d2({alt:"media",token:p});return x+R})[0]}function V$(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class _2{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(n){if(!n)throw F_()}function F$(n,e){function t(r,s){const o=v2(n,s,e);return w2(o!==null),o}return t}function U$(n,e){function t(r,s){const o=v2(n,s,e);return w2(o!==null),j$(o,s,n.host,n._protocol)}return t}function E2(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=Z5():s=J5():t.getStatus()===402?s=X5(n.bucket):t.getStatus()===403?s=e$(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function $$(n){const e=E2(n);function t(r,s){let o=e(r,s);return r.getStatus()===404&&(o=Y5(n.path)),o.serverResponse=s.serverResponse,o}return t}function B$(n,e,t){const r=e.fullServerUrl(),s=B_(r,n.host,n._protocol),o="GET",l=n.maxOperationRetryTime,c=new _2(s,o,U$(n,t),l);return c.errorHandler=$$(e),c}function z$(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function W$(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=z$(null,e)),r}function H$(n,e,t,r,s){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let B="";for(let q=0;q<2;q++)B=B+Math.random().toString().slice(2);return B}const h=c();l["Content-Type"]="multipart/related; boundary="+h;const p=W$(e,r,s),g=V$(p,t),w="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+h+`\r
Content-Type: `+p.contentType+`\r
\r
`,E=`\r
--`+h+"--",x=Mi.getBlob(w,r,E);if(x===null)throw o$();const R={name:p.fullPath},b=B_(o,n.host,n._protocol),S="POST",L=n.maxUploadRetryTime,U=new _2(b,S,F$(n,t),L);return U.urlParams=R,U.headers=l,U.body=x.uploadData(),U.errorHandler=E2(e),U}class q${constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ko.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ko.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ko.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw zu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw zu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class G$ extends q${initXhr(){this.xhr_.responseType="text"}}function T2(){return new G$}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,t){this._service=e,t instanceof Kn?this._location=t:this._location=Kn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new sa(e,t)}get root(){const e=new Kn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return g2(this._location.path)}get storage(){return this._service}get parent(){const e=k$(this._location.path);if(e===null)return null;const t=new Kn(this._location.bucket,e);return new sa(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw u$(e)}}function K$(n,e,t){n._throwIfRoot("uploadBytes");const r=H$(n.storage,n._location,y2(),new Mi(e,!0),t);return n.storage.makeRequestWithTokens(r,T2).then(s=>({metadata:s,ref:n}))}function Q$(n){n._throwIfRoot("getDownloadURL");const e=B$(n.storage,n._location,y2());return n.storage.makeRequestWithTokens(e,T2).then(t=>{if(t===null)throw a$();return t})}function Y$(n,e){const t=N$(n._location.path,e),r=new Kn(n._location.bucket,t);return new sa(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X$(n){return/^[A-Za-z]+:\/\//.test(n)}function J$(n,e){return new sa(n,e)}function I2(n,e){if(n instanceof z_){const t=n;if(t._bucket==null)throw i$();const r=new sa(t,t._bucket);return e!=null?I2(r,e):r}else return e!==void 0?Y$(n,e):n}function Z$(n,e){if(e&&X$(e)){if(n instanceof z_)return J$(n,e);throw Ly("To use ref(service, url), the first argument must be a Storage instance.")}else return I2(n,e)}function oC(n,e){const t=e==null?void 0:e[u2];return t==null?null:Kn.makeFromBucketSpec(t,n)}function e8(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:Ky(s,n.app.options.projectId))}class z_{constructor(e,t,r,s,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._bucket=null,this._host=l2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=K5,this._maxUploadRetryTime=Q5,this._requests=new Set,s!=null?this._bucket=Kn.makeFromBucketSpec(s,this._host):this._bucket=oC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Kn.makeFromBucketSpec(this._url,e):this._bucket=oC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new sa(this,e)}_makeRequest(e,t,r,s,o=!0){if(this._deleted)return new c$(c2());{const l=E$(e,this._appId,r,s,t,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const aC="@firebase/storage",lC="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2="storage";function x2(n,e,t){return n=ot(n),K$(n,e,t)}function S2(n){return n=ot(n),Q$(n)}function R2(n,e){return n=ot(n),Z$(n,e)}function A2(n=kf(),e){n=ot(n);const r=kc(n,C2).getImmediate({identifier:e}),s=qy("storage");return s&&t8(r,...s),r}function t8(n,e,t,r={}){e8(n,e,t,r)}function n8(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new z_(t,r,s,e,oo)}function r8(){Gi(new Us(C2,n8,"PUBLIC").setMultipleInstances(!0)),ur(aC,lC,""),ur(aC,lC,"esm2017")}r8();const s8=()=>{const[n,e]=I.useState(""),[t,r]=I.useState(""),[s,o]=I.useState(""),[l,c]=I.useState(""),[h,p]=I.useState(null),g=mr(),w=async E=>{E.preventDefault();try{const x=A2(),R=R2(x,`products/${h.name}`);await x2(R,h);const b=await S2(R),S=no();await qv(Fr(S,"products"),{title:n,description:t,price:s,link:l,image:b}),g("/admin")}catch(x){console.error("Error uploading product:",x)}};return y.jsxs("div",{className:"product-form",children:[y.jsx("h2",{children:"Add New Product"}),y.jsxs("form",{onSubmit:w,children:[y.jsx("input",{type:"text",placeholder:"Title",value:n,onChange:E=>e(E.target.value),required:!0}),y.jsx("textarea",{placeholder:"Description",value:t,onChange:E=>r(E.target.value),required:!0}),y.jsx("input",{type:"text",placeholder:"Link",value:l,onChange:E=>o(E.target.value),required:!0}),y.jsx("input",{type:"file",accept:"image/*",onChange:E=>p(E.target.files[0]),required:!0}),y.jsx("button",{type:"submit",children:"Save Product"})]})]})};function i8(){const{user:n,profile:e}=f1(),t=mr(),[r,s]=I.useState({displayName:"",email:"",phone:"",profilePicture:null});if(I.useEffect(()=>{e&&s({displayName:n.displayName||"",email:n.email||"",phone:e.phone||"",profilePicture:null})},[e,n]),!n||!e)return y.jsx("p",{children:"Loading profile data..."});const o=async l=>{l.preventDefault();const c=Lf(),h=no(),p=A2(),g=c.currentUser;if(!g)return;const w={};try{if(r.displayName&&r.displayName!==g.displayName&&(await Bg(g,{displayName:r.displayName}),w.displayName=r.displayName),r.email&&r.email!==g.email&&(await KD(g,r.email),w.email=r.email),r.phone&&(w.phone=r.phone),r.profilePicture){const E=R2(p,`profilePictures/${g.uid}`);await x2(E,r.profilePicture);const x=await S2(E);await Bg(g,{photoURL:x}),w.photoURL=x}if(Object.keys(w).length>0){const E=to(h,"users",g.uid);await XS(E,w)}alert("profile updated succesfully"),t("/ProfileDashboard")}catch(E){console.error("Error updating profile:",E),alert("Failed to update profile. Check the console for details.")}};return y.jsx(y.Fragment,{children:y.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[y.jsx("h2",{className:"text-2xl font-bold mb-4",children:" Edit Profile"}),y.jsxs(Hn,{children:[y.jsxs(Hn.Group,{controlId:"displayName",className:"mb-3",children:[y.jsx(Hn.Label,{children:"Display Name"}),y.jsx(Hn.Control,{type:"text",value:r.displayName,onChange:l=>s({...r,displayName:l.target.value})})]}),y.jsxs(Hn.Group,{controlId:"email",className:"mb-3",children:[y.jsx(Hn.Label,{children:"email"}),y.jsx(Hn.Control,{type:"email",value:r.email,onChange:l=>s({...r,email:l.target.value})})]}),y.jsxs(Hn.Group,{controlId:"phone",className:"mb-3",children:[y.jsx(Hn.Label,{children:"Phone Number"}),y.jsx(Hn.Control,{type:"text",value:r.phone,onChange:l=>s({...r,phone:l.target.value})})]}),y.jsxs(Hn.Group,{controlId:"profilePicture",className:"mb-3",children:[y.jsx(Hn.Label,{children:"Profile Picture"}),y.jsx(Hn.Control,{type:"file",onChange:l=>s({...r,profilePicture:l.target.files[0]})})]}),y.jsxs("div",{className:"flex gap-4",children:[y.jsx(Vi,{variant:"primary",onClick:o,type:"submit",children:"Save Changes"}),y.jsx(Vi,{variant:"secondary",onClick:()=>t("/ProfileDashboard"),children:"Cancel"})]})]})]})})}function o8(){const{currentUser:n}=gr(),[e,t]=I.useState([]),[r,s]=I.useState(!0);return I.useEffect(()=>{(async()=>{if(!n)return;const l=Fr(Gs,"users",n.uid,"projects"),c=wl(l,rp("ownerId","==",n.uid)),p=(await El(c)).docs.map(g=>({id:g.id,...g.data()}));t(p),s(!1)})()},[n]),r?y.jsx("div",{children:"Loading..."}):y.jsx(y.Fragment,{children:y.jsxs("div",{className:"p-4  relative",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(Tt,{to:"/ProfileDashboard",className:"text-blue-500 text-3xl font-bold hover:scale-110 hover:text-blue-700 transition-all duration-200 flex items-center justify-center",children:"<"}),y.jsx("h1",{className:"text-2xl font-bold",children:"My Projects"})]}),y.jsx(Tt,{to:"/projects/new",children:y.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Create New Project"})})]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(o=>y.jsxs("div",{className:"p-4 border rounded shadow",children:[y.jsx("h2",{className:"text-xl font-semibold",children:o.title}),y.jsx("p",{className:"text-gray-600",children:o.description})]},o.id))})]})})}function a8(){const{currentUser:n}=gr(),e=mr(),[t,r]=I.useState(""),[s,o]=I.useState(""),[l,c]=I.useState(""),[h,p]=I.useState(""),[g,w]=I.useState(""),[E,x]=I.useState(!1),[R,b]=I.useState(!1),S=async L=>{if(L.preventDefault(),!!n){x(!0);try{const U=Fr(Gs,"users",n.uid,"projects");await qv(U,{ownerId:n.uid,title:t,description:s,flooringType:l,roomDimensions:{length:Number(h),width:Number(g)},createdAt:tc(),updatedAt:tc(),status:"in progress"}),b(!0),setTimeout(()=>{b(!1),e("/projects")},1500),e("/projects")}catch(U){console.error("Error creating project: ",U)}finally{x(!1)}}};return y.jsxs("div",{className:"p-4 max-w-2xl mx-auto mt-20 relative",children:[y.jsx("div",{className:"fixed top-0 left-0 w-full bg-white  p-4 flex items-center",children:y.jsx(Tt,{to:"/projects",children:y.jsx("div",{className:"logo",children:" return "})})}),y.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Create New Project"}),R&&y.jsx("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow",children:"Project created successfully!"}),y.jsxs("form",{onSubmit:S,className:"space-y-4",children:[y.jsx("input",{type:"text",placeholder:"Project Title",value:t,onChange:L=>r(L.target.value),required:!0,className:"w-full border p-2 rounded"}),y.jsx("textarea",{placeholder:"Project Description",value:s,onChange:L=>o(L.target.value),required:!0,className:"w-full border p-2 rounded"}),y.jsx("input",{type:"text",placeholder:"Flooring Type",value:l,onChange:L=>c(L.target.value),className:"w-full border p-2 rounded"}),y.jsxs("div",{className:"flex gap-4",children:[y.jsx("input",{type:"number",placeholder:"Length (ft)",value:h,onChange:L=>p(L.target.value),className:"w-full border p-2 rounded"}),y.jsx("input",{type:"number",placeholder:"Width (ft)",value:g,onChange:L=>w(L.target.value),className:"w-full border p-2 rounded"})]}),y.jsx("button",{type:"submit",disabled:E,className:"px-4 py-2 bg-blue-500 text-white rounded",children:E?"Creating...":"Create Project"})]})]})}function l8(){const{currentUser:n}=gr(),[e,t]=I.useState([]),[r,s]=I.useState(!0);return I.useEffect(()=>{(async()=>{if(!n)return;const l=Fr(Gs,"savedMaterials"),c=wl(l,rp("userId","==",n.uid));try{const p=(await El(c)).docs.map(g=>({id:g.id,...g.data()}));t(p)}catch(h){console.error("Error fetching saved materials:",h)}finally{s(!1)}})()},[n]),r?y.jsx("div",{children:"Loading saved materials..."}):y.jsxs("div",{className:"p-4 max-w-6xl mx-auto",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(Tt,{to:"/ProfileDashboard",className:"text-blue-500 text-3xl font-bold hover:scale-110 hover:text-blue-700 transition-all duration-200 flex items-center justify-center",children:"<"}),y.jsx("h1",{className:"text-2xl font-bold",children:"Saved Items"})]}),e.length===0?y.jsx("p",{className:"text-gray-500",children:"You don't have any saved materials yet."}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(o=>y.jsxs("div",{className:"border p-4 rounded shadow",children:[o.materialImageURL&&y.jsx("img",{src:o.materialImageURL,alt:o.materialName,className:"w-full h-32 object-cover rounded mb-2"}),y.jsx("h2",{className:"text-xl font-semibold",children:o.materialName}),y.jsx("p",{className:"text-gray-600",children:o.materialType})]},o.id))})]})}const u8="_loginWrapper_1063v_3",c8="_container_1063v_11",d8="_form_1063v_32",h8="_formBox_1063v_34",f8="_active_1063v_49",p8="_register_1063v_51",m8="_inputBox_1063v_54",g8="_forgotLink_1063v_84",y8="_btn_1063v_90",v8="_socialIcons_1063v_103",_8="_toggleBox_1063v_118",w8="_togglePanel_1063v_138",E8="_toggleLeft_1063v_152",T8="_toggleRight_1063v_161",tt={loginWrapper:u8,container:c8,form:d8,formBox:h8,active:f8,register:p8,inputBox:m8,forgotLink:g8,btn:y8,socialIcons:v8,toggleBox:_8,togglePanel:w8,toggleLeft:E8,toggleRight:T8},I8=()=>{const[n,e]=I.useState(!1),t=()=>{e(!0)},r=()=>{e(!1)};return y.jsx("div",{className:tt.loginWrapper,children:y.jsxs("div",{className:`${tt.container} ${n?tt.active:""}`,children:[y.jsx("div",{className:`${tt.formBox} ${tt.login}`,children:y.jsxs("form",{className:tt.form,action:"#",children:[y.jsx("h1",{children:"Login"}),y.jsxs("div",{className:tt.inputBox,children:[y.jsx("input",{type:"text",placeholder:"Email",required:!0}),y.jsx("i",{className:"bx bxs-user"})]}),y.jsxs("div",{className:tt.inputBox,children:[y.jsx("input",{type:"password",placeholder:"Password",required:!0}),y.jsx("i",{className:"bx bxs-lock-alt"})]}),y.jsx("div",{className:tt.forgotLink,children:y.jsx("a",{href:"#",children:"Forgot Password?"})}),y.jsx("button",{type:"submit",className:tt.btn,children:"Login"}),y.jsx("p",{children:"or login with social platforms"}),y.jsxs("div",{className:tt.socialIcons,children:[y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-google"})}),y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-facebook"})}),y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-github"})}),y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-linkedin"})})]})]})}),y.jsx("div",{className:`${tt.formBox} ${tt.register}`,children:y.jsxs("form",{className:tt.form,action:"#",children:[y.jsx("h1",{children:"Registration"}),y.jsxs("div",{className:tt.inputBox,children:[y.jsx("input",{type:"text",placeholder:"First Name",required:!0}),y.jsx("i",{className:"bx bxs-user"})]}),y.jsxs("div",{className:tt.inputBox,children:[y.jsx("input",{type:"text",placeholder:"Last Name",required:!0}),y.jsx("i",{className:"bx bxs-user"})]}),y.jsxs("div",{className:tt.inputBox,children:[y.jsx("input",{type:"email",placeholder:"Email",required:!0}),y.jsx("i",{className:"bx bxs-envelope"})]}),y.jsxs("div",{className:tt.inputBox,children:[y.jsx("input",{type:"password",placeholder:"Password",required:!0}),y.jsx("i",{className:"bx bxs-lock-alt"})]}),y.jsxs("div",{className:tt.inputBox,children:[y.jsx("input",{type:"password",placeholder:"Confirm Password",required:!0}),y.jsx("i",{className:"bx bxs-lock-alt"})]}),y.jsx("button",{type:"submit",className:tt.btn,children:"Register"}),y.jsx("p",{children:"or register with social platforms"}),y.jsxs("div",{className:tt.socialIcons,children:[y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-google"})}),y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-facebook"})}),y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-github"})}),y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-linkedin"})})]})]})}),y.jsxs("div",{className:tt.toggleBox,children:[y.jsxs("div",{className:`${tt.togglePanel} ${tt.toggleLeft}`,children:[y.jsx("h1",{children:"Hello, Welcome!"}),y.jsx("p",{children:"Don't have an account?"}),y.jsx("button",{className:tt.btn,onClick:t,children:"Register"})]}),y.jsxs("div",{className:`${tt.togglePanel} ${tt.toggleRight}`,children:[y.jsx("h1",{children:"Welcome Back!"}),y.jsx("p",{children:"Already have an account?"}),y.jsx("button",{className:tt.btn,onClick:r,children:"Login"})]})]})]})})};function C8(){const{state:n,dispatch:e}=hp(),{currentUser:t}=gr();I.useEffect(()=>{if(!t){console.log("No current user found  exiting useEffect.");return}console.log("Current user UID:",t.uid);const l=wl(Fr(Gs,"conversations"),rp("participants","array-contains",t.uid)),c=Gv(l,h=>{console.log("onSnapshot triggered");const p=[];h.forEach(g=>{p.push({id:g.id,...g.data()})}),console.log("Fetched conversations:",p),e({type:"SET_CONVERSATIONS",payload:p})});return()=>c()},[t,e]),console.log("Conversations in state:",n.conversations);const r=l=>{console.log(`Selecting conversation: ${l}, current selection: ${n.selectedConversation}`),e({type:"SELECT_CONVERSATION",payload:l})},s=n.conversations,o=n.selectedConversation&&!s.some(l=>l.id===n.selectedConversation)?{id:n.selectedConversation,projectId:"Selected Conversation"}:null;return console.log("Selected conversation:",n.selectedConversation),console.log("Visible conversations:",s.map(l=>l.id)),y.jsxs("div",{className:"conversation-list",children:[y.jsx("h2",{className:"text-xl font-bold mb-4",children:"Conversations"}),s.length===0&&!o?y.jsx("p",{children:"No conversations yet."}):y.jsxs("ul",{className:"space-y-4",children:[s.map(l=>{var c;return y.jsxs("li",{onClick:()=>r(l.id),className:`cursor-pointer p-3 rounded-md ${n.selectedConversation===l.id?"bg-blue-100 border-2 border-blue-500":"bg-gray-100"}`,children:[y.jsxs("div",{className:"font-semibold",children:["Project: ",l.projectId]}),y.jsx("div",{className:"text-sm text-gray-600",children:(c=l.lastMessage)!=null&&c.text?`${l.lastMessage.text.slice(0,30)}...`:"No messages yet"})]},l.id)}),o&&y.jsxs("li",{onClick:()=>r(o.id),className:"cursor-pointer p-3 rounded-md bg-blue-100 border-2 border-blue-500",children:[y.jsxs("div",{className:"font-semibold",children:["Project: ",o.projectId]}),y.jsx("div",{className:"text-sm text-gray-600",children:"Currently selected conversation"})]},o.id)]})]})}function x8(){const{state:n,dispatch:e}=hp(),{currentUser:t}=gr(),{selectedConversation:r}=n;return I.useEffect(()=>{if(!r)return;console.log("Loading messages for conversation:",r),console.log("Current user UID:",t==null?void 0:t.uid);const s=Fr(Gs,"conversations",r,"messages"),o=wl(s,gj("timestamp","asc")),l=Gv(o,c=>{const h=c.docs.map(p=>({id:p.id,...p.data()}));console.log("Fetched messages:",h),e({type:"SET_MESSAGES",payload:h})});return()=>l()},[r,e,t==null?void 0:t.uid]),r?(console.log("Rendering messages with currentUser:",t==null?void 0:t.uid),y.jsx("div",{className:"p-4 space-y-3 overflow-y-auto max-h-[70vh]",children:n.messages.length===0?y.jsx("div",{className:"text-center text-gray-500",children:"No messages in this conversation yet"}):n.messages.map(s=>{var l;const o=s.senderId===(t==null?void 0:t.uid);return console.log(`Message ${s.id}: senderId=${s.senderId}, currentUser=${t==null?void 0:t.uid}, isSent=${o}`),y.jsx("div",{className:`flex ${o?"justify-end":"justify-start"}`,children:y.jsxs("div",{className:`p-2 rounded-md max-w-xs ${o?"bg-blue-500 text-white":"bg-gray-200"}`,children:[y.jsx("div",{className:"text-sm",children:s.text}),y.jsx("div",{className:`text-xs ${o?"text-blue-100":"text-gray-500"} text-right`,children:(l=s.timestamp)==null?void 0:l.toDate().toLocaleString()})]})},s.id)})})):y.jsx("div",{className:"p-4",children:"No Conversation Selected"})}function S8(){const[n,e]=I.useState(""),{state:t,dispatch:r}=hp(),{currentUser:s}=gr(),{selectedConversation:o}=t,l=async c=>{if(c.preventDefault(),!n.trim())return;const h={senderId:s.uid,text:n.trim(),timestamp:tc()},p=Fr(Gs,"conversations",o,"messages");await qv(p,h);const g=to(Gs,"conversations",o);await XS(g,{lastMessage:{text:h.text,senderId:s.uid,timestamp:tc()},updatedAt:tc()}),e("")};return o?y.jsxs("form",{onSubmit:l,className:"flex items-center p-4 border-t",children:[y.jsx("input",{type:"text",placeholder:"Type a message...",value:n,onChange:c=>e(c.target.value),className:"flex-1 p-2 border rounded-md"}),y.jsx("button",{type:"submit",className:"ml-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Send"})]}):null}function R8(){return y.jsxs("div",{className:"flex h-[calc(100vh-4rem)]",children:[y.jsx("aside",{className:"w-1/3 border-r overflow-y-auto",children:y.jsx(C8,{})}),y.jsxs("main",{className:"flex-1 flex flex-col",children:[y.jsx("div",{className:"flex-1 overflow-y-auto",children:y.jsx(x8,{})}),y.jsx(S8,{})]})]})}const uC=({children:n})=>{const{currentUser:e}=gr(),{profile:t}=I.useContext(dp);return!e||!(t!=null&&t.isAdmin)?null:n},A8=document.getElementById("root"),P8=FP.createRoot(A8);P8.render(y.jsx(I.StrictMode,{children:y.jsx(aF,{children:y.jsx(uF,{children:y.jsx(hF,{children:y.jsx(ek,{basename:"/Ureno_webdesign/",children:y.jsxs(kb,{children:[y.jsx(an,{path:"/",element:y.jsx(V9,{})}),y.jsx(an,{path:"/product-page",element:y.jsx($9,{})}),y.jsx(an,{path:"/productDetail/:productId",element:y.jsx(O5,{})}),y.jsx(an,{path:"/designerPage",element:y.jsx(L5,{})}),y.jsx(an,{path:"/ProfileDashboard",element:y.jsx(q5,{})}),y.jsx(an,{path:"/edit-profile",element:y.jsx(i8,{})}),y.jsx(an,{path:"/sign-in",element:y.jsx(k5,{})}),y.jsx(an,{path:"/Login",element:y.jsx(I8,{})}),y.jsx(an,{path:"/sign-up",element:y.jsx(D5,{})}),y.jsx(an,{path:"/admin",element:y.jsx(uC,{children:y.jsx(G5,{})})}),y.jsx(an,{path:"/admin/add",element:y.jsx(uC,{children:y.jsx(s8,{})})}),y.jsx(an,{path:"/projects",element:y.jsx(o8,{})}),y.jsx(an,{path:"/projects/new",element:y.jsx(a8,{})}),y.jsx(an,{path:"/savedItems",element:y.jsx(l8,{})}),y.jsx(an,{path:"/messages",element:y.jsx(R8,{})})]})})})})})}));
