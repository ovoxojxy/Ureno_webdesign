import{h as p,r as n,j as e,L as l,e as y,f as u,q as w,w as v,g as N,i as q,k as D}from"./index-B1h-MAse.js";function k(){const{currentUser:i}=p(),[x,o]=n.useState([]),[h,m]=n.useState(!0),[j,f]=n.useState(null),b=s=>{f(r=>r===s?null:s)},g=async s=>{if(!(!i||!window.confirm("Are you sure you want to delete this project?")))try{const t=q(u,"projects",s);await D(t),o(d=>d.filter(a=>a.id!==s)),console.log("Project deleted successfully")}catch(t){console.error("Error deleting project:",t),alert("Failed to delete project. Please try again.")}};return n.useEffect(()=>{(async()=>{if(!i)return;const r=y(u,"projects"),t=w(r,v("ownerId","==",i.uid)),a=(await N(t)).docs.map(c=>({id:c.id,...c.data()}));o(a),m(!1)})()},[i]),h?e.jsx("div",{children:"Loading..."}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-4  relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l,{to:"/ProfileDashboard",className:"text-blue-500 text-3xl font-bold hover:scale-110 hover:text-blue-700 transition-all duration-200 flex items-center justify-center",children:"<"}),e.jsx("h1",{className:"text-2xl font-bold",children:"My Projects"})]}),e.jsx(l,{to:"/projects/new",children:e.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Create New Project"})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(s=>{var r,t;return e.jsxs("div",{className:"p-4 border rounded shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"text-xl font-semibold",children:s.title}),e.jsx("span",{className:"text-sm text-white px-2 py-1 rounded bg-gray-500",children:s.status})]}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>b(s.id),className:"text-gray-600 hover:text-black",children:"â‹®"}),j===s.id&&e.jsxs("div",{className:"absolute right-0 mt-1 bg-white border rounded shadow-md z-10",children:[e.jsx("button",{onClick:()=>g(s.id),className:"block w-full text-left px-4 py-2 hover:bg-red-100 text-red-600",children:"Delete"}),e.jsx(l,{to:`/projects/edit/${s.id}`,className:"block px-4 py-2 hover:bg-blue-100 text-blue-600",children:"Edit"})]})]})]}),e.jsx("p",{className:"text-gray-600",children:s.description}),s.status==="inquiry"&&((r=s.inquiredBy)==null?void 0:r.length)>0&&e.jsx(l,{to:`/projects/${s.id}/inquiries`,children:e.jsx("button",{className:"mt-2 text-blue-600 hover:underline",children:"View Inquiries"})}),s.status==="pending_approval"&&((t=s.requestedBy)==null?void 0:t.length)>0&&e.jsx(l,{to:`/projects/${s.id}/requests`,children:e.jsx("button",{className:"mt-2 text-blue-600 hover:underline",children:"View Requests"})})]},s.id)})})]})})}export{k as default};
