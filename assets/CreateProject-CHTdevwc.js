import{f as P,e as F,r as s,j as t,h as E,q as L,s as T,n as x,o as j,t as A,y as R,z as b}from"./index-BI0t34Mn.js";import"https://cdn.skypack.dev/gsap@3.12.0";import"https://cdn.skypack.dev/color";function I(){const{currentUser:o}=P(),n=F(),[l,v]=s.useState(""),[i,w]=s.useState(""),[a,N]=s.useState(null),[c,S]=s.useState(""),[u,y]=s.useState(""),[d,p]=s.useState(!1),[C,h]=s.useState(!1),[m,q]=s.useState([]);s.useEffect(()=>{(async()=>{const r=L(x(j,"products"),T("description","==","Flooring")),O=(await A(r)).docs.map(f=>({id:f.id,...f.data()}));q(O)})()},[]);const D=async e=>{if(e.preventDefault(),!!o){p(!0);try{const r=x(j,"projects");await R(r,{ownerId:o.uid,title:l,description:i,flooringOption:a,roomDimensions:{length:Number(c),width:Number(u)},createdAt:b(),updatedAt:b(),status:"submitted"}),h(!0),setTimeout(()=>{h(!1),n("/projects")},1500),n("/projects")}catch(r){console.error("Error creating project: ",r)}finally{p(!1)}}};return t.jsxs("div",{className:"p-4 max-w-2xl mx-auto mt-20 relative",children:[t.jsx("div",{className:"fixed top-0 left-0 w-full bg-white  p-4 flex items-center",children:t.jsx(E,{to:"/projects",children:t.jsx("div",{className:"logo",children:" return "})})}),t.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Create New Project"}),C&&t.jsx("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow",children:"Project created successfully!"}),t.jsxs("form",{onSubmit:D,className:"space-y-4",children:[t.jsx("input",{type:"text",placeholder:"Project Title",value:l,onChange:e=>v(e.target.value),required:!0,className:"w-full border p-2 rounded"}),t.jsx("textarea",{placeholder:"Project Description",value:i,onChange:e=>w(e.target.value),required:!0,className:"w-full border p-2 rounded"}),t.jsxs("select",{value:(a==null?void 0:a.id)||"",className:"w-full border p-2 rounded bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onChange:e=>{const r=m.find(g=>g.id===e.target.value);N(r||null)},children:[t.jsx("option",{value:"",children:"Select Flooring Option"}),m.map(e=>t.jsxs("option",{value:e.id,children:[e.title," - ",e.price]},e.id))]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx("input",{type:"number",placeholder:"Length (ft)",value:c,onChange:e=>S(e.target.value),className:"w-full border p-2 rounded"}),t.jsx("input",{type:"number",placeholder:"Width (ft)",value:u,onChange:e=>y(e.target.value),className:"w-full border p-2 rounded"})]}),t.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-blue-500 text-white rounded",children:d?"Creating...":"Create Project"})]})]})}export{I as default};
