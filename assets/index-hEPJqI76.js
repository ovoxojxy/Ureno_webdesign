(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();const w2="modulepreload",E2=function(n){return"/Ureno_webdesign/"+n},Xw={},sa=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let l=function(f){return Promise.all(f.map(g=>Promise.resolve(g).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),h=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=l(t.map(f=>{if(f=E2(f),f in Xw)return;Xw[f]=!0;const g=f.endsWith(".css"),_=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${_}`))return;const E=document.createElement("link");if(E.rel=g?"stylesheet":w2,g||(E.as="script"),E.crossOrigin="",E.href=f,h&&E.setAttribute("nonce",h),document.head.appendChild(E),g)return new Promise((C,R)=>{E.addEventListener("load",C),E.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};function kc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Qm={exports:{}},Lu={},Ym={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jw;function T2(){if(Jw)return Le;Jw=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.iterator;function E(z){return z===null||typeof z!="object"?null:(z=_&&z[_]||z["@@iterator"],typeof z=="function"?z:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,A={};function S(z,J,pe){this.props=z,this.context=J,this.refs=A,this.updater=pe||C}S.prototype.isReactComponent={},S.prototype.setState=function(z,J){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,J,"setState")},S.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function V(){}V.prototype=S.prototype;function U(z,J,pe){this.props=z,this.context=J,this.refs=A,this.updater=pe||C}var $=U.prototype=new V;$.constructor=U,R($,S.prototype),$.isPureReactComponent=!0;var W=Array.isArray,Y=Object.prototype.hasOwnProperty,X={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function b(z,J,pe){var Ie,Ae={},De=null,je=null;if(J!=null)for(Ie in J.ref!==void 0&&(je=J.ref),J.key!==void 0&&(De=""+J.key),J)Y.call(J,Ie)&&!N.hasOwnProperty(Ie)&&(Ae[Ie]=J[Ie]);var Oe=arguments.length-2;if(Oe===1)Ae.children=pe;else if(1<Oe){for(var Qe=Array(Oe),At=0;At<Oe;At++)Qe[At]=arguments[At+2];Ae.children=Qe}if(z&&z.defaultProps)for(Ie in Oe=z.defaultProps,Oe)Ae[Ie]===void 0&&(Ae[Ie]=Oe[Ie]);return{$$typeof:n,type:z,key:De,ref:je,props:Ae,_owner:X.current}}function k(z,J){return{$$typeof:n,type:z.type,key:J,ref:z.ref,props:z.props,_owner:z._owner}}function L(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function M(z){var J={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(pe){return J[pe]})}var j=/\/+/g;function D(z,J){return typeof z=="object"&&z!==null&&z.key!=null?M(""+z.key):J.toString(36)}function le(z,J,pe,Ie,Ae){var De=typeof z;(De==="undefined"||De==="boolean")&&(z=null);var je=!1;if(z===null)je=!0;else switch(De){case"string":case"number":je=!0;break;case"object":switch(z.$$typeof){case n:case e:je=!0}}if(je)return je=z,Ae=Ae(je),z=Ie===""?"."+D(je,0):Ie,W(Ae)?(pe="",z!=null&&(pe=z.replace(j,"$&/")+"/"),le(Ae,J,pe,"",function(At){return At})):Ae!=null&&(L(Ae)&&(Ae=k(Ae,pe+(!Ae.key||je&&je.key===Ae.key?"":(""+Ae.key).replace(j,"$&/")+"/")+z)),J.push(Ae)),1;if(je=0,Ie=Ie===""?".":Ie+":",W(z))for(var Oe=0;Oe<z.length;Oe++){De=z[Oe];var Qe=Ie+D(De,Oe);je+=le(De,J,pe,Qe,Ae)}else if(Qe=E(z),typeof Qe=="function")for(z=Qe.call(z),Oe=0;!(De=z.next()).done;)De=De.value,Qe=Ie+D(De,Oe++),je+=le(De,J,pe,Qe,Ae);else if(De==="object")throw J=String(z),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return je}function xe(z,J,pe){if(z==null)return z;var Ie=[],Ae=0;return le(z,Ie,"","",function(De){return J.call(pe,De,Ae++)}),Ie}function Re(z){if(z._status===-1){var J=z._result;J=J(),J.then(function(pe){(z._status===0||z._status===-1)&&(z._status=1,z._result=pe)},function(pe){(z._status===0||z._status===-1)&&(z._status=2,z._result=pe)}),z._status===-1&&(z._status=0,z._result=J)}if(z._status===1)return z._result.default;throw z._result}var Te={current:null},se={transition:null},ue={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:se,ReactCurrentOwner:X};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Le.Children={map:xe,forEach:function(z,J,pe){xe(z,function(){J.apply(this,arguments)},pe)},count:function(z){var J=0;return xe(z,function(){J++}),J},toArray:function(z){return xe(z,function(J){return J})||[]},only:function(z){if(!L(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Le.Component=S,Le.Fragment=t,Le.Profiler=s,Le.PureComponent=U,Le.StrictMode=r,Le.Suspense=h,Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,Le.act=ie,Le.cloneElement=function(z,J,pe){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var Ie=R({},z.props),Ae=z.key,De=z.ref,je=z._owner;if(J!=null){if(J.ref!==void 0&&(De=J.ref,je=X.current),J.key!==void 0&&(Ae=""+J.key),z.type&&z.type.defaultProps)var Oe=z.type.defaultProps;for(Qe in J)Y.call(J,Qe)&&!N.hasOwnProperty(Qe)&&(Ie[Qe]=J[Qe]===void 0&&Oe!==void 0?Oe[Qe]:J[Qe])}var Qe=arguments.length-2;if(Qe===1)Ie.children=pe;else if(1<Qe){Oe=Array(Qe);for(var At=0;At<Qe;At++)Oe[At]=arguments[At+2];Ie.children=Oe}return{$$typeof:n,type:z.type,key:Ae,ref:De,props:Ie,_owner:je}},Le.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:o,_context:z},z.Consumer=z},Le.createElement=b,Le.createFactory=function(z){var J=b.bind(null,z);return J.type=z,J},Le.createRef=function(){return{current:null}},Le.forwardRef=function(z){return{$$typeof:c,render:z}},Le.isValidElement=L,Le.lazy=function(z){return{$$typeof:g,_payload:{_status:-1,_result:z},_init:Re}},Le.memo=function(z,J){return{$$typeof:f,type:z,compare:J===void 0?null:J}},Le.startTransition=function(z){var J=se.transition;se.transition={};try{z()}finally{se.transition=J}},Le.unstable_act=ie,Le.useCallback=function(z,J){return Te.current.useCallback(z,J)},Le.useContext=function(z){return Te.current.useContext(z)},Le.useDebugValue=function(){},Le.useDeferredValue=function(z){return Te.current.useDeferredValue(z)},Le.useEffect=function(z,J){return Te.current.useEffect(z,J)},Le.useId=function(){return Te.current.useId()},Le.useImperativeHandle=function(z,J,pe){return Te.current.useImperativeHandle(z,J,pe)},Le.useInsertionEffect=function(z,J){return Te.current.useInsertionEffect(z,J)},Le.useLayoutEffect=function(z,J){return Te.current.useLayoutEffect(z,J)},Le.useMemo=function(z,J){return Te.current.useMemo(z,J)},Le.useReducer=function(z,J,pe){return Te.current.useReducer(z,J,pe)},Le.useRef=function(z){return Te.current.useRef(z)},Le.useState=function(z){return Te.current.useState(z)},Le.useSyncExternalStore=function(z,J,pe){return Te.current.useSyncExternalStore(z,J,pe)},Le.useTransition=function(){return Te.current.useTransition()},Le.version="18.3.1",Le}var Zw;function Vy(){return Zw||(Zw=1,Ym.exports=T2()),Ym.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eE;function I2(){if(eE)return Lu;eE=1;var n=Vy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,f){var g,_={},E=null,C=null;f!==void 0&&(E=""+f),h.key!==void 0&&(E=""+h.key),h.ref!==void 0&&(C=h.ref);for(g in h)r.call(h,g)&&!o.hasOwnProperty(g)&&(_[g]=h[g]);if(c&&c.defaultProps)for(g in h=c.defaultProps,h)_[g]===void 0&&(_[g]=h[g]);return{$$typeof:e,type:c,key:E,ref:C,props:_,_owner:s.current}}return Lu.Fragment=t,Lu.jsx=l,Lu.jsxs=l,Lu}var tE;function C2(){return tE||(tE=1,Qm.exports=I2()),Qm.exports}var y=C2(),I=Vy();const En=kc(I);var gh={},Xm={exports:{}},bn={},Jm={exports:{}},Zm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nE;function x2(){return nE||(nE=1,function(n){function e(se,ue){var ie=se.length;se.push(ue);e:for(;0<ie;){var z=ie-1>>>1,J=se[z];if(0<s(J,ue))se[z]=ue,se[ie]=J,ie=z;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var ue=se[0],ie=se.pop();if(ie!==ue){se[0]=ie;e:for(var z=0,J=se.length,pe=J>>>1;z<pe;){var Ie=2*(z+1)-1,Ae=se[Ie],De=Ie+1,je=se[De];if(0>s(Ae,ie))De<J&&0>s(je,Ae)?(se[z]=je,se[De]=ie,z=De):(se[z]=Ae,se[Ie]=ie,z=Ie);else if(De<J&&0>s(je,ie))se[z]=je,se[De]=ie,z=De;else break e}}return ue}function s(se,ue){var ie=se.sortIndex-ue.sortIndex;return ie!==0?ie:se.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],f=[],g=1,_=null,E=3,C=!1,R=!1,A=!1,S=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(se){for(var ue=t(f);ue!==null;){if(ue.callback===null)r(f);else if(ue.startTime<=se)r(f),ue.sortIndex=ue.expirationTime,e(h,ue);else break;ue=t(f)}}function W(se){if(A=!1,$(se),!R)if(t(h)!==null)R=!0,Re(Y);else{var ue=t(f);ue!==null&&Te(W,ue.startTime-se)}}function Y(se,ue){R=!1,A&&(A=!1,V(b),b=-1),C=!0;var ie=E;try{for($(ue),_=t(h);_!==null&&(!(_.expirationTime>ue)||se&&!M());){var z=_.callback;if(typeof z=="function"){_.callback=null,E=_.priorityLevel;var J=z(_.expirationTime<=ue);ue=n.unstable_now(),typeof J=="function"?_.callback=J:_===t(h)&&r(h),$(ue)}else r(h);_=t(h)}if(_!==null)var pe=!0;else{var Ie=t(f);Ie!==null&&Te(W,Ie.startTime-ue),pe=!1}return pe}finally{_=null,E=ie,C=!1}}var X=!1,N=null,b=-1,k=5,L=-1;function M(){return!(n.unstable_now()-L<k)}function j(){if(N!==null){var se=n.unstable_now();L=se;var ue=!0;try{ue=N(!0,se)}finally{ue?D():(X=!1,N=null)}}else X=!1}var D;if(typeof U=="function")D=function(){U(j)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,xe=le.port2;le.port1.onmessage=j,D=function(){xe.postMessage(null)}}else D=function(){S(j,0)};function Re(se){N=se,X||(X=!0,D())}function Te(se,ue){b=S(function(){se(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){R||C||(R=!0,Re(Y))},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(se){switch(E){case 1:case 2:case 3:var ue=3;break;default:ue=E}var ie=E;E=ue;try{return se()}finally{E=ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,ue){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ie=E;E=se;try{return ue()}finally{E=ie}},n.unstable_scheduleCallback=function(se,ue,ie){var z=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?z+ie:z):ie=z,se){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ie+J,se={id:g++,callback:ue,priorityLevel:se,startTime:ie,expirationTime:J,sortIndex:-1},ie>z?(se.sortIndex=ie,e(f,se),t(h)===null&&se===t(f)&&(A?(V(b),b=-1):A=!0,Te(W,ie-z))):(se.sortIndex=J,e(h,se),R||C||(R=!0,Re(Y))),se},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(se){var ue=E;return function(){var ie=E;E=ue;try{return se.apply(this,arguments)}finally{E=ie}}}}(Zm)),Zm}var rE;function S2(){return rE||(rE=1,Jm.exports=x2()),Jm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sE;function R2(){if(sE)return bn;sE=1;var n=Vy(),e=S2();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},_={};function E(i){return h.call(_,i)?!0:h.call(g,i)?!1:f.test(i)?_[i]=!0:(g[i]=!0,!1)}function C(i,a,u,p){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function R(i,a,u,p){if(a===null||typeof a>"u"||C(i,a,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function A(i,a,u,p,m,w,x){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=i,this.type=a,this.sanitizeURL=w,this.removeEmptyString=x}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){S[i]=new A(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];S[a]=new A(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){S[i]=new A(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){S[i]=new A(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){S[i]=new A(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){S[i]=new A(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){S[i]=new A(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){S[i]=new A(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){S[i]=new A(i,5,!1,i.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function U(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(V,U);S[a]=new A(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(V,U);S[a]=new A(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(V,U);S[a]=new A(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){S[i]=new A(i,1,!1,i.toLowerCase(),null,!1,!1)}),S.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){S[i]=new A(i,1,!1,i.toLowerCase(),null,!0,!0)});function $(i,a,u,p){var m=S.hasOwnProperty(a)?S[a]:null;(m!==null?m.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(R(a,u,m,p)&&(u=null),p||m===null?E(a)&&(u===null?i.removeAttribute(a):i.setAttribute(a,""+u)):m.mustUseProperty?i[m.propertyName]=u===null?m.type===3?!1:"":u:(a=m.attributeName,p=m.attributeNamespace,u===null?i.removeAttribute(a):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,p?i.setAttributeNS(p,a,u):i.setAttribute(a,u))))}var W=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Y=Symbol.for("react.element"),X=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),M=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),xe=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),Te=Symbol.for("react.offscreen"),se=Symbol.iterator;function ue(i){return i===null||typeof i!="object"?null:(i=se&&i[se]||i["@@iterator"],typeof i=="function"?i:null)}var ie=Object.assign,z;function J(i){if(z===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);z=a&&a[1]||""}return`
`+z+i}var pe=!1;function Ie(i,a){if(!i||pe)return"";pe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(K){var p=K}Reflect.construct(i,[],a)}else{try{a.call()}catch(K){p=K}i.call(a.prototype)}else{try{throw Error()}catch(K){p=K}i()}}catch(K){if(K&&p&&typeof K.stack=="string"){for(var m=K.stack.split(`
`),w=p.stack.split(`
`),x=m.length-1,O=w.length-1;1<=x&&0<=O&&m[x]!==w[O];)O--;for(;1<=x&&0<=O;x--,O--)if(m[x]!==w[O]){if(x!==1||O!==1)do if(x--,O--,0>O||m[x]!==w[O]){var F=`
`+m[x].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=x&&0<=O);break}}}finally{pe=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?J(i):""}function Ae(i){switch(i.tag){case 5:return J(i.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return i=Ie(i.type,!1),i;case 11:return i=Ie(i.type.render,!1),i;case 1:return i=Ie(i.type,!0),i;default:return""}}function De(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case X:return"Portal";case k:return"Profiler";case b:return"StrictMode";case D:return"Suspense";case le:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case M:return(i.displayName||"Context")+".Consumer";case L:return(i._context.displayName||"Context")+".Provider";case j:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case xe:return a=i.displayName||null,a!==null?a:De(i.type)||"Memo";case Re:a=i._payload,i=i._init;try{return De(i(a))}catch{}}return null}function je(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(a);case 8:return a===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Oe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Qe(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function At(i){var a=Qe(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),p=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,w=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return m.call(this)},set:function(x){p=""+x,w.call(this,x)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(x){p=""+x},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Vn(i){i._valueTracker||(i._valueTracker=At(i))}function ti(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),p="";return i&&(p=Qe(i)?i.checked?"true":"false":i.value),i=p,i!==u?(a.setValue(i),!0):!1}function yr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ms(i,a){var u=a.checked;return ie({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function ni(i,a){var u=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;u=Oe(a.value!=null?a.value:u),i._wrapperState={initialChecked:p,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function ri(i,a){a=a.checked,a!=null&&$(i,"checked",a,!1)}function si(i,a){ri(i,a);var u=Oe(a.value),p=a.type;if(u!=null)p==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?ii(i,a.type,u):a.hasOwnProperty("defaultValue")&&ii(i,a.type,Oe(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function da(i,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,u||a===i.value||(i.value=a),i.defaultValue=a}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function ii(i,a,u){(a!=="number"||yr(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var Kt=Array.isArray;function Tn(i,a,u,p){if(i=i.options,a){a={};for(var m=0;m<u.length;m++)a["$"+u[m]]=!0;for(u=0;u<i.length;u++)m=a.hasOwnProperty("$"+i[u].value),i[u].selected!==m&&(i[u].selected=m),m&&p&&(i[u].defaultSelected=!0)}else{for(u=""+Oe(u),a=null,m=0;m<i.length;m++){if(i[m].value===u){i[m].selected=!0,p&&(i[m].defaultSelected=!0);return}a!==null||i[m].disabled||(a=i[m])}a!==null&&(a.selected=!0)}}function oi(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function gs(i,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(Kt(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}i._wrapperState={initialValue:Oe(u)}}function Br(i,a){var u=Oe(a.value),p=Oe(a.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),a.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),p!=null&&(i.defaultValue=""+p)}function ai(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function yt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vt(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?yt(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Zn,Hl=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,p,m){MSApp.execUnsafeLocalFunction(function(){return i(a,u,p,m)})}:i}(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(Zn=Zn||document.createElement("div"),Zn.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Zn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function li(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var fo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},po=["Webkit","ms","Moz","O"];Object.keys(fo).forEach(function(i){po.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),fo[a]=fo[i]})});function ql(i,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||fo.hasOwnProperty(i)&&fo[i]?(""+a).trim():a+"px"}function Gl(i,a){i=i.style;for(var u in a)if(a.hasOwnProperty(u)){var p=u.indexOf("--")===0,m=ql(u,a[u],p);u==="float"&&(u="cssFloat"),p?i.setProperty(u,m):i[u]=m}}var Kl=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ql(i,a){if(a){if(Kl[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Yl(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mo=null;function ha(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var fa=null,er=null,zr=null;function pa(i){if(i=wu(i)){if(typeof fa!="function")throw Error(t(280));var a=i.stateNode;a&&(a=kd(a),fa(i.stateNode,i.type,a))}}function Wr(i){er?zr?zr.push(i):zr=[i]:er=i}function Xl(){if(er){var i=er,a=zr;if(zr=er=null,pa(i),a)for(i=0;i<a.length;i++)pa(a[i])}}function go(i,a){return i(a)}function Jl(){}var ys=!1;function Zl(i,a,u){if(ys)return i(a,u);ys=!0;try{return go(i,a,u)}finally{ys=!1,(er!==null||zr!==null)&&(Jl(),Xl())}}function Ct(i,a){var u=i.stateNode;if(u===null)return null;var p=kd(u);if(p===null)return null;u=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var ma=!1;if(c)try{var vr={};Object.defineProperty(vr,"passive",{get:function(){ma=!0}}),window.addEventListener("test",vr,vr),window.removeEventListener("test",vr,vr)}catch{ma=!1}function yo(i,a,u,p,m,w,x,O,F){var K=Array.prototype.slice.call(arguments,3);try{a.apply(u,K)}catch(ne){this.onError(ne)}}var vo=!1,ga=null,_r=!1,eu=null,Ip={onError:function(i){vo=!0,ga=i}};function ya(i,a,u,p,m,w,x,O,F){vo=!1,ga=null,yo.apply(Ip,arguments)}function nd(i,a,u,p,m,w,x,O,F){if(ya.apply(this,arguments),vo){if(vo){var K=ga;vo=!1,ga=null}else throw Error(t(198));_r||(_r=!0,eu=K)}}function wr(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function _o(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function Er(i){if(wr(i)!==i)throw Error(t(188))}function rd(i){var a=i.alternate;if(!a){if(a=wr(i),a===null)throw Error(t(188));return a!==i?null:i}for(var u=i,p=a;;){var m=u.return;if(m===null)break;var w=m.alternate;if(w===null){if(p=m.return,p!==null){u=p;continue}break}if(m.child===w.child){for(w=m.child;w;){if(w===u)return Er(m),i;if(w===p)return Er(m),a;w=w.sibling}throw Error(t(188))}if(u.return!==p.return)u=m,p=w;else{for(var x=!1,O=m.child;O;){if(O===u){x=!0,u=m,p=w;break}if(O===p){x=!0,p=m,u=w;break}O=O.sibling}if(!x){for(O=w.child;O;){if(O===u){x=!0,u=w,p=m;break}if(O===p){x=!0,p=w,u=m;break}O=O.sibling}if(!x)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:a}function tu(i){return i=rd(i),i!==null?va(i):null}function va(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=va(i);if(a!==null)return a;i=i.sibling}return null}var _a=e.unstable_scheduleCallback,nu=e.unstable_cancelCallback,sd=e.unstable_shouldYield,Cp=e.unstable_requestPaint,nt=e.unstable_now,id=e.unstable_getCurrentPriorityLevel,wo=e.unstable_ImmediatePriority,ui=e.unstable_UserBlockingPriority,tr=e.unstable_NormalPriority,ru=e.unstable_LowPriority,od=e.unstable_IdlePriority,Eo=null,Fn=null;function ad(i){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(Eo,i,void 0,(i.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:ud,su=Math.log,ld=Math.LN2;function ud(i){return i>>>=0,i===0?32:31-(su(i)/ld|0)|0}var wa=64,Ea=4194304;function ci(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function To(i,a){var u=i.pendingLanes;if(u===0)return 0;var p=0,m=i.suspendedLanes,w=i.pingedLanes,x=u&268435455;if(x!==0){var O=x&~m;O!==0?p=ci(O):(w&=x,w!==0&&(p=ci(w)))}else x=u&~m,x!==0?p=ci(x):w!==0&&(p=ci(w));if(p===0)return 0;if(a!==0&&a!==p&&(a&m)===0&&(m=p&-p,w=a&-a,m>=w||m===16&&(w&4194240)!==0))return a;if((p&4)!==0&&(p|=u&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=p;0<a;)u=31-gn(a),m=1<<u,p|=i[u],a&=~m;return p}function xp(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vs(i,a){for(var u=i.suspendedLanes,p=i.pingedLanes,m=i.expirationTimes,w=i.pendingLanes;0<w;){var x=31-gn(w),O=1<<x,F=m[x];F===-1?((O&u)===0||(O&p)!==0)&&(m[x]=xp(O,a)):F<=a&&(i.expiredLanes|=O),w&=~O}}function Un(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Io(){var i=wa;return wa<<=1,(wa&4194240)===0&&(wa=64),i}function di(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function hi(i,a,u){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-gn(a),i[a]=u}function tt(i,a){var u=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<u;){var m=31-gn(u),w=1<<m;a[m]=0,p[m]=-1,i[m]=-1,u&=~w}}function fi(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var p=31-gn(u),m=1<<p;m&a|i[p]&a&&(i[p]|=a),u&=~m}}var Fe=0;function pi(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var cd,Ta,dd,hd,fd,iu=!1,Hr=[],Qt=null,Tr=null,Ir=null,mi=new Map,nr=new Map,qr=[],Sp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pd(i,a){switch(i){case"focusin":case"focusout":Qt=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":mi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":nr.delete(a.pointerId)}}function In(i,a,u,p,m,w){return i===null||i.nativeEvent!==w?(i={blockedOn:a,domEventName:u,eventSystemFlags:p,nativeEvent:w,targetContainers:[m]},a!==null&&(a=wu(a),a!==null&&Ta(a)),i):(i.eventSystemFlags|=p,a=i.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),i)}function Rp(i,a,u,p,m){switch(a){case"focusin":return Qt=In(Qt,i,a,u,p,m),!0;case"dragenter":return Tr=In(Tr,i,a,u,p,m),!0;case"mouseover":return Ir=In(Ir,i,a,u,p,m),!0;case"pointerover":var w=m.pointerId;return mi.set(w,In(mi.get(w)||null,i,a,u,p,m)),!0;case"gotpointercapture":return w=m.pointerId,nr.set(w,In(nr.get(w)||null,i,a,u,p,m)),!0}return!1}function md(i){var a=Ao(i.target);if(a!==null){var u=wr(a);if(u!==null){if(a=u.tag,a===13){if(a=_o(u),a!==null){i.blockedOn=a,fd(i.priority,function(){dd(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function _s(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=Ia(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);mo=p,u.target.dispatchEvent(p),mo=null}else return a=wu(u),a!==null&&Ta(a),i.blockedOn=u,!1;a.shift()}return!0}function Co(i,a,u){_s(i)&&u.delete(a)}function gd(){iu=!1,Qt!==null&&_s(Qt)&&(Qt=null),Tr!==null&&_s(Tr)&&(Tr=null),Ir!==null&&_s(Ir)&&(Ir=null),mi.forEach(Co),nr.forEach(Co)}function Cr(i,a){i.blockedOn===a&&(i.blockedOn=null,iu||(iu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gd)))}function xr(i){function a(m){return Cr(m,i)}if(0<Hr.length){Cr(Hr[0],i);for(var u=1;u<Hr.length;u++){var p=Hr[u];p.blockedOn===i&&(p.blockedOn=null)}}for(Qt!==null&&Cr(Qt,i),Tr!==null&&Cr(Tr,i),Ir!==null&&Cr(Ir,i),mi.forEach(a),nr.forEach(a),u=0;u<qr.length;u++)p=qr[u],p.blockedOn===i&&(p.blockedOn=null);for(;0<qr.length&&(u=qr[0],u.blockedOn===null);)md(u),u.blockedOn===null&&qr.shift()}var ws=W.ReactCurrentBatchConfig,gi=!0;function ht(i,a,u,p){var m=Fe,w=ws.transition;ws.transition=null;try{Fe=1,ou(i,a,u,p)}finally{Fe=m,ws.transition=w}}function Ap(i,a,u,p){var m=Fe,w=ws.transition;ws.transition=null;try{Fe=4,ou(i,a,u,p)}finally{Fe=m,ws.transition=w}}function ou(i,a,u,p){if(gi){var m=Ia(i,a,u,p);if(m===null)Fp(i,a,p,xo,u),pd(i,p);else if(Rp(m,i,a,u,p))p.stopPropagation();else if(pd(i,p),a&4&&-1<Sp.indexOf(i)){for(;m!==null;){var w=wu(m);if(w!==null&&cd(w),w=Ia(i,a,u,p),w===null&&Fp(i,a,p,xo,u),w===m)break;m=w}m!==null&&p.stopPropagation()}else Fp(i,a,p,null,u)}}var xo=null;function Ia(i,a,u,p){if(xo=null,i=ha(p),i=Ao(i),i!==null)if(a=wr(i),a===null)i=null;else if(u=a.tag,u===13){if(i=_o(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return xo=i,null}function au(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(id()){case wo:return 1;case ui:return 4;case tr:case ru:return 16;case od:return 536870912;default:return 16}default:return 16}}var $n=null,Ca=null,Cn=null;function lu(){if(Cn)return Cn;var i,a=Ca,u=a.length,p,m="value"in $n?$n.value:$n.textContent,w=m.length;for(i=0;i<u&&a[i]===m[i];i++);var x=u-i;for(p=1;p<=x&&a[u-p]===m[w-p];p++);return Cn=m.slice(i,1<p?1-p:void 0)}function xa(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Gr(){return!0}function uu(){return!1}function Yt(i){function a(u,p,m,w,x){this._reactName=u,this._targetInst=m,this.type=p,this.nativeEvent=w,this.target=x,this.currentTarget=null;for(var O in i)i.hasOwnProperty(O)&&(u=i[O],this[O]=u?u(w):w[O]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Gr:uu,this.isPropagationStopped=uu,this}return ie(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Gr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Gr)},persist:function(){},isPersistent:Gr}),a}var Sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sa=Yt(Sr),Kr=ie({},Sr,{view:0,detail:0}),Pp=Yt(Kr),Ra,Es,yi,So=ie({},Kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yi&&(yi&&i.type==="mousemove"?(Ra=i.screenX-yi.screenX,Es=i.screenY-yi.screenY):Es=Ra=0,yi=i),Ra)},movementY:function(i){return"movementY"in i?i.movementY:Es}}),Aa=Yt(So),cu=ie({},So,{dataTransfer:0}),yd=Yt(cu),Pa=ie({},Kr,{relatedTarget:0}),ba=Yt(Pa),vd=ie({},Sr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ts=Yt(vd),_d=ie({},Sr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),wd=Yt(_d),Ed=ie({},Sr,{data:0}),du=Yt(Ed),ka={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Td={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Id(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Td[i])?!!a[i]:!1}function Qr(){return Id}var d=ie({},Kr,{key:function(i){if(i.key){var a=ka[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=xa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?yn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qr,charCode:function(i){return i.type==="keypress"?xa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?xa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),v=Yt(d),T=ie({},So,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),P=Yt(T),H=ie({},Kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qr}),Q=Yt(H),ae=ie({},Sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Je=Yt(ae),Lt=ie({},So,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Be=Yt(Lt),Ut=[9,13,27,32],Pt=c&&"CompositionEvent"in window,rr=null;c&&"documentMode"in document&&(rr=document.documentMode);var Bn=c&&"TextEvent"in window&&!rr,Ro=c&&(!Pt||rr&&8<rr&&11>=rr),Na=" ",H_=!1;function q_(i,a){switch(i){case"keyup":return Ut.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function G_(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Da=!1;function yP(i,a){switch(i){case"compositionend":return G_(a);case"keypress":return a.which!==32?null:(H_=!0,Na);case"textInput":return i=a.data,i===Na&&H_?null:i;default:return null}}function vP(i,a){if(Da)return i==="compositionend"||!Pt&&q_(i,a)?(i=lu(),Cn=Ca=$n=null,Da=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ro&&a.locale!=="ko"?null:a.data;default:return null}}var _P={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K_(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!_P[i.type]:a==="textarea"}function Q_(i,a,u,p){Wr(p),a=Ad(a,"onChange"),0<a.length&&(u=new Sa("onChange","change",null,u,p),i.push({event:u,listeners:a}))}var hu=null,fu=null;function wP(i){f0(i,0)}function Cd(i){var a=Va(i);if(ti(a))return i}function EP(i,a){if(i==="change")return a}var Y_=!1;if(c){var bp;if(c){var kp="oninput"in document;if(!kp){var X_=document.createElement("div");X_.setAttribute("oninput","return;"),kp=typeof X_.oninput=="function"}bp=kp}else bp=!1;Y_=bp&&(!document.documentMode||9<document.documentMode)}function J_(){hu&&(hu.detachEvent("onpropertychange",Z_),fu=hu=null)}function Z_(i){if(i.propertyName==="value"&&Cd(fu)){var a=[];Q_(a,fu,i,ha(i)),Zl(wP,a)}}function TP(i,a,u){i==="focusin"?(J_(),hu=a,fu=u,hu.attachEvent("onpropertychange",Z_)):i==="focusout"&&J_()}function IP(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Cd(fu)}function CP(i,a){if(i==="click")return Cd(a)}function xP(i,a){if(i==="input"||i==="change")return Cd(a)}function SP(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Rr=typeof Object.is=="function"?Object.is:SP;function pu(i,a){if(Rr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),p=Object.keys(a);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var m=u[p];if(!h.call(a,m)||!Rr(i[m],a[m]))return!1}return!0}function e0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function t0(i,a){var u=e0(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=a&&p>=a)return{node:u,offset:a-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=e0(u)}}function n0(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?n0(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function r0(){for(var i=window,a=yr();a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=yr(i.document)}return a}function Np(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function RP(i){var a=r0(),u=i.focusedElem,p=i.selectionRange;if(a!==u&&u&&u.ownerDocument&&n0(u.ownerDocument.documentElement,u)){if(p!==null&&Np(u)){if(a=p.start,i=p.end,i===void 0&&(i=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(i,u.value.length);else if(i=(a=u.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var m=u.textContent.length,w=Math.min(p.start,m);p=p.end===void 0?w:Math.min(p.end,m),!i.extend&&w>p&&(m=p,p=w,w=m),m=t0(u,w);var x=t0(u,p);m&&x&&(i.rangeCount!==1||i.anchorNode!==m.node||i.anchorOffset!==m.offset||i.focusNode!==x.node||i.focusOffset!==x.offset)&&(a=a.createRange(),a.setStart(m.node,m.offset),i.removeAllRanges(),w>p?(i.addRange(a),i.extend(x.node,x.offset)):(a.setEnd(x.node,x.offset),i.addRange(a)))}}for(a=[],i=u;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)i=a[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var AP=c&&"documentMode"in document&&11>=document.documentMode,Oa=null,Dp=null,mu=null,Op=!1;function s0(i,a,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Op||Oa==null||Oa!==yr(p)||(p=Oa,"selectionStart"in p&&Np(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),mu&&pu(mu,p)||(mu=p,p=Ad(Dp,"onSelect"),0<p.length&&(a=new Sa("onSelect","select",null,a,u),i.push({event:a,listeners:p}),a.target=Oa)))}function xd(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var La={animationend:xd("Animation","AnimationEnd"),animationiteration:xd("Animation","AnimationIteration"),animationstart:xd("Animation","AnimationStart"),transitionend:xd("Transition","TransitionEnd")},Lp={},i0={};c&&(i0=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function Sd(i){if(Lp[i])return Lp[i];if(!La[i])return i;var a=La[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in i0)return Lp[i]=a[u];return i}var o0=Sd("animationend"),a0=Sd("animationiteration"),l0=Sd("animationstart"),u0=Sd("transitionend"),c0=new Map,d0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vi(i,a){c0.set(i,a),o(a,[i])}for(var Mp=0;Mp<d0.length;Mp++){var jp=d0[Mp],PP=jp.toLowerCase(),bP=jp[0].toUpperCase()+jp.slice(1);vi(PP,"on"+bP)}vi(o0,"onAnimationEnd"),vi(a0,"onAnimationIteration"),vi(l0,"onAnimationStart"),vi("dblclick","onDoubleClick"),vi("focusin","onFocus"),vi("focusout","onBlur"),vi(u0,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kP=new Set("cancel close invalid load scroll toggle".split(" ").concat(gu));function h0(i,a,u){var p=i.type||"unknown-event";i.currentTarget=u,nd(p,a,void 0,i),i.currentTarget=null}function f0(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],m=p.event;p=p.listeners;e:{var w=void 0;if(a)for(var x=p.length-1;0<=x;x--){var O=p[x],F=O.instance,K=O.currentTarget;if(O=O.listener,F!==w&&m.isPropagationStopped())break e;h0(m,O,K),w=F}else for(x=0;x<p.length;x++){if(O=p[x],F=O.instance,K=O.currentTarget,O=O.listener,F!==w&&m.isPropagationStopped())break e;h0(m,O,K),w=F}}}if(_r)throw i=eu,_r=!1,eu=null,i}function it(i,a){var u=a[Hp];u===void 0&&(u=a[Hp]=new Set);var p=i+"__bubble";u.has(p)||(p0(a,i,2,!1),u.add(p))}function Vp(i,a,u){var p=0;a&&(p|=4),p0(u,i,p,a)}var Rd="_reactListening"+Math.random().toString(36).slice(2);function yu(i){if(!i[Rd]){i[Rd]=!0,r.forEach(function(u){u!=="selectionchange"&&(kP.has(u)||Vp(u,!1,i),Vp(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Rd]||(a[Rd]=!0,Vp("selectionchange",!1,a))}}function p0(i,a,u,p){switch(au(a)){case 1:var m=ht;break;case 4:m=Ap;break;default:m=ou}u=m.bind(null,a,u,i),m=void 0,!ma||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),p?m!==void 0?i.addEventListener(a,u,{capture:!0,passive:m}):i.addEventListener(a,u,!0):m!==void 0?i.addEventListener(a,u,{passive:m}):i.addEventListener(a,u,!1)}function Fp(i,a,u,p,m){var w=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var x=p.tag;if(x===3||x===4){var O=p.stateNode.containerInfo;if(O===m||O.nodeType===8&&O.parentNode===m)break;if(x===4)for(x=p.return;x!==null;){var F=x.tag;if((F===3||F===4)&&(F=x.stateNode.containerInfo,F===m||F.nodeType===8&&F.parentNode===m))return;x=x.return}for(;O!==null;){if(x=Ao(O),x===null)return;if(F=x.tag,F===5||F===6){p=w=x;continue e}O=O.parentNode}}p=p.return}Zl(function(){var K=w,ne=ha(u),re=[];e:{var te=c0.get(i);if(te!==void 0){var de=Sa,ge=i;switch(i){case"keypress":if(xa(u)===0)break e;case"keydown":case"keyup":de=v;break;case"focusin":ge="focus",de=ba;break;case"focusout":ge="blur",de=ba;break;case"beforeblur":case"afterblur":de=ba;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Aa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=yd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=Q;break;case o0:case a0:case l0:de=Ts;break;case u0:de=Je;break;case"scroll":de=Pp;break;case"wheel":de=Be;break;case"copy":case"cut":case"paste":de=wd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=P}var ye=(a&4)!==0,xt=!ye&&i==="scroll",q=ye?te!==null?te+"Capture":null:te;ye=[];for(var B=K,G;B!==null;){G=B;var oe=G.stateNode;if(G.tag===5&&oe!==null&&(G=oe,q!==null&&(oe=Ct(B,q),oe!=null&&ye.push(vu(B,oe,G)))),xt)break;B=B.return}0<ye.length&&(te=new de(te,ge,null,u,ne),re.push({event:te,listeners:ye}))}}if((a&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",de=i==="mouseout"||i==="pointerout",te&&u!==mo&&(ge=u.relatedTarget||u.fromElement)&&(Ao(ge)||ge[Is]))break e;if((de||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,de?(ge=u.relatedTarget||u.toElement,de=K,ge=ge?Ao(ge):null,ge!==null&&(xt=wr(ge),ge!==xt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(de=null,ge=K),de!==ge)){if(ye=Aa,oe="onMouseLeave",q="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(ye=P,oe="onPointerLeave",q="onPointerEnter",B="pointer"),xt=de==null?te:Va(de),G=ge==null?te:Va(ge),te=new ye(oe,B+"leave",de,u,ne),te.target=xt,te.relatedTarget=G,oe=null,Ao(ne)===K&&(ye=new ye(q,B+"enter",ge,u,ne),ye.target=G,ye.relatedTarget=xt,oe=ye),xt=oe,de&&ge)t:{for(ye=de,q=ge,B=0,G=ye;G;G=Ma(G))B++;for(G=0,oe=q;oe;oe=Ma(oe))G++;for(;0<B-G;)ye=Ma(ye),B--;for(;0<G-B;)q=Ma(q),G--;for(;B--;){if(ye===q||q!==null&&ye===q.alternate)break t;ye=Ma(ye),q=Ma(q)}ye=null}else ye=null;de!==null&&m0(re,te,de,ye,!1),ge!==null&&xt!==null&&m0(re,xt,ge,ye,!0)}}e:{if(te=K?Va(K):window,de=te.nodeName&&te.nodeName.toLowerCase(),de==="select"||de==="input"&&te.type==="file")var ve=EP;else if(K_(te))if(Y_)ve=xP;else{ve=IP;var we=TP}else(de=te.nodeName)&&de.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(ve=CP);if(ve&&(ve=ve(i,K))){Q_(re,ve,u,ne);break e}we&&we(i,te,K),i==="focusout"&&(we=te._wrapperState)&&we.controlled&&te.type==="number"&&ii(te,"number",te.value)}switch(we=K?Va(K):window,i){case"focusin":(K_(we)||we.contentEditable==="true")&&(Oa=we,Dp=K,mu=null);break;case"focusout":mu=Dp=Oa=null;break;case"mousedown":Op=!0;break;case"contextmenu":case"mouseup":case"dragend":Op=!1,s0(re,u,ne);break;case"selectionchange":if(AP)break;case"keydown":case"keyup":s0(re,u,ne)}var Ee;if(Pt)e:{switch(i){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else Da?q_(i,u)&&(Pe="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Pe="onCompositionStart");Pe&&(Ro&&u.locale!=="ko"&&(Da||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&Da&&(Ee=lu()):($n=ne,Ca="value"in $n?$n.value:$n.textContent,Da=!0)),we=Ad(K,Pe),0<we.length&&(Pe=new du(Pe,i,null,u,ne),re.push({event:Pe,listeners:we}),Ee?Pe.data=Ee:(Ee=G_(u),Ee!==null&&(Pe.data=Ee)))),(Ee=Bn?yP(i,u):vP(i,u))&&(K=Ad(K,"onBeforeInput"),0<K.length&&(ne=new du("onBeforeInput","beforeinput",null,u,ne),re.push({event:ne,listeners:K}),ne.data=Ee))}f0(re,a)})}function vu(i,a,u){return{instance:i,listener:a,currentTarget:u}}function Ad(i,a){for(var u=a+"Capture",p=[];i!==null;){var m=i,w=m.stateNode;m.tag===5&&w!==null&&(m=w,w=Ct(i,u),w!=null&&p.unshift(vu(i,w,m)),w=Ct(i,a),w!=null&&p.push(vu(i,w,m))),i=i.return}return p}function Ma(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function m0(i,a,u,p,m){for(var w=a._reactName,x=[];u!==null&&u!==p;){var O=u,F=O.alternate,K=O.stateNode;if(F!==null&&F===p)break;O.tag===5&&K!==null&&(O=K,m?(F=Ct(u,w),F!=null&&x.unshift(vu(u,F,O))):m||(F=Ct(u,w),F!=null&&x.push(vu(u,F,O)))),u=u.return}x.length!==0&&i.push({event:a,listeners:x})}var NP=/\r\n?/g,DP=/\u0000|\uFFFD/g;function g0(i){return(typeof i=="string"?i:""+i).replace(NP,`
`).replace(DP,"")}function Pd(i,a,u){if(a=g0(a),g0(i)!==a&&u)throw Error(t(425))}function bd(){}var Up=null,$p=null;function Bp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var zp=typeof setTimeout=="function"?setTimeout:void 0,OP=typeof clearTimeout=="function"?clearTimeout:void 0,y0=typeof Promise=="function"?Promise:void 0,LP=typeof queueMicrotask=="function"?queueMicrotask:typeof y0<"u"?function(i){return y0.resolve(null).then(i).catch(MP)}:zp;function MP(i){setTimeout(function(){throw i})}function Wp(i,a){var u=a,p=0;do{var m=u.nextSibling;if(i.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(p===0){i.removeChild(m),xr(a);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=m}while(u);xr(a)}function _i(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function v0(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}var ja=Math.random().toString(36).slice(2),Yr="__reactFiber$"+ja,_u="__reactProps$"+ja,Is="__reactContainer$"+ja,Hp="__reactEvents$"+ja,jP="__reactListeners$"+ja,VP="__reactHandles$"+ja;function Ao(i){var a=i[Yr];if(a)return a;for(var u=i.parentNode;u;){if(a=u[Is]||u[Yr]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=v0(i);i!==null;){if(u=i[Yr])return u;i=v0(i)}return a}i=u,u=i.parentNode}return null}function wu(i){return i=i[Yr]||i[Is],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Va(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function kd(i){return i[_u]||null}var qp=[],Fa=-1;function wi(i){return{current:i}}function ot(i){0>Fa||(i.current=qp[Fa],qp[Fa]=null,Fa--)}function rt(i,a){Fa++,qp[Fa]=i.current,i.current=a}var Ei={},nn=wi(Ei),xn=wi(!1),Po=Ei;function Ua(i,a){var u=i.type.contextTypes;if(!u)return Ei;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var m={},w;for(w in u)m[w]=a[w];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=m),m}function Sn(i){return i=i.childContextTypes,i!=null}function Nd(){ot(xn),ot(nn)}function _0(i,a,u){if(nn.current!==Ei)throw Error(t(168));rt(nn,a),rt(xn,u)}function w0(i,a,u){var p=i.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var m in p)if(!(m in a))throw Error(t(108,je(i)||"Unknown",m));return ie({},u,p)}function Dd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ei,Po=nn.current,rt(nn,i),rt(xn,xn.current),!0}function E0(i,a,u){var p=i.stateNode;if(!p)throw Error(t(169));u?(i=w0(i,a,Po),p.__reactInternalMemoizedMergedChildContext=i,ot(xn),ot(nn),rt(nn,i)):ot(xn),rt(xn,u)}var Cs=null,Od=!1,Gp=!1;function T0(i){Cs===null?Cs=[i]:Cs.push(i)}function FP(i){Od=!0,T0(i)}function Ti(){if(!Gp&&Cs!==null){Gp=!0;var i=0,a=Fe;try{var u=Cs;for(Fe=1;i<u.length;i++){var p=u[i];do p=p(!0);while(p!==null)}Cs=null,Od=!1}catch(m){throw Cs!==null&&(Cs=Cs.slice(i+1)),_a(wo,Ti),m}finally{Fe=a,Gp=!1}}return null}var $a=[],Ba=0,Ld=null,Md=0,sr=[],ir=0,bo=null,xs=1,Ss="";function ko(i,a){$a[Ba++]=Md,$a[Ba++]=Ld,Ld=i,Md=a}function I0(i,a,u){sr[ir++]=xs,sr[ir++]=Ss,sr[ir++]=bo,bo=i;var p=xs;i=Ss;var m=32-gn(p)-1;p&=~(1<<m),u+=1;var w=32-gn(a)+m;if(30<w){var x=m-m%5;w=(p&(1<<x)-1).toString(32),p>>=x,m-=x,xs=1<<32-gn(a)+m|u<<m|p,Ss=w+i}else xs=1<<w|u<<m|p,Ss=i}function Kp(i){i.return!==null&&(ko(i,1),I0(i,1,0))}function Qp(i){for(;i===Ld;)Ld=$a[--Ba],$a[Ba]=null,Md=$a[--Ba],$a[Ba]=null;for(;i===bo;)bo=sr[--ir],sr[ir]=null,Ss=sr[--ir],sr[ir]=null,xs=sr[--ir],sr[ir]=null}var zn=null,Wn=null,ft=!1,Ar=null;function C0(i,a){var u=ur(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=i,a=i.deletions,a===null?(i.deletions=[u],i.flags|=16):a.push(u)}function x0(i,a){switch(i.tag){case 5:var u=i.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,zn=i,Wn=_i(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,zn=i,Wn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=bo!==null?{id:xs,overflow:Ss}:null,i.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=ur(18,null,null,0),u.stateNode=a,u.return=i,i.child=u,zn=i,Wn=null,!0):!1;default:return!1}}function Yp(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Xp(i){if(ft){var a=Wn;if(a){var u=a;if(!x0(i,a)){if(Yp(i))throw Error(t(418));a=_i(u.nextSibling);var p=zn;a&&x0(i,a)?C0(p,u):(i.flags=i.flags&-4097|2,ft=!1,zn=i)}}else{if(Yp(i))throw Error(t(418));i.flags=i.flags&-4097|2,ft=!1,zn=i}}}function S0(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;zn=i}function jd(i){if(i!==zn)return!1;if(!ft)return S0(i),ft=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!Bp(i.type,i.memoizedProps)),a&&(a=Wn)){if(Yp(i))throw R0(),Error(t(418));for(;a;)C0(i,a),a=_i(a.nextSibling)}if(S0(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(a===0){Wn=_i(i.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}i=i.nextSibling}Wn=null}}else Wn=zn?_i(i.stateNode.nextSibling):null;return!0}function R0(){for(var i=Wn;i;)i=_i(i.nextSibling)}function za(){Wn=zn=null,ft=!1}function Jp(i){Ar===null?Ar=[i]:Ar.push(i)}var UP=W.ReactCurrentBatchConfig;function Eu(i,a,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,i));var m=p,w=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===w?a.ref:(a=function(x){var O=m.refs;x===null?delete O[w]:O[w]=x},a._stringRef=w,a)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function Vd(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function A0(i){var a=i._init;return a(i._payload)}function P0(i){function a(q,B){if(i){var G=q.deletions;G===null?(q.deletions=[B],q.flags|=16):G.push(B)}}function u(q,B){if(!i)return null;for(;B!==null;)a(q,B),B=B.sibling;return null}function p(q,B){for(q=new Map;B!==null;)B.key!==null?q.set(B.key,B):q.set(B.index,B),B=B.sibling;return q}function m(q,B){return q=bi(q,B),q.index=0,q.sibling=null,q}function w(q,B,G){return q.index=G,i?(G=q.alternate,G!==null?(G=G.index,G<B?(q.flags|=2,B):G):(q.flags|=2,B)):(q.flags|=1048576,B)}function x(q){return i&&q.alternate===null&&(q.flags|=2),q}function O(q,B,G,oe){return B===null||B.tag!==6?(B=zm(G,q.mode,oe),B.return=q,B):(B=m(B,G),B.return=q,B)}function F(q,B,G,oe){var ve=G.type;return ve===N?ne(q,B,G.props.children,oe,G.key):B!==null&&(B.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Re&&A0(ve)===B.type)?(oe=m(B,G.props),oe.ref=Eu(q,B,G),oe.return=q,oe):(oe=lh(G.type,G.key,G.props,null,q.mode,oe),oe.ref=Eu(q,B,G),oe.return=q,oe)}function K(q,B,G,oe){return B===null||B.tag!==4||B.stateNode.containerInfo!==G.containerInfo||B.stateNode.implementation!==G.implementation?(B=Wm(G,q.mode,oe),B.return=q,B):(B=m(B,G.children||[]),B.return=q,B)}function ne(q,B,G,oe,ve){return B===null||B.tag!==7?(B=Fo(G,q.mode,oe,ve),B.return=q,B):(B=m(B,G),B.return=q,B)}function re(q,B,G){if(typeof B=="string"&&B!==""||typeof B=="number")return B=zm(""+B,q.mode,G),B.return=q,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Y:return G=lh(B.type,B.key,B.props,null,q.mode,G),G.ref=Eu(q,null,B),G.return=q,G;case X:return B=Wm(B,q.mode,G),B.return=q,B;case Re:var oe=B._init;return re(q,oe(B._payload),G)}if(Kt(B)||ue(B))return B=Fo(B,q.mode,G,null),B.return=q,B;Vd(q,B)}return null}function te(q,B,G,oe){var ve=B!==null?B.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return ve!==null?null:O(q,B,""+G,oe);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Y:return G.key===ve?F(q,B,G,oe):null;case X:return G.key===ve?K(q,B,G,oe):null;case Re:return ve=G._init,te(q,B,ve(G._payload),oe)}if(Kt(G)||ue(G))return ve!==null?null:ne(q,B,G,oe,null);Vd(q,G)}return null}function de(q,B,G,oe,ve){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return q=q.get(G)||null,O(B,q,""+oe,ve);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case Y:return q=q.get(oe.key===null?G:oe.key)||null,F(B,q,oe,ve);case X:return q=q.get(oe.key===null?G:oe.key)||null,K(B,q,oe,ve);case Re:var we=oe._init;return de(q,B,G,we(oe._payload),ve)}if(Kt(oe)||ue(oe))return q=q.get(G)||null,ne(B,q,oe,ve,null);Vd(B,oe)}return null}function ge(q,B,G,oe){for(var ve=null,we=null,Ee=B,Pe=B=0,zt=null;Ee!==null&&Pe<G.length;Pe++){Ee.index>Pe?(zt=Ee,Ee=null):zt=Ee.sibling;var Ke=te(q,Ee,G[Pe],oe);if(Ke===null){Ee===null&&(Ee=zt);break}i&&Ee&&Ke.alternate===null&&a(q,Ee),B=w(Ke,B,Pe),we===null?ve=Ke:we.sibling=Ke,we=Ke,Ee=zt}if(Pe===G.length)return u(q,Ee),ft&&ko(q,Pe),ve;if(Ee===null){for(;Pe<G.length;Pe++)Ee=re(q,G[Pe],oe),Ee!==null&&(B=w(Ee,B,Pe),we===null?ve=Ee:we.sibling=Ee,we=Ee);return ft&&ko(q,Pe),ve}for(Ee=p(q,Ee);Pe<G.length;Pe++)zt=de(Ee,q,Pe,G[Pe],oe),zt!==null&&(i&&zt.alternate!==null&&Ee.delete(zt.key===null?Pe:zt.key),B=w(zt,B,Pe),we===null?ve=zt:we.sibling=zt,we=zt);return i&&Ee.forEach(function(ki){return a(q,ki)}),ft&&ko(q,Pe),ve}function ye(q,B,G,oe){var ve=ue(G);if(typeof ve!="function")throw Error(t(150));if(G=ve.call(G),G==null)throw Error(t(151));for(var we=ve=null,Ee=B,Pe=B=0,zt=null,Ke=G.next();Ee!==null&&!Ke.done;Pe++,Ke=G.next()){Ee.index>Pe?(zt=Ee,Ee=null):zt=Ee.sibling;var ki=te(q,Ee,Ke.value,oe);if(ki===null){Ee===null&&(Ee=zt);break}i&&Ee&&ki.alternate===null&&a(q,Ee),B=w(ki,B,Pe),we===null?ve=ki:we.sibling=ki,we=ki,Ee=zt}if(Ke.done)return u(q,Ee),ft&&ko(q,Pe),ve;if(Ee===null){for(;!Ke.done;Pe++,Ke=G.next())Ke=re(q,Ke.value,oe),Ke!==null&&(B=w(Ke,B,Pe),we===null?ve=Ke:we.sibling=Ke,we=Ke);return ft&&ko(q,Pe),ve}for(Ee=p(q,Ee);!Ke.done;Pe++,Ke=G.next())Ke=de(Ee,q,Pe,Ke.value,oe),Ke!==null&&(i&&Ke.alternate!==null&&Ee.delete(Ke.key===null?Pe:Ke.key),B=w(Ke,B,Pe),we===null?ve=Ke:we.sibling=Ke,we=Ke);return i&&Ee.forEach(function(_2){return a(q,_2)}),ft&&ko(q,Pe),ve}function xt(q,B,G,oe){if(typeof G=="object"&&G!==null&&G.type===N&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case Y:e:{for(var ve=G.key,we=B;we!==null;){if(we.key===ve){if(ve=G.type,ve===N){if(we.tag===7){u(q,we.sibling),B=m(we,G.props.children),B.return=q,q=B;break e}}else if(we.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Re&&A0(ve)===we.type){u(q,we.sibling),B=m(we,G.props),B.ref=Eu(q,we,G),B.return=q,q=B;break e}u(q,we);break}else a(q,we);we=we.sibling}G.type===N?(B=Fo(G.props.children,q.mode,oe,G.key),B.return=q,q=B):(oe=lh(G.type,G.key,G.props,null,q.mode,oe),oe.ref=Eu(q,B,G),oe.return=q,q=oe)}return x(q);case X:e:{for(we=G.key;B!==null;){if(B.key===we)if(B.tag===4&&B.stateNode.containerInfo===G.containerInfo&&B.stateNode.implementation===G.implementation){u(q,B.sibling),B=m(B,G.children||[]),B.return=q,q=B;break e}else{u(q,B);break}else a(q,B);B=B.sibling}B=Wm(G,q.mode,oe),B.return=q,q=B}return x(q);case Re:return we=G._init,xt(q,B,we(G._payload),oe)}if(Kt(G))return ge(q,B,G,oe);if(ue(G))return ye(q,B,G,oe);Vd(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,B!==null&&B.tag===6?(u(q,B.sibling),B=m(B,G),B.return=q,q=B):(u(q,B),B=zm(G,q.mode,oe),B.return=q,q=B),x(q)):u(q,B)}return xt}var Wa=P0(!0),b0=P0(!1),Fd=wi(null),Ud=null,Ha=null,Zp=null;function em(){Zp=Ha=Ud=null}function tm(i){var a=Fd.current;ot(Fd),i._currentValue=a}function nm(i,a,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),i===u)break;i=i.return}}function qa(i,a){Ud=i,Zp=Ha=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(Rn=!0),i.firstContext=null)}function or(i){var a=i._currentValue;if(Zp!==i)if(i={context:i,memoizedValue:a,next:null},Ha===null){if(Ud===null)throw Error(t(308));Ha=i,Ud.dependencies={lanes:0,firstContext:i}}else Ha=Ha.next=i;return a}var No=null;function rm(i){No===null?No=[i]:No.push(i)}function k0(i,a,u,p){var m=a.interleaved;return m===null?(u.next=u,rm(a)):(u.next=m.next,m.next=u),a.interleaved=u,Rs(i,p)}function Rs(i,a){i.lanes|=a;var u=i.alternate;for(u!==null&&(u.lanes|=a),u=i,i=i.return;i!==null;)i.childLanes|=a,u=i.alternate,u!==null&&(u.childLanes|=a),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Ii=!1;function sm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function N0(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function As(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function Ci(i,a,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(Ge&2)!==0){var m=p.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),p.pending=a,Rs(i,u)}return m=p.interleaved,m===null?(a.next=a,rm(p)):(a.next=m.next,m.next=a),p.interleaved=a,Rs(i,u)}function $d(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var p=a.lanes;p&=i.pendingLanes,u|=p,a.lanes=u,fi(i,u)}}function D0(i,a){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var m=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var x={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};w===null?m=w=x:w=w.next=x,u=u.next}while(u!==null);w===null?m=w=a:w=w.next=a}else m=w=a;u={baseState:p.baseState,firstBaseUpdate:m,lastBaseUpdate:w,shared:p.shared,effects:p.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}function Bd(i,a,u,p){var m=i.updateQueue;Ii=!1;var w=m.firstBaseUpdate,x=m.lastBaseUpdate,O=m.shared.pending;if(O!==null){m.shared.pending=null;var F=O,K=F.next;F.next=null,x===null?w=K:x.next=K,x=F;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,O=ne.lastBaseUpdate,O!==x&&(O===null?ne.firstBaseUpdate=K:O.next=K,ne.lastBaseUpdate=F))}if(w!==null){var re=m.baseState;x=0,ne=K=F=null,O=w;do{var te=O.lane,de=O.eventTime;if((p&te)===te){ne!==null&&(ne=ne.next={eventTime:de,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var ge=i,ye=O;switch(te=a,de=u,ye.tag){case 1:if(ge=ye.payload,typeof ge=="function"){re=ge.call(de,re,te);break e}re=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=ye.payload,te=typeof ge=="function"?ge.call(de,re,te):ge,te==null)break e;re=ie({},re,te);break e;case 2:Ii=!0}}O.callback!==null&&O.lane!==0&&(i.flags|=64,te=m.effects,te===null?m.effects=[O]:te.push(O))}else de={eventTime:de,lane:te,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ne===null?(K=ne=de,F=re):ne=ne.next=de,x|=te;if(O=O.next,O===null){if(O=m.shared.pending,O===null)break;te=O,O=te.next,te.next=null,m.lastBaseUpdate=te,m.shared.pending=null}}while(!0);if(ne===null&&(F=re),m.baseState=F,m.firstBaseUpdate=K,m.lastBaseUpdate=ne,a=m.shared.interleaved,a!==null){m=a;do x|=m.lane,m=m.next;while(m!==a)}else w===null&&(m.shared.lanes=0);Lo|=x,i.lanes=x,i.memoizedState=re}}function O0(i,a,u){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var p=i[a],m=p.callback;if(m!==null){if(p.callback=null,p=u,typeof m!="function")throw Error(t(191,m));m.call(p)}}}var Tu={},Xr=wi(Tu),Iu=wi(Tu),Cu=wi(Tu);function Do(i){if(i===Tu)throw Error(t(174));return i}function im(i,a){switch(rt(Cu,a),rt(Iu,i),rt(Xr,Tu),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:vt(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=vt(a,i)}ot(Xr),rt(Xr,a)}function Ga(){ot(Xr),ot(Iu),ot(Cu)}function L0(i){Do(Cu.current);var a=Do(Xr.current),u=vt(a,i.type);a!==u&&(rt(Iu,i),rt(Xr,u))}function om(i){Iu.current===i&&(ot(Xr),ot(Iu))}var mt=wi(0);function zd(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var am=[];function lm(){for(var i=0;i<am.length;i++)am[i]._workInProgressVersionPrimary=null;am.length=0}var Wd=W.ReactCurrentDispatcher,um=W.ReactCurrentBatchConfig,Oo=0,gt=null,Mt=null,$t=null,Hd=!1,xu=!1,Su=0,$P=0;function rn(){throw Error(t(321))}function cm(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!Rr(i[u],a[u]))return!1;return!0}function dm(i,a,u,p,m,w){if(Oo=w,gt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Wd.current=i===null||i.memoizedState===null?HP:qP,i=u(p,m),xu){w=0;do{if(xu=!1,Su=0,25<=w)throw Error(t(301));w+=1,$t=Mt=null,a.updateQueue=null,Wd.current=GP,i=u(p,m)}while(xu)}if(Wd.current=Kd,a=Mt!==null&&Mt.next!==null,Oo=0,$t=Mt=gt=null,Hd=!1,a)throw Error(t(300));return i}function hm(){var i=Su!==0;return Su=0,i}function Jr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?gt.memoizedState=$t=i:$t=$t.next=i,$t}function ar(){if(Mt===null){var i=gt.alternate;i=i!==null?i.memoizedState:null}else i=Mt.next;var a=$t===null?gt.memoizedState:$t.next;if(a!==null)$t=a,Mt=i;else{if(i===null)throw Error(t(310));Mt=i,i={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},$t===null?gt.memoizedState=$t=i:$t=$t.next=i}return $t}function Ru(i,a){return typeof a=="function"?a(i):a}function fm(i){var a=ar(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=Mt,m=p.baseQueue,w=u.pending;if(w!==null){if(m!==null){var x=m.next;m.next=w.next,w.next=x}p.baseQueue=m=w,u.pending=null}if(m!==null){w=m.next,p=p.baseState;var O=x=null,F=null,K=w;do{var ne=K.lane;if((Oo&ne)===ne)F!==null&&(F=F.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),p=K.hasEagerState?K.eagerState:i(p,K.action);else{var re={lane:ne,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};F===null?(O=F=re,x=p):F=F.next=re,gt.lanes|=ne,Lo|=ne}K=K.next}while(K!==null&&K!==w);F===null?x=p:F.next=O,Rr(p,a.memoizedState)||(Rn=!0),a.memoizedState=p,a.baseState=x,a.baseQueue=F,u.lastRenderedState=p}if(i=u.interleaved,i!==null){m=i;do w=m.lane,gt.lanes|=w,Lo|=w,m=m.next;while(m!==i)}else m===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function pm(i){var a=ar(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=u.dispatch,m=u.pending,w=a.memoizedState;if(m!==null){u.pending=null;var x=m=m.next;do w=i(w,x.action),x=x.next;while(x!==m);Rr(w,a.memoizedState)||(Rn=!0),a.memoizedState=w,a.baseQueue===null&&(a.baseState=w),u.lastRenderedState=w}return[w,p]}function M0(){}function j0(i,a){var u=gt,p=ar(),m=a(),w=!Rr(p.memoizedState,m);if(w&&(p.memoizedState=m,Rn=!0),p=p.queue,mm(U0.bind(null,u,p,i),[i]),p.getSnapshot!==a||w||$t!==null&&$t.memoizedState.tag&1){if(u.flags|=2048,Au(9,F0.bind(null,u,p,m,a),void 0,null),Bt===null)throw Error(t(349));(Oo&30)!==0||V0(u,a,m)}return m}function V0(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=gt.updateQueue,a===null?(a={lastEffect:null,stores:null},gt.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function F0(i,a,u,p){a.value=u,a.getSnapshot=p,$0(a)&&B0(i)}function U0(i,a,u){return u(function(){$0(a)&&B0(i)})}function $0(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!Rr(i,u)}catch{return!0}}function B0(i){var a=Rs(i,1);a!==null&&Nr(a,i,1,-1)}function z0(i){var a=Jr();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ru,lastRenderedState:i},a.queue=i,i=i.dispatch=WP.bind(null,gt,i),[a.memoizedState,i]}function Au(i,a,u,p){return i={tag:i,create:a,destroy:u,deps:p,next:null},a=gt.updateQueue,a===null?(a={lastEffect:null,stores:null},gt.updateQueue=a,a.lastEffect=i.next=i):(u=a.lastEffect,u===null?a.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,a.lastEffect=i)),i}function W0(){return ar().memoizedState}function qd(i,a,u,p){var m=Jr();gt.flags|=i,m.memoizedState=Au(1|a,u,void 0,p===void 0?null:p)}function Gd(i,a,u,p){var m=ar();p=p===void 0?null:p;var w=void 0;if(Mt!==null){var x=Mt.memoizedState;if(w=x.destroy,p!==null&&cm(p,x.deps)){m.memoizedState=Au(a,u,w,p);return}}gt.flags|=i,m.memoizedState=Au(1|a,u,w,p)}function H0(i,a){return qd(8390656,8,i,a)}function mm(i,a){return Gd(2048,8,i,a)}function q0(i,a){return Gd(4,2,i,a)}function G0(i,a){return Gd(4,4,i,a)}function K0(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Q0(i,a,u){return u=u!=null?u.concat([i]):null,Gd(4,4,K0.bind(null,a,i),u)}function gm(){}function Y0(i,a){var u=ar();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&cm(a,p[1])?p[0]:(u.memoizedState=[i,a],i)}function X0(i,a){var u=ar();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&cm(a,p[1])?p[0]:(i=i(),u.memoizedState=[i,a],i)}function J0(i,a,u){return(Oo&21)===0?(i.baseState&&(i.baseState=!1,Rn=!0),i.memoizedState=u):(Rr(u,a)||(u=Io(),gt.lanes|=u,Lo|=u,i.baseState=!0),a)}function BP(i,a){var u=Fe;Fe=u!==0&&4>u?u:4,i(!0);var p=um.transition;um.transition={};try{i(!1),a()}finally{Fe=u,um.transition=p}}function Z0(){return ar().memoizedState}function zP(i,a,u){var p=Ai(i);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},ew(i))tw(a,u);else if(u=k0(i,a,u,p),u!==null){var m=_n();Nr(u,i,p,m),nw(u,a,p)}}function WP(i,a,u){var p=Ai(i),m={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(ew(i))tw(a,m);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=a.lastRenderedReducer,w!==null))try{var x=a.lastRenderedState,O=w(x,u);if(m.hasEagerState=!0,m.eagerState=O,Rr(O,x)){var F=a.interleaved;F===null?(m.next=m,rm(a)):(m.next=F.next,F.next=m),a.interleaved=m;return}}catch{}finally{}u=k0(i,a,m,p),u!==null&&(m=_n(),Nr(u,i,p,m),nw(u,a,p))}}function ew(i){var a=i.alternate;return i===gt||a!==null&&a===gt}function tw(i,a){xu=Hd=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function nw(i,a,u){if((u&4194240)!==0){var p=a.lanes;p&=i.pendingLanes,u|=p,a.lanes=u,fi(i,u)}}var Kd={readContext:or,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useInsertionEffect:rn,useLayoutEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useMutableSource:rn,useSyncExternalStore:rn,useId:rn,unstable_isNewReconciler:!1},HP={readContext:or,useCallback:function(i,a){return Jr().memoizedState=[i,a===void 0?null:a],i},useContext:or,useEffect:H0,useImperativeHandle:function(i,a,u){return u=u!=null?u.concat([i]):null,qd(4194308,4,K0.bind(null,a,i),u)},useLayoutEffect:function(i,a){return qd(4194308,4,i,a)},useInsertionEffect:function(i,a){return qd(4,2,i,a)},useMemo:function(i,a){var u=Jr();return a=a===void 0?null:a,i=i(),u.memoizedState=[i,a],i},useReducer:function(i,a,u){var p=Jr();return a=u!==void 0?u(a):a,p.memoizedState=p.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},p.queue=i,i=i.dispatch=zP.bind(null,gt,i),[p.memoizedState,i]},useRef:function(i){var a=Jr();return i={current:i},a.memoizedState=i},useState:z0,useDebugValue:gm,useDeferredValue:function(i){return Jr().memoizedState=i},useTransition:function(){var i=z0(!1),a=i[0];return i=BP.bind(null,i[1]),Jr().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,u){var p=gt,m=Jr();if(ft){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),Bt===null)throw Error(t(349));(Oo&30)!==0||V0(p,a,u)}m.memoizedState=u;var w={value:u,getSnapshot:a};return m.queue=w,H0(U0.bind(null,p,w,i),[i]),p.flags|=2048,Au(9,F0.bind(null,p,w,u,a),void 0,null),u},useId:function(){var i=Jr(),a=Bt.identifierPrefix;if(ft){var u=Ss,p=xs;u=(p&~(1<<32-gn(p)-1)).toString(32)+u,a=":"+a+"R"+u,u=Su++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=$P++,a=":"+a+"r"+u.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},qP={readContext:or,useCallback:Y0,useContext:or,useEffect:mm,useImperativeHandle:Q0,useInsertionEffect:q0,useLayoutEffect:G0,useMemo:X0,useReducer:fm,useRef:W0,useState:function(){return fm(Ru)},useDebugValue:gm,useDeferredValue:function(i){var a=ar();return J0(a,Mt.memoizedState,i)},useTransition:function(){var i=fm(Ru)[0],a=ar().memoizedState;return[i,a]},useMutableSource:M0,useSyncExternalStore:j0,useId:Z0,unstable_isNewReconciler:!1},GP={readContext:or,useCallback:Y0,useContext:or,useEffect:mm,useImperativeHandle:Q0,useInsertionEffect:q0,useLayoutEffect:G0,useMemo:X0,useReducer:pm,useRef:W0,useState:function(){return pm(Ru)},useDebugValue:gm,useDeferredValue:function(i){var a=ar();return Mt===null?a.memoizedState=i:J0(a,Mt.memoizedState,i)},useTransition:function(){var i=pm(Ru)[0],a=ar().memoizedState;return[i,a]},useMutableSource:M0,useSyncExternalStore:j0,useId:Z0,unstable_isNewReconciler:!1};function Pr(i,a){if(i&&i.defaultProps){a=ie({},a),i=i.defaultProps;for(var u in i)a[u]===void 0&&(a[u]=i[u]);return a}return a}function ym(i,a,u,p){a=i.memoizedState,u=u(p,a),u=u==null?a:ie({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Qd={isMounted:function(i){return(i=i._reactInternals)?wr(i)===i:!1},enqueueSetState:function(i,a,u){i=i._reactInternals;var p=_n(),m=Ai(i),w=As(p,m);w.payload=a,u!=null&&(w.callback=u),a=Ci(i,w,m),a!==null&&(Nr(a,i,m,p),$d(a,i,m))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var p=_n(),m=Ai(i),w=As(p,m);w.tag=1,w.payload=a,u!=null&&(w.callback=u),a=Ci(i,w,m),a!==null&&(Nr(a,i,m,p),$d(a,i,m))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=_n(),p=Ai(i),m=As(u,p);m.tag=2,a!=null&&(m.callback=a),a=Ci(i,m,p),a!==null&&(Nr(a,i,p,u),$d(a,i,p))}};function rw(i,a,u,p,m,w,x){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,w,x):a.prototype&&a.prototype.isPureReactComponent?!pu(u,p)||!pu(m,w):!0}function sw(i,a,u){var p=!1,m=Ei,w=a.contextType;return typeof w=="object"&&w!==null?w=or(w):(m=Sn(a)?Po:nn.current,p=a.contextTypes,w=(p=p!=null)?Ua(i,m):Ei),a=new a(u,w),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Qd,i.stateNode=a,a._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=m,i.__reactInternalMemoizedMaskedChildContext=w),a}function iw(i,a,u,p){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,p),a.state!==i&&Qd.enqueueReplaceState(a,a.state,null)}function vm(i,a,u,p){var m=i.stateNode;m.props=u,m.state=i.memoizedState,m.refs={},sm(i);var w=a.contextType;typeof w=="object"&&w!==null?m.context=or(w):(w=Sn(a)?Po:nn.current,m.context=Ua(i,w)),m.state=i.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(ym(i,a,w,u),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(a=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),a!==m.state&&Qd.enqueueReplaceState(m,m.state,null),Bd(i,u,m,p),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308)}function Ka(i,a){try{var u="",p=a;do u+=Ae(p),p=p.return;while(p);var m=u}catch(w){m=`
Error generating stack: `+w.message+`
`+w.stack}return{value:i,source:a,stack:m,digest:null}}function _m(i,a,u){return{value:i,source:null,stack:u??null,digest:a??null}}function wm(i,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var KP=typeof WeakMap=="function"?WeakMap:Map;function ow(i,a,u){u=As(-1,u),u.tag=3,u.payload={element:null};var p=a.value;return u.callback=function(){nh||(nh=!0,Lm=p),wm(i,a)},u}function aw(i,a,u){u=As(-1,u),u.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var m=a.value;u.payload=function(){return p(m)},u.callback=function(){wm(i,a)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(u.callback=function(){wm(i,a),typeof p!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var x=a.stack;this.componentDidCatch(a.value,{componentStack:x!==null?x:""})}),u}function lw(i,a,u){var p=i.pingCache;if(p===null){p=i.pingCache=new KP;var m=new Set;p.set(a,m)}else m=p.get(a),m===void 0&&(m=new Set,p.set(a,m));m.has(u)||(m.add(u),i=l2.bind(null,i,a,u),a.then(i,i))}function uw(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function cw(i,a,u,p,m){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=As(-1,1),a.tag=2,Ci(u,a,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=m,i)}var QP=W.ReactCurrentOwner,Rn=!1;function vn(i,a,u,p){a.child=i===null?b0(a,null,u,p):Wa(a,i.child,u,p)}function dw(i,a,u,p,m){u=u.render;var w=a.ref;return qa(a,m),p=dm(i,a,u,p,w,m),u=hm(),i!==null&&!Rn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~m,Ps(i,a,m)):(ft&&u&&Kp(a),a.flags|=1,vn(i,a,p,m),a.child)}function hw(i,a,u,p,m){if(i===null){var w=u.type;return typeof w=="function"&&!Bm(w)&&w.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=w,fw(i,a,w,p,m)):(i=lh(u.type,null,p,a,a.mode,m),i.ref=a.ref,i.return=a,a.child=i)}if(w=i.child,(i.lanes&m)===0){var x=w.memoizedProps;if(u=u.compare,u=u!==null?u:pu,u(x,p)&&i.ref===a.ref)return Ps(i,a,m)}return a.flags|=1,i=bi(w,p),i.ref=a.ref,i.return=a,a.child=i}function fw(i,a,u,p,m){if(i!==null){var w=i.memoizedProps;if(pu(w,p)&&i.ref===a.ref)if(Rn=!1,a.pendingProps=p=w,(i.lanes&m)!==0)(i.flags&131072)!==0&&(Rn=!0);else return a.lanes=i.lanes,Ps(i,a,m)}return Em(i,a,u,p,m)}function pw(i,a,u){var p=a.pendingProps,m=p.children,w=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Ya,Hn),Hn|=u;else{if((u&1073741824)===0)return i=w!==null?w.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,rt(Ya,Hn),Hn|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:u,rt(Ya,Hn),Hn|=p}else w!==null?(p=w.baseLanes|u,a.memoizedState=null):p=u,rt(Ya,Hn),Hn|=p;return vn(i,a,m,u),a.child}function mw(i,a){var u=a.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function Em(i,a,u,p,m){var w=Sn(u)?Po:nn.current;return w=Ua(a,w),qa(a,m),u=dm(i,a,u,p,w,m),p=hm(),i!==null&&!Rn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~m,Ps(i,a,m)):(ft&&p&&Kp(a),a.flags|=1,vn(i,a,u,m),a.child)}function gw(i,a,u,p,m){if(Sn(u)){var w=!0;Dd(a)}else w=!1;if(qa(a,m),a.stateNode===null)Xd(i,a),sw(a,u,p),vm(a,u,p,m),p=!0;else if(i===null){var x=a.stateNode,O=a.memoizedProps;x.props=O;var F=x.context,K=u.contextType;typeof K=="object"&&K!==null?K=or(K):(K=Sn(u)?Po:nn.current,K=Ua(a,K));var ne=u.getDerivedStateFromProps,re=typeof ne=="function"||typeof x.getSnapshotBeforeUpdate=="function";re||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(O!==p||F!==K)&&iw(a,x,p,K),Ii=!1;var te=a.memoizedState;x.state=te,Bd(a,p,x,m),F=a.memoizedState,O!==p||te!==F||xn.current||Ii?(typeof ne=="function"&&(ym(a,u,ne,p),F=a.memoizedState),(O=Ii||rw(a,u,O,p,te,F,K))?(re||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=F),x.props=p,x.state=F,x.context=K,p=O):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{x=a.stateNode,N0(i,a),O=a.memoizedProps,K=a.type===a.elementType?O:Pr(a.type,O),x.props=K,re=a.pendingProps,te=x.context,F=u.contextType,typeof F=="object"&&F!==null?F=or(F):(F=Sn(u)?Po:nn.current,F=Ua(a,F));var de=u.getDerivedStateFromProps;(ne=typeof de=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(O!==re||te!==F)&&iw(a,x,p,F),Ii=!1,te=a.memoizedState,x.state=te,Bd(a,p,x,m);var ge=a.memoizedState;O!==re||te!==ge||xn.current||Ii?(typeof de=="function"&&(ym(a,u,de,p),ge=a.memoizedState),(K=Ii||rw(a,u,K,p,te,ge,F)||!1)?(ne||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(p,ge,F),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(p,ge,F)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||O===i.memoizedProps&&te===i.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&te===i.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=ge),x.props=p,x.state=ge,x.context=F,p=K):(typeof x.componentDidUpdate!="function"||O===i.memoizedProps&&te===i.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&te===i.memoizedState||(a.flags|=1024),p=!1)}return Tm(i,a,u,p,w,m)}function Tm(i,a,u,p,m,w){mw(i,a);var x=(a.flags&128)!==0;if(!p&&!x)return m&&E0(a,u,!1),Ps(i,a,w);p=a.stateNode,QP.current=a;var O=x&&typeof u.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,i!==null&&x?(a.child=Wa(a,i.child,null,w),a.child=Wa(a,null,O,w)):vn(i,a,O,w),a.memoizedState=p.state,m&&E0(a,u,!0),a.child}function yw(i){var a=i.stateNode;a.pendingContext?_0(i,a.pendingContext,a.pendingContext!==a.context):a.context&&_0(i,a.context,!1),im(i,a.containerInfo)}function vw(i,a,u,p,m){return za(),Jp(m),a.flags|=256,vn(i,a,u,p),a.child}var Im={dehydrated:null,treeContext:null,retryLane:0};function Cm(i){return{baseLanes:i,cachePool:null,transitions:null}}function _w(i,a,u){var p=a.pendingProps,m=mt.current,w=!1,x=(a.flags&128)!==0,O;if((O=x)||(O=i!==null&&i.memoizedState===null?!1:(m&2)!==0),O?(w=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(m|=1),rt(mt,m&1),i===null)return Xp(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(x=p.children,i=p.fallback,w?(p=a.mode,w=a.child,x={mode:"hidden",children:x},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=x):w=uh(x,p,0,null),i=Fo(i,p,u,null),w.return=a,i.return=a,w.sibling=i,a.child=w,a.child.memoizedState=Cm(u),a.memoizedState=Im,i):xm(a,x));if(m=i.memoizedState,m!==null&&(O=m.dehydrated,O!==null))return YP(i,a,x,p,O,m,u);if(w){w=p.fallback,x=a.mode,m=i.child,O=m.sibling;var F={mode:"hidden",children:p.children};return(x&1)===0&&a.child!==m?(p=a.child,p.childLanes=0,p.pendingProps=F,a.deletions=null):(p=bi(m,F),p.subtreeFlags=m.subtreeFlags&14680064),O!==null?w=bi(O,w):(w=Fo(w,x,u,null),w.flags|=2),w.return=a,p.return=a,p.sibling=w,a.child=p,p=w,w=a.child,x=i.child.memoizedState,x=x===null?Cm(u):{baseLanes:x.baseLanes|u,cachePool:null,transitions:x.transitions},w.memoizedState=x,w.childLanes=i.childLanes&~u,a.memoizedState=Im,p}return w=i.child,i=w.sibling,p=bi(w,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=u),p.return=a,p.sibling=null,i!==null&&(u=a.deletions,u===null?(a.deletions=[i],a.flags|=16):u.push(i)),a.child=p,a.memoizedState=null,p}function xm(i,a){return a=uh({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function Yd(i,a,u,p){return p!==null&&Jp(p),Wa(a,i.child,null,u),i=xm(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function YP(i,a,u,p,m,w,x){if(u)return a.flags&256?(a.flags&=-257,p=_m(Error(t(422))),Yd(i,a,x,p)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(w=p.fallback,m=a.mode,p=uh({mode:"visible",children:p.children},m,0,null),w=Fo(w,m,x,null),w.flags|=2,p.return=a,w.return=a,p.sibling=w,a.child=p,(a.mode&1)!==0&&Wa(a,i.child,null,x),a.child.memoizedState=Cm(x),a.memoizedState=Im,w);if((a.mode&1)===0)return Yd(i,a,x,null);if(m.data==="$!"){if(p=m.nextSibling&&m.nextSibling.dataset,p)var O=p.dgst;return p=O,w=Error(t(419)),p=_m(w,p,void 0),Yd(i,a,x,p)}if(O=(x&i.childLanes)!==0,Rn||O){if(p=Bt,p!==null){switch(x&-x){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(p.suspendedLanes|x))!==0?0:m,m!==0&&m!==w.retryLane&&(w.retryLane=m,Rs(i,m),Nr(p,i,m,-1))}return $m(),p=_m(Error(t(421))),Yd(i,a,x,p)}return m.data==="$?"?(a.flags|=128,a.child=i.child,a=u2.bind(null,i),m._reactRetry=a,null):(i=w.treeContext,Wn=_i(m.nextSibling),zn=a,ft=!0,Ar=null,i!==null&&(sr[ir++]=xs,sr[ir++]=Ss,sr[ir++]=bo,xs=i.id,Ss=i.overflow,bo=a),a=xm(a,p.children),a.flags|=4096,a)}function ww(i,a,u){i.lanes|=a;var p=i.alternate;p!==null&&(p.lanes|=a),nm(i.return,a,u)}function Sm(i,a,u,p,m){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:m}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=u,w.tailMode=m)}function Ew(i,a,u){var p=a.pendingProps,m=p.revealOrder,w=p.tail;if(vn(i,a,p.children,u),p=mt.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ww(i,u,a);else if(i.tag===19)ww(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(rt(mt,p),(a.mode&1)===0)a.memoizedState=null;else switch(m){case"forwards":for(u=a.child,m=null;u!==null;)i=u.alternate,i!==null&&zd(i)===null&&(m=u),u=u.sibling;u=m,u===null?(m=a.child,a.child=null):(m=u.sibling,u.sibling=null),Sm(a,!1,m,u,w);break;case"backwards":for(u=null,m=a.child,a.child=null;m!==null;){if(i=m.alternate,i!==null&&zd(i)===null){a.child=m;break}i=m.sibling,m.sibling=u,u=m,m=i}Sm(a,!0,u,null,w);break;case"together":Sm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Xd(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function Ps(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),Lo|=a.lanes,(u&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,u=bi(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=bi(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function XP(i,a,u){switch(a.tag){case 3:yw(a),za();break;case 5:L0(a);break;case 1:Sn(a.type)&&Dd(a);break;case 4:im(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,m=a.memoizedProps.value;rt(Fd,p._currentValue),p._currentValue=m;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(rt(mt,mt.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?_w(i,a,u):(rt(mt,mt.current&1),i=Ps(i,a,u),i!==null?i.sibling:null);rt(mt,mt.current&1);break;case 19:if(p=(u&a.childLanes)!==0,(i.flags&128)!==0){if(p)return Ew(i,a,u);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),rt(mt,mt.current),p)break;return null;case 22:case 23:return a.lanes=0,pw(i,a,u)}return Ps(i,a,u)}var Tw,Rm,Iw,Cw;Tw=function(i,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Rm=function(){},Iw=function(i,a,u,p){var m=i.memoizedProps;if(m!==p){i=a.stateNode,Do(Xr.current);var w=null;switch(u){case"input":m=ms(i,m),p=ms(i,p),w=[];break;case"select":m=ie({},m,{value:void 0}),p=ie({},p,{value:void 0}),w=[];break;case"textarea":m=oi(i,m),p=oi(i,p),w=[];break;default:typeof m.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=bd)}Ql(u,p);var x;u=null;for(K in m)if(!p.hasOwnProperty(K)&&m.hasOwnProperty(K)&&m[K]!=null)if(K==="style"){var O=m[K];for(x in O)O.hasOwnProperty(x)&&(u||(u={}),u[x]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(s.hasOwnProperty(K)?w||(w=[]):(w=w||[]).push(K,null));for(K in p){var F=p[K];if(O=m!=null?m[K]:void 0,p.hasOwnProperty(K)&&F!==O&&(F!=null||O!=null))if(K==="style")if(O){for(x in O)!O.hasOwnProperty(x)||F&&F.hasOwnProperty(x)||(u||(u={}),u[x]="");for(x in F)F.hasOwnProperty(x)&&O[x]!==F[x]&&(u||(u={}),u[x]=F[x])}else u||(w||(w=[]),w.push(K,u)),u=F;else K==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,O=O?O.__html:void 0,F!=null&&O!==F&&(w=w||[]).push(K,F)):K==="children"?typeof F!="string"&&typeof F!="number"||(w=w||[]).push(K,""+F):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(s.hasOwnProperty(K)?(F!=null&&K==="onScroll"&&it("scroll",i),w||O===F||(w=[])):(w=w||[]).push(K,F))}u&&(w=w||[]).push("style",u);var K=w;(a.updateQueue=K)&&(a.flags|=4)}},Cw=function(i,a,u,p){u!==p&&(a.flags|=4)};function Pu(i,a){if(!ft)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function sn(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(a)for(var m=i.child;m!==null;)u|=m.lanes|m.childLanes,p|=m.subtreeFlags&14680064,p|=m.flags&14680064,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)u|=m.lanes|m.childLanes,p|=m.subtreeFlags,p|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=p,i.childLanes=u,a}function JP(i,a,u){var p=a.pendingProps;switch(Qp(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(a),null;case 1:return Sn(a.type)&&Nd(),sn(a),null;case 3:return p=a.stateNode,Ga(),ot(xn),ot(nn),lm(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(jd(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ar!==null&&(Vm(Ar),Ar=null))),Rm(i,a),sn(a),null;case 5:om(a);var m=Do(Cu.current);if(u=a.type,i!==null&&a.stateNode!=null)Iw(i,a,u,p,m),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(t(166));return sn(a),null}if(i=Do(Xr.current),jd(a)){p=a.stateNode,u=a.type;var w=a.memoizedProps;switch(p[Yr]=a,p[_u]=w,i=(a.mode&1)!==0,u){case"dialog":it("cancel",p),it("close",p);break;case"iframe":case"object":case"embed":it("load",p);break;case"video":case"audio":for(m=0;m<gu.length;m++)it(gu[m],p);break;case"source":it("error",p);break;case"img":case"image":case"link":it("error",p),it("load",p);break;case"details":it("toggle",p);break;case"input":ni(p,w),it("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},it("invalid",p);break;case"textarea":gs(p,w),it("invalid",p)}Ql(u,w),m=null;for(var x in w)if(w.hasOwnProperty(x)){var O=w[x];x==="children"?typeof O=="string"?p.textContent!==O&&(w.suppressHydrationWarning!==!0&&Pd(p.textContent,O,i),m=["children",O]):typeof O=="number"&&p.textContent!==""+O&&(w.suppressHydrationWarning!==!0&&Pd(p.textContent,O,i),m=["children",""+O]):s.hasOwnProperty(x)&&O!=null&&x==="onScroll"&&it("scroll",p)}switch(u){case"input":Vn(p),da(p,w,!0);break;case"textarea":Vn(p),ai(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=bd)}p=m,a.updateQueue=p,p!==null&&(a.flags|=4)}else{x=m.nodeType===9?m:m.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=yt(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=x.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=x.createElement(u,{is:p.is}):(i=x.createElement(u),u==="select"&&(x=i,p.multiple?x.multiple=!0:p.size&&(x.size=p.size))):i=x.createElementNS(i,u),i[Yr]=a,i[_u]=p,Tw(i,a,!1,!1),a.stateNode=i;e:{switch(x=Yl(u,p),u){case"dialog":it("cancel",i),it("close",i),m=p;break;case"iframe":case"object":case"embed":it("load",i),m=p;break;case"video":case"audio":for(m=0;m<gu.length;m++)it(gu[m],i);m=p;break;case"source":it("error",i),m=p;break;case"img":case"image":case"link":it("error",i),it("load",i),m=p;break;case"details":it("toggle",i),m=p;break;case"input":ni(i,p),m=ms(i,p),it("invalid",i);break;case"option":m=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},m=ie({},p,{value:void 0}),it("invalid",i);break;case"textarea":gs(i,p),m=oi(i,p),it("invalid",i);break;default:m=p}Ql(u,m),O=m;for(w in O)if(O.hasOwnProperty(w)){var F=O[w];w==="style"?Gl(i,F):w==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Hl(i,F)):w==="children"?typeof F=="string"?(u!=="textarea"||F!=="")&&li(i,F):typeof F=="number"&&li(i,""+F):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(s.hasOwnProperty(w)?F!=null&&w==="onScroll"&&it("scroll",i):F!=null&&$(i,w,F,x))}switch(u){case"input":Vn(i),da(i,p,!1);break;case"textarea":Vn(i),ai(i);break;case"option":p.value!=null&&i.setAttribute("value",""+Oe(p.value));break;case"select":i.multiple=!!p.multiple,w=p.value,w!=null?Tn(i,!!p.multiple,w,!1):p.defaultValue!=null&&Tn(i,!!p.multiple,p.defaultValue,!0);break;default:typeof m.onClick=="function"&&(i.onclick=bd)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return sn(a),null;case 6:if(i&&a.stateNode!=null)Cw(i,a,i.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(t(166));if(u=Do(Cu.current),Do(Xr.current),jd(a)){if(p=a.stateNode,u=a.memoizedProps,p[Yr]=a,(w=p.nodeValue!==u)&&(i=zn,i!==null))switch(i.tag){case 3:Pd(p.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Pd(p.nodeValue,u,(i.mode&1)!==0)}w&&(a.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[Yr]=a,a.stateNode=p}return sn(a),null;case 13:if(ot(mt),p=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ft&&Wn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)R0(),za(),a.flags|=98560,w=!1;else if(w=jd(a),p!==null&&p.dehydrated!==null){if(i===null){if(!w)throw Error(t(318));if(w=a.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[Yr]=a}else za(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;sn(a),w=!1}else Ar!==null&&(Vm(Ar),Ar=null),w=!0;if(!w)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(mt.current&1)!==0?jt===0&&(jt=3):$m())),a.updateQueue!==null&&(a.flags|=4),sn(a),null);case 4:return Ga(),Rm(i,a),i===null&&yu(a.stateNode.containerInfo),sn(a),null;case 10:return tm(a.type._context),sn(a),null;case 17:return Sn(a.type)&&Nd(),sn(a),null;case 19:if(ot(mt),w=a.memoizedState,w===null)return sn(a),null;if(p=(a.flags&128)!==0,x=w.rendering,x===null)if(p)Pu(w,!1);else{if(jt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(x=zd(i),x!==null){for(a.flags|=128,Pu(w,!1),p=x.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=u,u=a.child;u!==null;)w=u,i=p,w.flags&=14680066,x=w.alternate,x===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=x.childLanes,w.lanes=x.lanes,w.child=x.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=x.memoizedProps,w.memoizedState=x.memoizedState,w.updateQueue=x.updateQueue,w.type=x.type,i=x.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return rt(mt,mt.current&1|2),a.child}i=i.sibling}w.tail!==null&&nt()>Xa&&(a.flags|=128,p=!0,Pu(w,!1),a.lanes=4194304)}else{if(!p)if(i=zd(x),i!==null){if(a.flags|=128,p=!0,u=i.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),Pu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!x.alternate&&!ft)return sn(a),null}else 2*nt()-w.renderingStartTime>Xa&&u!==1073741824&&(a.flags|=128,p=!0,Pu(w,!1),a.lanes=4194304);w.isBackwards?(x.sibling=a.child,a.child=x):(u=w.last,u!==null?u.sibling=x:a.child=x,w.last=x)}return w.tail!==null?(a=w.tail,w.rendering=a,w.tail=a.sibling,w.renderingStartTime=nt(),a.sibling=null,u=mt.current,rt(mt,p?u&1|2:u&1),a):(sn(a),null);case 22:case 23:return Um(),p=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(Hn&1073741824)!==0&&(sn(a),a.subtreeFlags&6&&(a.flags|=8192)):sn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function ZP(i,a){switch(Qp(a),a.tag){case 1:return Sn(a.type)&&Nd(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Ga(),ot(xn),ot(nn),lm(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return om(a),null;case 13:if(ot(mt),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));za()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return ot(mt),null;case 4:return Ga(),null;case 10:return tm(a.type._context),null;case 22:case 23:return Um(),null;case 24:return null;default:return null}}var Jd=!1,on=!1,e2=typeof WeakSet=="function"?WeakSet:Set,me=null;function Qa(i,a){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){_t(i,a,p)}else u.current=null}function Am(i,a,u){try{u()}catch(p){_t(i,a,p)}}var xw=!1;function t2(i,a){if(Up=gi,i=r0(),Np(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var m=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var x=0,O=-1,F=-1,K=0,ne=0,re=i,te=null;t:for(;;){for(var de;re!==u||m!==0&&re.nodeType!==3||(O=x+m),re!==w||p!==0&&re.nodeType!==3||(F=x+p),re.nodeType===3&&(x+=re.nodeValue.length),(de=re.firstChild)!==null;)te=re,re=de;for(;;){if(re===i)break t;if(te===u&&++K===m&&(O=x),te===w&&++ne===p&&(F=x),(de=re.nextSibling)!==null)break;re=te,te=re.parentNode}re=de}u=O===-1||F===-1?null:{start:O,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for($p={focusedElem:i,selectionRange:u},gi=!1,me=a;me!==null;)if(a=me,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,me=i;else for(;me!==null;){a=me;try{var ge=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var ye=ge.memoizedProps,xt=ge.memoizedState,q=a.stateNode,B=q.getSnapshotBeforeUpdate(a.elementType===a.type?ye:Pr(a.type,ye),xt);q.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var G=a.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){_t(a,a.return,oe)}if(i=a.sibling,i!==null){i.return=a.return,me=i;break}me=a.return}return ge=xw,xw=!1,ge}function bu(i,a,u){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var m=p=p.next;do{if((m.tag&i)===i){var w=m.destroy;m.destroy=void 0,w!==void 0&&Am(a,u,w)}m=m.next}while(m!==p)}}function Zd(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&i)===i){var p=u.create;u.destroy=p()}u=u.next}while(u!==a)}}function Pm(i){var a=i.ref;if(a!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof a=="function"?a(i):a.current=i}}function Sw(i){var a=i.alternate;a!==null&&(i.alternate=null,Sw(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Yr],delete a[_u],delete a[Hp],delete a[jP],delete a[VP])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Rw(i){return i.tag===5||i.tag===3||i.tag===4}function Aw(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Rw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function bm(i,a,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(i,a):u.insertBefore(i,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(i,u)):(a=u,a.appendChild(i)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=bd));else if(p!==4&&(i=i.child,i!==null))for(bm(i,a,u),i=i.sibling;i!==null;)bm(i,a,u),i=i.sibling}function km(i,a,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(km(i,a,u),i=i.sibling;i!==null;)km(i,a,u),i=i.sibling}var Xt=null,br=!1;function xi(i,a,u){for(u=u.child;u!==null;)Pw(i,a,u),u=u.sibling}function Pw(i,a,u){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(Eo,u)}catch{}switch(u.tag){case 5:on||Qa(u,a);case 6:var p=Xt,m=br;Xt=null,xi(i,a,u),Xt=p,br=m,Xt!==null&&(br?(i=Xt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Xt.removeChild(u.stateNode));break;case 18:Xt!==null&&(br?(i=Xt,u=u.stateNode,i.nodeType===8?Wp(i.parentNode,u):i.nodeType===1&&Wp(i,u),xr(i)):Wp(Xt,u.stateNode));break;case 4:p=Xt,m=br,Xt=u.stateNode.containerInfo,br=!0,xi(i,a,u),Xt=p,br=m;break;case 0:case 11:case 14:case 15:if(!on&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){m=p=p.next;do{var w=m,x=w.destroy;w=w.tag,x!==void 0&&((w&2)!==0||(w&4)!==0)&&Am(u,a,x),m=m.next}while(m!==p)}xi(i,a,u);break;case 1:if(!on&&(Qa(u,a),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(O){_t(u,a,O)}xi(i,a,u);break;case 21:xi(i,a,u);break;case 22:u.mode&1?(on=(p=on)||u.memoizedState!==null,xi(i,a,u),on=p):xi(i,a,u);break;default:xi(i,a,u)}}function bw(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new e2),a.forEach(function(p){var m=c2.bind(null,i,p);u.has(p)||(u.add(p),p.then(m,m))})}}function kr(i,a){var u=a.deletions;if(u!==null)for(var p=0;p<u.length;p++){var m=u[p];try{var w=i,x=a,O=x;e:for(;O!==null;){switch(O.tag){case 5:Xt=O.stateNode,br=!1;break e;case 3:Xt=O.stateNode.containerInfo,br=!0;break e;case 4:Xt=O.stateNode.containerInfo,br=!0;break e}O=O.return}if(Xt===null)throw Error(t(160));Pw(w,x,m),Xt=null,br=!1;var F=m.alternate;F!==null&&(F.return=null),m.return=null}catch(K){_t(m,a,K)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)kw(a,i),a=a.sibling}function kw(i,a){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(kr(a,i),Zr(i),p&4){try{bu(3,i,i.return),Zd(3,i)}catch(ye){_t(i,i.return,ye)}try{bu(5,i,i.return)}catch(ye){_t(i,i.return,ye)}}break;case 1:kr(a,i),Zr(i),p&512&&u!==null&&Qa(u,u.return);break;case 5:if(kr(a,i),Zr(i),p&512&&u!==null&&Qa(u,u.return),i.flags&32){var m=i.stateNode;try{li(m,"")}catch(ye){_t(i,i.return,ye)}}if(p&4&&(m=i.stateNode,m!=null)){var w=i.memoizedProps,x=u!==null?u.memoizedProps:w,O=i.type,F=i.updateQueue;if(i.updateQueue=null,F!==null)try{O==="input"&&w.type==="radio"&&w.name!=null&&ri(m,w),Yl(O,x);var K=Yl(O,w);for(x=0;x<F.length;x+=2){var ne=F[x],re=F[x+1];ne==="style"?Gl(m,re):ne==="dangerouslySetInnerHTML"?Hl(m,re):ne==="children"?li(m,re):$(m,ne,re,K)}switch(O){case"input":si(m,w);break;case"textarea":Br(m,w);break;case"select":var te=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!w.multiple;var de=w.value;de!=null?Tn(m,!!w.multiple,de,!1):te!==!!w.multiple&&(w.defaultValue!=null?Tn(m,!!w.multiple,w.defaultValue,!0):Tn(m,!!w.multiple,w.multiple?[]:"",!1))}m[_u]=w}catch(ye){_t(i,i.return,ye)}}break;case 6:if(kr(a,i),Zr(i),p&4){if(i.stateNode===null)throw Error(t(162));m=i.stateNode,w=i.memoizedProps;try{m.nodeValue=w}catch(ye){_t(i,i.return,ye)}}break;case 3:if(kr(a,i),Zr(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{xr(a.containerInfo)}catch(ye){_t(i,i.return,ye)}break;case 4:kr(a,i),Zr(i);break;case 13:kr(a,i),Zr(i),m=i.child,m.flags&8192&&(w=m.memoizedState!==null,m.stateNode.isHidden=w,!w||m.alternate!==null&&m.alternate.memoizedState!==null||(Om=nt())),p&4&&bw(i);break;case 22:if(ne=u!==null&&u.memoizedState!==null,i.mode&1?(on=(K=on)||ne,kr(a,i),on=K):kr(a,i),Zr(i),p&8192){if(K=i.memoizedState!==null,(i.stateNode.isHidden=K)&&!ne&&(i.mode&1)!==0)for(me=i,ne=i.child;ne!==null;){for(re=me=ne;me!==null;){switch(te=me,de=te.child,te.tag){case 0:case 11:case 14:case 15:bu(4,te,te.return);break;case 1:Qa(te,te.return);var ge=te.stateNode;if(typeof ge.componentWillUnmount=="function"){p=te,u=te.return;try{a=p,ge.props=a.memoizedProps,ge.state=a.memoizedState,ge.componentWillUnmount()}catch(ye){_t(p,u,ye)}}break;case 5:Qa(te,te.return);break;case 22:if(te.memoizedState!==null){Ow(re);continue}}de!==null?(de.return=te,me=de):Ow(re)}ne=ne.sibling}e:for(ne=null,re=i;;){if(re.tag===5){if(ne===null){ne=re;try{m=re.stateNode,K?(w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(O=re.stateNode,F=re.memoizedProps.style,x=F!=null&&F.hasOwnProperty("display")?F.display:null,O.style.display=ql("display",x))}catch(ye){_t(i,i.return,ye)}}}else if(re.tag===6){if(ne===null)try{re.stateNode.nodeValue=K?"":re.memoizedProps}catch(ye){_t(i,i.return,ye)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===i)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===i)break e;for(;re.sibling===null;){if(re.return===null||re.return===i)break e;ne===re&&(ne=null),re=re.return}ne===re&&(ne=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:kr(a,i),Zr(i),p&4&&bw(i);break;case 21:break;default:kr(a,i),Zr(i)}}function Zr(i){var a=i.flags;if(a&2){try{e:{for(var u=i.return;u!==null;){if(Rw(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var m=p.stateNode;p.flags&32&&(li(m,""),p.flags&=-33);var w=Aw(i);km(i,w,m);break;case 3:case 4:var x=p.stateNode.containerInfo,O=Aw(i);bm(i,O,x);break;default:throw Error(t(161))}}catch(F){_t(i,i.return,F)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function n2(i,a,u){me=i,Nw(i)}function Nw(i,a,u){for(var p=(i.mode&1)!==0;me!==null;){var m=me,w=m.child;if(m.tag===22&&p){var x=m.memoizedState!==null||Jd;if(!x){var O=m.alternate,F=O!==null&&O.memoizedState!==null||on;O=Jd;var K=on;if(Jd=x,(on=F)&&!K)for(me=m;me!==null;)x=me,F=x.child,x.tag===22&&x.memoizedState!==null?Lw(m):F!==null?(F.return=x,me=F):Lw(m);for(;w!==null;)me=w,Nw(w),w=w.sibling;me=m,Jd=O,on=K}Dw(i)}else(m.subtreeFlags&8772)!==0&&w!==null?(w.return=m,me=w):Dw(i)}}function Dw(i){for(;me!==null;){var a=me;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:on||Zd(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!on)if(u===null)p.componentDidMount();else{var m=a.elementType===a.type?u.memoizedProps:Pr(a.type,u.memoizedProps);p.componentDidUpdate(m,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=a.updateQueue;w!==null&&O0(a,w,p);break;case 3:var x=a.updateQueue;if(x!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}O0(a,x,u)}break;case 5:var O=a.stateNode;if(u===null&&a.flags&4){u=O;var F=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&u.focus();break;case"img":F.src&&(u.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var K=a.alternate;if(K!==null){var ne=K.memoizedState;if(ne!==null){var re=ne.dehydrated;re!==null&&xr(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}on||a.flags&512&&Pm(a)}catch(te){_t(a,a.return,te)}}if(a===i){me=null;break}if(u=a.sibling,u!==null){u.return=a.return,me=u;break}me=a.return}}function Ow(i){for(;me!==null;){var a=me;if(a===i){me=null;break}var u=a.sibling;if(u!==null){u.return=a.return,me=u;break}me=a.return}}function Lw(i){for(;me!==null;){var a=me;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{Zd(4,a)}catch(F){_t(a,u,F)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var m=a.return;try{p.componentDidMount()}catch(F){_t(a,m,F)}}var w=a.return;try{Pm(a)}catch(F){_t(a,w,F)}break;case 5:var x=a.return;try{Pm(a)}catch(F){_t(a,x,F)}}}catch(F){_t(a,a.return,F)}if(a===i){me=null;break}var O=a.sibling;if(O!==null){O.return=a.return,me=O;break}me=a.return}}var r2=Math.ceil,eh=W.ReactCurrentDispatcher,Nm=W.ReactCurrentOwner,lr=W.ReactCurrentBatchConfig,Ge=0,Bt=null,bt=null,Jt=0,Hn=0,Ya=wi(0),jt=0,ku=null,Lo=0,th=0,Dm=0,Nu=null,An=null,Om=0,Xa=1/0,bs=null,nh=!1,Lm=null,Si=null,rh=!1,Ri=null,sh=0,Du=0,Mm=null,ih=-1,oh=0;function _n(){return(Ge&6)!==0?nt():ih!==-1?ih:ih=nt()}function Ai(i){return(i.mode&1)===0?1:(Ge&2)!==0&&Jt!==0?Jt&-Jt:UP.transition!==null?(oh===0&&(oh=Io()),oh):(i=Fe,i!==0||(i=window.event,i=i===void 0?16:au(i.type)),i)}function Nr(i,a,u,p){if(50<Du)throw Du=0,Mm=null,Error(t(185));hi(i,u,p),((Ge&2)===0||i!==Bt)&&(i===Bt&&((Ge&2)===0&&(th|=u),jt===4&&Pi(i,Jt)),Pn(i,p),u===1&&Ge===0&&(a.mode&1)===0&&(Xa=nt()+500,Od&&Ti()))}function Pn(i,a){var u=i.callbackNode;vs(i,a);var p=To(i,i===Bt?Jt:0);if(p===0)u!==null&&nu(u),i.callbackNode=null,i.callbackPriority=0;else if(a=p&-p,i.callbackPriority!==a){if(u!=null&&nu(u),a===1)i.tag===0?FP(jw.bind(null,i)):T0(jw.bind(null,i)),LP(function(){(Ge&6)===0&&Ti()}),u=null;else{switch(pi(p)){case 1:u=wo;break;case 4:u=ui;break;case 16:u=tr;break;case 536870912:u=od;break;default:u=tr}u=Hw(u,Mw.bind(null,i))}i.callbackPriority=a,i.callbackNode=u}}function Mw(i,a){if(ih=-1,oh=0,(Ge&6)!==0)throw Error(t(327));var u=i.callbackNode;if(Ja()&&i.callbackNode!==u)return null;var p=To(i,i===Bt?Jt:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||a)a=ah(i,p);else{a=p;var m=Ge;Ge|=2;var w=Fw();(Bt!==i||Jt!==a)&&(bs=null,Xa=nt()+500,jo(i,a));do try{o2();break}catch(O){Vw(i,O)}while(!0);em(),eh.current=w,Ge=m,bt!==null?a=0:(Bt=null,Jt=0,a=jt)}if(a!==0){if(a===2&&(m=Un(i),m!==0&&(p=m,a=jm(i,m))),a===1)throw u=ku,jo(i,0),Pi(i,p),Pn(i,nt()),u;if(a===6)Pi(i,p);else{if(m=i.current.alternate,(p&30)===0&&!s2(m)&&(a=ah(i,p),a===2&&(w=Un(i),w!==0&&(p=w,a=jm(i,w))),a===1))throw u=ku,jo(i,0),Pi(i,p),Pn(i,nt()),u;switch(i.finishedWork=m,i.finishedLanes=p,a){case 0:case 1:throw Error(t(345));case 2:Vo(i,An,bs);break;case 3:if(Pi(i,p),(p&130023424)===p&&(a=Om+500-nt(),10<a)){if(To(i,0)!==0)break;if(m=i.suspendedLanes,(m&p)!==p){_n(),i.pingedLanes|=i.suspendedLanes&m;break}i.timeoutHandle=zp(Vo.bind(null,i,An,bs),a);break}Vo(i,An,bs);break;case 4:if(Pi(i,p),(p&4194240)===p)break;for(a=i.eventTimes,m=-1;0<p;){var x=31-gn(p);w=1<<x,x=a[x],x>m&&(m=x),p&=~w}if(p=m,p=nt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*r2(p/1960))-p,10<p){i.timeoutHandle=zp(Vo.bind(null,i,An,bs),p);break}Vo(i,An,bs);break;case 5:Vo(i,An,bs);break;default:throw Error(t(329))}}}return Pn(i,nt()),i.callbackNode===u?Mw.bind(null,i):null}function jm(i,a){var u=Nu;return i.current.memoizedState.isDehydrated&&(jo(i,a).flags|=256),i=ah(i,a),i!==2&&(a=An,An=u,a!==null&&Vm(a)),i}function Vm(i){An===null?An=i:An.push.apply(An,i)}function s2(i){for(var a=i;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var m=u[p],w=m.getSnapshot;m=m.value;try{if(!Rr(w(),m))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Pi(i,a){for(a&=~Dm,a&=~th,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var u=31-gn(a),p=1<<u;i[u]=-1,a&=~p}}function jw(i){if((Ge&6)!==0)throw Error(t(327));Ja();var a=To(i,0);if((a&1)===0)return Pn(i,nt()),null;var u=ah(i,a);if(i.tag!==0&&u===2){var p=Un(i);p!==0&&(a=p,u=jm(i,p))}if(u===1)throw u=ku,jo(i,0),Pi(i,a),Pn(i,nt()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,Vo(i,An,bs),Pn(i,nt()),null}function Fm(i,a){var u=Ge;Ge|=1;try{return i(a)}finally{Ge=u,Ge===0&&(Xa=nt()+500,Od&&Ti())}}function Mo(i){Ri!==null&&Ri.tag===0&&(Ge&6)===0&&Ja();var a=Ge;Ge|=1;var u=lr.transition,p=Fe;try{if(lr.transition=null,Fe=1,i)return i()}finally{Fe=p,lr.transition=u,Ge=a,(Ge&6)===0&&Ti()}}function Um(){Hn=Ya.current,ot(Ya)}function jo(i,a){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,OP(u)),bt!==null)for(u=bt.return;u!==null;){var p=u;switch(Qp(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Nd();break;case 3:Ga(),ot(xn),ot(nn),lm();break;case 5:om(p);break;case 4:Ga();break;case 13:ot(mt);break;case 19:ot(mt);break;case 10:tm(p.type._context);break;case 22:case 23:Um()}u=u.return}if(Bt=i,bt=i=bi(i.current,null),Jt=Hn=a,jt=0,ku=null,Dm=th=Lo=0,An=Nu=null,No!==null){for(a=0;a<No.length;a++)if(u=No[a],p=u.interleaved,p!==null){u.interleaved=null;var m=p.next,w=u.pending;if(w!==null){var x=w.next;w.next=m,p.next=x}u.pending=p}No=null}return i}function Vw(i,a){do{var u=bt;try{if(em(),Wd.current=Kd,Hd){for(var p=gt.memoizedState;p!==null;){var m=p.queue;m!==null&&(m.pending=null),p=p.next}Hd=!1}if(Oo=0,$t=Mt=gt=null,xu=!1,Su=0,Nm.current=null,u===null||u.return===null){jt=1,ku=a,bt=null;break}e:{var w=i,x=u.return,O=u,F=a;if(a=Jt,O.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var K=F,ne=O,re=ne.tag;if((ne.mode&1)===0&&(re===0||re===11||re===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var de=uw(x);if(de!==null){de.flags&=-257,cw(de,x,O,w,a),de.mode&1&&lw(w,K,a),a=de,F=K;var ge=a.updateQueue;if(ge===null){var ye=new Set;ye.add(F),a.updateQueue=ye}else ge.add(F);break e}else{if((a&1)===0){lw(w,K,a),$m();break e}F=Error(t(426))}}else if(ft&&O.mode&1){var xt=uw(x);if(xt!==null){(xt.flags&65536)===0&&(xt.flags|=256),cw(xt,x,O,w,a),Jp(Ka(F,O));break e}}w=F=Ka(F,O),jt!==4&&(jt=2),Nu===null?Nu=[w]:Nu.push(w),w=x;do{switch(w.tag){case 3:w.flags|=65536,a&=-a,w.lanes|=a;var q=ow(w,F,a);D0(w,q);break e;case 1:O=F;var B=w.type,G=w.stateNode;if((w.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Si===null||!Si.has(G)))){w.flags|=65536,a&=-a,w.lanes|=a;var oe=aw(w,O,a);D0(w,oe);break e}}w=w.return}while(w!==null)}$w(u)}catch(ve){a=ve,bt===u&&u!==null&&(bt=u=u.return);continue}break}while(!0)}function Fw(){var i=eh.current;return eh.current=Kd,i===null?Kd:i}function $m(){(jt===0||jt===3||jt===2)&&(jt=4),Bt===null||(Lo&268435455)===0&&(th&268435455)===0||Pi(Bt,Jt)}function ah(i,a){var u=Ge;Ge|=2;var p=Fw();(Bt!==i||Jt!==a)&&(bs=null,jo(i,a));do try{i2();break}catch(m){Vw(i,m)}while(!0);if(em(),Ge=u,eh.current=p,bt!==null)throw Error(t(261));return Bt=null,Jt=0,jt}function i2(){for(;bt!==null;)Uw(bt)}function o2(){for(;bt!==null&&!sd();)Uw(bt)}function Uw(i){var a=Ww(i.alternate,i,Hn);i.memoizedProps=i.pendingProps,a===null?$w(i):bt=a,Nm.current=null}function $w(i){var a=i;do{var u=a.alternate;if(i=a.return,(a.flags&32768)===0){if(u=JP(u,a,Hn),u!==null){bt=u;return}}else{if(u=ZP(u,a),u!==null){u.flags&=32767,bt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{jt=6,bt=null;return}}if(a=a.sibling,a!==null){bt=a;return}bt=a=i}while(a!==null);jt===0&&(jt=5)}function Vo(i,a,u){var p=Fe,m=lr.transition;try{lr.transition=null,Fe=1,a2(i,a,u,p)}finally{lr.transition=m,Fe=p}return null}function a2(i,a,u,p){do Ja();while(Ri!==null);if((Ge&6)!==0)throw Error(t(327));u=i.finishedWork;var m=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var w=u.lanes|u.childLanes;if(tt(i,w),i===Bt&&(bt=Bt=null,Jt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||rh||(rh=!0,Hw(tr,function(){return Ja(),null})),w=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||w){w=lr.transition,lr.transition=null;var x=Fe;Fe=1;var O=Ge;Ge|=4,Nm.current=null,t2(i,u),kw(u,i),RP($p),gi=!!Up,$p=Up=null,i.current=u,n2(u),Cp(),Ge=O,Fe=x,lr.transition=w}else i.current=u;if(rh&&(rh=!1,Ri=i,sh=m),w=i.pendingLanes,w===0&&(Si=null),ad(u.stateNode),Pn(i,nt()),a!==null)for(p=i.onRecoverableError,u=0;u<a.length;u++)m=a[u],p(m.value,{componentStack:m.stack,digest:m.digest});if(nh)throw nh=!1,i=Lm,Lm=null,i;return(sh&1)!==0&&i.tag!==0&&Ja(),w=i.pendingLanes,(w&1)!==0?i===Mm?Du++:(Du=0,Mm=i):Du=0,Ti(),null}function Ja(){if(Ri!==null){var i=pi(sh),a=lr.transition,u=Fe;try{if(lr.transition=null,Fe=16>i?16:i,Ri===null)var p=!1;else{if(i=Ri,Ri=null,sh=0,(Ge&6)!==0)throw Error(t(331));var m=Ge;for(Ge|=4,me=i.current;me!==null;){var w=me,x=w.child;if((me.flags&16)!==0){var O=w.deletions;if(O!==null){for(var F=0;F<O.length;F++){var K=O[F];for(me=K;me!==null;){var ne=me;switch(ne.tag){case 0:case 11:case 15:bu(8,ne,w)}var re=ne.child;if(re!==null)re.return=ne,me=re;else for(;me!==null;){ne=me;var te=ne.sibling,de=ne.return;if(Sw(ne),ne===K){me=null;break}if(te!==null){te.return=de,me=te;break}me=de}}}var ge=w.alternate;if(ge!==null){var ye=ge.child;if(ye!==null){ge.child=null;do{var xt=ye.sibling;ye.sibling=null,ye=xt}while(ye!==null)}}me=w}}if((w.subtreeFlags&2064)!==0&&x!==null)x.return=w,me=x;else e:for(;me!==null;){if(w=me,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:bu(9,w,w.return)}var q=w.sibling;if(q!==null){q.return=w.return,me=q;break e}me=w.return}}var B=i.current;for(me=B;me!==null;){x=me;var G=x.child;if((x.subtreeFlags&2064)!==0&&G!==null)G.return=x,me=G;else e:for(x=B;me!==null;){if(O=me,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:Zd(9,O)}}catch(ve){_t(O,O.return,ve)}if(O===x){me=null;break e}var oe=O.sibling;if(oe!==null){oe.return=O.return,me=oe;break e}me=O.return}}if(Ge=m,Ti(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(Eo,i)}catch{}p=!0}return p}finally{Fe=u,lr.transition=a}}return!1}function Bw(i,a,u){a=Ka(u,a),a=ow(i,a,1),i=Ci(i,a,1),a=_n(),i!==null&&(hi(i,1,a),Pn(i,a))}function _t(i,a,u){if(i.tag===3)Bw(i,i,u);else for(;a!==null;){if(a.tag===3){Bw(a,i,u);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Si===null||!Si.has(p))){i=Ka(u,i),i=aw(a,i,1),a=Ci(a,i,1),i=_n(),a!==null&&(hi(a,1,i),Pn(a,i));break}}a=a.return}}function l2(i,a,u){var p=i.pingCache;p!==null&&p.delete(a),a=_n(),i.pingedLanes|=i.suspendedLanes&u,Bt===i&&(Jt&u)===u&&(jt===4||jt===3&&(Jt&130023424)===Jt&&500>nt()-Om?jo(i,0):Dm|=u),Pn(i,a)}function zw(i,a){a===0&&((i.mode&1)===0?a=1:(a=Ea,Ea<<=1,(Ea&130023424)===0&&(Ea=4194304)));var u=_n();i=Rs(i,a),i!==null&&(hi(i,a,u),Pn(i,u))}function u2(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),zw(i,u)}function c2(i,a){var u=0;switch(i.tag){case 13:var p=i.stateNode,m=i.memoizedState;m!==null&&(u=m.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(a),zw(i,u)}var Ww;Ww=function(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps||xn.current)Rn=!0;else{if((i.lanes&u)===0&&(a.flags&128)===0)return Rn=!1,XP(i,a,u);Rn=(i.flags&131072)!==0}else Rn=!1,ft&&(a.flags&1048576)!==0&&I0(a,Md,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;Xd(i,a),i=a.pendingProps;var m=Ua(a,nn.current);qa(a,u),m=dm(null,a,p,i,m,u);var w=hm();return a.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Sn(p)?(w=!0,Dd(a)):w=!1,a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,sm(a),m.updater=Qd,a.stateNode=m,m._reactInternals=a,vm(a,p,i,u),a=Tm(null,a,p,!0,w,u)):(a.tag=0,ft&&w&&Kp(a),vn(null,a,m,u),a=a.child),a;case 16:p=a.elementType;e:{switch(Xd(i,a),i=a.pendingProps,m=p._init,p=m(p._payload),a.type=p,m=a.tag=h2(p),i=Pr(p,i),m){case 0:a=Em(null,a,p,i,u);break e;case 1:a=gw(null,a,p,i,u);break e;case 11:a=dw(null,a,p,i,u);break e;case 14:a=hw(null,a,p,Pr(p.type,i),u);break e}throw Error(t(306,p,""))}return a;case 0:return p=a.type,m=a.pendingProps,m=a.elementType===p?m:Pr(p,m),Em(i,a,p,m,u);case 1:return p=a.type,m=a.pendingProps,m=a.elementType===p?m:Pr(p,m),gw(i,a,p,m,u);case 3:e:{if(yw(a),i===null)throw Error(t(387));p=a.pendingProps,w=a.memoizedState,m=w.element,N0(i,a),Bd(a,p,null,u);var x=a.memoizedState;if(p=x.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},a.updateQueue.baseState=w,a.memoizedState=w,a.flags&256){m=Ka(Error(t(423)),a),a=vw(i,a,p,u,m);break e}else if(p!==m){m=Ka(Error(t(424)),a),a=vw(i,a,p,u,m);break e}else for(Wn=_i(a.stateNode.containerInfo.firstChild),zn=a,ft=!0,Ar=null,u=b0(a,null,p,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(za(),p===m){a=Ps(i,a,u);break e}vn(i,a,p,u)}a=a.child}return a;case 5:return L0(a),i===null&&Xp(a),p=a.type,m=a.pendingProps,w=i!==null?i.memoizedProps:null,x=m.children,Bp(p,m)?x=null:w!==null&&Bp(p,w)&&(a.flags|=32),mw(i,a),vn(i,a,x,u),a.child;case 6:return i===null&&Xp(a),null;case 13:return _w(i,a,u);case 4:return im(a,a.stateNode.containerInfo),p=a.pendingProps,i===null?a.child=Wa(a,null,p,u):vn(i,a,p,u),a.child;case 11:return p=a.type,m=a.pendingProps,m=a.elementType===p?m:Pr(p,m),dw(i,a,p,m,u);case 7:return vn(i,a,a.pendingProps,u),a.child;case 8:return vn(i,a,a.pendingProps.children,u),a.child;case 12:return vn(i,a,a.pendingProps.children,u),a.child;case 10:e:{if(p=a.type._context,m=a.pendingProps,w=a.memoizedProps,x=m.value,rt(Fd,p._currentValue),p._currentValue=x,w!==null)if(Rr(w.value,x)){if(w.children===m.children&&!xn.current){a=Ps(i,a,u);break e}}else for(w=a.child,w!==null&&(w.return=a);w!==null;){var O=w.dependencies;if(O!==null){x=w.child;for(var F=O.firstContext;F!==null;){if(F.context===p){if(w.tag===1){F=As(-1,u&-u),F.tag=2;var K=w.updateQueue;if(K!==null){K=K.shared;var ne=K.pending;ne===null?F.next=F:(F.next=ne.next,ne.next=F),K.pending=F}}w.lanes|=u,F=w.alternate,F!==null&&(F.lanes|=u),nm(w.return,u,a),O.lanes|=u;break}F=F.next}}else if(w.tag===10)x=w.type===a.type?null:w.child;else if(w.tag===18){if(x=w.return,x===null)throw Error(t(341));x.lanes|=u,O=x.alternate,O!==null&&(O.lanes|=u),nm(x,u,a),x=w.sibling}else x=w.child;if(x!==null)x.return=w;else for(x=w;x!==null;){if(x===a){x=null;break}if(w=x.sibling,w!==null){w.return=x.return,x=w;break}x=x.return}w=x}vn(i,a,m.children,u),a=a.child}return a;case 9:return m=a.type,p=a.pendingProps.children,qa(a,u),m=or(m),p=p(m),a.flags|=1,vn(i,a,p,u),a.child;case 14:return p=a.type,m=Pr(p,a.pendingProps),m=Pr(p.type,m),hw(i,a,p,m,u);case 15:return fw(i,a,a.type,a.pendingProps,u);case 17:return p=a.type,m=a.pendingProps,m=a.elementType===p?m:Pr(p,m),Xd(i,a),a.tag=1,Sn(p)?(i=!0,Dd(a)):i=!1,qa(a,u),sw(a,p,m),vm(a,p,m,u),Tm(null,a,p,!0,i,u);case 19:return Ew(i,a,u);case 22:return pw(i,a,u)}throw Error(t(156,a.tag))};function Hw(i,a){return _a(i,a)}function d2(i,a,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(i,a,u,p){return new d2(i,a,u,p)}function Bm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function h2(i){if(typeof i=="function")return Bm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===j)return 11;if(i===xe)return 14}return 2}function bi(i,a){var u=i.alternate;return u===null?(u=ur(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function lh(i,a,u,p,m,w){var x=2;if(p=i,typeof i=="function")Bm(i)&&(x=1);else if(typeof i=="string")x=5;else e:switch(i){case N:return Fo(u.children,m,w,a);case b:x=8,m|=8;break;case k:return i=ur(12,u,a,m|2),i.elementType=k,i.lanes=w,i;case D:return i=ur(13,u,a,m),i.elementType=D,i.lanes=w,i;case le:return i=ur(19,u,a,m),i.elementType=le,i.lanes=w,i;case Te:return uh(u,m,w,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case L:x=10;break e;case M:x=9;break e;case j:x=11;break e;case xe:x=14;break e;case Re:x=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=ur(x,u,a,m),a.elementType=i,a.type=p,a.lanes=w,a}function Fo(i,a,u,p){return i=ur(7,i,p,a),i.lanes=u,i}function uh(i,a,u,p){return i=ur(22,i,p,a),i.elementType=Te,i.lanes=u,i.stateNode={isHidden:!1},i}function zm(i,a,u){return i=ur(6,i,null,a),i.lanes=u,i}function Wm(i,a,u){return a=ur(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function f2(i,a,u,p,m){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=di(0),this.expirationTimes=di(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=di(0),this.identifierPrefix=p,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Hm(i,a,u,p,m,w,x,O,F){return i=new f2(i,a,u,O,F),a===1?(a=1,w===!0&&(a|=8)):a=0,w=ur(3,null,null,a),i.current=w,w.stateNode=i,w.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},sm(w),i}function p2(i,a,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:p==null?null:""+p,children:i,containerInfo:a,implementation:u}}function qw(i){if(!i)return Ei;i=i._reactInternals;e:{if(wr(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Sn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(Sn(u))return w0(i,u,a)}return a}function Gw(i,a,u,p,m,w,x,O,F){return i=Hm(u,p,!0,i,m,w,x,O,F),i.context=qw(null),u=i.current,p=_n(),m=Ai(u),w=As(p,m),w.callback=a??null,Ci(u,w,m),i.current.lanes=m,hi(i,m,p),Pn(i,p),i}function ch(i,a,u,p){var m=a.current,w=_n(),x=Ai(m);return u=qw(u),a.context===null?a.context=u:a.pendingContext=u,a=As(w,x),a.payload={element:i},p=p===void 0?null:p,p!==null&&(a.callback=p),i=Ci(m,a,x),i!==null&&(Nr(i,m,x,w),$d(i,m,x)),x}function dh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Kw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function qm(i,a){Kw(i,a),(i=i.alternate)&&Kw(i,a)}function m2(){return null}var Qw=typeof reportError=="function"?reportError:function(i){console.error(i)};function Gm(i){this._internalRoot=i}hh.prototype.render=Gm.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));ch(i,a,null,null)},hh.prototype.unmount=Gm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Mo(function(){ch(null,i,null,null)}),a[Is]=null}};function hh(i){this._internalRoot=i}hh.prototype.unstable_scheduleHydration=function(i){if(i){var a=hd();i={blockedOn:null,target:i,priority:a};for(var u=0;u<qr.length&&a!==0&&a<qr[u].priority;u++);qr.splice(u,0,i),u===0&&md(i)}};function Km(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function fh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Yw(){}function g2(i,a,u,p,m){if(m){if(typeof p=="function"){var w=p;p=function(){var K=dh(x);w.call(K)}}var x=Gw(a,p,i,0,null,!1,!1,"",Yw);return i._reactRootContainer=x,i[Is]=x.current,yu(i.nodeType===8?i.parentNode:i),Mo(),x}for(;m=i.lastChild;)i.removeChild(m);if(typeof p=="function"){var O=p;p=function(){var K=dh(F);O.call(K)}}var F=Hm(i,0,!1,null,null,!1,!1,"",Yw);return i._reactRootContainer=F,i[Is]=F.current,yu(i.nodeType===8?i.parentNode:i),Mo(function(){ch(a,F,u,p)}),F}function ph(i,a,u,p,m){var w=u._reactRootContainer;if(w){var x=w;if(typeof m=="function"){var O=m;m=function(){var F=dh(x);O.call(F)}}ch(a,x,i,m)}else x=g2(u,a,i,m,p);return dh(x)}cd=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var u=ci(a.pendingLanes);u!==0&&(fi(a,u|1),Pn(a,nt()),(Ge&6)===0&&(Xa=nt()+500,Ti()))}break;case 13:Mo(function(){var p=Rs(i,1);if(p!==null){var m=_n();Nr(p,i,1,m)}}),qm(i,1)}},Ta=function(i){if(i.tag===13){var a=Rs(i,134217728);if(a!==null){var u=_n();Nr(a,i,134217728,u)}qm(i,134217728)}},dd=function(i){if(i.tag===13){var a=Ai(i),u=Rs(i,a);if(u!==null){var p=_n();Nr(u,i,a,p)}qm(i,a)}},hd=function(){return Fe},fd=function(i,a){var u=Fe;try{return Fe=i,a()}finally{Fe=u}},fa=function(i,a,u){switch(a){case"input":if(si(i,u),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var p=u[a];if(p!==i&&p.form===i.form){var m=kd(p);if(!m)throw Error(t(90));ti(p),si(p,m)}}}break;case"textarea":Br(i,u);break;case"select":a=u.value,a!=null&&Tn(i,!!u.multiple,a,!1)}},go=Fm,Jl=Mo;var y2={usingClientEntryPoint:!1,Events:[wu,Va,kd,Wr,Xl,Fm]},Ou={findFiberByHostInstance:Ao,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},v2={bundleType:Ou.bundleType,version:Ou.version,rendererPackageName:Ou.rendererPackageName,rendererConfig:Ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=tu(i),i===null?null:i.stateNode},findFiberByHostInstance:Ou.findFiberByHostInstance||m2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mh.isDisabled&&mh.supportsFiber)try{Eo=mh.inject(v2),Fn=mh}catch{}}return bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y2,bn.createPortal=function(i,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Km(a))throw Error(t(200));return p2(i,a,null,u)},bn.createRoot=function(i,a){if(!Km(i))throw Error(t(299));var u=!1,p="",m=Qw;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(m=a.onRecoverableError)),a=Hm(i,1,!1,null,null,u,!1,p,m),i[Is]=a.current,yu(i.nodeType===8?i.parentNode:i),new Gm(a)},bn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=tu(a),i=i===null?null:i.stateNode,i},bn.flushSync=function(i){return Mo(i)},bn.hydrate=function(i,a,u){if(!fh(a))throw Error(t(200));return ph(null,i,a,!0,u)},bn.hydrateRoot=function(i,a,u){if(!Km(i))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,m=!1,w="",x=Qw;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(x=u.onRecoverableError)),a=Gw(a,null,i,1,u??null,m,!1,w,x),i[Is]=a.current,yu(i),p)for(i=0;i<p.length;i++)u=p[i],m=u._getVersion,m=m(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,m]:a.mutableSourceEagerHydrationData.push(u,m);return new hh(a)},bn.render=function(i,a,u){if(!fh(a))throw Error(t(200));return ph(null,i,a,!1,u)},bn.unmountComponentAtNode=function(i){if(!fh(i))throw Error(t(40));return i._reactRootContainer?(Mo(function(){ph(null,null,i,!1,function(){i._reactRootContainer=null,i[Is]=null})}),!0):!1},bn.unstable_batchedUpdates=Fm,bn.unstable_renderSubtreeIntoContainer=function(i,a,u,p){if(!fh(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return ph(i,a,u,!1,p)},bn.version="18.3.1-next-f1338f8080-20240426",bn}var iE;function hC(){if(iE)return Xm.exports;iE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Xm.exports=R2(),Xm.exports}var oE;function A2(){if(oE)return gh;oE=1;var n=hC();return gh.createRoot=n.createRoot,gh.hydrateRoot=n.hydrateRoot,gh}var P2=A2(),Mu={},aE;function b2(){if(aE)return Mu;aE=1,Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.parse=l,Mu.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const E=function(){};return E.prototype=Object.create(null),E})();function l(E,C){const R=new o,A=E.length;if(A<2)return R;const S=(C==null?void 0:C.decode)||g;let V=0;do{const U=E.indexOf("=",V);if(U===-1)break;const $=E.indexOf(";",V),W=$===-1?A:$;if(U>W){V=E.lastIndexOf(";",U-1)+1;continue}const Y=c(E,V,U),X=h(E,U,Y),N=E.slice(Y,X);if(R[N]===void 0){let b=c(E,U+1,W),k=h(E,W,b);const L=S(E.slice(b,k));R[N]=L}V=W+1}while(V<A);return R}function c(E,C,R){do{const A=E.charCodeAt(C);if(A!==32&&A!==9)return C}while(++C<R);return R}function h(E,C,R){for(;C>R;){const A=E.charCodeAt(--C);if(A!==32&&A!==9)return C+1}return R}function f(E,C,R){const A=(R==null?void 0:R.encode)||encodeURIComponent;if(!n.test(E))throw new TypeError(`argument name is invalid: ${E}`);const S=A(C);if(!e.test(S))throw new TypeError(`argument val is invalid: ${C}`);let V=E+"="+S;if(!R)return V;if(R.maxAge!==void 0){if(!Number.isInteger(R.maxAge))throw new TypeError(`option maxAge is invalid: ${R.maxAge}`);V+="; Max-Age="+R.maxAge}if(R.domain){if(!t.test(R.domain))throw new TypeError(`option domain is invalid: ${R.domain}`);V+="; Domain="+R.domain}if(R.path){if(!r.test(R.path))throw new TypeError(`option path is invalid: ${R.path}`);V+="; Path="+R.path}if(R.expires){if(!_(R.expires)||!Number.isFinite(R.expires.valueOf()))throw new TypeError(`option expires is invalid: ${R.expires}`);V+="; Expires="+R.expires.toUTCString()}if(R.httpOnly&&(V+="; HttpOnly"),R.secure&&(V+="; Secure"),R.partitioned&&(V+="; Partitioned"),R.priority)switch(typeof R.priority=="string"?R.priority.toLowerCase():void 0){case"low":V+="; Priority=Low";break;case"medium":V+="; Priority=Medium";break;case"high":V+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${R.priority}`)}if(R.sameSite)switch(typeof R.sameSite=="string"?R.sameSite.toLowerCase():R.sameSite){case!0:case"strict":V+="; SameSite=Strict";break;case"lax":V+="; SameSite=Lax";break;case"none":V+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${R.sameSite}`)}return V}function g(E){if(E.indexOf("%")===-1)return E;try{return decodeURIComponent(E)}catch{return E}}function _(E){return s.call(E)==="[object Date]"}return Mu}b2();var lE="popstate";function k2(n={}){function e(r,s){let{pathname:o,search:l,hash:c}=r.location;return Lg("",{pathname:o,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:fc(s)}return D2(e,t,null,n)}function pt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Vr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function N2(){return Math.random().toString(36).substring(2,10)}function uE(n,e){return{usr:n.state,key:n.key,idx:e}}function Lg(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?bl(e):e,state:t,key:e&&e.key||r||N2()}}function fc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function bl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function D2(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,c="POP",h=null,f=g();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function g(){return(l.state||{idx:null}).idx}function _(){c="POP";let S=g(),V=S==null?null:S-f;f=S,h&&h({action:c,location:A.location,delta:V})}function E(S,V){c="PUSH";let U=Lg(A.location,S,V);f=g()+1;let $=uE(U,f),W=A.createHref(U);try{l.pushState($,"",W)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;s.location.assign(W)}o&&h&&h({action:c,location:A.location,delta:1})}function C(S,V){c="REPLACE";let U=Lg(A.location,S,V);f=g();let $=uE(U,f),W=A.createHref(U);l.replaceState($,"",W),o&&h&&h({action:c,location:A.location,delta:0})}function R(S){let V=s.location.origin!=="null"?s.location.origin:s.location.href,U=typeof S=="string"?S:fc(S);return U=U.replace(/ $/,"%20"),pt(V,`No window.location.(origin|href) available to create URL for href: ${U}`),new URL(U,V)}let A={get action(){return c},get location(){return n(s,l)},listen(S){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(lE,_),h=S,()=>{s.removeEventListener(lE,_),h=null}},createHref(S){return e(s,S)},createURL:R,encodeLocation(S){let V=R(S);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:E,replace:C,go(S){return l.go(S)}};return A}function fC(n,e,t="/"){return O2(n,e,t,!1)}function O2(n,e,t,r){let s=typeof e=="string"?bl(e):e,o=Bs(s.pathname||"/",t);if(o==null)return null;let l=pC(n);L2(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let f=q2(o);c=W2(l[h],f,r)}return c}function pC(n,e=[],t=[],r=""){let s=(o,l,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(pt(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length));let f=Fs([r,h.relativePath]),g=t.concat(h);o.children&&o.children.length>0&&(pt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),pC(o.children,e,g,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:B2(f,o.index),routesMeta:g})};return n.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,l);else for(let h of mC(o.path))s(o,l,h)}),e}function mC(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=mC(r.join("/")),c=[];return c.push(...l.map(h=>h===""?o:[o,h].join("/"))),s&&c.push(...l),c.map(h=>n.startsWith("/")&&h===""?"/":h)}function L2(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:z2(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var M2=/^:[\w-]+$/,j2=3,V2=2,F2=1,U2=10,$2=-2,cE=n=>n==="*";function B2(n,e){let t=n.split("/"),r=t.length;return t.some(cE)&&(r+=$2),e&&(r+=V2),t.filter(s=>!cE(s)).reduce((s,o)=>s+(M2.test(o)?j2:o===""?F2:U2),r)}function z2(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function W2(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",l=[];for(let c=0;c<r.length;++c){let h=r[c],f=c===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",_=Kh({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),E=h.route;if(!_&&f&&t&&!r[r.length-1].route.index&&(_=Kh({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!_)return null;Object.assign(s,_.params),l.push({params:s,pathname:Fs([o,_.pathname]),pathnameBase:Y2(Fs([o,_.pathnameBase])),route:E}),_.pathnameBase!=="/"&&(o=Fs([o,_.pathnameBase]))}return l}function Kh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=H2(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((f,{paramName:g,isOptional:_},E)=>{if(g==="*"){let R=c[E]||"";l=o.slice(0,o.length-R.length).replace(/(.)\/+$/,"$1")}const C=c[E];return _&&!C?f[g]=void 0:f[g]=(C||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:n}}function H2(n,e=!1,t=!0){Vr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(r.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function q2(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Bs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function G2(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?bl(n):n;return{pathname:t?t.startsWith("/")?t:K2(t,e):e,search:X2(r),hash:J2(s)}}function K2(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function eg(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Q2(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Fy(n){let e=Q2(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Uy(n,e,t,r=!1){let s;typeof n=="string"?s=bl(n):(s={...n},pt(!s.pathname||!s.pathname.includes("?"),eg("?","pathname","search",s)),pt(!s.pathname||!s.pathname.includes("#"),eg("#","pathname","hash",s)),pt(!s.search||!s.search.includes("#"),eg("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,c;if(l==null)c=t;else{let _=e.length-1;if(!r&&l.startsWith("..")){let E=l.split("/");for(;E[0]==="..";)E.shift(),_-=1;s.pathname=E.join("/")}c=_>=0?e[_]:"/"}let h=G2(s,c),f=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}var Fs=n=>n.join("/").replace(/\/\/+/g,"/"),Y2=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),X2=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,J2=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Z2(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var gC=["POST","PUT","PATCH","DELETE"];new Set(gC);var eb=["GET",...gC];new Set(eb);var kl=I.createContext(null);kl.displayName="DataRouter";var Nf=I.createContext(null);Nf.displayName="DataRouterState";var yC=I.createContext({isTransitioning:!1});yC.displayName="ViewTransition";var tb=I.createContext(new Map);tb.displayName="Fetchers";var nb=I.createContext(null);nb.displayName="Await";var Ur=I.createContext(null);Ur.displayName="Navigation";var Nc=I.createContext(null);Nc.displayName="Location";var $r=I.createContext({outlet:null,matches:[],isDataRoute:!1});$r.displayName="Route";var $y=I.createContext(null);$y.displayName="RouteError";function rb(n,{relative:e}={}){pt(Nl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=I.useContext(Ur),{hash:s,pathname:o,search:l}=Dc(n,{relative:e}),c=o;return t!=="/"&&(c=o==="/"?t:Fs([t,o])),r.createHref({pathname:c,search:l,hash:s})}function Nl(){return I.useContext(Nc)!=null}function Zs(){return pt(Nl(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Nc).location}var vC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _C(n){I.useContext(Ur).static||I.useLayoutEffect(n)}function jn(){let{isDataRoute:n}=I.useContext($r);return n?gb():sb()}function sb(){pt(Nl(),"useNavigate() may be used only in the context of a <Router> component.");let n=I.useContext(kl),{basename:e,navigator:t}=I.useContext(Ur),{matches:r}=I.useContext($r),{pathname:s}=Zs(),o=JSON.stringify(Fy(r)),l=I.useRef(!1);return _C(()=>{l.current=!0}),I.useCallback((h,f={})=>{if(Vr(l.current,vC),!l.current)return;if(typeof h=="number"){t.go(h);return}let g=Uy(h,JSON.parse(o),s,f.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Fs([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,o,s,n])}I.createContext(null);function By(){let{matches:n}=I.useContext($r),e=n[n.length-1];return e?e.params:{}}function Dc(n,{relative:e}={}){let{matches:t}=I.useContext($r),{pathname:r}=Zs(),s=JSON.stringify(Fy(t));return I.useMemo(()=>Uy(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function ib(n,e){return wC(n,e)}function wC(n,e,t,r){var U;pt(Nl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=I.useContext(Ur),{matches:l}=I.useContext($r),c=l[l.length-1],h=c?c.params:{},f=c?c.pathname:"/",g=c?c.pathnameBase:"/",_=c&&c.route;{let $=_&&_.path||"";EC(f,!_||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let E=Zs(),C;if(e){let $=typeof e=="string"?bl(e):e;pt(g==="/"||((U=$.pathname)==null?void 0:U.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${$.pathname}" was given in the \`location\` prop.`),C=$}else C=E;let R=C.pathname||"/",A=R;if(g!=="/"){let $=g.replace(/^\//,"").split("/");A="/"+R.replace(/^\//,"").split("/").slice($.length).join("/")}let S=!o&&t&&t.matches&&t.matches.length>0?t.matches:fC(n,{pathname:A});Vr(_||S!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Vr(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=cb(S&&S.map($=>Object.assign({},$,{params:Object.assign({},h,$.params),pathname:Fs([g,s.encodeLocation?s.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?g:Fs([g,s.encodeLocation?s.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),l,t,r);return e&&V?I.createElement(Nc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},V):V}function ob(){let n=mb(),e=Z2(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=I.createElement(I.Fragment,null,I.createElement("p",null,"💿 Hey developer 👋"),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:o},"ErrorBoundary")," or"," ",I.createElement("code",{style:o},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),t?I.createElement("pre",{style:s},t):null,l)}var ab=I.createElement(ob,null),lb=class extends I.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?I.createElement($r.Provider,{value:this.props.routeContext},I.createElement($y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ub({routeContext:n,match:e,children:t}){let r=I.useContext(kl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement($r.Provider,{value:n},t)}function cb(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t==null?void 0:t.errors;if(o!=null){let h=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);pt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let l=!1,c=-1;if(t)for(let h=0;h<s.length;h++){let f=s[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:g,errors:_}=t,E=f.route.loader&&!g.hasOwnProperty(f.route.id)&&(!_||_[f.route.id]===void 0);if(f.route.lazy||E){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((h,f,g)=>{let _,E=!1,C=null,R=null;t&&(_=o&&f.route.id?o[f.route.id]:void 0,C=f.route.errorElement||ab,l&&(c<0&&g===0?(EC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,R=null):c===g&&(E=!0,R=f.route.hydrateFallbackElement||null)));let A=e.concat(s.slice(0,g+1)),S=()=>{let V;return _?V=C:E?V=R:f.route.Component?V=I.createElement(f.route.Component,null):f.route.element?V=f.route.element:V=h,I.createElement(ub,{match:f,routeContext:{outlet:h,matches:A,isDataRoute:t!=null},children:V})};return t&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?I.createElement(lb,{location:t.location,revalidation:t.revalidation,component:C,error:_,children:S(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):S()},null)}function zy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function db(n){let e=I.useContext(kl);return pt(e,zy(n)),e}function hb(n){let e=I.useContext(Nf);return pt(e,zy(n)),e}function fb(n){let e=I.useContext($r);return pt(e,zy(n)),e}function Wy(n){let e=fb(n),t=e.matches[e.matches.length-1];return pt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function pb(){return Wy("useRouteId")}function mb(){var r;let n=I.useContext($y),e=hb("useRouteError"),t=Wy("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function gb(){let{router:n}=db("useNavigate"),e=Wy("useNavigate"),t=I.useRef(!1);return _C(()=>{t.current=!0}),I.useCallback(async(s,o={})=>{Vr(t.current,vC),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var dE={};function EC(n,e,t){!e&&!dE[n]&&(dE[n]=!0,Vr(!1,t))}I.memo(yb);function yb({routes:n,future:e,state:t}){return wC(n,void 0,t,e)}function TC({to:n,replace:e,state:t,relative:r}){pt(Nl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=I.useContext(Ur);Vr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=I.useContext($r),{pathname:l}=Zs(),c=jn(),h=Uy(n,Fy(o),l,r==="path"),f=JSON.stringify(h);return I.useEffect(()=>{c(JSON.parse(f),{replace:e,state:t,relative:r})},[c,f,r,e,t]),null}function St(n){pt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vb({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1}){pt(!Nl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=I.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof t=="string"&&(t=bl(t));let{pathname:h="/",search:f="",hash:g="",state:_=null,key:E="default"}=t,C=I.useMemo(()=>{let R=Bs(h,l);return R==null?null:{location:{pathname:R,search:f,hash:g,state:_,key:E},navigationType:r}},[l,h,f,g,_,E,r]);return Vr(C!=null,`<Router basename="${l}"> is not able to match the URL "${h}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:I.createElement(Ur.Provider,{value:c},I.createElement(Nc.Provider,{children:e,value:C}))}function _b({children:n,location:e}){return ib(Mg(n),e)}function Mg(n,e=[]){let t=[];return I.Children.forEach(n,(r,s)=>{if(!I.isValidElement(r))return;let o=[...e,s];if(r.type===I.Fragment){t.push.apply(t,Mg(r.props.children,o));return}pt(r.type===St,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Mg(r.props.children,o)),t.push(l)}),t}var Nh="get",Dh="application/x-www-form-urlencoded";function Df(n){return n!=null&&typeof n.tagName=="string"}function wb(n){return Df(n)&&n.tagName.toLowerCase()==="button"}function Eb(n){return Df(n)&&n.tagName.toLowerCase()==="form"}function Tb(n){return Df(n)&&n.tagName.toLowerCase()==="input"}function Ib(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Cb(n,e){return n.button===0&&(!e||e==="_self")&&!Ib(n)}var yh=null;function xb(){if(yh===null)try{new FormData(document.createElement("form"),0),yh=!1}catch{yh=!0}return yh}var Sb=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tg(n){return n!=null&&!Sb.has(n)?(Vr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Dh}"`),null):n}function Rb(n,e){let t,r,s,o,l;if(Eb(n)){let c=n.getAttribute("action");r=c?Bs(c,e):null,t=n.getAttribute("method")||Nh,s=tg(n.getAttribute("enctype"))||Dh,o=new FormData(n)}else if(wb(n)||Tb(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||c.getAttribute("action");if(r=h?Bs(h,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Nh,s=tg(n.getAttribute("formenctype"))||tg(c.getAttribute("enctype"))||Dh,o=new FormData(c,n),!xb()){let{name:f,type:g,value:_}=n;if(g==="image"){let E=f?`${f}.`:"";o.append(`${E}x`,"0"),o.append(`${E}y`,"0")}else f&&o.append(f,_)}}else{if(Df(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Nh,r=null,s=Dh,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:l}}function Hy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function Ab(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Pb(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function bb(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await Ab(o,t);return l.links?l.links():[]}return[]}));return Ob(r.flat(1).filter(Pb).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function hE(n,e,t,r,s,o){let l=(h,f)=>t[f]?h.route.id!==t[f].route.id:!0,c=(h,f)=>{var g;return t[f].pathname!==h.pathname||((g=t[f].route.path)==null?void 0:g.endsWith("*"))&&t[f].params["*"]!==h.params["*"]};return o==="assets"?e.filter((h,f)=>l(h,f)||c(h,f)):o==="data"?e.filter((h,f)=>{var _;let g=r.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(l(h,f)||c(h,f))return!0;if(h.route.shouldRevalidate){let E=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((_=t[0])==null?void 0:_.params)||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function kb(n,e,{includeHydrateFallback:t}={}){return Nb(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function Nb(n){return[...new Set(n)]}function Db(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function Ob(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(Db(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}var Lb=new Set([100,101,204,205]);function Mb(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Bs(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function IC(){let n=I.useContext(kl);return Hy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function jb(){let n=I.useContext(Nf);return Hy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var qy=I.createContext(void 0);qy.displayName="FrameworkContext";function CC(){let n=I.useContext(qy);return Hy(n,"You must render this element inside a <HydratedRouter> element"),n}function Vb(n,e){let t=I.useContext(qy),[r,s]=I.useState(!1),[o,l]=I.useState(!1),{onFocus:c,onBlur:h,onMouseEnter:f,onMouseLeave:g,onTouchStart:_}=e,E=I.useRef(null);I.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let A=V=>{V.forEach(U=>{l(U.isIntersecting)})},S=new IntersectionObserver(A,{threshold:.5});return E.current&&S.observe(E.current),()=>{S.disconnect()}}},[n]),I.useEffect(()=>{if(r){let A=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(A)}}},[r]);let C=()=>{s(!0)},R=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,E,{}]:[o,E,{onFocus:ju(c,C),onBlur:ju(h,R),onMouseEnter:ju(f,C),onMouseLeave:ju(g,R),onTouchStart:ju(_,C)}]:[!1,E,{}]}function ju(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Fb({page:n,...e}){let{router:t}=IC(),r=I.useMemo(()=>fC(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?I.createElement($b,{page:n,matches:r,...e}):null}function Ub(n){let{manifest:e,routeModules:t}=CC(),[r,s]=I.useState([]);return I.useEffect(()=>{let o=!1;return bb(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),r}function $b({page:n,matches:e,...t}){let r=Zs(),{manifest:s,routeModules:o}=CC(),{basename:l}=IC(),{loaderData:c,matches:h}=jb(),f=I.useMemo(()=>hE(n,e,h,s,r,"data"),[n,e,h,s,r]),g=I.useMemo(()=>hE(n,e,h,s,r,"assets"),[n,e,h,s,r]),_=I.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let R=new Set,A=!1;if(e.forEach(V=>{var $;let U=s.routes[V.route.id];!U||!U.hasLoader||(!f.some(W=>W.route.id===V.route.id)&&V.route.id in c&&(($=o[V.route.id])!=null&&$.shouldRevalidate)||U.hasClientLoader?A=!0:R.add(V.route.id))}),R.size===0)return[];let S=Mb(n,l);return A&&R.size>0&&S.searchParams.set("_routes",e.filter(V=>R.has(V.route.id)).map(V=>V.route.id).join(",")),[S.pathname+S.search]},[l,c,r,s,f,e,n,o]),E=I.useMemo(()=>kb(g,s),[g,s]),C=Ub(g);return I.createElement(I.Fragment,null,_.map(R=>I.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...t})),E.map(R=>I.createElement("link",{key:R,rel:"modulepreload",href:R,...t})),C.map(({key:R,link:A})=>I.createElement("link",{key:R,...A})))}function Bb(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var xC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{xC&&(window.__reactRouterVersion="7.5.3")}catch{}function zb({basename:n,children:e,window:t}){let r=I.useRef();r.current==null&&(r.current=k2({window:t,v5Compat:!0}));let s=r.current,[o,l]=I.useState({action:s.action,location:s.location}),c=I.useCallback(h=>{I.startTransition(()=>l(h))},[l]);return I.useLayoutEffect(()=>s.listen(c),[s,c]),I.createElement(vb,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var SC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wt=I.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:c,target:h,to:f,preventScrollReset:g,viewTransition:_,...E},C){let{basename:R}=I.useContext(Ur),A=typeof f=="string"&&SC.test(f),S,V=!1;if(typeof f=="string"&&A&&(S=f,xC))try{let k=new URL(window.location.href),L=f.startsWith("//")?new URL(k.protocol+f):new URL(f),M=Bs(L.pathname,R);L.origin===k.origin&&M!=null?f=M+L.search+L.hash:V=!0}catch{Vr(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let U=rb(f,{relative:s}),[$,W,Y]=Vb(r,E),X=Gb(f,{replace:l,state:c,target:h,preventScrollReset:g,relative:s,viewTransition:_});function N(k){e&&e(k),k.defaultPrevented||X(k)}let b=I.createElement("a",{...E,...Y,href:S||U,onClick:V||o?e:N,ref:Bb(C,W),target:h,"data-discover":!A&&t==="render"?"true":void 0});return $&&!A?I.createElement(I.Fragment,null,b,I.createElement(Fb,{page:U})):b});wt.displayName="Link";var Wb=I.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:c,children:h,...f},g){let _=Dc(l,{relative:f.relative}),E=Zs(),C=I.useContext(Nf),{navigator:R,basename:A}=I.useContext(Ur),S=C!=null&&Jb(_)&&c===!0,V=R.encodeLocation?R.encodeLocation(_).pathname:_.pathname,U=E.pathname,$=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(U=U.toLowerCase(),$=$?$.toLowerCase():null,V=V.toLowerCase()),$&&A&&($=Bs($,A)||$);const W=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let Y=U===V||!s&&U.startsWith(V)&&U.charAt(W)==="/",X=$!=null&&($===V||!s&&$.startsWith(V)&&$.charAt(V.length)==="/"),N={isActive:Y,isPending:X,isTransitioning:S},b=Y?e:void 0,k;typeof r=="function"?k=r(N):k=[r,Y?"active":null,X?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let L=typeof o=="function"?o(N):o;return I.createElement(wt,{...f,"aria-current":b,className:k,ref:g,style:L,to:l,viewTransition:c},typeof h=="function"?h(N):h)});Wb.displayName="NavLink";var Hb=I.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:l=Nh,action:c,onSubmit:h,relative:f,preventScrollReset:g,viewTransition:_,...E},C)=>{let R=Yb(),A=Xb(c,{relative:f}),S=l.toLowerCase()==="get"?"get":"post",V=typeof c=="string"&&SC.test(c),U=$=>{if(h&&h($),$.defaultPrevented)return;$.preventDefault();let W=$.nativeEvent.submitter,Y=(W==null?void 0:W.getAttribute("formmethod"))||l;R(W||$.currentTarget,{fetcherKey:e,method:Y,navigate:t,replace:s,state:o,relative:f,preventScrollReset:g,viewTransition:_})};return I.createElement("form",{ref:C,method:S,action:A,onSubmit:r?h:U,...E,"data-discover":!V&&n==="render"?"true":void 0})});Hb.displayName="Form";function qb(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RC(n){let e=I.useContext(kl);return pt(e,qb(n)),e}function Gb(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:l}={}){let c=jn(),h=Zs(),f=Dc(n,{relative:o});return I.useCallback(g=>{if(Cb(g,e)){g.preventDefault();let _=t!==void 0?t:fc(h)===fc(f);c(n,{replace:_,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[h,c,f,t,r,e,n,s,o,l])}var Kb=0,Qb=()=>`__${String(++Kb)}__`;function Yb(){let{router:n}=RC("useSubmit"),{basename:e}=I.useContext(Ur),t=pb();return I.useCallback(async(r,s={})=>{let{action:o,method:l,encType:c,formData:h,body:f}=Rb(r,e);if(s.navigate===!1){let g=s.fetcherKey||Qb();await n.fetch(g,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:h,body:f,formMethod:s.method||l,formEncType:s.encType||c,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:h,body:f,formMethod:s.method||l,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function Xb(n,{relative:e}={}){let{basename:t}=I.useContext(Ur),r=I.useContext($r);pt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...Dc(n||".",{relative:e})},l=Zs();if(n==null){o.search=l.search;let c=new URLSearchParams(o.search),h=c.getAll("index");if(h.some(g=>g==="")){c.delete("index"),h.filter(_=>_).forEach(_=>c.append("index",_));let g=c.toString();o.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Fs([t,o.pathname])),fc(o)}function Jb(n,e={}){let t=I.useContext(yC);pt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=RC("useViewTransitionState"),s=Dc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Bs(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=Bs(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Kh(s.pathname,l)!=null||Kh(s.pathname,o)!=null}new TextEncoder;[...Lb];var Gy=hC();const Zb=kc(Gy),ek=()=>{};var fE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce=function(n,e){if(!n)throw Dl(e)},Dl=function(n){return new Error("Firebase Database ("+AC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},tk=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],c=n[t++],h=((s&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Ky={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,c=l?n[s+1]:0,h=s+2<n.length,f=h?n[s+2]:0,g=o>>2,_=(o&3)<<4|c>>4;let E=(c&15)<<2|f>>6,C=f&63;h||(C=64,l||(E=64)),r.push(t[g],t[_],t[E],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(PC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):tk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const f=s<n.length?t[n.charAt(s)]:64;++s;const _=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||c==null||f==null||_==null)throw new nk;const E=o<<2|c>>4;if(r.push(E),f!==64){const C=c<<4&240|f>>2;if(r.push(C),_!==64){const R=f<<6&192|_;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class nk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bC=function(n){const e=PC(n);return Ky.encodeByteArray(e,!0)},Qh=function(n){return bC(n).replace(/\./g,"")},Yh=function(n){try{return Ky.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(n){return kC(void 0,n)}function kC(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!sk(t)||(n[t]=kC(n[t],e[t]));return n}function sk(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=()=>ik().__FIREBASE_DEFAULTS__,ak=()=>{if(typeof process>"u"||typeof fE>"u")return;const n=fE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},lk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Yh(n[1]);return e&&JSON.parse(e)},Of=()=>{try{return ek()||ok()||ak()||lk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},NC=n=>{var e,t;return(t=(e=Of())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Qy=n=>{const e=NC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},DC=()=>{var n;return(n=Of())===null||n===void 0?void 0:n.config},OC=n=>{var e;return(e=Of())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Qh(JSON.stringify(t)),Qh(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Jy(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function uk(){var n;const e=(n=Of())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ck(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function LC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hk(){const n=mn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function fk(){return AC.NODE_ADMIN===!0}function pk(){return!uk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mk(){try{return typeof indexedDB=="object"}catch{return!1}}function gk(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk="FirebaseError";class ds extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=yk,Object.setPrototypeOf(this,ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oc.prototype.create)}}class Oc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?vk(o,r):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new ds(s,c,r)}}function vk(n,e){return n.replace(_k,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const _k=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(n){return JSON.parse(n)}function Zt(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=function(n){let e={},t={},r={},s="";try{const o=n.split(".");e=pc(Yh(o[0])||""),t=pc(Yh(o[1])||""),s=o[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:s}},wk=function(n){const e=MC(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},Ek=function(n){const e=MC(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function gl(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function jg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Xh(n,e,t){const r={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=e.call(t,n[s],s,n));return r}function Gi(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],l=e[s];if(pE(o)&&pE(l)){if(!Gi(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function pE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Gu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)r[_]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let _=0;_<16;_++)r[_]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let _=16;_<80;_++){const E=r[_-3]^r[_-8]^r[_-14]^r[_-16];r[_]=(E<<1|E>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],l=this.chain_[2],c=this.chain_[3],h=this.chain_[4],f,g;for(let _=0;_<80;_++){_<40?_<20?(f=c^o&(l^c),g=1518500249):(f=o^l^c,g=1859775393):_<60?(f=o&l|c&(o|l),g=2400959708):(f=o^l^c,g=3395469782);const E=(s<<5|s>>>27)+f+h+g+r[_]&4294967295;h=c,c=l,l=(o<<30|o>>>2)&4294967295,o=s,s=E}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const r=t-this.blockSize;let s=0;const o=this.buf_;let l=this.inbuf_;for(;s<t;){if(l===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(o[l]=e.charCodeAt(s),++l,++s,l===this.blockSize){this.compress_(o),l=0;break}}else for(;s<t;)if(o[l]=e[s],++l,++s,l===this.blockSize){this.compress_(o),l=0;break}}this.inbuf_=l,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[s]>>o&255,++r;return e}}function Ik(n,e){const t=new Ck(n,e);return t.subscribe.bind(t)}class Ck{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");xk(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=ng),s.error===void 0&&(s.error=ng),s.complete===void 0&&(s.complete=ng);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ng(){}function Sk(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);if(s>=55296&&s<=56319){const o=s-55296;r++,ce(r<n.length,"Surrogate pair missing trail surrogate.");const l=n.charCodeAt(r)-56320;s=65536+(o<<10)+l}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Lf=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(n){return n&&n._delegate?n._delegate:n}class zs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ak=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Yy;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bk(e))try{this.getOrInitializeService({instanceIdentifier:Uo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Uo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Uo){return this.instances.has(e)}getOptions(e=Uo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Pk(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Uo){return this.component?this.component.multipleInstances?e:Uo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Pk(n){return n===Uo?void 0:n}function bk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ak(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const Nk={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},Dk=Me.INFO,Ok={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},Lk=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=Ok[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mf{constructor(e){this.name=e,this._logLevel=Dk,this._logHandler=Lk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Nk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const Mk=(n,e)=>e.some(t=>n instanceof t);let mE,gE;function jk(){return mE||(mE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Vk(){return gE||(gE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jC=new WeakMap,Vg=new WeakMap,VC=new WeakMap,rg=new WeakMap,Zy=new WeakMap;function Fk(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(Ui(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&jC.set(t,n)}).catch(()=>{}),Zy.set(e,n),e}function Uk(n){if(Vg.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});Vg.set(n,e)}let Fg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Vg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||VC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ui(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function $k(n){Fg=n(Fg)}function Bk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(sg(this),e,...t);return VC.set(r,e.sort?e.sort():[e]),Ui(r)}:Vk().includes(n)?function(...e){return n.apply(sg(this),e),Ui(jC.get(this))}:function(...e){return Ui(n.apply(sg(this),e))}}function zk(n){return typeof n=="function"?Bk(n):(n instanceof IDBTransaction&&Uk(n),Mk(n,jk())?new Proxy(n,Fg):n)}function Ui(n){if(n instanceof IDBRequest)return Fk(n);if(rg.has(n))return rg.get(n);const e=zk(n);return e!==n&&(rg.set(n,e),Zy.set(e,n)),e}const sg=n=>Zy.get(n);function Wk(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),c=Ui(l);return r&&l.addEventListener("upgradeneeded",h=>{r(Ui(l.result),h.oldVersion,h.newVersion,Ui(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const Hk=["get","getKey","getAll","getAllKeys","count"],qk=["put","add","delete","clear"],ig=new Map;function yE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ig.get(e))return ig.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=qk.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Hk.includes(t)))return;const o=async function(l,...c){const h=this.transaction(l,s?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(c.shift())),(await Promise.all([f[t](...c),s&&h.done]))[0]};return ig.set(e,o),o}$k(n=>({...n,get:(e,t,r)=>yE(e,t)||n.get(e,t,r),has:(e,t)=>!!yE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Kk(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Kk(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ug="@firebase/app",vE="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new Mf("@firebase/app"),Qk="@firebase/app-compat",Yk="@firebase/analytics-compat",Xk="@firebase/analytics",Jk="@firebase/app-check-compat",Zk="@firebase/app-check",eN="@firebase/auth",tN="@firebase/auth-compat",nN="@firebase/database",rN="@firebase/data-connect",sN="@firebase/database-compat",iN="@firebase/functions",oN="@firebase/functions-compat",aN="@firebase/installations",lN="@firebase/installations-compat",uN="@firebase/messaging",cN="@firebase/messaging-compat",dN="@firebase/performance",hN="@firebase/performance-compat",fN="@firebase/remote-config",pN="@firebase/remote-config-compat",mN="@firebase/storage",gN="@firebase/storage-compat",yN="@firebase/firestore",vN="@firebase/vertexai",_N="@firebase/firestore-compat",wN="firebase",EN="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="[DEFAULT]",TN={[Ug]:"fire-core",[Qk]:"fire-core-compat",[Xk]:"fire-analytics",[Yk]:"fire-analytics-compat",[Zk]:"fire-app-check",[Jk]:"fire-app-check-compat",[eN]:"fire-auth",[tN]:"fire-auth-compat",[nN]:"fire-rtdb",[rN]:"fire-data-connect",[sN]:"fire-rtdb-compat",[iN]:"fire-fn",[oN]:"fire-fn-compat",[aN]:"fire-iid",[lN]:"fire-iid-compat",[uN]:"fire-fcm",[cN]:"fire-fcm-compat",[dN]:"fire-perf",[hN]:"fire-perf-compat",[fN]:"fire-rc",[pN]:"fire-rc-compat",[mN]:"fire-gcs",[gN]:"fire-gcs-compat",[yN]:"fire-fst",[_N]:"fire-fst-compat",[vN]:"fire-vertex","fire-js":"fire-js",[wN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh=new Map,IN=new Map,Bg=new Map;function _E(n,e){try{n.container.addComponent(e)}catch(t){Ws.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ki(n){const e=n.name;if(Bg.has(e))return Ws.debug(`There were multiple attempts to register component ${e}.`),!1;Bg.set(e,n);for(const t of Jh.values())_E(t,n);for(const t of IN.values())_E(t,n);return!0}function Lc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function hn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$i=new Oc("app","Firebase",CN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $i.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=EN;function FC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:$g,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw $i.create("bad-app-name",{appName:String(s)});if(t||(t=DC()),!t)throw $i.create("no-options");const o=Jh.get(s);if(o){if(Gi(t,o.options)&&Gi(r,o.config))return o;throw $i.create("duplicate-app",{appName:s})}const l=new kk(s);for(const h of Bg.values())l.addComponent(h);const c=new xN(t,r,l);return Jh.set(s,c),c}function jf(n=$g){const e=Jh.get(n);if(!e&&n===$g&&DC())return FC();if(!e)throw $i.create("no-app",{appName:n});return e}function dr(n,e,t){var r;let s=(r=TN[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ws.warn(c.join(" "));return}Ki(new zs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN="firebase-heartbeat-database",RN=1,mc="firebase-heartbeat-store";let og=null;function UC(){return og||(og=Wk(SN,RN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(mc)}catch(t){console.warn(t)}}}}).catch(n=>{throw $i.create("idb-open",{originalErrorMessage:n.message})})),og}async function AN(n){try{const t=(await UC()).transaction(mc),r=await t.objectStore(mc).get($C(n));return await t.done,r}catch(e){if(e instanceof ds)Ws.warn(e.message);else{const t=$i.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ws.warn(t.message)}}}async function wE(n,e){try{const r=(await UC()).transaction(mc,"readwrite");await r.objectStore(mc).put(e,$C(n)),await r.done}catch(t){if(t instanceof ds)Ws.warn(t.message);else{const r=$i.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ws.warn(r.message)}}}function $C(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=1024,bN=30;class kN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new DN(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=EE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>bN){const l=ON(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ws.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=EE(),{heartbeatsToSend:r,unsentEntries:s}=NN(this._heartbeatsCache.heartbeats),o=Qh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ws.warn(t),""}}}function EE(){return new Date().toISOString().substring(0,10)}function NN(n,e=PN){const t=[];let r=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),TE(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),TE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class DN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mk()?gk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await AN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return wE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return wE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function TE(n){return Qh(JSON.stringify({version:2,heartbeats:n})).length}function ON(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(n){Ki(new zs("platform-logger",e=>new Gk(e),"PRIVATE")),Ki(new zs("heartbeat",e=>new kN(e),"PRIVATE")),dr(Ug,vE,n),dr(Ug,vE,"esm2017"),dr("fire-js","")}LN("");function ev(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function BC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MN=BC,zC=new Oc("auth","Firebase",BC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh=new Mf("@firebase/auth");function jN(n,...e){Zh.logLevel<=Me.WARN&&Zh.warn(`Auth (${so}): ${n}`,...e)}function Oh(n,...e){Zh.logLevel<=Me.ERROR&&Zh.error(`Auth (${so}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(n,...e){throw nv(n,...e)}function Lr(n,...e){return nv(n,...e)}function tv(n,e,t){const r=Object.assign(Object.assign({},MN()),{[e]:t});return new Oc("auth","Firebase",r).create(e,{appName:n.name})}function ss(n){return tv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function VN(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&fr(n,"argument-error"),tv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return zC.create(n,...e)}function Ce(n,e,...t){if(!n)throw nv(e,...t)}function Ls(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Oh(e),new Error(e)}function Hs(n,e){n||Ls(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function FN(){return IE()==="http:"||IE()==="https:"}function IE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FN()||dk()||"connection"in navigator)?navigator.onLine:!0}function $N(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Hs(t>e,"Short delay should be less than long delay!"),this.isMobile=Jy()||LC()}get(){return UN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(n,e){Hs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ls("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ls("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ls("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=new Mc(3e4,6e4);function io(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function hs(n,e,t,r,s={}){return HC(n,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=Ol(Object.assign({key:n.config.apiKey},l)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:h},o);return ck()||(f.referrerPolicy="no-referrer"),WC.fetch()(qC(n,n.config.apiHost,t,c),f)})}async function HC(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},BN),e);try{const s=new HN(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw vh(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,f]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw vh(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw vh(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw vh(n,"user-disabled",l);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw tv(n,g,f);fr(n,g)}}catch(s){if(s instanceof ds)throw s;fr(n,"network-request-failed",{message:String(s)})}}async function jc(n,e,t,r,s={}){const o=await hs(n,e,t,r,s);return"mfaPendingCredential"in o&&fr(n,"multi-factor-auth-required",{_serverResponse:o}),o}function qC(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?rv(n.config,s):`${n.config.apiScheme}://${s}`}function WN(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Lr(this.auth,"network-request-failed")),zN.get())})}}function vh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Lr(n,e,r);return s.customData._tokenResponse=t,s}function CE(n){return n!==void 0&&n.enterprise!==void 0}class qN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return WN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function GN(n,e){return hs(n,"GET","/v2/recaptchaConfig",io(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(n,e){return hs(n,"POST","/v1/accounts:delete",e)}async function GC(n,e){return hs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QN(n,e=!1){const t=st(n),r=await t.getIdToken(e),s=Vf(r);Ce(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Ju(ag(s.auth_time)),issuedAtTime:Ju(ag(s.iat)),expirationTime:Ju(ag(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function ag(n){return Number(n)*1e3}function Vf(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Oh("JWT malformed, contained fewer than 3 sections"),null;try{const s=Yh(t);return s?JSON.parse(s):(Oh("Failed to decode base64 JWT payload"),null)}catch(s){return Oh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function xE(n){const e=Vf(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ds&&YN(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function YN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ju(this.lastLoginAt),this.creationTime=Ju(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ef(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Ko(n,GC(t,{idToken:r}));Ce(s==null?void 0:s.users.length,t,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?KC(o.providerUserInfo):[],c=ZN(n.providerData,l),h=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),g=h?f:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Wg(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,_)}async function JN(n){const e=st(n);await ef(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZN(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function KC(n){return n.map(e=>{var{providerId:t}=e,r=ev(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eD(n,e){const t=await HC(n,{},async()=>{const r=Ol({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=qC(n,s,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",WC.fetch()(l,{method:"POST",headers:c,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function tD(n,e){return hs(n,"POST","/v2/accounts:revokeToken",io(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=xE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await eD(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,l=new ol;return r&&(Ce(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Ce(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Ce(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ol,this.toJSON())}_performRefresh(){return Ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ms{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,o=ev(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Wg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Ko(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return QN(this,e)}reload(){return JN(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ms(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ef(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hn(this.auth.app))return Promise.reject(ss(this.auth));const e=await this.getIdToken();return await Ko(this,KN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,o,l,c,h,f,g;const _=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(s=t.email)!==null&&s!==void 0?s:void 0,C=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,R=(l=t.photoURL)!==null&&l!==void 0?l:void 0,A=(c=t.tenantId)!==null&&c!==void 0?c:void 0,S=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,V=(f=t.createdAt)!==null&&f!==void 0?f:void 0,U=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:$,emailVerified:W,isAnonymous:Y,providerData:X,stsTokenManager:N}=t;Ce($&&N,e,"internal-error");const b=ol.fromJSON(this.name,N);Ce(typeof $=="string",e,"internal-error"),Ni(_,e.name),Ni(E,e.name),Ce(typeof W=="boolean",e,"internal-error"),Ce(typeof Y=="boolean",e,"internal-error"),Ni(C,e.name),Ni(R,e.name),Ni(A,e.name),Ni(S,e.name),Ni(V,e.name),Ni(U,e.name);const k=new Ms({uid:$,auth:e,email:E,emailVerified:W,displayName:_,isAnonymous:Y,photoURL:R,phoneNumber:C,tenantId:A,stsTokenManager:b,createdAt:V,lastLoginAt:U});return X&&Array.isArray(X)&&(k.providerData=X.map(L=>Object.assign({},L))),S&&(k._redirectEventId=S),k}static async _fromIdTokenResponse(e,t,r=!1){const s=new ol;s.updateFromServerResponse(t);const o=new Ms({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ef(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Ce(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?KC(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),c=new ol;c.updateFromIdToken(r);const h=new Ms({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Wg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=new Map;function js(n){Hs(n instanceof Function,"Expected a class definition");let e=SE.get(n);return e?(Hs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,SE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}QC.type="NONE";const RE=QC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(n,e,t){return`firebase:${n}:${e}:${t}`}class al{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Lh(this.userKey,s.apiKey,o),this.fullPersistenceKey=Lh("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ms._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new al(js(RE),e,r);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||js(RE);const l=Lh(r,e.config.apiKey,e.name);let c=null;for(const f of t)try{const g=await f._get(l);if(g){const _=Ms._fromJSON(e,g);f!==o&&(c=_),o=f;break}}catch{}const h=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new al(o,e,r):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new al(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tx(e))return"Blackberry";if(nx(e))return"Webos";if(XC(e))return"Safari";if((e.includes("chrome/")||JC(e))&&!e.includes("edge/"))return"Chrome";if(ex(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function YC(n=mn()){return/firefox\//i.test(n)}function XC(n=mn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function JC(n=mn()){return/crios\//i.test(n)}function ZC(n=mn()){return/iemobile/i.test(n)}function ex(n=mn()){return/android/i.test(n)}function tx(n=mn()){return/blackberry/i.test(n)}function nx(n=mn()){return/webos/i.test(n)}function sv(n=mn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function nD(n=mn()){var e;return sv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rD(){return hk()&&document.documentMode===10}function rx(n=mn()){return sv(n)||ex(n)||nx(n)||tx(n)||/windows phone/i.test(n)||ZC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(n,e=[]){let t;switch(n){case"Browser":t=AE(mn());break;case"Worker":t=`${AE(mn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${so}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iD(n,e={}){return hs(n,"GET","/v2/passwordPolicy",io(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=6;class aD{constructor(e){var t,r,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:oD,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,o,l,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(s=h.containsLowercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new PE(this),this.idTokenSubscription=new PE(this),this.beforeStateQueue=new sD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=js(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await al.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await GC(this,{idToken:e}),r=await Ms._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(hn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=s==null?void 0:s._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&(h!=null&&h.user)&&(s=h.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ef(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$N()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hn(this.app))return Promise.reject(ss(this));const t=e?st(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hn(this.app)?Promise.reject(ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hn(this.app)?Promise.reject(ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(js(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iD(this),t=new aD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Oc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await tD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&js(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await al.create(this,[js(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,s);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&jN(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function oo(n){return st(n)}class PE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ik(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ff={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uD(n){Ff=n}function ix(n){return Ff.loadJS(n)}function cD(){return Ff.recaptchaEnterpriseScript}function dD(){return Ff.gapiScript}function hD(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class fD{constructor(){this.enterprise=new pD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class pD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const mD="recaptcha-enterprise",ox="NO_RECAPTCHA";class gD{constructor(e){this.type=mD,this.auth=oo(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{GN(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new qN(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(h=>{c(h)})})}function s(o,l,c){const h=window.grecaptcha;CE(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(ox)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fD().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!t&&CE(window.grecaptcha))s(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=cD();h.length!==0&&(h+=c),ix(h).then(()=>{s(c,o,l)}).catch(f=>{l(f)})}}).catch(c=>{l(c)})})}}async function bE(n,e,t,r=!1,s=!1){const o=new gD(n);let l;if(s)l=ox;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const c=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Hg(n,e,t,r,s){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await bE(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await bE(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(n,e){const t=Lc(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(Gi(o,e??{}))return s;fr(s,"already-initialized")}return t.initialize({options:e})}function vD(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(js);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function _D(n,e,t){const r=oo(n);Ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=ax(e),{host:l,port:c}=wD(e),h=c===null?"":`:${c}`,f={url:`${o}//${l}${h}/`},g=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ce(Gi(f,r.config.emulator)&&Gi(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,ED()}function ax(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function wD(n){const e=ax(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:kE(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:kE(l)}}}function kE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ED(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ls("not implemented")}_getIdTokenResponse(e){return Ls("not implemented")}_linkToIdToken(e,t){return Ls("not implemented")}_getReauthenticationResolver(e){return Ls("not implemented")}}async function TD(n,e){return hs(n,"POST","/v1/accounts:update",e)}async function ID(n,e){return hs(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CD(n,e){return jc(n,"POST","/v1/accounts:signInWithPassword",io(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xD(n,e){return jc(n,"POST","/v1/accounts:signInWithEmailLink",io(n,e))}async function SD(n,e){return jc(n,"POST","/v1/accounts:signInWithEmailLink",io(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends iv{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new gc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new gc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hg(e,t,"signInWithPassword",CD);case"emailLink":return xD(e,{email:this._email,oobCode:this._password});default:fr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hg(e,r,"signUpPassword",ID);case"emailLink":return SD(e,{idToken:t,email:this._email,oobCode:this._password});default:fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(n,e){return jc(n,"POST","/v1/accounts:signInWithIdp",io(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD="http://localhost";class Qo extends iv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Qo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,o=ev(t,["providerId","signInMethod"]);if(!r||!s)return null;const l=new Qo(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return ll(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ll(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ll(e,t)}buildRequest(){const e={requestUri:RD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ol(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PD(n){const e=qu(Gu(n)).link,t=e?qu(Gu(e)).deep_link_id:null,r=qu(Gu(n)).deep_link_id;return(r?qu(Gu(r)).link:null)||r||t||e||n}class ov{constructor(e){var t,r,s,o,l,c;const h=qu(Gu(e)),f=(t=h.apiKey)!==null&&t!==void 0?t:null,g=(r=h.oobCode)!==null&&r!==void 0?r:null,_=AD((s=h.mode)!==null&&s!==void 0?s:null);Ce(f&&g&&_,"argument-error"),this.apiKey=f,this.operation=_,this.code=g,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=h.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(c=h.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=PD(e);try{return new ov(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(){this.providerId=Ll.PROVIDER_ID}static credential(e,t){return gc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=ov.parseLink(t);return Ce(r,"argument-error"),gc._fromEmailAndCode(e,r.code,r.tenantId)}}Ll.PROVIDER_ID="password";Ll.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ll.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends av{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Vc{constructor(){super("facebook.com")}static credential(e){return Qo._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch{return null}}}Li.FACEBOOK_SIGN_IN_METHOD="facebook.com";Li.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Vc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Qo._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ts.credential(t,r)}catch{return null}}}ts.GOOGLE_SIGN_IN_METHOD="google.com";ts.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Vc{constructor(){super("github.com")}static credential(e){return Qo._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mi.credential(e.oauthAccessToken)}catch{return null}}}Mi.GITHUB_SIGN_IN_METHOD="github.com";Mi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends Vc{constructor(){super("twitter.com")}static credential(e,t){return Qo._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ji.credential(t,r)}catch{return null}}}ji.TWITTER_SIGN_IN_METHOD="twitter.com";ji.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bD(n,e){return jc(n,"POST","/v1/accounts:signUp",io(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await Ms._fromIdTokenResponse(e,r,s),l=NE(r);return new Yo({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=NE(r);return new Yo({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function NE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf extends ds{constructor(e,t,r,s){var o;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,tf.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new tf(e,t,r,s)}}function lx(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?tf._fromErrorAndOperation(n,o,e,r):o})}async function kD(n,e,t=!1){const r=await Ko(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Yo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ND(n,e,t=!1){const{auth:r}=n;if(hn(r.app))return Promise.reject(ss(r));const s="reauthenticate";try{const o=await Ko(n,lx(r,s,e,n),t);Ce(o.idToken,r,"internal-error");const l=Vf(o.idToken);Ce(l,r,"internal-error");const{sub:c}=l;return Ce(n.uid===c,r,"user-mismatch"),Yo._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&fr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ux(n,e,t=!1){if(hn(n.app))return Promise.reject(ss(n));const r="signIn",s=await lx(n,r,e),o=await Yo._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function DD(n,e){return ux(oo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(n){const e=oo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OD(n,e,t){if(hn(n.app))return Promise.reject(ss(n));const r=oo(n),l=await Hg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bD).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&cx(n),h}),c=await Yo._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function LD(n,e,t){return hn(n.app)?Promise.reject(ss(n)):DD(st(n),Ll.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&cx(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MD(n,e){return hs(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qg(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=st(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await Ko(r,MD(r.auth,o));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const c=r.providerData.find(({providerId:h})=>h==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function jD(n,e){const t=st(n);return hn(t.auth.app)?Promise.reject(ss(t.auth)):VD(t,e)}async function VD(n,e,t){const{auth:r}=n,o={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(o.email=e);const l=await Ko(n,TD(r,o));await n._updateTokensIfNecessary(l,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(n){var e,t;if(!n)return null;const{providerId:r}=n,s=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},o=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const l=(t=(e=Vf(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(l){const c=l!=="anonymous"&&l!=="custom"?l:null;return new ul(o,c)}}if(!r)return null;switch(r){case"facebook.com":return new UD(o,s);case"github.com":return new $D(o,s);case"google.com":return new BD(o,s);case"twitter.com":return new zD(o,s,n.screenName||null);case"custom":case"anonymous":return new ul(o,null);default:return new ul(o,r,s)}}class ul{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class dx extends ul{constructor(e,t,r,s){super(e,t,r),this.username=s}}class UD extends ul{constructor(e,t){super(e,"facebook.com",t)}}class $D extends dx{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class BD extends ul{constructor(e,t){super(e,"google.com",t)}}class zD extends dx{constructor(e,t,r){super(e,"twitter.com",t,r)}}function WD(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:FD(t)}function HD(n,e,t,r){return st(n).onIdTokenChanged(e,t,r)}function qD(n,e,t){return st(n).beforeAuthStateChanged(e,t)}function hx(n,e,t,r){return st(n).onAuthStateChanged(e,t,r)}const nf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nf,"1"),this.storage.removeItem(nf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=1e3,KD=10;class px extends fx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);rD()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,KD):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},GD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}px.type="LOCAL";const QD=px;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx extends fx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mx.type="SESSION";const gx=mx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Uf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(l).map(async f=>f(t.origin,o)),h=await YD(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const f=lv("",20);s.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(_){const E=_;if(E.data.eventId===f)switch(E.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(E.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(){return window}function JD(n){is().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(){return typeof is().WorkerGlobalScope<"u"&&typeof is().importScripts=="function"}async function ZD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eO(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function tO(){return yx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="firebaseLocalStorageDb",nO=1,rf="firebaseLocalStorage",_x="fbase_key";class Fc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $f(n,e){return n.transaction([rf],e?"readwrite":"readonly").objectStore(rf)}function rO(){const n=indexedDB.deleteDatabase(vx);return new Fc(n).toPromise()}function Gg(){const n=indexedDB.open(vx,nO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(rf,{keyPath:_x})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(rf)?e(r):(r.close(),await rO(),e(await Gg()))})})}async function DE(n,e,t){const r=$f(n,!0).put({[_x]:e,value:t});return new Fc(r).toPromise()}async function sO(n,e){const t=$f(n,!1).get(e),r=await new Fc(t).toPromise();return r===void 0?null:r.value}function OE(n,e){const t=$f(n,!0).delete(e);return new Fc(t).toPromise()}const iO=800,oO=3;class wx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>oO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uf._getInstance(tO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ZD(),!this.activeServiceWorker)return;this.sender=new XD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gg();return await DE(e,nf,"1"),await OE(e,nf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>DE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>sO(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>OE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=$f(s,!1).getAll();return new Fc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wx.type="LOCAL";const aO=wx;new Mc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(n,e){return e?js(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv extends iv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ll(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ll(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ll(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function lO(n){return ux(n.auth,new uv(n),n.bypassAuthState)}function uO(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),ND(t,new uv(n),n.bypassAuthState)}async function cO(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),kD(t,new uv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lO;case"linkViaPopup":case"linkViaRedirect":return cO;case"reauthViaPopup":case"reauthViaRedirect":return uO;default:fr(this.auth,"internal-error")}}resolve(e){Hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=new Mc(2e3,1e4);async function hO(n,e,t){if(hn(n.app))return Promise.reject(Lr(n,"operation-not-supported-in-this-environment"));const r=oo(n);VN(n,e,av);const s=Ex(r,t);return new zo(r,"signInViaPopup",e,s).executeNotNull()}class zo extends Tx{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,zo.currentPopupAction&&zo.currentPopupAction.cancel(),zo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Hs(this.filter.length===1,"Popup operations only handle one event");const e=lv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dO.get())};e()}}zo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO="pendingRedirect",Mh=new Map;class pO extends Tx{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Mh.get(this.auth._key());if(!e){try{const r=await mO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Mh.set(this.auth._key(),e)}return this.bypassAuthState||Mh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mO(n,e){const t=vO(e),r=yO(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function gO(n,e){Mh.set(n._key(),e)}function yO(n){return js(n._redirectPersistence)}function vO(n){return Lh(fO,n.config.apiKey,n.name)}async function _O(n,e,t=!1){if(hn(n.app))return Promise.reject(ss(n));const r=oo(n),s=Ex(r,e),l=await new pO(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=10*60*1e3;class EO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Ix(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Lr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wO&&this.cachedEventUids.clear(),this.cachedEventUids.has(LE(e))}saveEventToCache(e){this.cachedEventUids.add(LE(e)),this.lastProcessedEventTime=Date.now()}}function LE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Ix({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function TO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ix(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IO(n,e={}){return hs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xO=/^https?/;async function SO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await IO(n);for(const t of e)try{if(RO(t))return}catch{}fr(n,"unauthorized-domain")}function RO(n){const e=zg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!xO.test(t))return!1;if(CO.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=new Mc(3e4,6e4);function ME(){const n=is().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function PO(n){return new Promise((e,t)=>{var r,s,o;function l(){ME(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ME(),t(Lr(n,"network-request-failed"))},timeout:AO.get()})}if(!((s=(r=is().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=is().gapi)===null||o===void 0)&&o.load)l();else{const c=hD("iframefcb");return is()[c]=()=>{gapi.load?l():t(Lr(n,"network-request-failed"))},ix(`${dD()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw jh=null,e})}let jh=null;function bO(n){return jh=jh||PO(n),jh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=new Mc(5e3,15e3),NO="__/auth/iframe",DO="emulator/auth/iframe",OO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MO(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?rv(e,DO):`https://${n.config.authDomain}/${NO}`,r={apiKey:e.apiKey,appName:n.name,v:so},s=LO.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Ol(r).slice(1)}`}async function jO(n){const e=await bO(n),t=is().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:MO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OO,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Lr(n,"network-request-failed"),c=is().setTimeout(()=>{o(l)},kO.get());function h(){is().clearTimeout(c),s(r)}r.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FO=500,UO=600,$O="_blank",BO="http://localhost";class jE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zO(n,e,t,r=FO,s=UO){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h=Object.assign(Object.assign({},VO),{width:r.toString(),height:s.toString(),top:o,left:l}),f=mn().toLowerCase();t&&(c=JC(f)?$O:t),YC(f)&&(e=e||BO,h.scrollbars="yes");const g=Object.entries(h).reduce((E,[C,R])=>`${E}${C}=${R},`,"");if(nD(f)&&c!=="_self")return WO(e||"",c),new jE(null);const _=window.open(e||"",c,g);Ce(_,n,"popup-blocked");try{_.focus()}catch{}return new jE(_)}function WO(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO="__/auth/handler",qO="emulator/auth/handler",GO=encodeURIComponent("fac");async function VE(n,e,t,r,s,o){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:so,eventId:s};if(e instanceof av){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",jg(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,_]of Object.entries({}))l[g]=_}if(e instanceof Vc){const g=e.getScopes().filter(_=>_!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const h=await n._getAppCheckToken(),f=h?`#${GO}=${encodeURIComponent(h)}`:"";return`${KO(n)}?${Ol(c).slice(1)}${f}`}function KO({config:n}){return n.emulator?rv(n,qO):`https://${n.authDomain}/${HO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="webStorageSupport";class QO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gx,this._completeRedirectFn=_O,this._overrideRedirectResult=gO}async _openPopup(e,t,r,s){var o;Hs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await VE(e,t,r,zg(),s);return zO(e,l,lv())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await VE(e,t,r,zg(),s);return JD(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(Hs(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await jO(e),r=new EO(e);return t.register("authEvent",s=>(Ce(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(lg,{type:lg},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[lg];l!==void 0&&t(!!l),fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=SO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return rx()||XC()||sv()}}const YO=QO;var FE="@firebase/auth",UE="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZO(n){Ki(new zs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Ce(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sx(n)},f=new lD(r,s,o,h);return vD(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ki(new zs("auth-internal",e=>{const t=oo(e.getProvider("auth").getImmediate());return(r=>new XO(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),dr(FE,UE,JO(n)),dr(FE,UE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=5*60,tL=OC("authIdTokenMaxAge")||eL;let $E=null;const nL=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>tL)return;const s=t==null?void 0:t.token;$E!==s&&($E=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Bf(n=jf()){const e=Lc(n,"auth");if(e.isInitialized())return e.getImmediate();const t=yD(n,{popupRedirectResolver:YO,persistence:[aO,QD,gx]}),r=OC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=nL(o.toString());qD(t,l,()=>l(t.currentUser)),HD(t,c=>l(c))}}const s=NC("auth");return s&&_D(t,`http://${s}`),t}function rL(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}uD({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=Lr("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",rL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZO("Browser");var sL="firebase",iL="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr(sL,iL,"app");var BE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bi,Cx;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,b){function k(){}k.prototype=b.prototype,N.D=b.prototype,N.prototype=new k,N.prototype.constructor=N,N.C=function(L,M,j){for(var D=Array(arguments.length-2),le=2;le<arguments.length;le++)D[le-2]=arguments[le];return b.prototype[M].apply(L,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,b,k){k||(k=0);var L=Array(16);if(typeof b=="string")for(var M=0;16>M;++M)L[M]=b.charCodeAt(k++)|b.charCodeAt(k++)<<8|b.charCodeAt(k++)<<16|b.charCodeAt(k++)<<24;else for(M=0;16>M;++M)L[M]=b[k++]|b[k++]<<8|b[k++]<<16|b[k++]<<24;b=N.g[0],k=N.g[1],M=N.g[2];var j=N.g[3],D=b+(j^k&(M^j))+L[0]+3614090360&4294967295;b=k+(D<<7&4294967295|D>>>25),D=j+(M^b&(k^M))+L[1]+3905402710&4294967295,j=b+(D<<12&4294967295|D>>>20),D=M+(k^j&(b^k))+L[2]+606105819&4294967295,M=j+(D<<17&4294967295|D>>>15),D=k+(b^M&(j^b))+L[3]+3250441966&4294967295,k=M+(D<<22&4294967295|D>>>10),D=b+(j^k&(M^j))+L[4]+4118548399&4294967295,b=k+(D<<7&4294967295|D>>>25),D=j+(M^b&(k^M))+L[5]+1200080426&4294967295,j=b+(D<<12&4294967295|D>>>20),D=M+(k^j&(b^k))+L[6]+2821735955&4294967295,M=j+(D<<17&4294967295|D>>>15),D=k+(b^M&(j^b))+L[7]+4249261313&4294967295,k=M+(D<<22&4294967295|D>>>10),D=b+(j^k&(M^j))+L[8]+1770035416&4294967295,b=k+(D<<7&4294967295|D>>>25),D=j+(M^b&(k^M))+L[9]+2336552879&4294967295,j=b+(D<<12&4294967295|D>>>20),D=M+(k^j&(b^k))+L[10]+4294925233&4294967295,M=j+(D<<17&4294967295|D>>>15),D=k+(b^M&(j^b))+L[11]+2304563134&4294967295,k=M+(D<<22&4294967295|D>>>10),D=b+(j^k&(M^j))+L[12]+1804603682&4294967295,b=k+(D<<7&4294967295|D>>>25),D=j+(M^b&(k^M))+L[13]+4254626195&4294967295,j=b+(D<<12&4294967295|D>>>20),D=M+(k^j&(b^k))+L[14]+2792965006&4294967295,M=j+(D<<17&4294967295|D>>>15),D=k+(b^M&(j^b))+L[15]+1236535329&4294967295,k=M+(D<<22&4294967295|D>>>10),D=b+(M^j&(k^M))+L[1]+4129170786&4294967295,b=k+(D<<5&4294967295|D>>>27),D=j+(k^M&(b^k))+L[6]+3225465664&4294967295,j=b+(D<<9&4294967295|D>>>23),D=M+(b^k&(j^b))+L[11]+643717713&4294967295,M=j+(D<<14&4294967295|D>>>18),D=k+(j^b&(M^j))+L[0]+3921069994&4294967295,k=M+(D<<20&4294967295|D>>>12),D=b+(M^j&(k^M))+L[5]+3593408605&4294967295,b=k+(D<<5&4294967295|D>>>27),D=j+(k^M&(b^k))+L[10]+38016083&4294967295,j=b+(D<<9&4294967295|D>>>23),D=M+(b^k&(j^b))+L[15]+3634488961&4294967295,M=j+(D<<14&4294967295|D>>>18),D=k+(j^b&(M^j))+L[4]+3889429448&4294967295,k=M+(D<<20&4294967295|D>>>12),D=b+(M^j&(k^M))+L[9]+568446438&4294967295,b=k+(D<<5&4294967295|D>>>27),D=j+(k^M&(b^k))+L[14]+3275163606&4294967295,j=b+(D<<9&4294967295|D>>>23),D=M+(b^k&(j^b))+L[3]+4107603335&4294967295,M=j+(D<<14&4294967295|D>>>18),D=k+(j^b&(M^j))+L[8]+1163531501&4294967295,k=M+(D<<20&4294967295|D>>>12),D=b+(M^j&(k^M))+L[13]+2850285829&4294967295,b=k+(D<<5&4294967295|D>>>27),D=j+(k^M&(b^k))+L[2]+4243563512&4294967295,j=b+(D<<9&4294967295|D>>>23),D=M+(b^k&(j^b))+L[7]+1735328473&4294967295,M=j+(D<<14&4294967295|D>>>18),D=k+(j^b&(M^j))+L[12]+2368359562&4294967295,k=M+(D<<20&4294967295|D>>>12),D=b+(k^M^j)+L[5]+4294588738&4294967295,b=k+(D<<4&4294967295|D>>>28),D=j+(b^k^M)+L[8]+2272392833&4294967295,j=b+(D<<11&4294967295|D>>>21),D=M+(j^b^k)+L[11]+1839030562&4294967295,M=j+(D<<16&4294967295|D>>>16),D=k+(M^j^b)+L[14]+4259657740&4294967295,k=M+(D<<23&4294967295|D>>>9),D=b+(k^M^j)+L[1]+2763975236&4294967295,b=k+(D<<4&4294967295|D>>>28),D=j+(b^k^M)+L[4]+1272893353&4294967295,j=b+(D<<11&4294967295|D>>>21),D=M+(j^b^k)+L[7]+4139469664&4294967295,M=j+(D<<16&4294967295|D>>>16),D=k+(M^j^b)+L[10]+3200236656&4294967295,k=M+(D<<23&4294967295|D>>>9),D=b+(k^M^j)+L[13]+681279174&4294967295,b=k+(D<<4&4294967295|D>>>28),D=j+(b^k^M)+L[0]+3936430074&4294967295,j=b+(D<<11&4294967295|D>>>21),D=M+(j^b^k)+L[3]+3572445317&4294967295,M=j+(D<<16&4294967295|D>>>16),D=k+(M^j^b)+L[6]+76029189&4294967295,k=M+(D<<23&4294967295|D>>>9),D=b+(k^M^j)+L[9]+3654602809&4294967295,b=k+(D<<4&4294967295|D>>>28),D=j+(b^k^M)+L[12]+3873151461&4294967295,j=b+(D<<11&4294967295|D>>>21),D=M+(j^b^k)+L[15]+530742520&4294967295,M=j+(D<<16&4294967295|D>>>16),D=k+(M^j^b)+L[2]+3299628645&4294967295,k=M+(D<<23&4294967295|D>>>9),D=b+(M^(k|~j))+L[0]+4096336452&4294967295,b=k+(D<<6&4294967295|D>>>26),D=j+(k^(b|~M))+L[7]+1126891415&4294967295,j=b+(D<<10&4294967295|D>>>22),D=M+(b^(j|~k))+L[14]+2878612391&4294967295,M=j+(D<<15&4294967295|D>>>17),D=k+(j^(M|~b))+L[5]+4237533241&4294967295,k=M+(D<<21&4294967295|D>>>11),D=b+(M^(k|~j))+L[12]+1700485571&4294967295,b=k+(D<<6&4294967295|D>>>26),D=j+(k^(b|~M))+L[3]+2399980690&4294967295,j=b+(D<<10&4294967295|D>>>22),D=M+(b^(j|~k))+L[10]+4293915773&4294967295,M=j+(D<<15&4294967295|D>>>17),D=k+(j^(M|~b))+L[1]+2240044497&4294967295,k=M+(D<<21&4294967295|D>>>11),D=b+(M^(k|~j))+L[8]+1873313359&4294967295,b=k+(D<<6&4294967295|D>>>26),D=j+(k^(b|~M))+L[15]+4264355552&4294967295,j=b+(D<<10&4294967295|D>>>22),D=M+(b^(j|~k))+L[6]+2734768916&4294967295,M=j+(D<<15&4294967295|D>>>17),D=k+(j^(M|~b))+L[13]+1309151649&4294967295,k=M+(D<<21&4294967295|D>>>11),D=b+(M^(k|~j))+L[4]+4149444226&4294967295,b=k+(D<<6&4294967295|D>>>26),D=j+(k^(b|~M))+L[11]+3174756917&4294967295,j=b+(D<<10&4294967295|D>>>22),D=M+(b^(j|~k))+L[2]+718787259&4294967295,M=j+(D<<15&4294967295|D>>>17),D=k+(j^(M|~b))+L[9]+3951481745&4294967295,N.g[0]=N.g[0]+b&4294967295,N.g[1]=N.g[1]+(M+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+M&4294967295,N.g[3]=N.g[3]+j&4294967295}r.prototype.u=function(N,b){b===void 0&&(b=N.length);for(var k=b-this.blockSize,L=this.B,M=this.h,j=0;j<b;){if(M==0)for(;j<=k;)s(this,N,j),j+=this.blockSize;if(typeof N=="string"){for(;j<b;)if(L[M++]=N.charCodeAt(j++),M==this.blockSize){s(this,L),M=0;break}}else for(;j<b;)if(L[M++]=N[j++],M==this.blockSize){s(this,L),M=0;break}}this.h=M,this.o+=b},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var b=1;b<N.length-8;++b)N[b]=0;var k=8*this.o;for(b=N.length-8;b<N.length;++b)N[b]=k&255,k/=256;for(this.u(N),N=Array(16),b=k=0;4>b;++b)for(var L=0;32>L;L+=8)N[k++]=this.g[b]>>>L&255;return N};function o(N,b){var k=c;return Object.prototype.hasOwnProperty.call(k,N)?k[N]:k[N]=b(N)}function l(N,b){this.h=b;for(var k=[],L=!0,M=N.length-1;0<=M;M--){var j=N[M]|0;L&&j==b||(k[M]=j,L=!1)}this.g=k}var c={};function h(N){return-128<=N&&128>N?o(N,function(b){return new l([b|0],0>b?-1:0)}):new l([N|0],0>N?-1:0)}function f(N){if(isNaN(N)||!isFinite(N))return _;if(0>N)return S(f(-N));for(var b=[],k=1,L=0;N>=k;L++)b[L]=N/k|0,k*=4294967296;return new l(b,0)}function g(N,b){if(N.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(N.charAt(0)=="-")return S(g(N.substring(1),b));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=f(Math.pow(b,8)),L=_,M=0;M<N.length;M+=8){var j=Math.min(8,N.length-M),D=parseInt(N.substring(M,M+j),b);8>j?(j=f(Math.pow(b,j)),L=L.j(j).add(f(D))):(L=L.j(k),L=L.add(f(D)))}return L}var _=h(0),E=h(1),C=h(16777216);n=l.prototype,n.m=function(){if(A(this))return-S(this).m();for(var N=0,b=1,k=0;k<this.g.length;k++){var L=this.i(k);N+=(0<=L?L:4294967296+L)*b,b*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(R(this))return"0";if(A(this))return"-"+S(this).toString(N);for(var b=f(Math.pow(N,6)),k=this,L="";;){var M=W(k,b).g;k=V(k,M.j(b));var j=((0<k.g.length?k.g[0]:k.h)>>>0).toString(N);if(k=M,R(k))return j+L;for(;6>j.length;)j="0"+j;L=j+L}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function R(N){if(N.h!=0)return!1;for(var b=0;b<N.g.length;b++)if(N.g[b]!=0)return!1;return!0}function A(N){return N.h==-1}n.l=function(N){return N=V(this,N),A(N)?-1:R(N)?0:1};function S(N){for(var b=N.g.length,k=[],L=0;L<b;L++)k[L]=~N.g[L];return new l(k,~N.h).add(E)}n.abs=function(){return A(this)?S(this):this},n.add=function(N){for(var b=Math.max(this.g.length,N.g.length),k=[],L=0,M=0;M<=b;M++){var j=L+(this.i(M)&65535)+(N.i(M)&65535),D=(j>>>16)+(this.i(M)>>>16)+(N.i(M)>>>16);L=D>>>16,j&=65535,D&=65535,k[M]=D<<16|j}return new l(k,k[k.length-1]&-2147483648?-1:0)};function V(N,b){return N.add(S(b))}n.j=function(N){if(R(this)||R(N))return _;if(A(this))return A(N)?S(this).j(S(N)):S(S(this).j(N));if(A(N))return S(this.j(S(N)));if(0>this.l(C)&&0>N.l(C))return f(this.m()*N.m());for(var b=this.g.length+N.g.length,k=[],L=0;L<2*b;L++)k[L]=0;for(L=0;L<this.g.length;L++)for(var M=0;M<N.g.length;M++){var j=this.i(L)>>>16,D=this.i(L)&65535,le=N.i(M)>>>16,xe=N.i(M)&65535;k[2*L+2*M]+=D*xe,U(k,2*L+2*M),k[2*L+2*M+1]+=j*xe,U(k,2*L+2*M+1),k[2*L+2*M+1]+=D*le,U(k,2*L+2*M+1),k[2*L+2*M+2]+=j*le,U(k,2*L+2*M+2)}for(L=0;L<b;L++)k[L]=k[2*L+1]<<16|k[2*L];for(L=b;L<2*b;L++)k[L]=0;return new l(k,0)};function U(N,b){for(;(N[b]&65535)!=N[b];)N[b+1]+=N[b]>>>16,N[b]&=65535,b++}function $(N,b){this.g=N,this.h=b}function W(N,b){if(R(b))throw Error("division by zero");if(R(N))return new $(_,_);if(A(N))return b=W(S(N),b),new $(S(b.g),S(b.h));if(A(b))return b=W(N,S(b)),new $(S(b.g),b.h);if(30<N.g.length){if(A(N)||A(b))throw Error("slowDivide_ only works with positive integers.");for(var k=E,L=b;0>=L.l(N);)k=Y(k),L=Y(L);var M=X(k,1),j=X(L,1);for(L=X(L,2),k=X(k,2);!R(L);){var D=j.add(L);0>=D.l(N)&&(M=M.add(k),j=D),L=X(L,1),k=X(k,1)}return b=V(N,M.j(b)),new $(M,b)}for(M=_;0<=N.l(b);){for(k=Math.max(1,Math.floor(N.m()/b.m())),L=Math.ceil(Math.log(k)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),j=f(k),D=j.j(b);A(D)||0<D.l(N);)k-=L,j=f(k),D=j.j(b);R(j)&&(j=E),M=M.add(j),N=V(N,D)}return new $(M,N)}n.A=function(N){return W(this,N).h},n.and=function(N){for(var b=Math.max(this.g.length,N.g.length),k=[],L=0;L<b;L++)k[L]=this.i(L)&N.i(L);return new l(k,this.h&N.h)},n.or=function(N){for(var b=Math.max(this.g.length,N.g.length),k=[],L=0;L<b;L++)k[L]=this.i(L)|N.i(L);return new l(k,this.h|N.h)},n.xor=function(N){for(var b=Math.max(this.g.length,N.g.length),k=[],L=0;L<b;L++)k[L]=this.i(L)^N.i(L);return new l(k,this.h^N.h)};function Y(N){for(var b=N.g.length+1,k=[],L=0;L<b;L++)k[L]=N.i(L)<<1|N.i(L-1)>>>31;return new l(k,N.h)}function X(N,b){var k=b>>5;b%=32;for(var L=N.g.length-k,M=[],j=0;j<L;j++)M[j]=0<b?N.i(j+k)>>>b|N.i(j+k+1)<<32-b:N.i(j+k);return new l(M,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Cx=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=g,Bi=l}).apply(typeof BE<"u"?BE:typeof self<"u"?self:typeof window<"u"?window:{});var _h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xx,Ku,Sx,Vh,Kg,Rx,Ax,Px;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,T){return d==Array.prototype||d==Object.prototype||(d[v]=T.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof _h=="object"&&_h];for(var v=0;v<d.length;++v){var T=d[v];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function s(d,v){if(v)e:{var T=r;d=d.split(".");for(var P=0;P<d.length-1;P++){var H=d[P];if(!(H in T))break e;T=T[H]}d=d[d.length-1],P=T[d],v=v(P),v!=P&&v!=null&&e(T,d,{configurable:!0,writable:!0,value:v})}}function o(d,v){d instanceof String&&(d+="");var T=0,P=!1,H={next:function(){if(!P&&T<d.length){var Q=T++;return{value:v(Q,d[Q]),done:!1}}return P=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}s("Array.prototype.values",function(d){return d||function(){return o(this,function(v,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function f(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function g(d,v,T){return d.call.apply(d.bind,arguments)}function _(d,v,T){if(!d)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,P),d.apply(v,H)}}return function(){return d.apply(v,arguments)}}function E(d,v,T){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:_,E.apply(null,arguments)}function C(d,v){var T=Array.prototype.slice.call(arguments,1);return function(){var P=T.slice();return P.push.apply(P,arguments),d.apply(this,P)}}function R(d,v){function T(){}T.prototype=v.prototype,d.aa=v.prototype,d.prototype=new T,d.prototype.constructor=d,d.Qb=function(P,H,Q){for(var ae=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)ae[Je-2]=arguments[Je];return v.prototype[H].apply(P,ae)}}function A(d){const v=d.length;if(0<v){const T=Array(v);for(let P=0;P<v;P++)T[P]=d[P];return T}return[]}function S(d,v){for(let T=1;T<arguments.length;T++){const P=arguments[T];if(h(P)){const H=d.length||0,Q=P.length||0;d.length=H+Q;for(let ae=0;ae<Q;ae++)d[H+ae]=P[ae]}else d.push(P)}}class V{constructor(v,T){this.i=v,this.j=T,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function U(d){return/^[\s\xa0]*$/.test(d)}function $(){var d=c.navigator;return d&&(d=d.userAgent)?d:""}function W(d){return W[" "](d),d}W[" "]=function(){};var Y=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function X(d,v,T){for(const P in d)v.call(T,d[P],P,d)}function N(d,v){for(const T in d)v.call(void 0,d[T],T,d)}function b(d){const v={};for(const T in d)v[T]=d[T];return v}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(d,v){let T,P;for(let H=1;H<arguments.length;H++){P=arguments[H];for(T in P)d[T]=P[T];for(let Q=0;Q<k.length;Q++)T=k[Q],Object.prototype.hasOwnProperty.call(P,T)&&(d[T]=P[T])}}function M(d){var v=1;d=d.split(":");const T=[];for(;0<v&&d.length;)T.push(d.shift()),v--;return d.length&&T.push(d.join(":")),T}function j(d){c.setTimeout(()=>{throw d},0)}function D(){var d=ue;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class le{constructor(){this.h=this.g=null}add(v,T){const P=xe.get();P.set(v,T),this.h?this.h.next=P:this.g=P,this.h=P}}var xe=new V(()=>new Re,d=>d.reset());class Re{constructor(){this.next=this.g=this.h=null}set(v,T){this.h=v,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,se=!1,ue=new le,ie=()=>{const d=c.Promise.resolve(void 0);Te=()=>{d.then(z)}};var z=()=>{for(var d;d=D();){try{d.h.call(d.g)}catch(T){j(T)}var v=xe;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}se=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var Ie=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const T=()=>{};c.addEventListener("test",T,v),c.removeEventListener("test",T,v)}catch{}return d}();function Ae(d,v){if(pe.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var T=this.type=d.type,P=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(Y){e:{try{W(v.nodeName);var H=!0;break e}catch{}H=!1}H||(v=null)}}else T=="mouseover"?v=d.fromElement:T=="mouseout"&&(v=d.toElement);this.relatedTarget=v,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:De[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ae.aa.h.call(this)}}R(Ae,pe);var De={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),Oe=0;function Qe(d,v,T,P,H){this.listener=d,this.proxy=null,this.src=v,this.type=T,this.capture=!!P,this.ha=H,this.key=++Oe,this.da=this.fa=!1}function At(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Vn(d){this.src=d,this.g={},this.h=0}Vn.prototype.add=function(d,v,T,P,H){var Q=d.toString();d=this.g[Q],d||(d=this.g[Q]=[],this.h++);var ae=yr(d,v,P,H);return-1<ae?(v=d[ae],T||(v.fa=!1)):(v=new Qe(v,this.src,Q,!!P,H),v.fa=T,d.push(v)),v};function ti(d,v){var T=v.type;if(T in d.g){var P=d.g[T],H=Array.prototype.indexOf.call(P,v,void 0),Q;(Q=0<=H)&&Array.prototype.splice.call(P,H,1),Q&&(At(v),d.g[T].length==0&&(delete d.g[T],d.h--))}}function yr(d,v,T,P){for(var H=0;H<d.length;++H){var Q=d[H];if(!Q.da&&Q.listener==v&&Q.capture==!!T&&Q.ha==P)return H}return-1}var ms="closure_lm_"+(1e6*Math.random()|0),ni={};function ri(d,v,T,P,H){if(Array.isArray(v)){for(var Q=0;Q<v.length;Q++)ri(d,v[Q],T,P,H);return null}return T=ai(T),d&&d[je]?d.K(v,T,f(P)?!!P.capture:!1,H):si(d,v,T,!1,P,H)}function si(d,v,T,P,H,Q){if(!v)throw Error("Invalid event type");var ae=f(H)?!!H.capture:!!H,Je=gs(d);if(Je||(d[ms]=Je=new Vn(d)),T=Je.add(v,T,P,ae,Q),T.proxy)return T;if(P=da(),T.proxy=P,P.src=d,P.listener=T,d.addEventListener)Ie||(H=ae),H===void 0&&(H=!1),d.addEventListener(v.toString(),P,H);else if(d.attachEvent)d.attachEvent(Tn(v.toString()),P);else if(d.addListener&&d.removeListener)d.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return T}function da(){function d(T){return v.call(d.src,d.listener,T)}const v=oi;return d}function ii(d,v,T,P,H){if(Array.isArray(v))for(var Q=0;Q<v.length;Q++)ii(d,v[Q],T,P,H);else P=f(P)?!!P.capture:!!P,T=ai(T),d&&d[je]?(d=d.i,v=String(v).toString(),v in d.g&&(Q=d.g[v],T=yr(Q,T,P,H),-1<T&&(At(Q[T]),Array.prototype.splice.call(Q,T,1),Q.length==0&&(delete d.g[v],d.h--)))):d&&(d=gs(d))&&(v=d.g[v.toString()],d=-1,v&&(d=yr(v,T,P,H)),(T=-1<d?v[d]:null)&&Kt(T))}function Kt(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[je])ti(v.i,d);else{var T=d.type,P=d.proxy;v.removeEventListener?v.removeEventListener(T,P,d.capture):v.detachEvent?v.detachEvent(Tn(T),P):v.addListener&&v.removeListener&&v.removeListener(P),(T=gs(v))?(ti(T,d),T.h==0&&(T.src=null,v[ms]=null)):At(d)}}}function Tn(d){return d in ni?ni[d]:ni[d]="on"+d}function oi(d,v){if(d.da)d=!0;else{v=new Ae(v,this);var T=d.listener,P=d.ha||d.src;d.fa&&Kt(d),d=T.call(P,v)}return d}function gs(d){return d=d[ms],d instanceof Vn?d:null}var Br="__closure_events_fn_"+(1e9*Math.random()>>>0);function ai(d){return typeof d=="function"?d:(d[Br]||(d[Br]=function(v){return d.handleEvent(v)}),d[Br])}function yt(){J.call(this),this.i=new Vn(this),this.M=this,this.F=null}R(yt,J),yt.prototype[je]=!0,yt.prototype.removeEventListener=function(d,v,T,P){ii(this,d,v,T,P)};function vt(d,v){var T,P=d.F;if(P)for(T=[];P;P=P.F)T.push(P);if(d=d.M,P=v.type||v,typeof v=="string")v=new pe(v,d);else if(v instanceof pe)v.target=v.target||d;else{var H=v;v=new pe(P,d),L(v,H)}if(H=!0,T)for(var Q=T.length-1;0<=Q;Q--){var ae=v.g=T[Q];H=Zn(ae,P,!0,v)&&H}if(ae=v.g=d,H=Zn(ae,P,!0,v)&&H,H=Zn(ae,P,!1,v)&&H,T)for(Q=0;Q<T.length;Q++)ae=v.g=T[Q],H=Zn(ae,P,!1,v)&&H}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var T=d.g[v],P=0;P<T.length;P++)At(T[P]);delete d.g[v],d.h--}}this.F=null},yt.prototype.K=function(d,v,T,P){return this.i.add(String(d),v,!1,T,P)},yt.prototype.L=function(d,v,T,P){return this.i.add(String(d),v,!0,T,P)};function Zn(d,v,T,P){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var H=!0,Q=0;Q<v.length;++Q){var ae=v[Q];if(ae&&!ae.da&&ae.capture==T){var Je=ae.listener,Lt=ae.ha||ae.src;ae.fa&&ti(d.i,ae),H=Je.call(Lt,P)!==!1&&H}}return H&&!P.defaultPrevented}function Hl(d,v,T){if(typeof d=="function")T&&(d=E(d,T));else if(d&&typeof d.handleEvent=="function")d=E(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:c.setTimeout(d,v||0)}function li(d){d.g=Hl(()=>{d.g=null,d.i&&(d.i=!1,li(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class fo extends J{constructor(v,T){super(),this.m=v,this.l=T,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:li(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function po(d){J.call(this),this.h=d,this.g={}}R(po,J);var ql=[];function Gl(d){X(d.g,function(v,T){this.g.hasOwnProperty(T)&&Kt(v)},d),d.g={}}po.prototype.N=function(){po.aa.N.call(this),Gl(this)},po.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kl=c.JSON.stringify,Ql=c.JSON.parse,Yl=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function mo(){}mo.prototype.h=null;function ha(d){return d.h||(d.h=d.i())}function fa(){}var er={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zr(){pe.call(this,"d")}R(zr,pe);function pa(){pe.call(this,"c")}R(pa,pe);var Wr={},Xl=null;function go(){return Xl=Xl||new yt}Wr.La="serverreachability";function Jl(d){pe.call(this,Wr.La,d)}R(Jl,pe);function ys(d){const v=go();vt(v,new Jl(v))}Wr.STAT_EVENT="statevent";function Zl(d,v){pe.call(this,Wr.STAT_EVENT,d),this.stat=v}R(Zl,pe);function Ct(d){const v=go();vt(v,new Zl(v,d))}Wr.Ma="timingevent";function ma(d,v){pe.call(this,Wr.Ma,d),this.size=v}R(ma,pe);function vr(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},v)}function yo(){this.g=!0}yo.prototype.xa=function(){this.g=!1};function vo(d,v,T,P,H,Q){d.info(function(){if(d.g)if(Q)for(var ae="",Je=Q.split("&"),Lt=0;Lt<Je.length;Lt++){var Be=Je[Lt].split("=");if(1<Be.length){var Ut=Be[0];Be=Be[1];var Pt=Ut.split("_");ae=2<=Pt.length&&Pt[1]=="type"?ae+(Ut+"="+Be+"&"):ae+(Ut+"=redacted&")}}else ae=null;else ae=Q;return"XMLHTTP REQ ("+P+") [attempt "+H+"]: "+v+`
`+T+`
`+ae})}function ga(d,v,T,P,H,Q,ae){d.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+H+"]: "+v+`
`+T+`
`+Q+" "+ae})}function _r(d,v,T,P){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ip(d,T)+(P?" "+P:"")})}function eu(d,v){d.info(function(){return"TIMEOUT: "+v})}yo.prototype.info=function(){};function Ip(d,v){if(!d.g)return v;if(!v)return null;try{var T=JSON.parse(v);if(T){for(d=0;d<T.length;d++)if(Array.isArray(T[d])){var P=T[d];if(!(2>P.length)){var H=P[1];if(Array.isArray(H)&&!(1>H.length)){var Q=H[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ae=1;ae<H.length;ae++)H[ae]=""}}}}return Kl(T)}catch{return v}}var ya={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wr;function _o(){}R(_o,mo),_o.prototype.g=function(){return new XMLHttpRequest},_o.prototype.i=function(){return{}},wr=new _o;function Er(d,v,T,P){this.j=d,this.i=v,this.l=T,this.R=P||1,this.U=new po(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rd}function rd(){this.i=null,this.g="",this.h=!1}var tu={},va={};function _a(d,v,T){d.L=1,d.v=fi(Un(v)),d.m=T,d.P=!0,nu(d,null)}function nu(d,v){d.F=Date.now(),nt(d),d.A=Un(d.v);var T=d.A,P=d.R;Array.isArray(P)||(P=[String(P)]),mi(T.i,"t",P),d.C=0,T=d.j.J,d.h=new rd,d.g=Ed(d.j,T?v:null,!d.m),0<d.O&&(d.M=new fo(E(d.Y,d,d.g),d.O)),v=d.U,T=d.g,P=d.ca;var H="readystatechange";Array.isArray(H)||(H&&(ql[0]=H.toString()),H=ql);for(var Q=0;Q<H.length;Q++){var ae=ri(T,H[Q],P||v.handleEvent,!1,v.h||v);if(!ae)break;v.g[ae.key]=ae}v=d.H?b(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),ys(),vo(d.i,d.u,d.A,d.l,d.R,d.m)}Er.prototype.ca=function(d){d=d.target;const v=this.M;v&&Cn(d)==3?v.j():this.Y(d)},Er.prototype.Y=function(d){try{if(d==this.g)e:{const Pt=Cn(this.g);var v=this.g.Ba();const rr=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||lu(this.g)))){this.J||Pt!=4||v==7||(v==8||0>=rr?ys(3):ys(2)),wo(this);var T=this.g.Z();this.X=T;t:if(sd(this)){var P=lu(this.g);d="";var H=P.length,Q=Cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tr(this),ui(this);var ae="";break t}this.h.i=new c.TextDecoder}for(v=0;v<H;v++)this.h.h=!0,d+=this.h.i.decode(P[v],{stream:!(Q&&v==H-1)});P.length=0,this.h.g+=d,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=T==200,ga(this.i,this.u,this.A,this.l,this.R,Pt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,Lt=this.g;if((Je=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(Je)){var Be=Je;break t}}Be=null}if(T=Be)_r(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ru(this,T);else{this.o=!1,this.s=3,Ct(12),tr(this),ui(this);break e}}if(this.P){T=!0;let Bn;for(;!this.J&&this.C<ae.length;)if(Bn=Cp(this,ae),Bn==va){Pt==4&&(this.s=4,Ct(14),T=!1),_r(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==tu){this.s=4,Ct(15),_r(this.i,this.l,ae,"[Invalid Chunk]"),T=!1;break}else _r(this.i,this.l,Bn,null),ru(this,Bn);if(sd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||ae.length!=0||this.h.h||(this.s=1,Ct(16),T=!1),this.o=this.o&&T,!T)_r(this.i,this.l,ae,"[Invalid Chunked Response]"),tr(this),ui(this);else if(0<ae.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),cu(Ut),Ut.M=!0,Ct(11))}}else _r(this.i,this.l,ae,null),ru(this,ae);Pt==4&&tr(this),this.o&&!this.J&&(Pt==4?ba(this.j,this):(this.o=!1,nt(this)))}else xa(this.g),T==400&&0<ae.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),tr(this),ui(this)}}}catch{}finally{}};function sd(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Cp(d,v){var T=d.C,P=v.indexOf(`
`,T);return P==-1?va:(T=Number(v.substring(T,P)),isNaN(T)?tu:(P+=1,P+T>v.length?va:(v=v.slice(P,P+T),d.C=P+T,v)))}Er.prototype.cancel=function(){this.J=!0,tr(this)};function nt(d){d.S=Date.now()+d.I,id(d,d.I)}function id(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=vr(E(d.ba,d),v)}function wo(d){d.B&&(c.clearTimeout(d.B),d.B=null)}Er.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(eu(this.i,this.A),this.L!=2&&(ys(),Ct(17)),tr(this),this.s=2,ui(this)):id(this,this.S-d)};function ui(d){d.j.G==0||d.J||ba(d.j,d)}function tr(d){wo(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,Gl(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function ru(d,v){try{var T=d.j;if(T.G!=0&&(T.g==d||gn(T.h,d))){if(!d.K&&gn(T.h,d)&&T.G==3){try{var P=T.Da.g.parse(v)}catch{P=null}if(Array.isArray(P)&&P.length==3){var H=P;if(H[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<d.F)Pa(T),Sr(T);else break e;Aa(T),Ct(18)}}else T.za=H[1],0<T.za-T.T&&37500>H[2]&&T.F&&T.v==0&&!T.C&&(T.C=vr(E(T.Za,T),6e3));if(1>=ad(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Ts(T,11)}else if((d.K||T.g==d)&&Pa(T),!U(v))for(H=T.Da.g.parse(v),v=0;v<H.length;v++){let Be=H[v];if(T.T=Be[0],Be=Be[1],T.G==2)if(Be[0]=="c"){T.K=Be[1],T.ia=Be[2];const Ut=Be[3];Ut!=null&&(T.la=Ut,T.j.info("VER="+T.la));const Pt=Be[4];Pt!=null&&(T.Aa=Pt,T.j.info("SVER="+T.Aa));const rr=Be[5];rr!=null&&typeof rr=="number"&&0<rr&&(P=1.5*rr,T.L=P,T.j.info("backChannelRequestTimeoutMs_="+P)),P=T;const Bn=d.g;if(Bn){const Ro=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ro){var Q=P.h;Q.g||Ro.indexOf("spdy")==-1&&Ro.indexOf("quic")==-1&&Ro.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(su(Q,Q.h),Q.h=null))}if(P.D){const Na=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;Na&&(P.ya=Na,tt(P.I,P.D,Na))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-d.F,T.j.info("Handshake RTT: "+T.R+"ms")),P=T;var ae=d;if(P.qa=wd(P,P.J?P.ia:null,P.W),ae.K){ld(P.h,ae);var Je=ae,Lt=P.L;Lt&&(Je.I=Lt),Je.B&&(wo(Je),nt(Je)),P.g=ae}else So(P);0<T.i.length&&Kr(T)}else Be[0]!="stop"&&Be[0]!="close"||Ts(T,7);else T.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Ts(T,7):Yt(T):Be[0]!="noop"&&T.l&&T.l.ta(Be),T.v=0)}}ys(4)}catch{}}var od=class{constructor(d,v){this.g=d,this.map=v}};function Eo(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fn(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ad(d){return d.h?1:d.g?d.g.size:0}function gn(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function su(d,v){d.g?d.g.add(v):d.h=v}function ld(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}Eo.prototype.cancel=function(){if(this.i=ud(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function ud(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const T of d.g.values())v=v.concat(T.D);return v}return A(d.i)}function wa(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(h(d)){for(var v=[],T=d.length,P=0;P<T;P++)v.push(d[P]);return v}v=[],T=0;for(P in d)v[T++]=d[P];return v}function Ea(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(h(d)||typeof d=="string"){var v=[];d=d.length;for(var T=0;T<d;T++)v.push(T);return v}v=[],T=0;for(const P in d)v[T++]=P;return v}}}function ci(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(h(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var T=Ea(d),P=wa(d),H=P.length,Q=0;Q<H;Q++)v.call(void 0,P[Q],T&&T[Q],d)}var To=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xp(d,v){if(d){d=d.split("&");for(var T=0;T<d.length;T++){var P=d[T].indexOf("="),H=null;if(0<=P){var Q=d[T].substring(0,P);H=d[T].substring(P+1)}else Q=d[T];v(Q,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function vs(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof vs){this.h=d.h,Io(this,d.j),this.o=d.o,this.g=d.g,di(this,d.s),this.l=d.l;var v=d.i,T=new Hr;T.i=v.i,v.g&&(T.g=new Map(v.g),T.h=v.h),hi(this,T),this.m=d.m}else d&&(v=String(d).match(To))?(this.h=!1,Io(this,v[1]||"",!0),this.o=Fe(v[2]||""),this.g=Fe(v[3]||"",!0),di(this,v[4]),this.l=Fe(v[5]||"",!0),hi(this,v[6]||"",!0),this.m=Fe(v[7]||"")):(this.h=!1,this.i=new Hr(null,this.h))}vs.prototype.toString=function(){var d=[],v=this.j;v&&d.push(pi(v,Ta,!0),":");var T=this.g;return(T||v=="file")&&(d.push("//"),(v=this.o)&&d.push(pi(v,Ta,!0),"@"),d.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&d.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&d.push("/"),d.push(pi(T,T.charAt(0)=="/"?hd:dd,!0))),(T=this.i.toString())&&d.push("?",T),(T=this.m)&&d.push("#",pi(T,iu)),d.join("")};function Un(d){return new vs(d)}function Io(d,v,T){d.j=T?Fe(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function di(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function hi(d,v,T){v instanceof Hr?(d.i=v,qr(d.i,d.h)):(T||(v=pi(v,fd)),d.i=new Hr(v,d.h))}function tt(d,v,T){d.i.set(v,T)}function fi(d){return tt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Fe(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function pi(d,v,T){return typeof d=="string"?(d=encodeURI(d).replace(v,cd),T&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function cd(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Ta=/[#\/\?@]/g,dd=/[#\?:]/g,hd=/[#\?]/g,fd=/[#\?@]/g,iu=/#/g;function Hr(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Qt(d){d.g||(d.g=new Map,d.h=0,d.i&&xp(d.i,function(v,T){d.add(decodeURIComponent(v.replace(/\+/g," ")),T)}))}n=Hr.prototype,n.add=function(d,v){Qt(this),this.i=null,d=nr(this,d);var T=this.g.get(d);return T||this.g.set(d,T=[]),T.push(v),this.h+=1,this};function Tr(d,v){Qt(d),v=nr(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Ir(d,v){return Qt(d),v=nr(d,v),d.g.has(v)}n.forEach=function(d,v){Qt(this),this.g.forEach(function(T,P){T.forEach(function(H){d.call(v,H,P,this)},this)},this)},n.na=function(){Qt(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),T=[];for(let P=0;P<v.length;P++){const H=d[P];for(let Q=0;Q<H.length;Q++)T.push(v[P])}return T},n.V=function(d){Qt(this);let v=[];if(typeof d=="string")Ir(this,d)&&(v=v.concat(this.g.get(nr(this,d))));else{d=Array.from(this.g.values());for(let T=0;T<d.length;T++)v=v.concat(d[T])}return v},n.set=function(d,v){return Qt(this),this.i=null,d=nr(this,d),Ir(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},n.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function mi(d,v,T){Tr(d,v),0<T.length&&(d.i=null,d.g.set(nr(d,v),A(T)),d.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var T=0;T<v.length;T++){var P=v[T];const Q=encodeURIComponent(String(P)),ae=this.V(P);for(P=0;P<ae.length;P++){var H=Q;ae[P]!==""&&(H+="="+encodeURIComponent(String(ae[P]))),d.push(H)}}return this.i=d.join("&")};function nr(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function qr(d,v){v&&!d.j&&(Qt(d),d.i=null,d.g.forEach(function(T,P){var H=P.toLowerCase();P!=H&&(Tr(this,P),mi(this,H,T))},d)),d.j=v}function Sp(d,v){const T=new yo;if(c.Image){const P=new Image;P.onload=C(In,T,"TestLoadImage: loaded",!0,v,P),P.onerror=C(In,T,"TestLoadImage: error",!1,v,P),P.onabort=C(In,T,"TestLoadImage: abort",!1,v,P),P.ontimeout=C(In,T,"TestLoadImage: timeout",!1,v,P),c.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=d}else v(!1)}function pd(d,v){const T=new yo,P=new AbortController,H=setTimeout(()=>{P.abort(),In(T,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:P.signal}).then(Q=>{clearTimeout(H),Q.ok?In(T,"TestPingServer: ok",!0,v):In(T,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(H),In(T,"TestPingServer: error",!1,v)})}function In(d,v,T,P,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),P(T)}catch{}}function Rp(){this.g=new Yl}function md(d,v,T){const P=T||"";try{ci(d,function(H,Q){let ae=H;f(H)&&(ae=Kl(H)),v.push(P+Q+"="+encodeURIComponent(ae))})}catch(H){throw v.push(P+"type="+encodeURIComponent("_badmap")),H}}function _s(d){this.l=d.Ub||null,this.j=d.eb||!1}R(_s,mo),_s.prototype.g=function(){return new Co(this.l,this.j)},_s.prototype.i=function(d){return function(){return d}}({});function Co(d,v){yt.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Co,yt),n=Co.prototype,n.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,xr(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||c).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cr(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,xr(this)),this.g&&(this.readyState=3,xr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gd(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function gd(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?Cr(this):xr(this),this.readyState==3&&gd(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Cr(this))},n.Qa=function(d){this.g&&(this.response=d,Cr(this))},n.ga=function(){this.g&&Cr(this)};function Cr(d){d.readyState=4,d.l=null,d.j=null,d.v=null,xr(d)}n.setRequestHeader=function(d,v){this.u.append(d,v)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var T=v.next();!T.done;)T=T.value,d.push(T[0]+": "+T[1]),T=v.next();return d.join(`\r
`)};function xr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Co.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ws(d){let v="";return X(d,function(T,P){v+=P,v+=":",v+=T,v+=`\r
`}),v}function gi(d,v,T){e:{for(P in T){var P=!1;break e}P=!0}P||(T=ws(T),typeof d=="string"?T!=null&&encodeURIComponent(String(T)):tt(d,v,T))}function ht(d){yt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(ht,yt);var Ap=/^https?$/i,ou=["POST","PUT"];n=ht.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,v,T,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wr.g(),this.v=this.o?ha(this.o):ha(wr),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(Q){xo(this,Q);return}if(d=T||"",T=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var H in P)T.set(H,P[H]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const Q of P.keys())T.set(Q,P.get(Q));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(T.keys()).find(Q=>Q.toLowerCase()=="content-type"),H=c.FormData&&d instanceof c.FormData,!(0<=Array.prototype.indexOf.call(ou,v,void 0))||P||H||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ae]of T)this.g.setRequestHeader(Q,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ca(this),this.u=!0,this.g.send(d),this.u=!1}catch(Q){xo(this,Q)}};function xo(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,Ia(d),$n(d)}function Ia(d){d.A||(d.A=!0,vt(d,"complete"),vt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,vt(this,"complete"),vt(this,"abort"),$n(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$n(this,!0)),ht.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?au(this):this.bb())},n.bb=function(){au(this)};function au(d){if(d.h&&typeof l<"u"&&(!d.v[1]||Cn(d)!=4||d.Z()!=2)){if(d.u&&Cn(d)==4)Hl(d.Ea,0,d);else if(vt(d,"readystatechange"),Cn(d)==4){d.h=!1;try{const ae=d.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var T;if(!(T=v)){var P;if(P=ae===0){var H=String(d.D).match(To)[1]||null;!H&&c.self&&c.self.location&&(H=c.self.location.protocol.slice(0,-1)),P=!Ap.test(H?H.toLowerCase():"")}T=P}if(T)vt(d,"complete"),vt(d,"success");else{d.m=6;try{var Q=2<Cn(d)?d.g.statusText:""}catch{Q=""}d.l=Q+" ["+d.Z()+"]",Ia(d)}}finally{$n(d)}}}}function $n(d,v){if(d.g){Ca(d);const T=d.g,P=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||vt(d,"ready");try{T.onreadystatechange=P}catch{}}}function Ca(d){d.I&&(c.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Cn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Cn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),Ql(v)}};function lu(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function xa(d){const v={};d=(d.g&&2<=Cn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<d.length;P++){if(U(d[P]))continue;var T=M(d[P]);const H=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Q=v[H]||[];v[H]=Q,Q.push(T)}N(v,function(P){return P.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gr(d,v,T){return T&&T.internalChannelParams&&T.internalChannelParams[d]||v}function uu(d){this.Aa=0,this.i=[],this.j=new yo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gr("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gr("baseRetryDelayMs",5e3,d),this.cb=Gr("retryDelaySeedMs",1e4,d),this.Wa=Gr("forwardChannelMaxRetries",2,d),this.wa=Gr("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Eo(d&&d.concurrentRequestLimit),this.Da=new Rp,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=uu.prototype,n.la=8,n.G=1,n.connect=function(d,v,T,P){Ct(0),this.W=d,this.H=v||{},T&&P!==void 0&&(this.H.OSID=T,this.H.OAID=P),this.F=this.X,this.I=wd(this,null,this.W),Kr(this)};function Yt(d){if(Sa(d),d.G==3){var v=d.U++,T=Un(d.I);if(tt(T,"SID",d.K),tt(T,"RID",v),tt(T,"TYPE","terminate"),Es(d,T),v=new Er(d,d.j,v),v.L=2,v.v=fi(Un(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(v.v.toString(),"")}catch{}!T&&c.Image&&(new Image().src=v.v,T=!0),T||(v.g=Ed(v.j,null),v.g.ea(v.v)),v.F=Date.now(),nt(v)}_d(d)}function Sr(d){d.g&&(cu(d),d.g.cancel(),d.g=null)}function Sa(d){Sr(d),d.u&&(c.clearTimeout(d.u),d.u=null),Pa(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&c.clearTimeout(d.s),d.s=null)}function Kr(d){if(!Fn(d.h)&&!d.s){d.s=!0;var v=d.Ga;Te||ie(),se||(Te(),se=!0),ue.add(v,d),d.B=0}}function Pp(d,v){return ad(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=vr(E(d.Ga,d,v),vd(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const H=new Er(this,this.j,d);let Q=this.o;if(this.S&&(Q?(Q=b(Q),L(Q,this.S)):Q=this.S),this.m!==null||this.O||(H.H=Q,Q=null),this.P)e:{for(var v=0,T=0;T<this.i.length;T++){t:{var P=this.i[T];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(v+=P,4096<v){v=T;break e}if(v===4096||T===this.i.length-1){v=T+1;break e}}v=1e3}else v=1e3;v=yi(this,H,v),T=Un(this.I),tt(T,"RID",d),tt(T,"CVER",22),this.D&&tt(T,"X-HTTP-Session-Id",this.D),Es(this,T),Q&&(this.O?v="headers="+encodeURIComponent(String(ws(Q)))+"&"+v:this.m&&gi(T,this.m,Q)),su(this.h,H),this.Ua&&tt(T,"TYPE","init"),this.P?(tt(T,"$req",v),tt(T,"SID","null"),H.T=!0,_a(H,T,null)):_a(H,T,v),this.G=2}}else this.G==3&&(d?Ra(this,d):this.i.length==0||Fn(this.h)||Ra(this))};function Ra(d,v){var T;v?T=v.l:T=d.U++;const P=Un(d.I);tt(P,"SID",d.K),tt(P,"RID",T),tt(P,"AID",d.T),Es(d,P),d.m&&d.o&&gi(P,d.m,d.o),T=new Er(d,d.j,T,d.B+1),d.m===null&&(T.H=d.o),v&&(d.i=v.D.concat(d.i)),v=yi(d,T,1e3),T.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),su(d.h,T),_a(T,P,v)}function Es(d,v){d.H&&X(d.H,function(T,P){tt(v,P,T)}),d.l&&ci({},function(T,P){tt(v,P,T)})}function yi(d,v,T){T=Math.min(d.i.length,T);var P=d.l?E(d.l.Na,d.l,d):null;e:{var H=d.i;let Q=-1;for(;;){const ae=["count="+T];Q==-1?0<T?(Q=H[0].g,ae.push("ofs="+Q)):Q=0:ae.push("ofs="+Q);let Je=!0;for(let Lt=0;Lt<T;Lt++){let Be=H[Lt].g;const Ut=H[Lt].map;if(Be-=Q,0>Be)Q=Math.max(0,H[Lt].g-100),Je=!1;else try{md(Ut,ae,"req"+Be+"_")}catch{P&&P(Ut)}}if(Je){P=ae.join("&");break e}}}return d=d.i.splice(0,T),v.D=d,P}function So(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;Te||ie(),se||(Te(),se=!0),ue.add(v,d),d.v=0}}function Aa(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=vr(E(d.Fa,d),vd(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,yd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=vr(E(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),Sr(this),yd(this))};function cu(d){d.A!=null&&(c.clearTimeout(d.A),d.A=null)}function yd(d){d.g=new Er(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=Un(d.qa);tt(v,"RID","rpc"),tt(v,"SID",d.K),tt(v,"AID",d.T),tt(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&tt(v,"TO",d.ja),tt(v,"TYPE","xmlhttp"),Es(d,v),d.m&&d.o&&gi(v,d.m,d.o),d.L&&(d.g.I=d.L);var T=d.g;d=d.ia,T.L=1,T.v=fi(Un(v)),T.m=null,T.P=!0,nu(T,d)}n.Za=function(){this.C!=null&&(this.C=null,Sr(this),Aa(this),Ct(19))};function Pa(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function ba(d,v){var T=null;if(d.g==v){Pa(d),cu(d),d.g=null;var P=2}else if(gn(d.h,v))T=v.D,ld(d.h,v),P=1;else return;if(d.G!=0){if(v.o)if(P==1){T=v.m?v.m.length:0,v=Date.now()-v.F;var H=d.B;P=go(),vt(P,new ma(P,T)),Kr(d)}else So(d);else if(H=v.s,H==3||H==0&&0<v.X||!(P==1&&Pp(d,v)||P==2&&Aa(d)))switch(T&&0<T.length&&(v=d.h,v.i=v.i.concat(T)),H){case 1:Ts(d,5);break;case 4:Ts(d,10);break;case 3:Ts(d,6);break;default:Ts(d,2)}}}function vd(d,v){let T=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(T*=2),T*v}function Ts(d,v){if(d.j.info("Error code "+v),v==2){var T=E(d.fb,d),P=d.Xa;const H=!P;P=new vs(P||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Io(P,"https"),fi(P),H?Sp(P.toString(),T):pd(P.toString(),T)}else Ct(2);d.G=0,d.l&&d.l.sa(v),_d(d),Sa(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function _d(d){if(d.G=0,d.ka=[],d.l){const v=ud(d.h);(v.length!=0||d.i.length!=0)&&(S(d.ka,v),S(d.ka,d.i),d.h.i.length=0,A(d.i),d.i.length=0),d.l.ra()}}function wd(d,v,T){var P=T instanceof vs?Un(T):new vs(T);if(P.g!="")v&&(P.g=v+"."+P.g),di(P,P.s);else{var H=c.location;P=H.protocol,v=v?v+"."+H.hostname:H.hostname,H=+H.port;var Q=new vs(null);P&&Io(Q,P),v&&(Q.g=v),H&&di(Q,H),T&&(Q.l=T),P=Q}return T=d.D,v=d.ya,T&&v&&tt(P,T,v),tt(P,"VER",d.la),Es(d,P),P}function Ed(d,v,T){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new ht(new _s({eb:T})):new ht(d.pa),v.Ha(d.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function du(){}n=du.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ka(){}ka.prototype.g=function(d,v){return new yn(d,v)};function yn(d,v){yt.call(this),this.g=new uu(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!U(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!U(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Qr(this)}R(yn,yt),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Yt(this.g)},yn.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var T={};T.__data__=d,d=T}else this.u&&(T={},T.__data__=Kl(d),d=T);v.i.push(new od(v.Ya++,d)),v.G==3&&Kr(v)},yn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,yn.aa.N.call(this)};function Td(d){zr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const T in v){d=T;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}R(Td,zr);function Id(){pa.call(this),this.status=1}R(Id,pa);function Qr(d){this.g=d}R(Qr,du),Qr.prototype.ua=function(){vt(this.g,"a")},Qr.prototype.ta=function(d){vt(this.g,new Td(d))},Qr.prototype.sa=function(d){vt(this.g,new Id)},Qr.prototype.ra=function(){vt(this.g,"b")},ka.prototype.createWebChannel=ka.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,Px=function(){return new ka},Ax=function(){return go()},Rx=Wr,Kg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ya.NO_ERROR=0,ya.TIMEOUT=8,ya.HTTP_ERROR=6,Vh=ya,nd.COMPLETE="complete",Sx=nd,fa.EventType=er,er.OPEN="a",er.CLOSE="b",er.ERROR="c",er.MESSAGE="d",yt.prototype.listen=yt.prototype.K,Ku=fa,ht.prototype.listenOnce=ht.prototype.L,ht.prototype.getLastError=ht.prototype.Ka,ht.prototype.getLastErrorCode=ht.prototype.Ba,ht.prototype.getStatus=ht.prototype.Z,ht.prototype.getResponseJson=ht.prototype.Oa,ht.prototype.getResponseText=ht.prototype.oa,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Ha,xx=ht}).apply(typeof _h<"u"?_h:typeof self<"u"?self:typeof window<"u"?window:{});const zE="@firebase/firestore",WE="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ml="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=new Mf("@firebase/firestore");function el(){return Qi.logLevel}function oL(n){Qi.setLogLevel(n)}function he(n,...e){if(Qi.logLevel<=Me.DEBUG){const t=e.map(cv);Qi.debug(`Firestore (${Ml}): ${n}`,...t)}}function qs(n,...e){if(Qi.logLevel<=Me.ERROR){const t=e.map(cv);Qi.error(`Firestore (${Ml}): ${n}`,...t)}}function yl(n,...e){if(Qi.logLevel<=Me.WARN){const t=e.map(cv);Qi.warn(`Firestore (${Ml}): ${n}`,...t)}}function cv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n="Unexpected state"){const e=`FIRESTORE (${Ml}) INTERNAL ASSERTION FAILED: `+n;throw qs(e),new Error(e)}function Xe(n,e){n||Se()}function ke(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends ds{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ln.UNAUTHENTICATED))}shutdown(){}}class lL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class uL{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0);let r=this.i;const s=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new Us;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Us,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await s(this.currentUser)})},c=h=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Us)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string"),new bx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string"),new ln(e)}}class cL{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class dL{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new cL(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class HE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hL{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,hn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Xe(this.o===void 0);const r=o=>{o.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,he("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new HE(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Xe(typeof t.token=="string"),this.R=t.token,new HE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=fL(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Ue(n,e){return n<e?-1:n>e?1:0}function vl(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=-62135596800,GE=1e6;class Vt{static now(){return Vt.fromMillis(Date.now())}static fromDate(e){return Vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*GE);return new Vt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<qE)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GE}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-qE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new Vt(0,0))}static max(){return new be(new Vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="__name__";class es{constructor(e,t,r){t===void 0?t=0:t>e.length&&Se(),r===void 0?r=e.length-t:r>e.length-t&&Se(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return es.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof es?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=es.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=es.isNumericId(e),s=es.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?es.extractNumericId(e).compare(es.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Bi.fromString(e.substring(4,e.length-2))}}class ct extends es{construct(e,t,r){return new ct(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new ct(t)}static emptyPath(){return new ct([])}}const pL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends es{construct(e,t,r){return new en(e,t,r)}static isValidIdentifier(e){return pL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===KE}static keyField(){return new en([KE])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new fe(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new fe(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(r+=c,s++):(o(),s++)}if(o(),l)throw new fe(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(ct.fromString(e))}static fromName(e){return new _e(ct.fromString(e).popFirst(5))}static empty(){return new _e(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new ct(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=-1;function mL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=be.fromTimestamp(r===1e9?new Vt(t+1,0):new Vt(t,r));return new Yi(s,_e.empty(),e)}function gL(n){return new Yi(n.readTime,n.key,yc)}class Yi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Yi(be.min(),_e.empty(),yc)}static max(){return new Yi(be.max(),_e.empty(),yc)}}function yL(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Ue(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _L{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==vL)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,r)=>{t(e)})}static reject(e){return new ee((t,r)=>{r(e)})}static waitFor(e){return new ee((t,r)=>{let s=0,o=0,l=!1;e.forEach(c=>{++s,c.next(()=>{++o,l&&o===s&&t()},h=>r(h))}),l=!0,o===s&&t()})}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next(s=>s?ee.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,o)=>{r.push(t.call(this,s,o))}),this.waitFor(r)}static mapArray(e,t){return new ee((r,s)=>{const o=e.length,l=new Array(o);let c=0;for(let h=0;h<o;h++){const f=h;t(e[f]).next(g=>{l[f]=g,++c,c===o&&r(l)},g=>s(g))}})}static doWhile(e,t){return new ee((r,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):r()};o()})}}function wL(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Vl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}zf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=-1;function Wf(n){return n==null}function sf(n){return n===0&&1/n==-1/0}function EL(n){return typeof n=="number"&&Number.isInteger(n)&&!sf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="";function TL(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=QE(e)),e=IL(n.get(t),e);return QE(e)}function IL(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case Nx:t+="";break;default:t+=o}}return t}function QE(n){return n+Nx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ao(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Dx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dt=class Qg{constructor(e,t){this.comparator=e,this.root=t||zi.EMPTY}insert(e,t){return new Qg(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zi.BLACK,null,null))}remove(e){return new Qg(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wh(this.root,e,this.comparator,!1)}getReverseIterator(){return new wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wh(this.root,e,this.comparator,!0)}},wh=class{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},zi=class Ds{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??Ds.RED,this.left=s??Ds.EMPTY,this.right=o??Ds.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new Ds(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ds.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Ds.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ds.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ds.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Se();const e=this.left.check();if(e!==this.right.check())throw Se();return e+(this.isRed()?0:1)}};zi.EMPTY=null,zi.RED=!0,zi.BLACK=!1;zi.EMPTY=new class{constructor(){this.size=0}get key(){throw Se()}get value(){throw Se()}get color(){throw Se()}get left(){throw Se()}get right(){throw Se()}copy(e,t,r,s,o){return this}insert(e,t,r){return new zi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new XE(this.data.getIterator())}getIteratorFrom(e){return new XE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ft(this.comparator);return t.data=e,t}}class XE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new Kn([])}unionWith(e){let t=new Ft(en.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Kn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ox("Invalid base64 string: "+o):o}}(e);return new tn(t)}static fromUint8Array(e){const t=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const CL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xi(n){if(Xe(!!n),typeof n=="string"){let e=0;const t=CL.exec(n);if(Xe(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rt(n.seconds),nanos:Rt(n.nanos)}}function Rt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ji(n){return typeof n=="string"?tn.fromBase64String(n):tn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx="server_timestamp",Mx="__type__",jx="__previous_value__",Vx="__local_write_time__";function hv(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Mx])===null||t===void 0?void 0:t.stringValue)===Lx}function Hf(n){const e=n.mapValue.fields[jx];return hv(e)?Hf(e):e}function vc(n){const e=Xi(n.mapValue.fields[Vx].timestampValue);return new Vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e,t,r,s,o,l,c,h,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=f}}const of="(default)";class _c{constructor(e,t){this.projectId=e,this.database=t||of}static empty(){return new _c("","")}get isDefaultDatabase(){return this.database===of}isEqual(e){return e instanceof _c&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="__type__",SL="__max__",Eh={mapValue:{}},Ux="__vector__",af="value";function Zi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hv(n)?4:AL(n)?9007199254740991:RL(n)?10:11:Se()}function cs(n,e){if(n===e)return!0;const t=Zi(n);if(t!==Zi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vc(n).isEqual(vc(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Xi(s.timestampValue),c=Xi(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return Ji(s.bytesValue).isEqual(Ji(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return Rt(s.geoPointValue.latitude)===Rt(o.geoPointValue.latitude)&&Rt(s.geoPointValue.longitude)===Rt(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Rt(s.integerValue)===Rt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Rt(s.doubleValue),c=Rt(o.doubleValue);return l===c?sf(l)===sf(c):isNaN(l)&&isNaN(c)}return!1}(n,e);case 9:return vl(n.arrayValue.values||[],e.arrayValue.values||[],cs);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},c=o.mapValue.fields||{};if(YE(l)!==YE(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!cs(l[h],c[h])))return!1;return!0}(n,e);default:return Se()}}function wc(n,e){return(n.values||[]).find(t=>cs(t,e))!==void 0}function _l(n,e){if(n===e)return 0;const t=Zi(n),r=Zi(e);if(t!==r)return Ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(n.booleanValue,e.booleanValue);case 2:return function(o,l){const c=Rt(o.integerValue||o.doubleValue),h=Rt(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return JE(n.timestampValue,e.timestampValue);case 4:return JE(vc(n),vc(e));case 5:return Ue(n.stringValue,e.stringValue);case 6:return function(o,l){const c=Ji(o),h=Ji(l);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),h=l.split("/");for(let f=0;f<c.length&&f<h.length;f++){const g=Ue(c[f],h[f]);if(g!==0)return g}return Ue(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const c=Ue(Rt(o.latitude),Rt(l.latitude));return c!==0?c:Ue(Rt(o.longitude),Rt(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ZE(n.arrayValue,e.arrayValue);case 10:return function(o,l){var c,h,f,g;const _=o.fields||{},E=l.fields||{},C=(c=_[af])===null||c===void 0?void 0:c.arrayValue,R=(h=E[af])===null||h===void 0?void 0:h.arrayValue,A=Ue(((f=C==null?void 0:C.values)===null||f===void 0?void 0:f.length)||0,((g=R==null?void 0:R.values)===null||g===void 0?void 0:g.length)||0);return A!==0?A:ZE(C,R)}(n.mapValue,e.mapValue);case 11:return function(o,l){if(o===Eh.mapValue&&l===Eh.mapValue)return 0;if(o===Eh.mapValue)return 1;if(l===Eh.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),f=l.fields||{},g=Object.keys(f);h.sort(),g.sort();for(let _=0;_<h.length&&_<g.length;++_){const E=Ue(h[_],g[_]);if(E!==0)return E;const C=_l(c[h[_]],f[g[_]]);if(C!==0)return C}return Ue(h.length,g.length)}(n.mapValue,e.mapValue);default:throw Se()}}function JE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ue(n,e);const t=Xi(n),r=Xi(e),s=Ue(t.seconds,r.seconds);return s!==0?s:Ue(t.nanos,r.nanos)}function ZE(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=_l(t[s],r[s]);if(o)return o}return Ue(t.length,r.length)}function wl(n){return Yg(n)}function Yg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Xi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ji(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return _e.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=Yg(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${Yg(t.fields[l])}`;return s+"}"}(n.mapValue):Se()}function Fh(n){switch(Zi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hf(n);return e?16+Fh(e):16;case 5:return 2*n.stringValue.length;case 6:return Ji(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+Fh(o),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return ao(r.fields,(o,l)=>{s+=o.length+Fh(l)}),s}(n.mapValue);default:throw Se()}}function eT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Xg(n){return!!n&&"integerValue"in n}function fv(n){return!!n&&"arrayValue"in n}function tT(n){return!!n&&"nullValue"in n}function nT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Uh(n){return!!n&&"mapValue"in n}function RL(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Fx])===null||t===void 0?void 0:t.stringValue)===Ux}function Zu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ao(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function AL(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===SL}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Uh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zu(t)}setAll(e){let t=en.emptyPath(),r={},s=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,s),r={},s=[],t=c.popLast()}l?r[c.lastSegment()]=Zu(l):s.push(c.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());Uh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Uh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){ao(t,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Nn(Zu(this.value))}}function $x(n){const e=[];return ao(n.fields,(t,r)=>{const s=new en([t]);if(Uh(r)){const o=$x(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new Kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,t,r,s,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new un(e,0,be.min(),be.min(),be.min(),Nn.empty(),0)}static newFoundDocument(e,t,r,s){return new un(e,1,t,be.min(),r,s,0)}static newNoDocument(e,t){return new un(e,2,t,be.min(),be.min(),Nn.empty(),0)}static newUnknownDocument(e,t){return new un(e,3,t,be.min(),be.min(),Nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t){this.position=e,this.inclusive=t}}function rT(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?r=_e.comparator(_e.fromName(l.referenceValue),t.key):r=_l(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function sT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!cs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t="asc"){this.field=e,this.dir=t}}function PL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{}class Nt extends Bx{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new kL(e,t,r):t==="array-contains"?new OL(e,r):t==="in"?new LL(e,r):t==="not-in"?new ML(e,r):t==="array-contains-any"?new jL(e,r):new Nt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new NL(e,r):new DL(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(_l(t,this.value)):t!==null&&Zi(this.value)===Zi(t)&&this.matchesComparison(_l(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fr extends Bx{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Fr(e,t)}matches(e){return zx(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function zx(n){return n.op==="and"}function Wx(n){return bL(n)&&zx(n)}function bL(n){for(const e of n.filters)if(e instanceof Fr)return!1;return!0}function Jg(n){if(n instanceof Nt)return n.field.canonicalString()+n.op.toString()+wl(n.value);if(Wx(n))return n.filters.map(e=>Jg(e)).join(",");{const e=n.filters.map(t=>Jg(t)).join(",");return`${n.op}(${e})`}}function Hx(n,e){return n instanceof Nt?function(r,s){return s instanceof Nt&&r.op===s.op&&r.field.isEqual(s.field)&&cs(r.value,s.value)}(n,e):n instanceof Fr?function(r,s){return s instanceof Fr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,l,c)=>o&&Hx(l,s.filters[c]),!0):!1}(n,e):void Se()}function qx(n){return n instanceof Nt?function(t){return`${t.field.canonicalString()} ${t.op} ${wl(t.value)}`}(n):n instanceof Fr?function(t){return t.op.toString()+" {"+t.getFilters().map(qx).join(" ,")+"}"}(n):"Filter"}class kL extends Nt{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class NL extends Nt{constructor(e,t){super(e,"in",t),this.keys=Gx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class DL extends Nt{constructor(e,t){super(e,"not-in",t),this.keys=Gx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Gx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>_e.fromName(r.referenceValue))}class OL extends Nt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fv(t)&&wc(t.arrayValue,this.value)}}class LL extends Nt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&wc(this.value.arrayValue,t)}}class ML extends Nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(wc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!wc(this.value.arrayValue,t)}}class jL extends Nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>wc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,t=null,r=[],s=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=c,this.le=null}}function iT(n,e=null,t=[],r=[],s=null,o=null,l=null){return new VL(n,e,t,r,s,o,l)}function pv(n){const e=ke(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Jg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Wf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>wl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>wl(r)).join(",")),e.le=t}return e.le}function mv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!PL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Hx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!sT(n.startAt,e.startAt)&&sT(n.endAt,e.endAt)}function Zg(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,t=null,r=[],s=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function FL(n,e,t,r,s,o,l,c){return new Fl(n,e,t,r,s,o,l,c)}function qf(n){return new Fl(n)}function oT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Kx(n){return n.collectionGroup!==null}function ec(n){const e=ke(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Ft(en.comparator);return l.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new Ec(o,r))}),t.has(en.keyField().canonicalString())||e.he.push(new Ec(en.keyField(),r))}return e.he}function os(n){const e=ke(n);return e.Pe||(e.Pe=UL(e,ec(n))),e.Pe}function UL(n,e){if(n.limitType==="F")return iT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Ec(s.field,o)});const t=n.endAt?new lf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new lf(n.startAt.position,n.startAt.inclusive):null;return iT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ey(n,e){const t=n.filters.concat([e]);return new Fl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ty(n,e,t){return new Fl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gf(n,e){return mv(os(n),os(e))&&n.limitType===e.limitType}function Qx(n){return`${pv(os(n))}|lt:${n.limitType}`}function tl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>qx(s)).join(", ")}]`),Wf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>wl(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>wl(s)).join(",")),`Target(${r})`}(os(n))}; limitType=${n.limitType})`}function Kf(n,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):_e.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,s){for(const o of ec(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(l,c,h){const f=rT(l,c,h);return l.inclusive?f<=0:f<0}(r.startAt,ec(r),s)||r.endAt&&!function(l,c,h){const f=rT(l,c,h);return l.inclusive?f>=0:f>0}(r.endAt,ec(r),s))}(n,e)}function $L(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Yx(n){return(e,t)=>{let r=!1;for(const s of ec(n)){const o=BL(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function BL(n,e,t){const r=n.field.isKeyField()?_e.comparator(e.key,t.key):function(o,l,c){const h=l.data.field(o),f=c.data.field(o);return h!==null&&f!==null?_l(h,f):Se()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ao(this.inner,(t,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return Dx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=new Dt(_e.comparator);function Gs(){return zL}const Xx=new Dt(_e.comparator);function Qu(...n){let e=Xx;for(const t of n)e=e.insert(t.key,t);return e}function Jx(n){let e=Xx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Wo(){return tc()}function Zx(){return tc()}function tc(){return new ia(n=>n.toString(),(n,e)=>n.isEqual(e))}const WL=new Dt(_e.comparator),HL=new Ft(_e.comparator);function Ve(...n){let e=HL;for(const t of n)e=e.add(t);return e}const qL=new Ft(Ue);function GL(){return qL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sf(e)?"-0":e}}function eS(n){return{integerValue:""+n}}function KL(n,e){return EL(e)?eS(e):gv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(){this._=void 0}}function QL(n,e,t){return n instanceof Tc?function(s,o){const l={fields:{[Mx]:{stringValue:Lx},[Vx]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&hv(o)&&(o=Hf(o)),o&&(l.fields[jx]=o),{mapValue:l}}(t,e):n instanceof Ic?nS(n,e):n instanceof Cc?rS(n,e):function(s,o){const l=tS(s,o),c=aT(l)+aT(s.Ie);return Xg(l)&&Xg(s.Ie)?eS(c):gv(s.serializer,c)}(n,e)}function YL(n,e,t){return n instanceof Ic?nS(n,e):n instanceof Cc?rS(n,e):t}function tS(n,e){return n instanceof uf?function(r){return Xg(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Tc extends Qf{}class Ic extends Qf{constructor(e){super(),this.elements=e}}function nS(n,e){const t=sS(e);for(const r of n.elements)t.some(s=>cs(s,r))||t.push(r);return{arrayValue:{values:t}}}class Cc extends Qf{constructor(e){super(),this.elements=e}}function rS(n,e){let t=sS(e);for(const r of n.elements)t=t.filter(s=>!cs(s,r));return{arrayValue:{values:t}}}class uf extends Qf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function aT(n){return Rt(n.integerValue||n.doubleValue)}function sS(n){return fv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e,t){this.field=e,this.transform=t}}function JL(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Ic&&s instanceof Ic||r instanceof Cc&&s instanceof Cc?vl(r.elements,s.elements,cs):r instanceof uf&&s instanceof uf?cs(r.Ie,s.Ie):r instanceof Tc&&s instanceof Tc}(n.transform,e.transform)}class ZL{constructor(e,t){this.version=e,this.transformResults=t}}class hr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hr}static exists(e){return new hr(void 0,e)}static updateTime(e){return new hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $h(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Yf{}function iS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new yv(n.key,hr.none()):new Uc(n.key,n.data,hr.none());{const t=n.data,r=Nn.empty();let s=new Ft(en.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new lo(n.key,r,new Kn(s.toArray()),hr.none())}}function eM(n,e,t){n instanceof Uc?function(s,o,l){const c=s.value.clone(),h=uT(s.fieldTransforms,o,l.transformResults);c.setAll(h),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,e,t):n instanceof lo?function(s,o,l){if(!$h(s.precondition,o))return void o.convertToUnknownDocument(l.version);const c=uT(s.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(oS(s)),h.setAll(c),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function nc(n,e,t,r){return n instanceof Uc?function(o,l,c,h){if(!$h(o.precondition,l))return c;const f=o.value.clone(),g=cT(o.fieldTransforms,h,l);return f.setAll(g),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof lo?function(o,l,c,h){if(!$h(o.precondition,l))return c;const f=cT(o.fieldTransforms,h,l),g=l.data;return g.setAll(oS(o)),g.setAll(f),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(_=>_.field))}(n,e,t,r):function(o,l,c){return $h(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(n,e,t)}function tM(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=tS(r.transform,s||null);o!=null&&(t===null&&(t=Nn.empty()),t.set(r.field,o))}return t||null}function lT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&vl(r,s,(o,l)=>JL(o,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Uc extends Yf{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class lo extends Yf{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function oS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function uT(n,e,t){const r=new Map;Xe(n.length===t.length);for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,c=e.data.field(o.field);r.set(o.field,YL(l,c,t[s]))}return r}function cT(n,e,t){const r=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);r.set(s.field,QL(o,l,e))}return r}class yv extends Yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nM extends Yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&eM(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=nc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=nc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Zx();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(s.key)?null:c;const h=iS(l,c);h!==null&&r.set(s.key,h),l.isValidDocument()||l.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ve())}isEqual(e){return this.batchId===e.batchId&&vl(this.mutations,e.mutations,(t,r)=>lT(t,r))&&vl(this.baseMutations,e.baseMutations,(t,r)=>lT(t,r))}}class vv{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Xe(e.mutations.length===r.length);let s=function(){return WL}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new vv(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,ze;function oM(n){switch(n){case Z.OK:return Se();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Se()}}function aS(n){if(n===void 0)return qs("GRPC error has no .code"),Z.UNKNOWN;switch(n){case kt.OK:return Z.OK;case kt.CANCELLED:return Z.CANCELLED;case kt.UNKNOWN:return Z.UNKNOWN;case kt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case kt.INTERNAL:return Z.INTERNAL;case kt.UNAVAILABLE:return Z.UNAVAILABLE;case kt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case kt.NOT_FOUND:return Z.NOT_FOUND;case kt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case kt.ABORTED:return Z.ABORTED;case kt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case kt.DATA_LOSS:return Z.DATA_LOSS;default:return Se()}}(ze=kt||(kt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=new Bi([4294967295,4294967295],0);function dT(n){const e=aM().encode(n),t=new Cx;return t.update(e),new Uint8Array(t.digest())}function hT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Bi([t,r],0),new Bi([s,o],0)]}class _v{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Yu(`Invalid padding: ${t}`);if(r<0)throw new Yu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Yu(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Bi.fromNumber(this.Ee)}Ae(e,t,r){let s=e.add(t.multiply(Bi.fromNumber(r)));return s.compare(lM)===1&&(s=new Bi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=dT(e),[r,s]=hT(t);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,s,o);if(!this.Re(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new _v(o,s,t);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.Ee===0)return;const t=dT(e),[r,s]=hT(t);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,s,o);this.Ve(l)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Yu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,$c.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Xf(be.min(),s,new Dt(Ue),Gs(),Ve())}}class $c{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new $c(r,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,t,r,s){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=s}}class lS{constructor(e,t){this.targetId=e,this.ge=t}}class uS{constructor(e,t,r=tn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class fT{constructor(){this.pe=0,this.ye=pT(),this.we=tn.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Ve(),t=Ve(),r=Ve();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Se()}}),new $c(this.we,this.be,e,t,r)}Me(){this.Se=!1,this.ye=pT()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Xe(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class uM{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Gs(),this.$e=Th(),this.Ke=Th(),this.Ue=new Dt(Ue)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Se()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,s)=>{this.Je(s)&&t(s)})}Ze(e){const t=e.targetId,r=e.ge.count,s=this.Xe(t);if(s){const o=s.target;if(Zg(o))if(r===0){const l=new _e(o.path);this.ze(t,l,un.newNoDocument(l,be.min()))}else Xe(r===1);else{const l=this.et(t);if(l!==r){const c=this.tt(e),h=c?this.nt(c,e,l):1;if(h!==0){this.Ye(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,f)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let l,c;try{l=Ji(r).toUint8Array()}catch(h){if(h instanceof Ox)return yl("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new _v(l,s,o)}catch(h){return yl(h instanceof Yu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.Ee===0?null:c}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let s=0;return r.forEach(o=>{const l=this.ke.it(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.ze(t,o,null),s++)}),s}ot(e){const t=new Map;this.qe.forEach((o,l)=>{const c=this.Xe(l);if(c){if(o.current&&Zg(c.target)){const h=new _e(c.target.path);this._t(h).has(l)||this.ut(l,h)||this.ze(l,h,un.newNoDocument(h,e))}o.ve&&(t.set(l,o.Fe()),o.Me())}});let r=Ve();this.Ke.forEach((o,l)=>{let c=!0;l.forEachWhile(h=>{const f=this.Xe(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.Qe.forEach((o,l)=>l.setReadTime(e));const s=new Xf(e,t,this.Ue,this.Qe,r);return this.Qe=Gs(),this.$e=Th(),this.Ke=Th(),this.Ue=new Dt(Ue),s}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new fT,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new Ft(Ue),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Ft(Ue),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new fT),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Th(){return new Dt(_e.comparator)}function pT(){return new Dt(_e.comparator)}const cM={asc:"ASCENDING",desc:"DESCENDING"},dM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hM={and:"AND",or:"OR"};class fM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ny(n,e){return n.useProto3Json||Wf(e)?e:{value:e}}function cf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function pM(n,e){return cf(n,e.toTimestamp())}function as(n){return Xe(!!n),be.fromTimestamp(function(t){const r=Xi(t);return new Vt(r.seconds,r.nanos)}(n))}function wv(n,e){return ry(n,e).canonicalString()}function ry(n,e){const t=function(s){return new ct(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function dS(n){const e=ct.fromString(n);return Xe(gS(e)),e}function sy(n,e){return wv(n.databaseId,e.path)}function ug(n,e){const t=dS(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(fS(t))}function hS(n,e){return wv(n.databaseId,e)}function mM(n){const e=dS(n);return e.length===4?ct.emptyPath():fS(e)}function iy(n){return new ct(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function fS(n){return Xe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function mT(n,e,t){return{name:sy(n,e),fields:t.value.mapValue.fields}}function gM(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Se()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(f,g){return f.useProto3Json?(Xe(g===void 0||typeof g=="string"),tn.fromBase64String(g||"")):(Xe(g===void 0||g instanceof Buffer||g instanceof Uint8Array),tn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(f){const g=f.code===void 0?Z.UNKNOWN:aS(f.code);return new fe(g,f.message||"")}(l);t=new uS(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ug(n,r.document.name),o=as(r.document.updateTime),l=r.document.createTime?as(r.document.createTime):be.min(),c=new Nn({mapValue:{fields:r.document.fields}}),h=un.newFoundDocument(s,o,l,c),f=r.targetIds||[],g=r.removedTargetIds||[];t=new Bh(f,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ug(n,r.document),o=r.readTime?as(r.readTime):be.min(),l=un.newNoDocument(s,o),c=r.removedTargetIds||[];t=new Bh([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ug(n,r.document),o=r.removedTargetIds||[];t=new Bh([],o,s,null)}else{if(!("filter"in e))return Se();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new iM(s,o),c=r.targetId;t=new lS(c,l)}}return t}function yM(n,e){let t;if(e instanceof Uc)t={update:mT(n,e.key,e.value)};else if(e instanceof yv)t={delete:sy(n,e.key)};else if(e instanceof lo)t={update:mT(n,e.key,e.data),updateMask:SM(e.fieldMask)};else{if(!(e instanceof nM))return Se();t={verify:sy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof Tc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ic)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Cc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof uf)return{fieldPath:l.field.canonicalString(),increment:c.Ie};throw Se()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:pM(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Se()}(n,e.precondition)),t}function vM(n,e){return n&&n.length>0?(Xe(e!==void 0),n.map(t=>function(s,o){let l=s.updateTime?as(s.updateTime):as(o);return l.isEqual(be.min())&&(l=as(o)),new ZL(l,s.transformResults||[])}(t,e))):[]}function _M(n,e){return{documents:[hS(n,e.path)]}}function wM(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=hS(n,s);const o=function(f){if(f.length!==0)return mS(Fr.create(f,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(f){if(f.length!==0)return f.map(g=>function(E){return{field:nl(E.field),direction:IM(E.dir)}}(g))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=ny(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ht:t,parent:s}}function EM(n){let e=mM(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Xe(r===1);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=function(_){const E=pS(_);return E instanceof Fr&&Wx(E)?E.getFilters():[E]}(t.where));let l=[];t.orderBy&&(l=function(_){return _.map(E=>function(R){return new Ec(rl(R.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(E))}(t.orderBy));let c=null;t.limit&&(c=function(_){let E;return E=typeof _=="object"?_.value:_,Wf(E)?null:E}(t.limit));let h=null;t.startAt&&(h=function(_){const E=!!_.before,C=_.values||[];return new lf(C,E)}(t.startAt));let f=null;return t.endAt&&(f=function(_){const E=!_.before,C=_.values||[];return new lf(C,E)}(t.endAt)),FL(e,s,l,o,c,"F",h,f)}function TM(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function pS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=rl(t.unaryFilter.field);return Nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=rl(t.unaryFilter.field);return Nt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=rl(t.unaryFilter.field);return Nt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=rl(t.unaryFilter.field);return Nt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Se()}}(n):n.fieldFilter!==void 0?function(t){return Nt.create(rl(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Se()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Fr.create(t.compositeFilter.filters.map(r=>pS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Se()}}(t.compositeFilter.op))}(n):Se()}function IM(n){return cM[n]}function CM(n){return dM[n]}function xM(n){return hM[n]}function nl(n){return{fieldPath:n.canonicalString()}}function rl(n){return en.fromServerFormat(n.fieldPath)}function mS(n){return n instanceof Nt?function(t){if(t.op==="=="){if(nT(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NAN"}};if(tT(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(nT(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NOT_NAN"}};if(tT(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nl(t.field),op:CM(t.op),value:t.value}}}(n):n instanceof Fr?function(t){const r=t.getFilters().map(s=>mS(s));return r.length===1?r[0]:{compositeFilter:{op:xM(t.op),filters:r}}}(n):Se()}function SM(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function gS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,t,r,s,o=be.min(),l=be.min(),c=tn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new Fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e){this.Tt=e}}function AM(n){const e=EM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ty(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(){this.Tn=new bM}addToCollectionParentIndex(e,t){return this.Tn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(Yi.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(Yi.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class bM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Ft(ct.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ft(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yS=41943040;class kn{static withCacheSize(e){return new kn(e,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(yS,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new El(0)}static Un(){return new El(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="LruGarbageCollector",kM=1048576;function vT([n,e],[t,r]){const s=Ue(n,t);return s===0?Ue(e,r):s}class NM{constructor(e){this.Hn=e,this.buffer=new Ft(vT),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();vT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class DM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){he(yT,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Vl(t)?he(yT,"Ignoring IndexedDB error during garbage collection: ",t):await jl(t)}await this.er(3e5)})}}class OM{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(zf.ae);const r=new NM(t);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(gT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gT):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,s,o,l,c,h,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),s=this.params.maximumSequenceNumbersToCollect):s=_,l=Date.now(),this.nthSequenceNumber(e,s))).next(_=>(r=_,c=Date.now(),this.removeTargets(e,r,t))).next(_=>(o=_,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(_=>(f=Date.now(),el()<=Me.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${_} documents in `+(f-h)+`ms
Total Duration: ${f-g}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:_})))}}function LM(n,e){return new OM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(){this.changes=new ia(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&nc(r.mutation,s,Kn.empty(),Vt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ve()){const s=Wo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(o=>{let l=Qu();return o.forEach((c,h)=>{l=l.insert(c,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Wo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ve()))}populateOverlays(e,t,r){const s=[];return r.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,r,s){let o=Gs();const l=tc(),c=function(){return tc()}();return t.forEach((h,f)=>{const g=r.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof lo)?o=o.insert(f.key,f):g!==void 0?(l.set(f.key,g.mutation.getFieldMask()),nc(g.mutation,f,g.mutation.getFieldMask(),Vt.now())):l.set(f.key,Kn.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,g)=>l.set(f,g)),t.forEach((f,g)=>{var _;return c.set(f,new jM(g,(_=l.get(f))!==null&&_!==void 0?_:null))}),c))}recalculateAndSaveOverlays(e,t){const r=tc();let s=new Dt((l,c)=>l-c),o=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(h=>{const f=t.get(h);if(f===null)return;let g=r.get(h)||Kn.empty();g=c.applyToLocalView(f,g),r.set(h,g);const _=(s.get(c.batchId)||Ve()).add(h);s=s.insert(c.batchId,_)})}).next(()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),f=h.key,g=h.value,_=Zx();g.forEach(E=>{if(!o.has(E)){const C=iS(t.get(E),r.get(E));C!==null&&_.set(E,C),o=o.add(E)}}),l.push(this.documentOverlayCache.saveOverlays(e,f,_))}return ee.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(l){return _e.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Kx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):ee.resolve(Wo());let c=yc,h=o;return l.next(f=>ee.forEach(f,(g,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),o.get(g)?ee.resolve():this.remoteDocumentCache.getEntry(e,g).next(E=>{h=h.insert(g,E)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,Ve())).next(g=>({batchId:c,changes:Jx(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next(r=>{let s=Qu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let l=Qu();return this.indexManager.getCollectionParents(e,o).next(c=>ee.forEach(c,h=>{const f=function(_,E){return new Fl(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next(g=>{g.forEach((_,E)=>{l=l.insert(_,E)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s))).next(l=>{o.forEach((h,f)=>{const g=f.getKey();l.get(g)===null&&(l=l.insert(g,un.newInvalidDocument(g)))});let c=Qu();return l.forEach((h,f)=>{const g=o.get(h);g!==void 0&&nc(g.mutation,f,Kn.empty(),Vt.now()),Kf(t,f)&&(c=c.insert(h,f))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ee.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:as(s.createTime)}}(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(s){return{name:s.name,query:AM(s.bundledQuery),readTime:as(s.readTime)}}(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(){this.overlays=new Dt(_e.comparator),this.Rr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Wo();return ee.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,o)=>{this.Et(e,t,o)}),ee.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const s=Wo(),o=t.length+1,l=new _e(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&s.set(h.getKey(),h)}return ee.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new Dt((f,g)=>f-g);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let g=o.get(f.largestBatchId);g===null&&(g=Wo(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const c=Wo(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,g)=>c.set(f,g)),!(c.size()>=s)););return ee.resolve(c)}Et(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new sM(t,r));let o=this.Rr.get(t);o===void 0&&(o=Ve(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(){this.Vr=new Ft(Ht.mr),this.gr=new Ft(Ht.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new Ht(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new Ht(e,t))}br(e,t){e.forEach(r=>this.removeReference(r,t))}Sr(e){const t=new _e(new ct([])),r=new Ht(t,e),s=new Ht(t,e+1),o=[];return this.gr.forEachInRange([r,s],l=>{this.wr(l),o.push(l.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new _e(new ct([])),r=new Ht(t,e),s=new Ht(t,e+1);let o=Ve();return this.gr.forEachInRange([r,s],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new Ht(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ht{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return _e.comparator(e.key,t.key)||Ue(e.Cr,t.Cr)}static pr(e,t){return Ue(e.Cr,t.Cr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Ft(Ht.mr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new rM(o,t,r,s);this.mutationQueue.push(l);for(const c of s)this.Mr=this.Mr.add(new Ht(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ee.resolve(l)}lookupMutationBatch(e,t){return ee.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Nr(r),o=s<0?0:s;return ee.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?dv:this.Fr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ht(t,0),s=new Ht(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,s],l=>{const c=this.Or(l.Cr);o.push(c)}),ee.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ft(Ue);return t.forEach(s=>{const o=new Ht(s,0),l=new Ht(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,l],c=>{r=r.add(c.Cr)})}),ee.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;_e.isDocumentKey(o)||(o=o.child(""));const l=new Ht(new _e(o),0);let c=new Ft(Ue);return this.Mr.forEachWhile(h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(c=c.add(h.Cr)),!0)},l),ee.resolve(this.Br(c))}Br(e){const t=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Xe(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return ee.forEach(t.mutations,s=>{const o=new Ht(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new Ht(t,0),s=this.Mr.firstAfterOrEqual(r);return ee.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e){this.kr=e,this.docs=function(){return new Dt(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,l=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():un.newInvalidDocument(t))}getEntries(e,t){let r=Gs();return t.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():un.newInvalidDocument(s))}),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=Gs();const l=t.path,c=new _e(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:f,value:{document:g}}=h.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||yL(gL(g),r)<=0||(s.has(g.key)||Kf(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return ee.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Se()}qr(e,t){return ee.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new WM(this)}getSize(e){return ee.resolve(this.size)}}class WM extends MM{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),ee.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.persistence=e,this.Qr=new ia(t=>pv(t),mv),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Ev,this.targetCount=0,this.Ur=El.Kn()}forEachTarget(e,t){return this.Qr.forEach((r,s)=>t(s)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),ee.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new El(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.zn(t),ee.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.Qr.forEach((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Qr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),ee.waitFor(o).next(()=>s)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.Kr.yr(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.Kr.br(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),ee.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Kr.vr(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new zf(0),this.zr=!1,this.zr=!0,this.jr=new $M,this.referenceDelegate=e(this),this.Hr=new HM(this),this.indexManager=new PM,this.remoteDocumentCache=function(s){return new zM(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new RM(t),this.Yr=new FM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new UM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new BM(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){he("MemoryPersistence","Starting transaction:",e);const s=new qM(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,t){return ee.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class qM extends _L{constructor(e){super(),this.currentSequenceNumber=e}}class Tv{constructor(e){this.persistence=e,this.ti=new Ev,this.ni=null}static ri(e){return new Tv(e)}get ii(){if(this.ni)return this.ni;throw Se()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ee.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.ii,r=>{const s=_e.fromPath(r);return this.si(e,s).next(o=>{o||t.removeEntry(s,be.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ee.or([()=>ee.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class df{constructor(e,t){this.persistence=e,this.oi=new ia(r=>TL(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=LM(this,t)}static ri(e,t){return new df(e,t)}Zr(){}Xr(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return ee.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(o=>o?ee.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,l=>this.ar(e,l,t).next(c=>{c||(r++,o.removeEntry(l,be.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ee.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fh(e.data.value)),t}ar(e,t,r){return ee.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return ee.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=s}static Yi(e,t){let r=Ve(),s=Ve();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Iv(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return pk()?8:wL(mn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.rs(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ss(e,t,s,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new GM;return this._s(e,t,l).next(c=>{if(o.result=c,this.Xi)return this.us(e,t,l,c.size)})}).next(()=>o.result)}us(e,t,r,s){return r.documentReadCount<this.es?(el()<=Me.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",tl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ee.resolve()):(el()<=Me.DEBUG&&he("QueryEngine","Query:",tl(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(el()<=Me.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",tl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,os(t))):ee.resolve())}rs(e,t){if(oT(t))return ee.resolve(null);let r=os(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=ty(t,null,"F"),r=os(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Ve(...o);return this.ns.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(h=>{const f=this.cs(t,c);return this.ls(t,f,l,h.readTime)?this.rs(e,ty(t,null,"F")):this.hs(e,f,t,h)}))})))}ss(e,t,r,s){return oT(t)||s.isEqual(be.min())?ee.resolve(null):this.ns.getDocuments(e,r).next(o=>{const l=this.cs(t,o);return this.ls(t,l,r,s)?ee.resolve(null):(el()<=Me.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),tl(t)),this.hs(e,l,t,mL(s,yc)).next(c=>c))})}cs(e,t){let r=new Ft(Yx(e));return t.forEach((s,o)=>{Kf(e,o)&&(r=r.add(o))}),r}ls(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,t,r){return el()<=Me.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",tl(t)),this.ns.getDocumentsMatchingQuery(e,t,Yi.min(),r)}hs(e,t,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="LocalStore",QM=3e8;class YM{constructor(e,t,r,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new Dt(Ue),this.Is=new ia(o=>pv(o),mv),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VM(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function XM(n,e,t,r){return new YM(n,e,t,r)}async function _S(n,e){const t=ke(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let h=Ve();for(const f of s){l.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}for(const f of o){c.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(r,h).next(f=>({Rs:f,removedBatchIds:l,addedBatchIds:c}))})})}function JM(n,e){const t=ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(c,h,f,g){const _=f.batch,E=_.keys();let C=ee.resolve();return E.forEach(R=>{C=C.next(()=>g.getEntry(h,R)).next(A=>{const S=f.docVersions.get(R);Xe(S!==null),A.version.compareTo(S)<0&&(_.applyToRemoteDocument(A,f),A.isValidDocument()&&(A.setReadTime(f.commitVersion),g.addEntry(A)))})}),C.next(()=>c.mutationQueue.removeMutationBatch(h,_))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=Ve();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(h=h.add(c.batch.mutations[f].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function wS(n){const e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function ZM(n,e){const t=ke(n),r=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const c=[];e.targetChanges.forEach((g,_)=>{const E=s.get(_);if(!E)return;c.push(t.Hr.removeMatchingKeys(o,g.removedDocuments,_).next(()=>t.Hr.addMatchingKeys(o,g.addedDocuments,_)));let C=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?C=C.withResumeToken(tn.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):g.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(g.resumeToken,r)),s=s.insert(_,C),function(A,S,V){return A.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=QM?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(E,C,g)&&c.push(t.Hr.updateTargetData(o,C))});let h=Gs(),f=Ve();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),c.push(e4(o,l,e.documentUpdates).next(g=>{h=g.Vs,f=g.fs})),!r.isEqual(be.min())){const g=t.Hr.getLastRemoteSnapshotVersion(o).next(_=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(g)}return ee.waitFor(c).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(t.Ts=s,o))}function e4(n,e,t){let r=Ve(),s=Ve();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=Gs();return t.forEach((c,h)=>{const f=o.get(c);h.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(c)),h.isNoDocument()&&h.version.isEqual(be.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):he(Cv,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",h.version)}),{Vs:l,fs:s}})}function t4(n,e){const t=ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=dv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function n4(n,e){const t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Hr.getTargetData(r,e).next(o=>o?(s=o,ee.resolve(s)):t.Hr.allocateTargetId(r).next(l=>(s=new Fi(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function oy(n,e,t){const r=ke(n),s=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Vl(l))throw l;he(Cv,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function _T(n,e,t){const r=ke(n);let s=be.min(),o=Ve();return r.persistence.runTransaction("Execute query","readwrite",l=>function(h,f,g){const _=ke(h),E=_.Is.get(g);return E!==void 0?ee.resolve(_.Ts.get(E)):_.Hr.getTargetData(f,g)}(r,l,os(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(l,c.targetId).next(h=>{o=h})}).next(()=>r.Ps.getDocumentsMatchingQuery(l,e,t?s:be.min(),t?o:Ve())).next(c=>(r4(r,$L(e),c),{documents:c,gs:o})))}function r4(n,e,t){let r=n.Es.get(e)||be.min();t.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}class wT{constructor(){this.activeTargetIds=GL()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class s4{constructor(){this.ho=new wT,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new wT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="ConnectivityMonitor";class TT{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){he(ET,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){he(ET,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ih=null;function ay(){return Ih===null?Ih=function(){return 268435456+Math.round(2147483648*Math.random())}():Ih++,"0x"+Ih.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="RestConnection",o4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class a4{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===of?`project_id=${r}`:`project_id=${r}&database_id=${s}`}bo(e,t,r,s,o){const l=ay(),c=this.So(e,t.toUriEncodedString());he(cg,`Sending RPC '${e}' ${l}:`,c,r);const h={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(h,s,o),this.vo(e,c,h,r).then(f=>(he(cg,`Received RPC '${e}' ${l}: `,f),f),f=>{throw yl(cg,`RPC '${e}' ${l} failed with error: `,f,"url: ",c,"request:",r),f})}Co(e,t,r,s,o,l){return this.bo(e,t,r,s,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ml}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}So(e,t){const r=o4[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class u4 extends a4{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,s){const o=ay();return new Promise((l,c)=>{const h=new xx;h.setWithCredentials(!0),h.listenOnce(Sx.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Vh.NO_ERROR:const g=h.getResponseJson();he(an,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),l(g);break;case Vh.TIMEOUT:he(an,`RPC '${e}' ${o} timed out`),c(new fe(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Vh.HTTP_ERROR:const _=h.getStatus();if(he(an,`RPC '${e}' ${o} failed with status:`,_,"response text:",h.getResponseText()),_>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const C=E==null?void 0:E.error;if(C&&C.status&&C.message){const R=function(S){const V=S.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(V)>=0?V:Z.UNKNOWN}(C.status);c(new fe(R,C.message))}else c(new fe(Z.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new fe(Z.UNAVAILABLE,"Connection failed."));break;default:Se()}}finally{he(an,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);he(an,`RPC '${e}' ${o} sending request:`,s),h.send(t,"POST",f,r,15)})}Wo(e,t,r){const s=ay(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Px(),c=Ax(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Do(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const g=o.join("");he(an,`Creating RPC '${e}' stream ${s}: ${g}`,h);const _=l.createWebChannel(g,h);let E=!1,C=!1;const R=new l4({Fo:S=>{C?he(an,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(E||(he(an,`Opening RPC '${e}' stream ${s} transport.`),_.open(),E=!0),he(an,`RPC '${e}' stream ${s} sending:`,S),_.send(S))},Mo:()=>_.close()}),A=(S,V,U)=>{S.listen(V,$=>{try{U($)}catch(W){setTimeout(()=>{throw W},0)}})};return A(_,Ku.EventType.OPEN,()=>{C||(he(an,`RPC '${e}' stream ${s} transport opened.`),R.Qo())}),A(_,Ku.EventType.CLOSE,()=>{C||(C=!0,he(an,`RPC '${e}' stream ${s} transport closed`),R.Ko())}),A(_,Ku.EventType.ERROR,S=>{C||(C=!0,yl(an,`RPC '${e}' stream ${s} transport errored:`,S),R.Ko(new fe(Z.UNAVAILABLE,"The operation could not be completed")))}),A(_,Ku.EventType.MESSAGE,S=>{var V;if(!C){const U=S.data[0];Xe(!!U);const $=U,W=($==null?void 0:$.error)||((V=$[0])===null||V===void 0?void 0:V.error);if(W){he(an,`RPC '${e}' stream ${s} received error:`,W);const Y=W.status;let X=function(k){const L=kt[k];if(L!==void 0)return aS(L)}(Y),N=W.message;X===void 0&&(X=Z.INTERNAL,N="Unknown error status: "+Y+" with message "+W.message),C=!0,R.Ko(new fe(X,N)),_.close()}else he(an,`RPC '${e}' stream ${s} received:`,U),R.Uo(U)}}),A(c,Rx.STAT_EVENT,S=>{S.stat===Kg.PROXY?he(an,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===Kg.NOPROXY&&he(an,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.$o()},0),R}}function dg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(n){return new fM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-r);s>0&&he("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="PersistentStream";class TS{constructor(e,t,r,s,o,l,c,h){this.Ti=e,this.n_=r,this.r_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new ES(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(qs(t.toString()),qs("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===t&&this.V_(r,s)},r=>{e(()=>{const s=new fe(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return he(IT,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(he(IT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class c4 extends TS{constructor(e,t,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=gM(this.serializer,e),r=function(o){if(!("targetChange"in o))return be.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?be.min():l.readTime?as(l.readTime):be.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=iy(this.serializer),t.addTarget=function(o,l){let c;const h=l.target;if(c=Zg(h)?{documents:_M(o,h)}:{query:wM(o,h).ht},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=cS(o,l.resumeToken);const f=ny(o,l.expectedCount);f!==null&&(c.expectedCount=f)}else if(l.snapshotVersion.compareTo(be.min())>0){c.readTime=cf(o,l.snapshotVersion.toTimestamp());const f=ny(o,l.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);const r=TM(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=iy(this.serializer),t.removeTarget=e,this.I_(t)}}class d4 extends TS{constructor(e,t,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=vM(e.writeResults,e.commitTime),r=as(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=iy(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>yM(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{}class f4 extends h4{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.bo(e,ry(t,r),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(Z.UNKNOWN,o.toString())})}Co(e,t,r,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Co(e,ry(t,r),s,l,c,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(Z.UNKNOWN,l.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class p4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(qs(t),this.N_=!1):he("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="RemoteStore";class m4{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(l=>{r.enqueueAndForget(async()=>{oa(this)&&(he(Xo,"Restarting streams for network reachability change."),await async function(h){const f=ke(h);f.W_.add(4),await Bc(f),f.j_.set("Unknown"),f.W_.delete(4),await Zf(f)}(this))})}),this.j_=new p4(r,s)}}async function Zf(n){if(oa(n))for(const e of n.G_)await e(!0)}async function Bc(n){for(const e of n.G_)await e(!1)}function IS(n,e){const t=ke(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),Av(t)?Rv(t):Ul(t).c_()&&Sv(t,e))}function xv(n,e){const t=ke(n),r=Ul(t);t.U_.delete(e),r.c_()&&CS(t,e),t.U_.size===0&&(r.c_()?r.P_():oa(t)&&t.j_.set("Unknown"))}function Sv(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ul(n).y_(e)}function CS(n,e){n.H_.Ne(e),Ul(n).w_(e)}function Rv(n){n.H_=new uM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Ul(n).start(),n.j_.B_()}function Av(n){return oa(n)&&!Ul(n).u_()&&n.U_.size>0}function oa(n){return ke(n).W_.size===0}function xS(n){n.H_=void 0}async function g4(n){n.j_.set("Online")}async function y4(n){n.U_.forEach((e,t)=>{Sv(n,e)})}async function v4(n,e){xS(n),Av(n)?(n.j_.q_(e),Rv(n)):n.j_.set("Unknown")}async function _4(n,e,t){if(n.j_.set("Online"),e instanceof uS&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const c of o.targetIds)s.U_.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.U_.delete(c),s.H_.removeTarget(c))}(n,e)}catch(r){he(Xo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hf(n,r)}else if(e instanceof Bh?n.H_.We(e):e instanceof lS?n.H_.Ze(e):n.H_.je(e),!t.isEqual(be.min()))try{const r=await wS(n.localStore);t.compareTo(r)>=0&&await function(o,l){const c=o.H_.ot(l);return c.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.U_.get(f);g&&o.U_.set(f,g.withResumeToken(h.resumeToken,l))}}),c.targetMismatches.forEach((h,f)=>{const g=o.U_.get(h);if(!g)return;o.U_.set(h,g.withResumeToken(tn.EMPTY_BYTE_STRING,g.snapshotVersion)),CS(o,h);const _=new Fi(g.target,h,f,g.sequenceNumber);Sv(o,_)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){he(Xo,"Failed to raise snapshot:",r),await hf(n,r)}}async function hf(n,e,t){if(!Vl(e))throw e;n.W_.add(1),await Bc(n),n.j_.set("Offline"),t||(t=()=>wS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{he(Xo,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Zf(n)})}function SS(n,e){return e().catch(t=>hf(n,t,e))}async function ep(n){const e=ke(n),t=eo(e);let r=e.K_.length>0?e.K_[e.K_.length-1].batchId:dv;for(;w4(e);)try{const s=await t4(e.localStore,r);if(s===null){e.K_.length===0&&t.P_();break}r=s.batchId,E4(e,s)}catch(s){await hf(e,s)}RS(e)&&AS(e)}function w4(n){return oa(n)&&n.K_.length<10}function E4(n,e){n.K_.push(e);const t=eo(n);t.c_()&&t.b_&&t.S_(e.mutations)}function RS(n){return oa(n)&&!eo(n).u_()&&n.K_.length>0}function AS(n){eo(n).start()}async function T4(n){eo(n).C_()}async function I4(n){const e=eo(n);for(const t of n.K_)e.S_(t.mutations)}async function C4(n,e,t){const r=n.K_.shift(),s=vv.from(r,e,t);await SS(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await ep(n)}async function x4(n,e){e&&eo(n).b_&&await async function(r,s){if(function(l){return oM(l)&&l!==Z.ABORTED}(s.code)){const o=r.K_.shift();eo(r).h_(),await SS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await ep(r)}}(n,e),RS(n)&&AS(n)}async function CT(n,e){const t=ke(n);t.asyncQueue.verifyOperationInProgress(),he(Xo,"RemoteStore received new credentials");const r=oa(t);t.W_.add(3),await Bc(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Zf(t)}async function S4(n,e){const t=ke(n);e?(t.W_.delete(2),await Zf(t)):e||(t.W_.add(2),await Bc(t),t.j_.set("Unknown"))}function Ul(n){return n.J_||(n.J_=function(t,r,s){const o=ke(t);return o.M_(),new c4(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:g4.bind(null,n),No:y4.bind(null,n),Lo:v4.bind(null,n),p_:_4.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),Av(n)?Rv(n):n.j_.set("Unknown")):(await n.J_.stop(),xS(n))})),n.J_}function eo(n){return n.Y_||(n.Y_=function(t,r,s){const o=ke(t);return o.M_(),new d4(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:T4.bind(null,n),Lo:x4.bind(null,n),D_:I4.bind(null,n),v_:C4.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await ep(n)):(await n.Y_.stop(),n.K_.length>0&&(he(Xo,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const l=Date.now()+r,c=new Pv(e,t,l,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bv(n,e){if(qs("AsyncQueue",`${e}: ${n}`),Vl(n))return new fe(Z.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{static emptySet(e){return new cl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=Qu(),this.sortedSet=new Dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new cl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(){this.Z_=new Dt(_e.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Se():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Tl{constructor(e,t,r,s,o,l,c,h,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,s,o){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new Tl(e,t,cl.emptySet(t),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class A4{constructor(){this.queries=ST(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const s=ke(t),o=s.queries;s.queries=ST(),o.forEach((l,c)=>{for(const h of c.ta)h.onError(r)})})(this,new fe(Z.ABORTED,"Firestore shutting down"))}}function ST(){return new ia(n=>Qx(n),Gf)}async function kv(n,e){const t=ke(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.na()&&e.ra()&&(r=2):(o=new R4,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await t.onListen(s,!0);break;case 1:o.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const c=bv(l,`Initialization of query '${tl(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&Dv(t)}async function Nv(n,e){const t=ke(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const l=o.ta.indexOf(e);l>=0&&(o.ta.splice(l,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function P4(n,e){const t=ke(n);let r=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const c of l.ta)c.oa(s)&&(r=!0);l.ea=s}}r&&Dv(t)}function b4(n,e,t){const r=ke(n),s=r.queries.get(e);if(s)for(const o of s.ta)o.onError(t);r.queries.delete(e)}function Dv(n){n.ia.forEach(e=>{e.next()})}var ly,RT;(RT=ly||(ly={}))._a="default",RT.Cache="cache";class Ov{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Tl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==ly.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e){this.key=e}}class bS{constructor(e){this.key=e}}class k4{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ve(),this.mutatedKeys=Ve(),this.ya=Yx(e),this.wa=new cl(this.ya)}get ba(){return this.fa}Sa(e,t){const r=t?t.Da:new xT,s=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,c=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,_)=>{const E=s.get(g),C=Kf(this.query,_)?_:null,R=!!E&&this.mutatedKeys.has(E.key),A=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let S=!1;E&&C?E.data.isEqual(C.data)?R!==A&&(r.track({type:3,doc:C}),S=!0):this.va(E,C)||(r.track({type:2,doc:C}),S=!0,(h&&this.ya(C,h)>0||f&&this.ya(C,f)<0)&&(c=!0)):!E&&C?(r.track({type:0,doc:C}),S=!0):E&&!C&&(r.track({type:1,doc:E}),S=!0,(h||f)&&(c=!0)),S&&(C?(l=l.add(C),o=A?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{wa:l,Da:r,ls:c,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const l=e.Da.X_();l.sort((g,_)=>function(C,R){const A=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se()}};return A(C)-A(R)}(g.type,_.type)||this.ya(g.doc,_.doc)),this.Ca(r),s=s!=null&&s;const c=t&&!s?this.Fa():[],h=this.pa.size===0&&this.current&&!s?1:0,f=h!==this.ga;return this.ga=h,l.length!==0||f?{snapshot:new Tl(this.query,e.wa,o,l,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:c}:{Ma:c}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new xT,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ve(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new bS(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new PS(r))}),t}Oa(e){this.fa=e.gs,this.pa=Ve();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return Tl.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Lv="SyncEngine";class N4{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class D4{constructor(e){this.key=e,this.Ba=!1}}class O4{constructor(e,t,r,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.La={},this.ka=new ia(c=>Qx(c),Gf),this.qa=new Map,this.Qa=new Set,this.$a=new Dt(_e.comparator),this.Ka=new Map,this.Ua=new Ev,this.Wa={},this.Ga=new Map,this.za=El.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function L4(n,e,t=!0){const r=MS(n);let s;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await kS(r,e,t,!0),s}async function M4(n,e){const t=MS(n);await kS(t,e,!0,!1)}async function kS(n,e,t,r){const s=await n4(n.localStore,os(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await j4(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&IS(n.remoteStore,s),c}async function j4(n,e,t,r,s){n.Ha=(_,E,C)=>async function(A,S,V,U){let $=S.view.Sa(V);$.ls&&($=await _T(A.localStore,S.query,!1).then(({documents:N})=>S.view.Sa(N,$)));const W=U&&U.targetChanges.get(S.targetId),Y=U&&U.targetMismatches.get(S.targetId)!=null,X=S.view.applyChanges($,A.isPrimaryClient,W,Y);return PT(A,S.targetId,X.Ma),X.snapshot}(n,_,E,C);const o=await _T(n.localStore,e,!0),l=new k4(e,o.gs),c=l.Sa(o.documents),h=$c.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),f=l.applyChanges(c,n.isPrimaryClient,h);PT(n,t,f.Ma);const g=new N4(e,t,l);return n.ka.set(e,g),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),f.snapshot}async function V4(n,e,t){const r=ke(n),s=r.ka.get(e),o=r.qa.get(s.targetId);if(o.length>1)return r.qa.set(s.targetId,o.filter(l=>!Gf(l,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await oy(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&xv(r.remoteStore,s.targetId),uy(r,s.targetId)}).catch(jl)):(uy(r,s.targetId),await oy(r.localStore,s.targetId,!0))}async function F4(n,e){const t=ke(n),r=t.ka.get(e),s=t.qa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),xv(t.remoteStore,r.targetId))}async function U4(n,e,t){const r=G4(n);try{const s=await function(l,c){const h=ke(l),f=Vt.now(),g=c.reduce((C,R)=>C.add(R.key),Ve());let _,E;return h.persistence.runTransaction("Locally write mutations","readwrite",C=>{let R=Gs(),A=Ve();return h.ds.getEntries(C,g).next(S=>{R=S,R.forEach((V,U)=>{U.isValidDocument()||(A=A.add(V))})}).next(()=>h.localDocuments.getOverlayedDocuments(C,R)).next(S=>{_=S;const V=[];for(const U of c){const $=tM(U,_.get(U.key).overlayedDocument);$!=null&&V.push(new lo(U.key,$,$x($.value.mapValue),hr.exists(!0)))}return h.mutationQueue.addMutationBatch(C,f,V,c)}).next(S=>{E=S;const V=S.applyToLocalDocumentSet(_,A);return h.documentOverlayCache.saveOverlays(C,S.batchId,V)})}).then(()=>({batchId:E.batchId,changes:Jx(_)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,c,h){let f=l.Wa[l.currentUser.toKey()];f||(f=new Dt(Ue)),f=f.insert(c,h),l.Wa[l.currentUser.toKey()]=f}(r,s.batchId,t),await zc(r,s.changes),await ep(r.remoteStore)}catch(s){const o=bv(s,"Failed to persist write");t.reject(o)}}async function NS(n,e){const t=ke(n);try{const r=await ZM(t.localStore,e);e.targetChanges.forEach((s,o)=>{const l=t.Ka.get(o);l&&(Xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.Ba=!0:s.modifiedDocuments.size>0?Xe(l.Ba):s.removedDocuments.size>0&&(Xe(l.Ba),l.Ba=!1))}),await zc(t,r,e)}catch(r){await jl(r)}}function AT(n,e,t){const r=ke(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.ka.forEach((o,l)=>{const c=l.view.sa(e);c.snapshot&&s.push(c.snapshot)}),function(l,c){const h=ke(l);h.onlineState=c;let f=!1;h.queries.forEach((g,_)=>{for(const E of _.ta)E.sa(c)&&(f=!0)}),f&&Dv(h)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $4(n,e,t){const r=ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Ka.get(e),o=s&&s.key;if(o){let l=new Dt(_e.comparator);l=l.insert(o,un.newNoDocument(o,be.min()));const c=Ve().add(o),h=new Xf(be.min(),new Map,new Dt(Ue),l,c);await NS(r,h),r.$a=r.$a.remove(o),r.Ka.delete(e),Mv(r)}else await oy(r.localStore,e,!1).then(()=>uy(r,e,t)).catch(jl)}async function B4(n,e){const t=ke(n),r=e.batch.batchId;try{const s=await JM(t.localStore,e);OS(t,r,null),DS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await zc(t,s)}catch(s){await jl(s)}}async function z4(n,e,t){const r=ke(n);try{const s=await function(l,c){const h=ke(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return h.mutationQueue.lookupMutationBatch(f,c).next(_=>(Xe(_!==null),g=_.keys(),h.mutationQueue.removeMutationBatch(f,_))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,g,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>h.localDocuments.getDocuments(f,g))})}(r.localStore,e);OS(r,e,t),DS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await zc(r,s)}catch(s){await jl(s)}}function DS(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function OS(n,e,t){const r=ke(n);let s=r.Wa[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function uy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(r=>{n.Ua.containsKey(r)||LS(n,r)})}function LS(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(xv(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),Mv(n))}function PT(n,e,t){for(const r of t)r instanceof PS?(n.Ua.addReference(r.key,e),W4(n,r)):r instanceof bS?(he(Lv,"Document no longer in limbo: "+r.key),n.Ua.removeReference(r.key,e),n.Ua.containsKey(r.key)||LS(n,r.key)):Se()}function W4(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(he(Lv,"New document in limbo: "+t),n.Qa.add(r),Mv(n))}function Mv(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new _e(ct.fromString(e)),r=n.za.next();n.Ka.set(r,new D4(t)),n.$a=n.$a.insert(t,r),IS(n.remoteStore,new Fi(os(qf(t.path)),r,"TargetPurposeLimboResolution",zf.ae))}}async function zc(n,e,t){const r=ke(n),s=[],o=[],l=[];r.ka.isEmpty()||(r.ka.forEach((c,h)=>{l.push(r.Ha(h,e,t).then(f=>{var g;if((f||t)&&r.isPrimaryClient){const _=f?!f.fromCache:(g=t==null?void 0:t.targetChanges.get(h.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(h.targetId,_?"current":"not-current")}if(f){s.push(f);const _=Iv.Yi(h.targetId,f);o.push(_)}}))}),await Promise.all(l),r.La.p_(s),await async function(h,f){const g=ke(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>ee.forEach(f,E=>ee.forEach(E.Hi,C=>g.persistence.referenceDelegate.addReference(_,E.targetId,C)).next(()=>ee.forEach(E.Ji,C=>g.persistence.referenceDelegate.removeReference(_,E.targetId,C)))))}catch(_){if(!Vl(_))throw _;he(Cv,"Failed to update sequence numbers: "+_)}for(const _ of f){const E=_.targetId;if(!_.fromCache){const C=g.Ts.get(E),R=C.snapshotVersion,A=C.withLastLimboFreeSnapshotVersion(R);g.Ts=g.Ts.insert(E,A)}}}(r.localStore,o))}async function H4(n,e){const t=ke(n);if(!t.currentUser.isEqual(e)){he(Lv,"User change. New user:",e.toKey());const r=await _S(t.localStore,e);t.currentUser=e,function(o,l){o.Ga.forEach(c=>{c.forEach(h=>{h.reject(new fe(Z.CANCELLED,l))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await zc(t,r.Rs)}}function q4(n,e){const t=ke(n),r=t.Ka.get(e);if(r&&r.Ba)return Ve().add(r.key);{let s=Ve();const o=t.qa.get(e);if(!o)return s;for(const l of o){const c=t.ka.get(l);s=s.unionWith(c.view.ba)}return s}}function MS(n){const e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=NS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=q4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$4.bind(null,e),e.La.p_=P4.bind(null,e.eventManager),e.La.Ja=b4.bind(null,e.eventManager),e}function G4(n){const e=ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=B4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=z4.bind(null,e),e}class ff{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return XM(this.persistence,new KM,e.initialUser,this.serializer)}Xa(e){return new vS(Tv.ri,this.serializer)}Za(e){return new s4}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ff.provider={build:()=>new ff};class K4 extends ff{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Xe(this.persistence.referenceDelegate instanceof df);const r=this.persistence.referenceDelegate.garbageCollector;return new DM(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new vS(r=>df.ri(r,t),this.serializer)}}class cy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>AT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=H4.bind(null,this.syncEngine),await S4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new A4}()}createDatastore(e){const t=Jf(e.databaseInfo.databaseId),r=function(o){return new u4(o)}(e.databaseInfo);return function(o,l,c,h){return new f4(o,l,c,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,o,l,c){return new m4(r,s,o,l,c)}(this.localStore,this.datastore,e.asyncQueue,t=>AT(this.syncEngine,t,0),function(){return TT.D()?new TT:new i4}())}createSyncEngine(e,t){return function(s,o,l,c,h,f,g){const _=new O4(s,o,l,c,h,f);return g&&(_.ja=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const o=ke(s);he(Xo,"RemoteStore shutting down."),o.W_.add(5),await Bc(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}cy.provider={build:()=>new cy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):qs("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to="FirestoreClient";class Q4{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=ln.UNAUTHENTICATED,this.clientId=kx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{he(to,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(he(to,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=bv(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function hg(n,e){n.asyncQueue.verifyOperationInProgress(),he(to,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await _S(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function bT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Y4(n);he(to,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>CT(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>CT(e.remoteStore,s)),n._onlineComponents=e}async function Y4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(to,"Using user provided OfflineComponentProvider");try{await hg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===Z.FAILED_PRECONDITION||s.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;yl("Error using user provided cache. Falling back to memory cache: "+t),await hg(n,new ff)}}else he(to,"Using default OfflineComponentProvider"),await hg(n,new K4(void 0));return n._offlineComponents}async function jS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(to,"Using user provided OnlineComponentProvider"),await bT(n,n._uninitializedComponentsProvider._online)):(he(to,"Using default OnlineComponentProvider"),await bT(n,new cy))),n._onlineComponents}function X4(n){return jS(n).then(e=>e.syncEngine)}async function pf(n){const e=await jS(n),t=e.eventManager;return t.onListen=L4.bind(null,e.syncEngine),t.onUnlisten=V4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=M4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=F4.bind(null,e.syncEngine),t}function J4(n,e,t={}){const r=new Us;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,h,f){const g=new jv({next:E=>{g.su(),l.enqueueAndForget(()=>Nv(o,_));const C=E.docs.has(c);!C&&E.fromCache?f.reject(new fe(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&E.fromCache&&h&&h.source==="server"?f.reject(new fe(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(E)},error:E=>f.reject(E)}),_=new Ov(qf(c.path),g,{includeMetadataChanges:!0,Ta:!0});return kv(o,_)}(await pf(n),n.asyncQueue,e,t,r)),r.promise}function Z4(n,e,t={}){const r=new Us;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,h,f){const g=new jv({next:E=>{g.su(),l.enqueueAndForget(()=>Nv(o,_)),E.fromCache&&h.source==="server"?f.reject(new fe(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),_=new Ov(c,g,{includeMetadataChanges:!0,Ta:!0});return kv(o,_)}(await pf(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(n,e,t){if(!t)throw new fe(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ej(n,e,t,r){if(e===!0&&r===!0)throw new fe(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function NT(n){if(!_e.isDocumentKey(n))throw new fe(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function DT(n){if(_e.isDocumentKey(n))throw new fe(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se()}function On(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tp(n);throw new fe(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="firestore.googleapis.com",OT=!0;class LT{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=US,this.ssl=OT}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:OT;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kM)throw new fe(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ej("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class np{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new LT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new LT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new aL;switch(r.type){case"firstParty":return new dL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=kT.get(t);r&&(he("ComponentProvider","Removing Datastore"),kT.delete(t),r.terminate())}(this),Promise.resolve()}}function tj(n,e,t,r={}){var s;const o=(n=On(n,np))._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o.host!==US&&o.host!==c&&yl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},o),{host:c,ssl:!1,emulatorOptions:r});if(!Gi(h,l)&&(n._setSettings(h),r.mockUserToken)){let f,g;if(typeof r.mockUserToken=="string")f=r.mockUserToken,g=ln.MOCK_USER;else{f=Xy(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new fe(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new ln(_)}n._authCredentials=new lL(new bx(f,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new uo(this.firestore,e,this._query)}}class pn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}}class Wi extends uo{constructor(e,t,r){super(e,t,qf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new _e(e))}withConverter(e){return new Wi(this.firestore,e,this._path)}}function dl(n,e,...t){if(n=st(n),FS("collection","path",e),n instanceof np){const r=ct.fromString(e,...t);return DT(r),new Wi(n,null,r)}{if(!(n instanceof pn||n instanceof Wi))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ct.fromString(e,...t));return DT(r),new Wi(n.firestore,null,r)}}function Yn(n,e,...t){if(n=st(n),arguments.length===1&&(e=kx.newId()),FS("doc","path",e),n instanceof np){const r=ct.fromString(e,...t);return NT(r),new pn(n,null,new _e(r))}{if(!(n instanceof pn||n instanceof Wi))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ct.fromString(e,...t));return NT(r),new pn(n.firestore,n instanceof Wi?n.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="AsyncQueue";class jT{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new ES(this,"async_queue_retry"),this.bu=()=>{const r=dg();r&&he(MT,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=e;const t=dg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=dg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Us;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Vl(e))throw e;he(MT,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),c}(r);throw qs("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.Su=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=Pv.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&Se()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function VT(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1}(n,["next","error","complete"])}class Ks extends np{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new jT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jT(e),this._firestoreClient=void 0,await e}}}function Wc(n,e){const t=typeof n=="object"?n:jf(),r=typeof n=="string"?n:of,s=Lc(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=Qy("firestore");o&&tj(s,...o)}return s}function rp(n){if(n._terminated)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||nj(n),n._firestoreClient}function nj(n){var e,t,r;const s=n._freezeSettings(),o=function(c,h,f,g){return new xL(c,h,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,VS(g.experimentalLongPollingOptions),g.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new Q4(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Il(tn.fromBase64String(e))}catch(t){throw new fe(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Il(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj=/^__.*__$/;class sj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new lo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Uc(e,this.data,t,this.fieldTransforms)}}class $S{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new lo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function BS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se()}}class Uv{constructor(e,t,r,s,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Uv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Ku(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return mf(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(BS(this.Lu)&&rj.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class ij{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Jf(e)}ju(e,t,r,s=!1){return new Uv({Lu:e,methodName:t,zu:r,path:en.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function op(n){const e=n._freezeSettings(),t=Jf(n._databaseId);return new ij(n._databaseId,!!e.ignoreUndefinedProperties,t)}function zS(n,e,t,r,s,o={}){const l=n.ju(o.merge||o.mergeFields?2:0,e,t,s);Bv("Data must be an object, but it was:",l,r);const c=WS(r,l);let h,f;if(o.merge)h=new Kn(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const _ of o.mergeFields){const E=dy(e,_,t);if(!l.contains(E))throw new fe(Z.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);qS(g,E)||g.push(E)}h=new Kn(g),f=l.fieldTransforms.filter(_=>h.covers(_.field))}else h=null,f=l.fieldTransforms;return new sj(new Nn(c),h,f)}class ap extends ip{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ap}}class $v extends ip{_toFieldTransform(e){return new XL(e.path,new Tc)}isEqual(e){return e instanceof $v}}function oj(n,e,t,r){const s=n.ju(1,e,t);Bv("Data must be an object, but it was:",s,r);const o=[],l=Nn.empty();ao(r,(h,f)=>{const g=zv(e,h,t);f=st(f);const _=s.Ku(g);if(f instanceof ap)o.push(g);else{const E=Hc(f,_);E!=null&&(o.push(g),l.set(g,E))}});const c=new Kn(o);return new $S(l,c,s.fieldTransforms)}function aj(n,e,t,r,s,o){const l=n.ju(1,e,t),c=[dy(e,r,t)],h=[s];if(o.length%2!=0)throw new fe(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)c.push(dy(e,o[E])),h.push(o[E+1]);const f=[],g=Nn.empty();for(let E=c.length-1;E>=0;--E)if(!qS(f,c[E])){const C=c[E];let R=h[E];R=st(R);const A=l.Ku(C);if(R instanceof ap)f.push(C);else{const S=Hc(R,A);S!=null&&(f.push(C),g.set(C,S))}}const _=new Kn(f);return new $S(g,_,l.fieldTransforms)}function lj(n,e,t,r=!1){return Hc(t,n.ju(r?4:3,e))}function Hc(n,e){if(HS(n=st(n)))return Bv("Unsupported field value:",e,n),WS(n,e);if(n instanceof ip)return function(r,s){if(!BS(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const o=[];let l=0;for(const c of r){let h=Hc(c,s.Uu(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}}(n,e)}return function(r,s){if((r=st(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return KL(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Vt.fromDate(r);return{timestampValue:cf(s.serializer,o)}}if(r instanceof Vt){const o=new Vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cf(s.serializer,o)}}if(r instanceof Vv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Il)return{bytesValue:cS(s.serializer,r._byteString)};if(r instanceof pn){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Wu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:wv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Fv)return function(l,c){return{mapValue:{fields:{[Fx]:{stringValue:Ux},[af]:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw c.Wu("VectorValues must only contain numeric values.");return gv(c.serializer,f)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${tp(r)}`)}(n,e)}function WS(n,e){const t={};return Dx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ao(n,(r,s)=>{const o=Hc(s,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function HS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Vt||n instanceof Vv||n instanceof Il||n instanceof pn||n instanceof ip||n instanceof Fv)}function Bv(n,e,t){if(!HS(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=tp(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function dy(n,e,t){if((e=st(e))instanceof sp)return e._internalPath;if(typeof e=="string")return zv(n,e);throw mf("Field path arguments must be of type string or ",n,!1,void 0,t)}const uj=new RegExp("[~\\*/\\[\\]]");function zv(n,e,t){if(e.search(uj)>=0)throw mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new sp(...e.split("."))._internalPath}catch{throw mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mf(n,e,t,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${r}`),l&&(h+=` in document ${s}`),h+=")"),new fe(Z.INVALID_ARGUMENT,c+n+h)}function qS(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(lp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class cj extends GS{data(){return super.data()}}function lp(n,e){return typeof e=="string"?zv(n,e):e instanceof sp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wv{}class QS extends Wv{}function rc(n,e,...t){let r=[];e instanceof Wv&&r.push(e),r=r.concat(t),function(o){const l=o.filter(h=>h instanceof Hv).length,c=o.filter(h=>h instanceof up).length;if(l>1||l>0&&c>0)throw new fe(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class up extends QS{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new up(e,t,r)}_apply(e){const t=this._parse(e);return YS(e._query,t),new uo(e.firestore,e.converter,ey(e._query,t))}_parse(e){const t=op(e.firestore);return function(o,l,c,h,f,g,_){let E;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){UT(_,g);const R=[];for(const A of _)R.push(FT(h,o,A));E={arrayValue:{values:R}}}else E=FT(h,o,_)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||UT(_,g),E=lj(c,l,_,g==="in"||g==="not-in");return Nt.create(f,g,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Bo(n,e,t){const r=e,s=lp("where",n);return up._create(s,r,t)}class Hv extends Wv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Hv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Fr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,o){let l=s;const c=o.getFlattenedFilters();for(const h of c)YS(l,h),l=ey(l,h)}(e._query,t),new uo(e.firestore,e.converter,ey(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qv extends QS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new qv(e,t)}_apply(e){const t=function(s,o,l){if(s.startAt!==null)throw new fe(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new fe(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ec(o,l)}(e._query,this._field,this._direction);return new uo(e.firestore,e.converter,function(s,o){const l=s.explicitOrderBy.concat([o]);return new Fl(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function N$(n,e="asc"){const t=e,r=lp("orderBy",n);return qv._create(r,t)}function FT(n,e,t){if(typeof(t=st(t))=="string"){if(t==="")throw new fe(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kx(e)&&t.indexOf("/")!==-1)throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ct.fromString(t));if(!_e.isDocumentKey(r))throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return eT(n,new _e(r))}if(t instanceof pn)return eT(n,t._key);throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tp(t)}.`)}function UT(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YS(n,e){const t=function(s,o){for(const l of s)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class dj{convertValue(e,t="none"){switch(Zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ao(e,(s,o)=>{r[s]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,s;const o=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[af].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(l=>Rt(l.doubleValue));return new Fv(o)}convertGeoPoint(e){return new Vv(Rt(e.latitude),Rt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Hf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vc(e));default:return null}}convertTimestamp(e){const t=Xi(e);return new Vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ct.fromString(e);Xe(gS(r));const s=new _c(r.get(1),r.get(3)),o=new _e(r.popFirst(5));return s.isEqual(t)||qs(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class JS extends GS{constructor(e,t,r,s,o,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(lp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class zh extends JS{data(e={}){return super.data(e)}}class ZS{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Xu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new zh(this._firestore,this._userDataWriter,r.key,r,new Xu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(c=>{const h=new zh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Xu(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const h=new zh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Xu(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return c.type!==0&&(f=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),g=l.indexOf(c.doc.key)),{type:hj(c.type),doc:h,oldIndex:f,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function hj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(n){n=On(n,pn);const e=On(n.firestore,Ks);return J4(rp(e),n._key).then(t=>nR(e,n,t))}class Gv extends dj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,t)}}function Os(n){n=On(n,uo);const e=On(n.firestore,Ks),t=rp(e),r=new Gv(e);return KS(n._query),Z4(t,n._query).then(s=>new ZS(e,r,n,s))}function eR(n,e,t){n=On(n,pn);const r=On(n.firestore,Ks),s=XS(n.converter,e,t);return cp(r,[zS(op(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,hr.none())])}function Sc(n,e,t,...r){n=On(n,pn);const s=On(n.firestore,Ks),o=op(s);let l;return l=typeof(e=st(e))=="string"||e instanceof sp?aj(o,"updateDoc",n._key,e,t,r):oj(o,"updateDoc",n._key,e),cp(s,[l.toMutation(n._key,hr.exists(!0))])}function D$(n){return cp(On(n.firestore,Ks),[new yv(n._key,hr.none())])}function O$(n,e){const t=On(n.firestore,Ks),r=Yn(n),s=XS(n.converter,e);return cp(t,[zS(op(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,hr.exists(!1))]).then(()=>r)}function tR(n,...e){var t,r,s;n=st(n);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||VT(e[l])||(o=e[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(VT(e[l])){const _=e[l];e[l]=(t=_.next)===null||t===void 0?void 0:t.bind(_),e[l+1]=(r=_.error)===null||r===void 0?void 0:r.bind(_),e[l+2]=(s=_.complete)===null||s===void 0?void 0:s.bind(_)}let h,f,g;if(n instanceof pn)f=On(n.firestore,Ks),g=qf(n._key.path),h={next:_=>{e[l]&&e[l](nR(f,n,_))},error:e[l+1],complete:e[l+2]};else{const _=On(n,uo);f=On(_.firestore,Ks),g=_._query;const E=new Gv(f);h={next:C=>{e[l]&&e[l](new ZS(f,E,_,C))},error:e[l+1],complete:e[l+2]},KS(n._query)}return function(E,C,R,A){const S=new jv(A),V=new Ov(C,S,R);return E.asyncQueue.enqueueAndForget(async()=>kv(await pf(E),V)),()=>{S.su(),E.asyncQueue.enqueueAndForget(async()=>Nv(await pf(E),V))}}(rp(f),g,c,h)}function cp(n,e){return function(r,s){const o=new Us;return r.asyncQueue.enqueueAndForget(async()=>U4(await X4(r),s,o)),o.promise}(rp(n),e)}function nR(n,e,t){const r=t.docs.get(e._key),s=new Gv(n);return new JS(n,s,e._key,r,new Xu(t.hasPendingWrites,t.fromCache),e.converter)}function L$(){return new $v("serverTimestamp")}(function(e,t=!0){(function(s){Ml=s})(so),Ki(new zs("firestore",(r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new Ks(new uL(r.getProvider("auth-internal")),new hL(l,r.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new fe(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _c(f.options.projectId,g)}(l,s),l);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),dr(zE,WE,e),dr(zE,WE,"esm2017")})();var $T={};const BT="@firebase/database",zT="1.0.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rR="";function fj(n){rR=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Zt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:pc(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return ei(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new pj(e)}}catch{}return new mj},Ho=sR("localStorage"),gj=sR("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=new Mf("@firebase/database"),yj=function(){let n=1;return function(){return n++}}(),iR=function(n){const e=Rk(n),t=new Tk;t.update(e);const r=t.digest();return Ky.encodeByteArray(r)},qc=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=qc.apply(null,r):typeof r=="object"?e+=Zt(r):e+=r,e+=" "}return e};let sc=null,WT=!0;const vj=function(n,e){ce(!0,"Can't turn on custom loggers persistently."),hl.logLevel=Me.VERBOSE,sc=hl.log.bind(hl)},cn=function(...n){if(WT===!0&&(WT=!1,sc===null&&gj.get("logging_enabled")===!0&&vj()),sc){const e=qc.apply(null,n);sc(e)}},Gc=function(n){return function(...e){cn(n,...e)}},hy=function(...n){const e="FIREBASE INTERNAL ERROR: "+qc(...n);hl.error(e)},Qs=function(...n){const e=`FIREBASE FATAL ERROR: ${qc(...n)}`;throw hl.error(e),new Error(e)},Xn=function(...n){const e="FIREBASE WARNING: "+qc(...n);hl.warn(e)},_j=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Xn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},oR=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},wj=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Cl="[MIN_NAME]",Jo="[MAX_NAME]",$l=function(n,e){if(n===e)return 0;if(n===Cl||e===Jo)return-1;if(e===Cl||n===Jo)return 1;{const t=HT(n),r=HT(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},Ej=function(n,e){return n===e?0:n<e?-1:1},Vu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Zt(e))},Kv=function(n){if(typeof n!="object"||n===null)return Zt(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=Zt(e[r]),t+=":",t+=Kv(n[e[r]]);return t+="}",t},aR=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let s=0;s<t;s+=e)s+e>t?r.push(n.substring(s,t)):r.push(n.substring(s,s+e));return r};function pr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const lR=function(n){ce(!oR(n),"Invalid JSON number");const e=11,t=52,r=(1<<e-1)-1;let s,o,l,c,h;n===0?(o=0,l=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=c+r,l=Math.round(n*Math.pow(2,t-c)-Math.pow(2,t))):(o=0,l=Math.round(n/Math.pow(2,1-r-t))));const f=[];for(h=t;h;h-=1)f.push(l%2?1:0),l=Math.floor(l/2);for(h=e;h;h-=1)f.push(o%2?1:0),o=Math.floor(o/2);f.push(s?1:0),f.reverse();const g=f.join("");let _="";for(h=0;h<64;h+=8){let E=parseInt(g.substr(h,8),2).toString(16);E.length===1&&(E="0"+E),_=_+E}return _.toLowerCase()},Tj=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Ij=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},Cj=new RegExp("^-?(0*)\\d{1,10}$"),xj=-2147483648,Sj=2147483647,HT=function(n){if(Cj.test(n)){const e=Number(n);if(e>=xj&&e<=Sj)return e}return null},Kc=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Xn("Exception was thrown by user callback.",t),e},Math.floor(0))}},Rj=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ic=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,hn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Xn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(cn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xn(e)}}class Wh{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Wh.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="5",uR="v",cR="s",dR="r",hR="f",fR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,pR="ls",mR="p",fy="ac",gR="websocket",yR="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,t,r,s,o=!1,l="",c=!1,h=!1,f=null){this.secure=t,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=h,this.emulatorOptions=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ho.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ho.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function bj(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function _R(n,e,t){ce(typeof e=="string","typeof type must == string"),ce(typeof t=="object","typeof params must == object");let r;if(e===gR)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===yR)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);bj(n)&&(t.ns=n.namespace);const s=[];return pr(t,(o,l)=>{s.push(o+"="+l)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(){this.counters_={}}incrementCounter(e,t=1){ei(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return rk(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg={},pg={};function Yv(n){const e=n.toString();return fg[e]||(fg[e]=new kj),fg[e]}function Nj(n,e){const t=n.toString();return pg[t]||(pg[t]=e()),pg[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Kc(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="start",Oj="close",Lj="pLPCommand",Mj="pRTLPCB",wR="id",ER="pw",TR="ser",jj="cb",Vj="seg",Fj="ts",Uj="d",$j="dframe",IR=1870,CR=30,Bj=IR-CR,zj=25e3,Wj=3e4;class sl{constructor(e,t,r,s,o,l,c){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.transportSessionId=l,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gc(e),this.stats_=Yv(t),this.urlFn=h=>(this.appCheckToken&&(h[fy]=this.appCheckToken),_R(t,yR,h))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Dj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Wj)),wj(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Xv((...o)=>{const[l,c,h,f,g]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===qT)this.id=c,this.password=h;else if(l===Oj)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...o)=>{const[l,c]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,c)},()=>{this.onClosed_()},this.urlFn);const r={};r[qT]="t",r[TR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[jj]=this.scriptTagHolder.uniqueCallbackIdentifier),r[uR]=Qv,this.transportSessionId&&(r[cR]=this.transportSessionId),this.lastSessionId&&(r[pR]=this.lastSessionId),this.applicationId&&(r[mR]=this.applicationId),this.appCheckToken&&(r[fy]=this.appCheckToken),typeof location<"u"&&location.hostname&&fR.test(location.hostname)&&(r[dR]=hR);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){sl.forceAllow_=!0}static forceDisallow(){sl.forceDisallow_=!0}static isAvailable(){return sl.forceAllow_?!0:!sl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Tj()&&!Ij()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Zt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=bC(t),s=aR(r,Bj);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={};r[$j]="t",r[wR]=e,r[ER]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Zt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Xv{constructor(e,t,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=yj(),window[Lj+this.uniqueCallbackIdentifier]=e,window[Mj+this.uniqueCallbackIdentifier]=t,this.myIFrame=Xv.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(c){cn("frame writing exception"),c.stack&&cn(c.stack),cn(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||cn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[wR]=this.myID,e[ER]=this.myPW,e[TR]=this.currentSerial;let t=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+CR+r.length<=IR;){const l=this.pendingSegs.shift();r=r+"&"+Vj+s+"="+l.seg+"&"+Fj+s+"="+l.ts+"&"+Uj+s+"="+l.d,s++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(r,Math.floor(zj)),o=()=>{clearTimeout(s),r()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{cn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj=16384,qj=45e3;let gf=null;typeof MozWebSocket<"u"?gf=MozWebSocket:typeof WebSocket<"u"&&(gf=WebSocket);class Dr{constructor(e,t,r,s,o,l,c){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gc(this.connId),this.stats_=Yv(t),this.connURL=Dr.connectionURL_(t,l,c,s,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,s,o){const l={};return l[uR]=Qv,typeof location<"u"&&location.hostname&&fR.test(location.hostname)&&(l[dR]=hR),t&&(l[cR]=t),r&&(l[pR]=r),s&&(l[fy]=s),o&&(l[mR]=o),_R(e,gR,l)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ho.set("previous_websocket_failure",!0);try{let r;fk(),this.mySock=new gf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Dr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&gf!==null&&!Dr.forceDisallow_}static previouslyFailed(){return Ho.isInMemoryStorage||Ho.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ho.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=pc(t);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ce(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const t=Zt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=aR(t,Hj);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(qj))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Dr.responsesRequiredToBeHealthy=2;Dr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{static get ALL_TRANSPORTS(){return[sl,Dr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Dr&&Dr.isAvailable();let r=t&&!Dr.previouslyFailed();if(e.webSocketOnly&&(t||Xn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Dr];else{const s=this.transports_=[];for(const o of Rc.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);Rc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Rc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=6e4,Kj=5e3,Qj=10*1024,Yj=100*1024,mg="t",GT="d",Xj="s",KT="r",Jj="e",QT="o",YT="a",XT="n",JT="p",Zj="h";class eV{constructor(e,t,r,s,o,l,c,h,f,g){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=l,this.onReady_=c,this.onDisconnect_=h,this.onKill_=f,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gc("c:"+this.id+":"),this.transportManager_=new Rc(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=ic(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Yj?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Qj?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(mg in e){const t=e[mg];t===YT?this.upgradeIfSecondaryHealthy_():t===KT?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===QT&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Vu("t",e),r=Vu("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:JT,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:YT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:XT,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Vu("t",e),r=Vu("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Vu(mg,e);if(GT in e){const r=e[GT];if(t===Zj){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===XT){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===Xj?this.onConnectionShutdown_(r):t===KT?this.onReset_(r):t===Jj?hy("Server Error: "+r):t===QT?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):hy("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Qv!==r&&Xn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),ic(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Gj))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ic(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Kj))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:JT,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ho.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{put(e,t,r,s){}merge(e,t,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.allowedEvents_=e,this.listeners_={},ce(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const s=this.getInitialEvent(e);s&&t.apply(r,s)}off(e,t,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let o=0;o<s.length;o++)if(s[o].callback===t&&(!r||r===s[o].context)){s.splice(o,1);return}}validateEventType_(e){ce(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf extends SR{static getInstance(){return new yf}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Jy()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ce(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=32,eI=768;class dt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function et(){return new dt("")}function He(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function no(n){return n.pieces_.length-n.pieceNum_}function ut(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new dt(n.pieces_,e)}function RR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function tV(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function AR(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function PR(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new dt(e,0)}function Gt(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof dt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&t.push(r[s])}return new dt(t,0)}function $e(n){return n.pieceNum_>=n.pieces_.length}function cr(n,e){const t=He(n),r=He(e);if(t===null)return e;if(t===r)return cr(ut(n),ut(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function bR(n,e){if(no(n)!==no(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Or(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(no(n)>no(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class nV{constructor(e,t){this.errorPrefix_=t,this.parts_=AR(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Lf(this.parts_[r]);kR(this)}}function rV(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Lf(e),kR(n)}function sV(n){const e=n.parts_.pop();n.byteLength_-=Lf(e),n.parts_.length>0&&(n.byteLength_-=1)}function kR(n){if(n.byteLength_>eI)throw new Error(n.errorPrefix_+"has a key path longer than "+eI+" bytes ("+n.byteLength_+").");if(n.parts_.length>ZT)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ZT+") or object contains a cycle "+$o(n))}function $o(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv extends SR{static getInstance(){return new Jv}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return ce(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=1e3,iV=60*5*1e3,tI=30*1e3,oV=1.3,aV=3e4,lV="server_kill",nI=3;class $s extends xR{constructor(e,t,r,s,o,l,c,h){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=l,this.appCheckTokenProvider_=c,this.authOverride_=h,this.id=$s.nextPersistentConnectionId_++,this.log_=Gc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Fu,this.maxReconnectDelay_=iV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Jv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&yf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const s=++this.requestNumber_,o={r:s,a:e,b:t};this.log_(Zt(o)),ce(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const t=new Yy,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const c=l.d;l.s==="ok"?t.resolve(c):t.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,r,s){this.initConnection_();const o=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ce(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:t,query:e,tag:r};this.listens.get(l).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(e){const t=e.query,r=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r},l="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(l,o,c=>{const h=c.d,f=c.s;$s.warnOnListenWarnings_(h,t),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",c),f!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(f,h))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&ei(e,"w")){const r=gl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();Xn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Ek(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=tI)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=wk(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(t,r,s=>{const o=s.s,l=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,r=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(e,t){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,t)}sendUnlisten_(e,t,r,s){this.log_("Unlisten on "+e+" for "+t);const o={p:e},l="n";s&&(o.q=r,o.t=s),this.sendRequest(l,o)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,s){const o={p:t,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,l=>{s&&setTimeout(()=>{s(l.s,l.d)},Math.floor(0))})}put(e,t,r,s){this.putInternal("p",e,t,r,s)}merge(e,t,r,s){this.putInternal("m",e,t,r,s)}putInternal(e,t,r,s,o){this.initConnection_();const l={p:t,d:r};o!==void 0&&(l.h=o),this.outstandingPuts_.push({action:e,request:l,onComplete:s}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,r=>{if(r.s!=="ok"){const o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Zt(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):hy("Unrecognized action received from server: "+Zt(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ce(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Fu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Fu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>aV&&(this.reconnectDelay_=Fu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*oV)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+$s.nextConnectionId_++,o=this.lastSessionId;let l=!1,c=null;const h=function(){c?c.close():(l=!0,r())},f=function(_){ce(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(_)};this.realtime_={close:h,sendRequest:f};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,E]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);l?cn("getToken() completed but was canceled"):(cn("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=E&&E.token,c=new eV(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,C=>{Xn(C+" ("+this.repoInfo_.toString()+")"),this.interrupt(lV)},o))}catch(_){this.log_("Failed to get token: "+_),l||(this.repoInfo_.nodeAdmin&&Xn(_),h())}}}interrupt(e){cn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){cn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],jg(this.interruptReasons_)&&(this.reconnectDelay_=Fu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;t?r=t.map(o=>Kv(o)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const r=new dt(e).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(t),o.delete(t),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,t){cn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=nI&&(this.reconnectDelay_=tI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){cn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=nI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+rR.replace(/\./g,"-")]=1,Jy()?e["framework.cordova"]=1:LC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=yf.getInstance().currentlyOnline();return jg(this.interruptReasons_)&&e}}$s.nextPersistentConnectionId_=0;$s.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new qe(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new qe(Cl,e),s=new qe(Cl,t);return this.compare(r,s)!==0}minPost(){return qe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ch;class NR extends dp{static get __EMPTY_NODE(){return Ch}static set __EMPTY_NODE(e){Ch=e}compare(e,t){return $l(e.name,t.name)}isDefinedOn(e){throw Dl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return qe.MIN}maxPost(){return new qe(Jo,Ch)}makePost(e,t){return ce(typeof e=="string","KeyIndex indexValue must always be a string."),new qe(e,Ch)}toString(){return".key"}}const fl=new NR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,t,r,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,s&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class qt{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??qt.RED,this.left=s??Dn.EMPTY_NODE,this.right=o??Dn.EMPTY_NODE}copy(e,t,r,s,o){return new qt(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s=s.copy(null,t,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Dn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,s;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return Dn.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}qt.RED=!0;qt.BLACK=!1;class uV{copy(e,t,r,s,o){return this}insert(e,t,r){return new qt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Dn{constructor(e,t=Dn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Dn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,qt.BLACK,null,null))}remove(e){return new Dn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,qt.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,s=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new xh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new xh(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new xh(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new xh(this.root_,null,this.comparator_,!0,e)}}Dn.EMPTY_NODE=new uV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(n,e){return $l(n.name,e.name)}function Zv(n,e){return $l(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let py;function dV(n){py=n}const DR=function(n){return typeof n=="number"?"number:"+lR(n):"string:"+n},OR=function(n){if(n.isLeafNode()){const e=n.val();ce(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ei(e,".sv"),"Priority must be a string or number.")}else ce(n===py||n.isEmpty(),"priority of unexpected type.");ce(n===py||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rI;class Wt{static set __childrenNodeConstructor(e){rI=e}static get __childrenNodeConstructor(){return rI}constructor(e,t=Wt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ce(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),OR(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Wt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Wt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return $e(e)?this:He(e)===".priority"?this.priorityNode_:Wt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Wt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=He(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(ce(r!==".priority"||no(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Wt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ut(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+DR(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=lR(this.value_):e+=this.value_,this.lazyHash_=iR(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Wt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Wt.__childrenNodeConstructor?-1:(ce(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,s=Wt.VALUE_TYPE_ORDER.indexOf(t),o=Wt.VALUE_TYPE_ORDER.indexOf(r);return ce(s>=0,"Unknown leaf type: "+t),ce(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Wt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LR,MR;function hV(n){LR=n}function fV(n){MR=n}class pV extends dp{compare(e,t){const r=e.node.getPriority(),s=t.node.getPriority(),o=r.compareTo(s);return o===0?$l(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return qe.MIN}maxPost(){return new qe(Jo,new Wt("[PRIORITY-POST]",MR))}makePost(e,t){const r=LR(e);return new qe(t,new Wt("[PRIORITY-POST]",r))}toString(){return".priority"}}const fn=new pV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV=Math.log(2);class gV{constructor(e){const t=o=>parseInt(Math.log(o)/mV,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const vf=function(n,e,t,r){n.sort(e);const s=function(h,f){const g=f-h;let _,E;if(g===0)return null;if(g===1)return _=n[h],E=t?t(_):_,new qt(E,_.node,qt.BLACK,null,null);{const C=parseInt(g/2,10)+h,R=s(h,C),A=s(C+1,f);return _=n[C],E=t?t(_):_,new qt(E,_.node,qt.BLACK,R,A)}},o=function(h){let f=null,g=null,_=n.length;const E=function(R,A){const S=_-R,V=_;_-=R;const U=s(S+1,V),$=n[S],W=t?t($):$;C(new qt(W,$.node,A,null,U))},C=function(R){f?(f.left=R,f=R):(g=R,f=R)};for(let R=0;R<h.count;++R){const A=h.nextBitIsOne(),S=Math.pow(2,h.count-(R+1));A?E(S,qt.BLACK):(E(S,qt.BLACK),E(S,qt.RED))}return g},l=new gV(n.length),c=o(l);return new Dn(r||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gg;const Za={};class Vs{static get Default(){return ce(Za&&fn,"ChildrenNode.ts has not been loaded"),gg=gg||new Vs({".priority":Za},{".priority":fn}),gg}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=gl(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Dn?t:null}hasIndex(e){return ei(this.indexSet_,e.toString())}addIndex(e,t){ce(e!==fl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const o=t.getIterator(qe.Wrap);let l=o.getNext();for(;l;)s=s||e.isDefinedOn(l.node),r.push(l),l=o.getNext();let c;s?c=vf(r,e.getCompare()):c=Za;const h=e.toString(),f=Object.assign({},this.indexSet_);f[h]=e;const g=Object.assign({},this.indexes_);return g[h]=c,new Vs(g,f)}addToIndexes(e,t){const r=Xh(this.indexes_,(s,o)=>{const l=gl(this.indexSet_,o);if(ce(l,"Missing index implementation for "+o),s===Za)if(l.isDefinedOn(e.node)){const c=[],h=t.getIterator(qe.Wrap);let f=h.getNext();for(;f;)f.name!==e.name&&c.push(f),f=h.getNext();return c.push(e),vf(c,l.getCompare())}else return Za;else{const c=t.get(e.name);let h=s;return c&&(h=h.remove(new qe(e.name,c))),h.insert(e,e.node)}});return new Vs(r,this.indexSet_)}removeFromIndexes(e,t){const r=Xh(this.indexes_,s=>{if(s===Za)return s;{const o=t.get(e.name);return o?s.remove(new qe(e.name,o)):s}});return new Vs(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu;class Ye{static get EMPTY_NODE(){return Uu||(Uu=new Ye(new Dn(Zv),null,Vs.Default))}constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&OR(this.priorityNode_),this.children_.isEmpty()&&ce(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Uu}updatePriority(e){return this.children_.isEmpty()?this:new Ye(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Uu:t}}getChild(e){const t=He(e);return t===null?this:this.getImmediateChild(t).getChild(ut(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ce(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const r=new qe(e,t);let s,o;t.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(r,this.children_));const l=s.isEmpty()?Uu:this.priorityNode_;return new Ye(s,l,o)}}updateChild(e,t){const r=He(e);if(r===null)return t;{ce(He(e)!==".priority"||no(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(ut(e),t);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,s=0,o=!0;if(this.forEachChild(fn,(l,c)=>{t[l]=c.val(e),r++,o&&Ye.INTEGER_REGEXP_.test(l)?s=Math.max(s,Number(l)):o=!1}),!e&&o&&s<2*r){const l=[];for(const c in t)l[c]=t[c];return l}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+DR(this.getPriority().val())+":"),this.forEachChild(fn,(t,r)=>{const s=r.hash();s!==""&&(e+=":"+t+":"+s)}),this.lazyHash_=e===""?"":iR(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new qe(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new qe(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new qe(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,qe.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,qe.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Qc?-1:0}withIndex(e){if(e===fl||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Ye(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===fl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const r=this.getIterator(fn),s=t.getIterator(fn);let o=r.getNext(),l=s.getNext();for(;o&&l;){if(o.name!==l.name||!o.node.equals(l.node))return!1;o=r.getNext(),l=s.getNext()}return o===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===fl?null:this.indexMap_.get(e.toString())}}Ye.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class yV extends Ye{constructor(){super(new Dn(Zv),Ye.EMPTY_NODE,Vs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ye.EMPTY_NODE}isEmpty(){return!1}}const Qc=new yV;Object.defineProperties(qe,{MIN:{value:new qe(Cl,Ye.EMPTY_NODE)},MAX:{value:new qe(Jo,Qc)}});NR.__EMPTY_NODE=Ye.EMPTY_NODE;Wt.__childrenNodeConstructor=Ye;dV(Qc);fV(Qc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV=!0;function dn(n,e=null){if(n===null)return Ye.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ce(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new Wt(t,dn(e))}if(!(n instanceof Array)&&vV){const t=[];let r=!1;if(pr(n,(l,c)=>{if(l.substring(0,1)!=="."){const h=dn(c);h.isEmpty()||(r=r||!h.getPriority().isEmpty(),t.push(new qe(l,h)))}}),t.length===0)return Ye.EMPTY_NODE;const o=vf(t,cV,l=>l.name,Zv);if(r){const l=vf(t,fn.getCompare());return new Ye(o,dn(e),new Vs({".priority":l},{".priority":fn}))}else return new Ye(o,dn(e),Vs.Default)}else{let t=Ye.EMPTY_NODE;return pr(n,(r,s)=>{if(ei(n,r)&&r.substring(0,1)!=="."){const o=dn(s);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(dn(e))}}hV(dn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V extends dp{constructor(e){super(),this.indexPath_=e,ce(!$e(e)&&He(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),s=this.extractChild(t.node),o=r.compareTo(s);return o===0?$l(e.name,t.name):o}makePost(e,t){const r=dn(e),s=Ye.EMPTY_NODE.updateChild(this.indexPath_,r);return new qe(t,s)}maxPost(){const e=Ye.EMPTY_NODE.updateChild(this.indexPath_,Qc);return new qe(Jo,e)}toString(){return AR(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV extends dp{compare(e,t){const r=e.node.compareTo(t.node);return r===0?$l(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return qe.MIN}maxPost(){return qe.MAX}makePost(e,t){const r=dn(e);return new qe(t,r)}toString(){return".value"}}const EV=new wV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(n){return{type:"value",snapshotNode:n}}function IV(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function CV(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function sI(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function xV(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=fn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ce(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ce(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Cl}hasEnd(){return this.endSet_}getIndexEndValue(){return ce(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ce(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Jo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ce(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===fn}copy(){const e=new e_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function iI(n){const e={};if(n.isDefault())return e;let t;if(n.index_===fn?t="$priority":n.index_===EV?t="$value":n.index_===fl?t="$key":(ce(n.index_ instanceof _V,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Zt(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=Zt(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Zt(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Zt(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Zt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function oI(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==fn&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f extends xR{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ce(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Gc("p:rest:"),this.listens_={}}listen(e,t,r,s){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=_f.getListenId_(e,r),c={};this.listens_[l]=c;const h=iI(e._queryParams);this.restRequest_(o+".json",h,(f,g)=>{let _=g;if(f===404&&(_=null,f=null),f===null&&this.onDataUpdate_(o,_,!1,r),gl(this.listens_,l)===c){let E;f?f===401?E="permission_denied":E="rest_error:"+f:E="ok",s(E,null)}})}unlisten(e,t){const r=_f.getListenId_(e,t);delete this.listens_[r]}get(e){const t=iI(e._queryParams),r=e._path.toString(),s=new Yy;return this.restRequest_(r+".json",t,(o,l)=>{let c=l;o===404&&(c=null,o=null),o===null?(this.onDataUpdate_(r,c,!1,null),s.resolve(c)):s.reject(new Error(c))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(t.auth=s.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ol(t);this.log_("Sending REST request for "+l);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&c.readyState===4){this.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);let h=null;if(c.status>=200&&c.status<300){try{h=pc(c.responseText)}catch{Xn("Failed to parse JSON response for "+l+": "+c.responseText)}r(null,h)}else c.status!==401&&c.status!==404&&Xn("Got unsuccessful REST response for "+l+" Status: "+c.status),r(c.status);r=null}},c.open("GET",l,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(){this.rootNode_=Ye.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(){return{value:null,children:new Map}}function jR(n,e,t){if($e(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const r=He(e);n.children.has(r)||n.children.set(r,wf());const s=n.children.get(r);e=ut(e),jR(s,e,t)}}function my(n,e,t){n.value!==null?t(e,n.value):RV(n,(r,s)=>{const o=new dt(e.toString()+"/"+r);my(s,o,t)})}function RV(n,e){n.children.forEach((t,r)=>{e(r,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&pr(this.last_,(r,s)=>{t[r]=t[r]-s}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=10*1e3,PV=30*1e3,bV=5*60*1e3;class kV{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new AV(e);const r=aI+(PV-aI)*Math.random();ic(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;pr(e,(s,o)=>{o>0&&ei(this.statsToReport_,s)&&(t[s]=o,r=!0)}),r&&this.server_.reportStats(t),ic(this.reportStats_.bind(this),Math.floor(Math.random()*2*bV))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ns;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ns||(ns={}));function VR(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function FR(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function UR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ns.ACK_USER_WRITE,this.source=VR()}operationForChild(e){if($e(this.path)){if(this.affectedTree.value!=null)return ce(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new dt(e));return new Ef(et(),t,this.revert)}}else return ce(He(this.path)===e,"operationForChild called for unrelated child."),new Ef(ut(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ns.OVERWRITE}operationForChild(e){return $e(this.path)?new Zo(this.source,et(),this.snap.getImmediateChild(e)):new Zo(this.source,ut(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ns.MERGE}operationForChild(e){if($e(this.path)){const t=this.children.subtree(new dt(e));return t.isEmpty()?null:t.value?new Zo(this.source,et(),t.value):new Ac(this.source,et(),t)}else return ce(He(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ac(this.source,ut(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($e(e))return this.isFullyInitialized()&&!this.filtered_;const t=He(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function NV(n,e,t,r){const s=[],o=[];return e.forEach(l=>{l.type==="child_changed"&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(xV(l.childName,l.snapshotNode))}),$u(n,s,"child_removed",e,r,t),$u(n,s,"child_added",e,r,t),$u(n,s,"child_moved",o,r,t),$u(n,s,"child_changed",e,r,t),$u(n,s,"value",e,r,t),s}function $u(n,e,t,r,s,o){const l=r.filter(c=>c.type===t);l.sort((c,h)=>OV(n,c,h)),l.forEach(c=>{const h=DV(n,c,o);s.forEach(f=>{f.respondsTo(c.type)&&e.push(f.createEvent(h,n.query_))})})}function DV(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function OV(n,e,t){if(e.childName==null||t.childName==null)throw Dl("Should only compare child_ events.");const r=new qe(e.childName,e.snapshotNode),s=new qe(t.childName,t.snapshotNode);return n.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(n,e){return{eventCache:n,serverCache:e}}function oc(n,e,t,r){return $R(new t_(e,t,r),n.serverCache)}function BR(n,e,t,r){return $R(n.eventCache,new t_(e,t,r))}function gy(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ea(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yg;const LV=()=>(yg||(yg=new Dn(Ej)),yg);class lt{static fromObject(e){let t=new lt(null);return pr(e,(r,s)=>{t=t.set(new dt(r),s)}),t}constructor(e,t=LV()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:et(),value:this.value};if($e(e))return null;{const r=He(e),s=this.children.get(r);if(s!==null){const o=s.findRootMostMatchingPathAndValue(ut(e),t);return o!=null?{path:Gt(new dt(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($e(e))return this;{const t=He(e),r=this.children.get(t);return r!==null?r.subtree(ut(e)):new lt(null)}}set(e,t){if($e(e))return new lt(t,this.children);{const r=He(e),o=(this.children.get(r)||new lt(null)).set(ut(e),t),l=this.children.insert(r,o);return new lt(this.value,l)}}remove(e){if($e(e))return this.children.isEmpty()?new lt(null):new lt(null,this.children);{const t=He(e),r=this.children.get(t);if(r){const s=r.remove(ut(e));let o;return s.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,s),this.value===null&&o.isEmpty()?new lt(null):new lt(this.value,o)}else return this}}get(e){if($e(e))return this.value;{const t=He(e),r=this.children.get(t);return r?r.get(ut(e)):null}}setTree(e,t){if($e(e))return t;{const r=He(e),o=(this.children.get(r)||new lt(null)).setTree(ut(e),t);let l;return o.isEmpty()?l=this.children.remove(r):l=this.children.insert(r,o),new lt(this.value,l)}}fold(e){return this.fold_(et(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((s,o)=>{r[s]=o.fold_(Gt(e,s),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,et(),t)}findOnPath_(e,t,r){const s=this.value?r(t,this.value):!1;if(s)return s;if($e(e))return null;{const o=He(e),l=this.children.get(o);return l?l.findOnPath_(ut(e),Gt(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,et(),t)}foreachOnPath_(e,t,r){if($e(e))return this;{this.value&&r(t,this.value);const s=He(e),o=this.children.get(s);return o?o.foreachOnPath_(ut(e),Gt(t,s),r):new lt(null)}}foreach(e){this.foreach_(et(),e)}foreach_(e,t){this.children.inorderTraversal((r,s)=>{s.foreach_(Gt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this.writeTree_=e}static empty(){return new Mr(new lt(null))}}function ac(n,e,t){if($e(e))return new Mr(new lt(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let o=r.value;const l=cr(s,e);return o=o.updateChild(l,t),new Mr(n.writeTree_.set(s,o))}else{const s=new lt(t),o=n.writeTree_.setTree(e,s);return new Mr(o)}}}function lI(n,e,t){let r=n;return pr(t,(s,o)=>{r=ac(r,Gt(e,s),o)}),r}function uI(n,e){if($e(e))return Mr.empty();{const t=n.writeTree_.setTree(e,new lt(null));return new Mr(t)}}function yy(n,e){return aa(n,e)!=null}function aa(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(cr(t.path,e)):null}function cI(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(fn,(r,s)=>{e.push(new qe(r,s))}):n.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new qe(r,s.value))}),e}function Hi(n,e){if($e(e))return n;{const t=aa(n,e);return t!=null?new Mr(new lt(t)):new Mr(n.writeTree_.subtree(e))}}function vy(n){return n.writeTree_.isEmpty()}function xl(n,e){return zR(et(),n.writeTree_,e)}function zR(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((s,o)=>{s===".priority"?(ce(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=zR(Gt(n,s),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Gt(n,".priority"),r)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(n,e){return QR(e,n)}function MV(n,e,t,r,s){ce(r>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:s}),s&&(n.visibleWrites=ac(n.visibleWrites,e,t)),n.lastWriteId=r}function jV(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}function VV(n,e){const t=n.allWrites.findIndex(c=>c.writeId===e);ce(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let s=r.visible,o=!1,l=n.allWrites.length-1;for(;s&&l>=0;){const c=n.allWrites[l];c.visible&&(l>=t&&FV(c,r.path)?s=!1:Or(r.path,c.path)&&(o=!0)),l--}if(s){if(o)return UV(n),!0;if(r.snap)n.visibleWrites=uI(n.visibleWrites,r.path);else{const c=r.children;pr(c,h=>{n.visibleWrites=uI(n.visibleWrites,Gt(r.path,h))})}return!0}else return!1}function FV(n,e){if(n.snap)return Or(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Or(Gt(n.path,t),e))return!0;return!1}function UV(n){n.visibleWrites=HR(n.allWrites,$V,et()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function $V(n){return n.visible}function HR(n,e,t){let r=Mr.empty();for(let s=0;s<n.length;++s){const o=n[s];if(e(o)){const l=o.path;let c;if(o.snap)Or(t,l)?(c=cr(t,l),r=ac(r,c,o.snap)):Or(l,t)&&(c=cr(l,t),r=ac(r,et(),o.snap.getChild(c)));else if(o.children){if(Or(t,l))c=cr(t,l),r=lI(r,c,o.children);else if(Or(l,t))if(c=cr(l,t),$e(c))r=lI(r,et(),o.children);else{const h=gl(o.children,He(c));if(h){const f=h.getChild(ut(c));r=ac(r,et(),f)}}}else throw Dl("WriteRecord should have .snap or .children")}}return r}function qR(n,e,t,r,s){if(!r&&!s){const o=aa(n.visibleWrites,e);if(o!=null)return o;{const l=Hi(n.visibleWrites,e);if(vy(l))return t;if(t==null&&!yy(l,et()))return null;{const c=t||Ye.EMPTY_NODE;return xl(l,c)}}}else{const o=Hi(n.visibleWrites,e);if(!s&&vy(o))return t;if(!s&&t==null&&!yy(o,et()))return null;{const l=function(f){return(f.visible||s)&&(!r||!~r.indexOf(f.writeId))&&(Or(f.path,e)||Or(e,f.path))},c=HR(n.allWrites,l,e),h=t||Ye.EMPTY_NODE;return xl(c,h)}}}function BV(n,e,t){let r=Ye.EMPTY_NODE;const s=aa(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(fn,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(t){const o=Hi(n.visibleWrites,e);return t.forEachChild(fn,(l,c)=>{const h=xl(Hi(o,new dt(l)),c);r=r.updateImmediateChild(l,h)}),cI(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}else{const o=Hi(n.visibleWrites,e);return cI(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}}function zV(n,e,t,r,s){ce(r||s,"Either existingEventSnap or existingServerSnap must exist");const o=Gt(e,t);if(yy(n.visibleWrites,o))return null;{const l=Hi(n.visibleWrites,o);return vy(l)?s.getChild(t):xl(l,s.getChild(t))}}function WV(n,e,t,r){const s=Gt(e,t),o=aa(n.visibleWrites,s);if(o!=null)return o;if(r.isCompleteForChild(t)){const l=Hi(n.visibleWrites,s);return xl(l,r.getNode().getImmediateChild(t))}else return null}function HV(n,e){return aa(n.visibleWrites,e)}function qV(n,e,t,r,s,o,l){let c;const h=Hi(n.visibleWrites,e),f=aa(h,et());if(f!=null)c=f;else if(t!=null)c=xl(h,t);else return[];if(c=c.withIndex(l),!c.isEmpty()&&!c.isLeafNode()){const g=[],_=l.getCompare(),E=o?c.getReverseIteratorFrom(r,l):c.getIteratorFrom(r,l);let C=E.getNext();for(;C&&g.length<s;)_(C,r)!==0&&g.push(C),C=E.getNext();return g}else return[]}function GV(){return{visibleWrites:Mr.empty(),allWrites:[],lastWriteId:-1}}function _y(n,e,t,r){return qR(n.writeTree,n.treePath,e,t,r)}function GR(n,e){return BV(n.writeTree,n.treePath,e)}function dI(n,e,t,r){return zV(n.writeTree,n.treePath,e,t,r)}function Tf(n,e){return HV(n.writeTree,Gt(n.treePath,e))}function KV(n,e,t,r,s,o){return qV(n.writeTree,n.treePath,e,t,r,s,o)}function n_(n,e,t){return WV(n.writeTree,n.treePath,e,t)}function KR(n,e){return QR(Gt(n.treePath,e),n.writeTree)}function QR(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;ce(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ce(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const o=s.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,sI(r,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,CV(r,s.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,IV(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,sI(r,e.snapshotNode,s.oldSnap));else throw Dl("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}}const YR=new YV;class r_{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new t_(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return n_(this.writes_,e,r)}}getChildAfterChild(e,t,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ea(this.viewCache_),o=KV(this.writes_,s,t,1,r,e);return o.length===0?null:o[0]}}function XV(n,e){ce(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ce(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function JV(n,e,t,r,s){const o=new QV;let l,c;if(t.type===ns.OVERWRITE){const f=t;f.source.fromUser?l=wy(n,e,f.path,f.snap,r,s,o):(ce(f.source.fromServer,"Unknown source."),c=f.source.tagged||e.serverCache.isFiltered()&&!$e(f.path),l=If(n,e,f.path,f.snap,r,s,c,o))}else if(t.type===ns.MERGE){const f=t;f.source.fromUser?l=e3(n,e,f.path,f.children,r,s,o):(ce(f.source.fromServer,"Unknown source."),c=f.source.tagged||e.serverCache.isFiltered(),l=Ey(n,e,f.path,f.children,r,s,c,o))}else if(t.type===ns.ACK_USER_WRITE){const f=t;f.revert?l=r3(n,e,f.path,r,s,o):l=t3(n,e,f.path,f.affectedTree,r,s,o)}else if(t.type===ns.LISTEN_COMPLETE)l=n3(n,e,t.path,r,o);else throw Dl("Unknown operation type: "+t.type);const h=o.getChanges();return ZV(e,l,h),{viewCache:l,changes:h}}function ZV(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=gy(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(TV(gy(e)))}}function XR(n,e,t,r,s,o){const l=e.eventCache;if(Tf(r,t)!=null)return e;{let c,h;if($e(t))if(ce(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const f=ea(e),g=f instanceof Ye?f:Ye.EMPTY_NODE,_=GR(r,g);c=n.filter.updateFullNode(e.eventCache.getNode(),_,o)}else{const f=_y(r,ea(e));c=n.filter.updateFullNode(e.eventCache.getNode(),f,o)}else{const f=He(t);if(f===".priority"){ce(no(t)===1,"Can't have a priority with additional path components");const g=l.getNode();h=e.serverCache.getNode();const _=dI(r,t,g,h);_!=null?c=n.filter.updatePriority(g,_):c=l.getNode()}else{const g=ut(t);let _;if(l.isCompleteForChild(f)){h=e.serverCache.getNode();const E=dI(r,t,l.getNode(),h);E!=null?_=l.getNode().getImmediateChild(f).updateChild(g,E):_=l.getNode().getImmediateChild(f)}else _=n_(r,f,e.serverCache);_!=null?c=n.filter.updateChild(l.getNode(),f,_,g,s,o):c=l.getNode()}}return oc(e,c,l.isFullyInitialized()||$e(t),n.filter.filtersNodes())}}function If(n,e,t,r,s,o,l,c){const h=e.serverCache;let f;const g=l?n.filter:n.filter.getIndexedFilter();if($e(t))f=g.updateFullNode(h.getNode(),r,null);else if(g.filtersNodes()&&!h.isFiltered()){const C=h.getNode().updateChild(t,r);f=g.updateFullNode(h.getNode(),C,null)}else{const C=He(t);if(!h.isCompleteForPath(t)&&no(t)>1)return e;const R=ut(t),S=h.getNode().getImmediateChild(C).updateChild(R,r);C===".priority"?f=g.updatePriority(h.getNode(),S):f=g.updateChild(h.getNode(),C,S,R,YR,null)}const _=BR(e,f,h.isFullyInitialized()||$e(t),g.filtersNodes()),E=new r_(s,_,o);return XR(n,_,t,s,E,c)}function wy(n,e,t,r,s,o,l){const c=e.eventCache;let h,f;const g=new r_(s,e,o);if($e(t))f=n.filter.updateFullNode(e.eventCache.getNode(),r,l),h=oc(e,f,!0,n.filter.filtersNodes());else{const _=He(t);if(_===".priority")f=n.filter.updatePriority(e.eventCache.getNode(),r),h=oc(e,f,c.isFullyInitialized(),c.isFiltered());else{const E=ut(t),C=c.getNode().getImmediateChild(_);let R;if($e(E))R=r;else{const A=g.getCompleteChild(_);A!=null?RR(E)===".priority"&&A.getChild(PR(E)).isEmpty()?R=A:R=A.updateChild(E,r):R=Ye.EMPTY_NODE}if(C.equals(R))h=e;else{const A=n.filter.updateChild(c.getNode(),_,R,E,g,l);h=oc(e,A,c.isFullyInitialized(),n.filter.filtersNodes())}}}return h}function hI(n,e){return n.eventCache.isCompleteForChild(e)}function e3(n,e,t,r,s,o,l){let c=e;return r.foreach((h,f)=>{const g=Gt(t,h);hI(e,He(g))&&(c=wy(n,c,g,f,s,o,l))}),r.foreach((h,f)=>{const g=Gt(t,h);hI(e,He(g))||(c=wy(n,c,g,f,s,o,l))}),c}function fI(n,e,t){return t.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function Ey(n,e,t,r,s,o,l,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h=e,f;$e(t)?f=r:f=new lt(null).setTree(t,r);const g=e.serverCache.getNode();return f.children.inorderTraversal((_,E)=>{if(g.hasChild(_)){const C=e.serverCache.getNode().getImmediateChild(_),R=fI(n,C,E);h=If(n,h,new dt(_),R,s,o,l,c)}}),f.children.inorderTraversal((_,E)=>{const C=!e.serverCache.isCompleteForChild(_)&&E.value===null;if(!g.hasChild(_)&&!C){const R=e.serverCache.getNode().getImmediateChild(_),A=fI(n,R,E);h=If(n,h,new dt(_),A,s,o,l,c)}}),h}function t3(n,e,t,r,s,o,l){if(Tf(s,t)!=null)return e;const c=e.serverCache.isFiltered(),h=e.serverCache;if(r.value!=null){if($e(t)&&h.isFullyInitialized()||h.isCompleteForPath(t))return If(n,e,t,h.getNode().getChild(t),s,o,c,l);if($e(t)){let f=new lt(null);return h.getNode().forEachChild(fl,(g,_)=>{f=f.set(new dt(g),_)}),Ey(n,e,t,f,s,o,c,l)}else return e}else{let f=new lt(null);return r.foreach((g,_)=>{const E=Gt(t,g);h.isCompleteForPath(E)&&(f=f.set(g,h.getNode().getChild(E)))}),Ey(n,e,t,f,s,o,c,l)}}function n3(n,e,t,r,s){const o=e.serverCache,l=BR(e,o.getNode(),o.isFullyInitialized()||$e(t),o.isFiltered());return XR(n,l,t,r,YR,s)}function r3(n,e,t,r,s,o){let l;if(Tf(r,t)!=null)return e;{const c=new r_(r,e,s),h=e.eventCache.getNode();let f;if($e(t)||He(t)===".priority"){let g;if(e.serverCache.isFullyInitialized())g=_y(r,ea(e));else{const _=e.serverCache.getNode();ce(_ instanceof Ye,"serverChildren would be complete if leaf node"),g=GR(r,_)}g=g,f=n.filter.updateFullNode(h,g,o)}else{const g=He(t);let _=n_(r,g,e.serverCache);_==null&&e.serverCache.isCompleteForChild(g)&&(_=h.getImmediateChild(g)),_!=null?f=n.filter.updateChild(h,g,_,ut(t),c,o):e.eventCache.getNode().hasChild(g)?f=n.filter.updateChild(h,g,Ye.EMPTY_NODE,ut(t),c,o):f=h,f.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=_y(r,ea(e)),l.isLeafNode()&&(f=n.filter.updateFullNode(f,l,o)))}return l=e.serverCache.isFullyInitialized()||Tf(r,et())!=null,oc(e,f,l,n.filter.filtersNodes())}}function s3(n,e){const t=ea(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!$e(e)&&!t.getImmediateChild(He(e)).isEmpty())?t.getChild(e):null}function pI(n,e,t,r){e.type===ns.MERGE&&e.source.queryId!==null&&(ce(ea(n.viewCache_),"We should always have a full cache before handling merges"),ce(gy(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,o=JV(n.processor_,s,e,t,r);return XV(n.processor_,o.viewCache),ce(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,i3(n,o.changes,o.viewCache.eventCache.getNode())}function i3(n,e,t,r){const s=n.eventRegistrations_;return NV(n.eventGenerator_,e,t,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mI;function o3(n){ce(!mI,"__referenceConstructor has already been defined"),mI=n}function s_(n,e,t,r){const s=e.source.queryId;if(s!==null){const o=n.views.get(s);return ce(o!=null,"SyncTree gave us an op for an invalid query."),pI(o,e,t,r)}else{let o=[];for(const l of n.views.values())o=o.concat(pI(l,e,t,r));return o}}function i_(n,e){let t=null;for(const r of n.views.values())t=t||s3(r,e);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gI;function a3(n){ce(!gI,"__referenceConstructor has already been defined"),gI=n}class yI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new lt(null),this.pendingWriteTree_=GV(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function l3(n,e,t,r,s){return MV(n.pendingWriteTree_,e,t,r,s),s?fp(n,new Zo(VR(),e,t)):[]}function il(n,e,t=!1){const r=jV(n.pendingWriteTree_,e);if(VV(n.pendingWriteTree_,e)){let o=new lt(null);return r.snap!=null?o=o.set(et(),!0):pr(r.children,l=>{o=o.set(new dt(l),!0)}),fp(n,new Ef(r.path,o,t))}else return[]}function hp(n,e,t){return fp(n,new Zo(FR(),e,t))}function u3(n,e,t){const r=lt.fromObject(t);return fp(n,new Ac(FR(),e,r))}function c3(n,e,t,r){const s=tA(n,r);if(s!=null){const o=nA(s),l=o.path,c=o.queryId,h=cr(l,e),f=new Zo(UR(c),h,t);return rA(n,l,f)}else return[]}function d3(n,e,t,r){const s=tA(n,r);if(s){const o=nA(s),l=o.path,c=o.queryId,h=cr(l,e),f=lt.fromObject(t),g=new Ac(UR(c),h,f);return rA(n,l,g)}else return[]}function JR(n,e,t){const s=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(l,c)=>{const h=cr(l,e),f=i_(c,h);if(f)return f});return qR(s,e,o,t,!0)}function fp(n,e){return ZR(e,n.syncPointTree_,null,WR(n.pendingWriteTree_,et()))}function ZR(n,e,t,r){if($e(n.path))return eA(n,e,t,r);{const s=e.get(et());t==null&&s!=null&&(t=i_(s,et()));let o=[];const l=He(n.path),c=n.operationForChild(l),h=e.children.get(l);if(h&&c){const f=t?t.getImmediateChild(l):null,g=KR(r,l);o=o.concat(ZR(c,h,f,g))}return s&&(o=o.concat(s_(s,n,r,t))),o}}function eA(n,e,t,r){const s=e.get(et());t==null&&s!=null&&(t=i_(s,et()));let o=[];return e.children.inorderTraversal((l,c)=>{const h=t?t.getImmediateChild(l):null,f=KR(r,l),g=n.operationForChild(l);g&&(o=o.concat(eA(g,c,h,f)))}),s&&(o=o.concat(s_(s,n,r,t))),o}function tA(n,e){return n.tagToQueryMap.get(e)}function nA(n){const e=n.indexOf("$");return ce(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new dt(n.substr(0,e))}}function rA(n,e,t){const r=n.syncPointTree_.get(e);ce(r,"Missing sync point for query tag that we're tracking");const s=WR(n.pendingWriteTree_,e);return s_(r,t,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new o_(t)}node(){return this.node_}}class a_{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Gt(this.path_,e);return new a_(this.syncTree_,t)}node(){return JR(this.syncTree_,this.path_)}}const h3=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},vI=function(n,e,t){if(!n||typeof n!="object")return n;if(ce(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return f3(n[".sv"],e,t);if(typeof n[".sv"]=="object")return p3(n[".sv"],e);ce(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},f3=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ce(!1,"Unexpected server value: "+n)}},p3=function(n,e,t){n.hasOwnProperty("increment")||ce(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&ce(!1,"Unexpected increment value: "+r);const s=e.node();if(ce(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const l=s.getValue();return typeof l!="number"?r:l+r},m3=function(n,e,t,r){return l_(e,new a_(t,n),r)},g3=function(n,e,t){return l_(n,new o_(e),t)};function l_(n,e,t){const r=n.getPriority().val(),s=vI(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const l=n,c=vI(l.getValue(),e,t);return c!==l.getValue()||s!==l.getPriority().val()?new Wt(c,dn(s)):n}else{const l=n;return o=l,s!==l.getPriority().val()&&(o=o.updatePriority(new Wt(s))),l.forEachChild(fn,(c,h)=>{const f=l_(h,e.getImmediateChild(c),t);f!==h&&(o=o.updateImmediateChild(c,f))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function c_(n,e){let t=e instanceof dt?e:new dt(e),r=n,s=He(t);for(;s!==null;){const o=gl(r.node.children,s)||{children:{},childCount:0};r=new u_(s,r,o),t=ut(t),s=He(t)}return r}function Bl(n){return n.node.value}function sA(n,e){n.node.value=e,Ty(n)}function iA(n){return n.node.childCount>0}function y3(n){return Bl(n)===void 0&&!iA(n)}function pp(n,e){pr(n.node.children,(t,r)=>{e(new u_(t,n,r))})}function oA(n,e,t,r){t&&e(n),pp(n,s=>{oA(s,e,!0)})}function v3(n,e,t){let r=n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Yc(n){return new dt(n.parent===null?n.name:Yc(n.parent)+"/"+n.name)}function Ty(n){n.parent!==null&&_3(n.parent,n.name,n)}function _3(n,e,t){const r=y3(t),s=ei(n.node.children,e);r&&s?(delete n.node.children[e],n.node.childCount--,Ty(n)):!r&&!s&&(n.node.children[e]=t.node,n.node.childCount++,Ty(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3=/[\[\].#$\/\u0000-\u001F\u007F]/,E3=/[\[\].#$\u0000-\u001F\u007F]/,vg=10*1024*1024,aA=function(n){return typeof n=="string"&&n.length!==0&&!w3.test(n)},T3=function(n){return typeof n=="string"&&n.length!==0&&!E3.test(n)},I3=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),T3(n)},lA=function(n,e,t){const r=t instanceof dt?new nV(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+$o(r));if(typeof e=="function")throw new Error(n+"contains a function "+$o(r)+" with contents = "+e.toString());if(oR(e))throw new Error(n+"contains "+e.toString()+" "+$o(r));if(typeof e=="string"&&e.length>vg/3&&Lf(e)>vg)throw new Error(n+"contains a string greater than "+vg+" utf8 bytes "+$o(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,o=!1;if(pr(e,(l,c)=>{if(l===".value")s=!0;else if(l!==".priority"&&l!==".sv"&&(o=!0,!aA(l)))throw new Error(n+" contains an invalid key ("+l+") "+$o(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);rV(r,l),lA(n,c,r),sV(r)}),s&&o)throw new Error(n+' contains ".value" child '+$o(r)+" in addition to actual children.")}},C3=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!aA(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!I3(t))throw new Error(Sk(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function S3(n,e){let t=null;for(let r=0;r<e.length;r++){const s=e[r],o=s.getPath();t!==null&&!bR(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(s)}t&&n.eventLists_.push(t)}function la(n,e,t){S3(n,t),R3(n,r=>Or(r,e)||Or(e,r))}function R3(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const s=n.eventLists_[r];if(s){const o=s.path;e(o)?(A3(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function A3(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const r=t.getEventRunner();sc&&cn("event: "+t.toString()),Kc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3="repo_interrupt",b3=25;class k3{constructor(e,t,r,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new x3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=wf(),this.transactionQueueTree_=new u_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function N3(n,e,t){if(n.stats_=Yv(n.repoInfo_),n.forceRestClient_||Rj())n.server_=new _f(n.repoInfo_,(r,s,o,l)=>{_I(n,r,s,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>wI(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Zt(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new $s(n.repoInfo_,e,(r,s,o,l)=>{_I(n,r,s,o,l)},r=>{wI(n,r)},r=>{O3(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=Nj(n.repoInfo_,()=>new kV(n.stats_,n.server_)),n.infoData_=new SV,n.infoSyncTree_=new yI({startListening:(r,s,o,l)=>{let c=[];const h=n.infoData_.getNode(r._path);return h.isEmpty()||(c=hp(n.infoSyncTree_,r._path,h),setTimeout(()=>{l("ok")},0)),c},stopListening:()=>{}}),d_(n,"connected",!1),n.serverSyncTree_=new yI({startListening:(r,s,o,l)=>(n.server_.listen(r,o,s,(c,h)=>{const f=l(c,h);la(n.eventQueue_,r._path,f)}),[]),stopListening:(r,s)=>{n.server_.unlisten(r,s)}})}function D3(n){const t=n.infoData_.getNode(new dt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function uA(n){return h3({timestamp:D3(n)})}function _I(n,e,t,r,s){n.dataUpdateCount++;const o=new dt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(s)if(r){const h=Xh(t,f=>dn(f));l=d3(n.serverSyncTree_,o,h,s)}else{const h=dn(t);l=c3(n.serverSyncTree_,o,h,s)}else if(r){const h=Xh(t,f=>dn(f));l=u3(n.serverSyncTree_,o,h)}else{const h=dn(t);l=hp(n.serverSyncTree_,o,h)}let c=o;l.length>0&&(c=f_(n,o)),la(n.eventQueue_,c,l)}function wI(n,e){d_(n,"connected",e),e===!1&&M3(n)}function O3(n,e){pr(e,(t,r)=>{d_(n,t,r)})}function d_(n,e,t){const r=new dt("/.info/"+e),s=dn(t);n.infoData_.updateSnapshot(r,s);const o=hp(n.infoSyncTree_,r,s);la(n.eventQueue_,r,o)}function L3(n){return n.nextWriteId_++}function M3(n){cA(n,"onDisconnectEvents");const e=uA(n),t=wf();my(n.onDisconnect_,et(),(s,o)=>{const l=m3(s,o,n.serverSyncTree_,e);jR(t,s,l)});let r=[];my(t,et(),(s,o)=>{r=r.concat(hp(n.serverSyncTree_,s,o));const l=U3(n,s);f_(n,l)}),n.onDisconnect_=wf(),la(n.eventQueue_,et(),r)}function j3(n){n.persistentConnection_&&n.persistentConnection_.interrupt(P3)}function cA(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),cn(t,...e)}function dA(n,e,t){return JR(n.serverSyncTree_,e,t)||Ye.EMPTY_NODE}function h_(n,e=n.transactionQueueTree_){if(e||mp(n,e),Bl(e)){const t=fA(n,e);ce(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&V3(n,Yc(e),t)}else iA(e)&&pp(e,t=>{h_(n,t)})}function V3(n,e,t){const r=t.map(f=>f.currentWriteId),s=dA(n,e,r);let o=s;const l=s.hash();for(let f=0;f<t.length;f++){const g=t[f];ce(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const _=cr(e,g.path);o=o.updateChild(_,g.currentOutputSnapshotRaw)}const c=o.val(!0),h=e;n.server_.put(h.toString(),c,f=>{cA(n,"transaction put response",{path:h.toString(),status:f});let g=[];if(f==="ok"){const _=[];for(let E=0;E<t.length;E++)t[E].status=2,g=g.concat(il(n.serverSyncTree_,t[E].currentWriteId)),t[E].onComplete&&_.push(()=>t[E].onComplete(null,!0,t[E].currentOutputSnapshotResolved)),t[E].unwatcher();mp(n,c_(n.transactionQueueTree_,e)),h_(n,n.transactionQueueTree_),la(n.eventQueue_,e,g);for(let E=0;E<_.length;E++)Kc(_[E])}else{if(f==="datastale")for(let _=0;_<t.length;_++)t[_].status===3?t[_].status=4:t[_].status=0;else{Xn("transaction at "+h.toString()+" failed: "+f);for(let _=0;_<t.length;_++)t[_].status=4,t[_].abortReason=f}f_(n,e)}},l)}function f_(n,e){const t=hA(n,e),r=Yc(t),s=fA(n,t);return F3(n,s,r),r}function F3(n,e,t){if(e.length===0)return;const r=[];let s=[];const l=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const h=e[c],f=cr(t,h.path);let g=!1,_;if(ce(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===4)g=!0,_=h.abortReason,s=s.concat(il(n.serverSyncTree_,h.currentWriteId,!0));else if(h.status===0)if(h.retryCount>=b3)g=!0,_="maxretry",s=s.concat(il(n.serverSyncTree_,h.currentWriteId,!0));else{const E=dA(n,h.path,l);h.currentInputSnapshot=E;const C=e[c].update(E.val());if(C!==void 0){lA("transaction failed: Data returned ",C,h.path);let R=dn(C);typeof C=="object"&&C!=null&&ei(C,".priority")||(R=R.updatePriority(E.getPriority()));const S=h.currentWriteId,V=uA(n),U=g3(R,E,V);h.currentOutputSnapshotRaw=R,h.currentOutputSnapshotResolved=U,h.currentWriteId=L3(n),l.splice(l.indexOf(S),1),s=s.concat(l3(n.serverSyncTree_,h.path,U,h.currentWriteId,h.applyLocally)),s=s.concat(il(n.serverSyncTree_,S,!0))}else g=!0,_="nodata",s=s.concat(il(n.serverSyncTree_,h.currentWriteId,!0))}la(n.eventQueue_,t,s),s=[],g&&(e[c].status=2,function(E){setTimeout(E,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(_==="nodata"?r.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):r.push(()=>e[c].onComplete(new Error(_),!1,null))))}mp(n,n.transactionQueueTree_);for(let c=0;c<r.length;c++)Kc(r[c]);h_(n,n.transactionQueueTree_)}function hA(n,e){let t,r=n.transactionQueueTree_;for(t=He(e);t!==null&&Bl(r)===void 0;)r=c_(r,t),e=ut(e),t=He(e);return r}function fA(n,e){const t=[];return pA(n,e,t),t.sort((r,s)=>r.order-s.order),t}function pA(n,e,t){const r=Bl(e);if(r)for(let s=0;s<r.length;s++)t.push(r[s]);pp(e,s=>{pA(n,s,t)})}function mp(n,e){const t=Bl(e);if(t){let r=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[r]=t[s],r++);t.length=r,sA(e,t.length>0?t:void 0)}pp(e,r=>{mp(n,r)})}function U3(n,e){const t=Yc(hA(n,e)),r=c_(n.transactionQueueTree_,e);return v3(r,s=>{_g(n,s)}),_g(n,r),oA(r,s=>{_g(n,s)}),t}function _g(n,e){const t=Bl(e);if(t){const r=[];let s=[],o=-1;for(let l=0;l<t.length;l++)t[l].status===3||(t[l].status===1?(ce(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):(ce(t[l].status===0,"Unexpected transaction status in abort"),t[l].unwatcher(),s=s.concat(il(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));o===-1?sA(e,void 0):t.length=o+1,la(n.eventQueue_,Yc(e),s);for(let l=0;l<r.length;l++)Kc(r[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let s=t[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function B3(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Xn(`Invalid query segment '${t}' in query '${n}'`)}return e}const EI=function(n,e){const t=z3(n),r=t.namespace;t.domain==="firebase.com"&&Qs(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Qs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||_j();const s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new vR(t.host,t.secure,r,s,e,"",r!==t.subdomain),path:new dt(t.pathString)}},z3=function(n){let e="",t="",r="",s="",o="",l=!0,c="https",h=443;if(typeof n=="string"){let f=n.indexOf("//");f>=0&&(c=n.substring(0,f-1),n=n.substring(f+2));let g=n.indexOf("/");g===-1&&(g=n.length);let _=n.indexOf("?");_===-1&&(_=n.length),e=n.substring(0,Math.min(g,_)),g<_&&(s=$3(n.substring(g,_)));const E=B3(n.substring(Math.min(n.length,_)));f=e.indexOf(":"),f>=0?(l=c==="https"||c==="wss",h=parseInt(e.substring(f+1),10)):f=e.length;const C=e.slice(0,f);if(C.toLowerCase()==="localhost")t="localhost";else if(C.split(".").length<=2)t=C;else{const R=e.indexOf(".");r=e.substring(0,R).toLowerCase(),t=e.substring(R+1),o=r}"ns"in E&&(o=E.ns)}return{host:e,port:h,domain:t,subdomain:r,secure:l,scheme:c,pathString:s,namespace:o}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,t,r,s){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=s}get key(){return $e(this._path)?null:RR(this._path)}get ref(){return new zl(this._repo,this._path)}get _queryIdentifier(){const e=oI(this._queryParams),t=Kv(e);return t==="{}"?"default":t}get _queryObject(){return oI(this._queryParams)}isEqual(e){if(e=st(e),!(e instanceof p_))return!1;const t=this._repo===e._repo,r=bR(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+tV(this._path)}}class zl extends p_{constructor(e,t){super(e,t,new e_,!1)}get parent(){const e=PR(this._path);return e===null?null:new zl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}o3(zl);a3(zl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3="FIREBASE_DATABASE_EMULATOR_HOST",Iy={};let H3=!1;function q3(n,e,t,r){n.repoInfo_=new vR(e,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),r&&(n.authTokenProvider_=r)}function G3(n,e,t,r,s){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||Qs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),cn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l=EI(o,s),c=l.repoInfo,h;typeof process<"u"&&$T&&(h=$T[W3]),h?(o=`http://${h}?ns=${c.namespace}`,l=EI(o,s),c=l.repoInfo):l.repoInfo.secure;const f=new Pj(n.name,n.options,e);C3("Invalid Firebase Database URL",l),$e(l.path)||Qs("Database URL must point to the root of a Firebase Database (not including a child path).");const g=Q3(c,n,f,new Aj(n,t));return new Y3(g,n)}function K3(n,e){const t=Iy[e];(!t||t[n.key]!==n)&&Qs(`Database ${e}(${n.repoInfo_}) has already been deleted.`),j3(n),delete t[n.key]}function Q3(n,e,t,r){let s=Iy[e.name];s||(s={},Iy[e.name]=s);let o=s[n.toURLString()];return o&&Qs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new k3(n,H3,t,r),s[n.toURLString()]=o,o}class Y3{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(N3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new zl(this._repo,et())),this._rootInternal}_delete(){return this._rootInternal!==null&&(K3(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Qs("Cannot call "+e+" on a deleted database.")}}function X3(n=jf(),e){const t=Lc(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=Qy("database");r&&J3(t,...r)}return t}function J3(n,e,t,r={}){n=st(n),n._checkNotDeleted("useEmulator");const s=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&Gi(r,o.repoInfo_.emulatorOptions))return;Qs("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Qs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new Wh(Wh.OWNER);else if(r.mockUserToken){const c=typeof r.mockUserToken=="string"?r.mockUserToken:Xy(r.mockUserToken,n.app.options.projectId);l=new Wh(c)}q3(o,s,r,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z3(n){fj(so),Ki(new zs("database",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return G3(r,s,o,t)},"PUBLIC").setMultipleInstances(!0)),dr(BT,zT,n),dr(BT,zT,"esm2017")}$s.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};$s.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};Z3();const m_=async(n,e,t,r,s,o,l)=>{const c=Wc();let h;e||t?h=`${e||""} ${t||""}`.trim():h=o||"";const f={uid:n,displayName:h,firstName:e||(o?o.split(" ")[0]:""),lastName:t||(o?o.split(" ").slice(1).join(" "):""),email:r,phoneNumber:s,createdAt:new Date,...l?{role:l}:{}};await eR(Yn(c,"users",n),f,{merge:!0})},mA={apiKey:"AIzaSyDX3sdS3txwVb8u3XA-3_D3l1psaT1TDzU",authDomain:"ureno-b0c23.firebaseapp.com",projectId:"ureno-b0c23",storageBucket:"ureno-b0c23.appspot.com",messagingSenderId:"750721636991",appId:"1:750721636991:web:1dee0acc728519b7f7fd4a",measurementId:"G-V8LVMN8932",databaseURL:"https://ureno-b0c23.firebaseio.com"};console.log("FIREBASE CONFIG:",mA);const g_=FC(mA),gp=Bf(g_);new ts;const jr=Wc(g_);oL("debug");const gA=En.createContext();function fs(){return I.useContext(gA)}function eF({children:n}){const[e,t]=I.useState(null),[r,s]=I.useState(!1),[o,l]=I.useState(!0),[c,h]=I.useState(!1),[f,g]=I.useState(!1),[_,E]=I.useState(!1),C={currentUser:e,userLoggedIn:r,isEmailUser:c,isGoogleUser:f,loading:o,redirectAfterAuth:_,setRedirectAfterAuth:E};return I.useEffect(()=>{const R=Bf(),A=hx(R,S=>{var V;if(t(S),s(!!S),S){const U=(V=S.providerData[0])==null?void 0:V.providerId;h(U==="password"),g(U==="google.com")}else h(!1),g(!1);l(!1),console.log("AuthProvider state updated: userLoggedIn =",!!S,"user:",S==null?void 0:S.uid)});return()=>A},[]),y.jsx(gA.Provider,{value:C,children:!o&&n})}const Cf=Wc(g_),tF=async n=>{try{const e=Yn(Cf,"users",n),t=await xc(e);return t.exists()?t.data():null}catch(e){throw console.error("Error fetching user profile:",e),e}},ua=I.createContext(),yp=()=>I.useContext(ua),nF=({children:n})=>{const[e,t]=I.useState(null),[r,s]=I.useState(null),[o,l]=I.useState(!0);return I.useEffect(()=>{const c=hx(gp,async h=>{if(t(h),!h){s(null),l(!1);return}console.log("Current user UID:",h==null?void 0:h.uid);let f=null,g=null;if(h.displayName){const C=h.displayName.split(" ");f=C[0]||"",g=C.slice(1).join(" ")||""}const _=Yn(Cf,"users",h.uid);(await xc(_)).exists()?console.log("User profile already exists, skipping creation."):(console.log("User profile doesn't exist yet, creating it."),await m_(h.uid,f,g,h.email,null,h.displayName));try{const C=await tF(h.uid),R={displayName:h.displayName||"",email:h.email||"",photoURL:h.photoURL||""};s(C||R),l(!1);try{const A=Yn(Cf,"users",h.uid);console.log("Setting up Firestore listener on: /users/"+h.uid),(await xc(A)).exists()||(console.log("Document doesn't exist yet, creating it first"),await eR(A,{displayName:r.displayName,email:r.email,photoURL:r.photoURL,createdAt:new Date},{merge:!0}));const V=tR(A,U=>{U.exists()?(console.log("Received profile update for UID:",h.uid,"Data:",U.data()),s(U.data())):console.warn("User document does not exist for UID:",h.uid)},U=>{console.error("Error listening to profile updates:",U)});return()=>V()}catch(A){console.error("Error setting up profile listener:",A)}}catch(C){console.error("Failed to fetch user profile:",C.message),l(!1)}});return()=>c()},[]),y.jsx(ua.Provider,{value:{user:e,profile:r,loading:o},children:n})},yA=I.createContext(),rF={conversations:[],selectedConversation:null,messages:[],loading:!1,currentConversationData:null};function sF(n,e){switch(e.type){case"SET_CONVERSATIONS":const t=[...e.payload].sort((c,h)=>{var _,E,C,R,A,S,V,U,$,W,Y,X;const f=((C=(E=(_=c.lastMessage)==null?void 0:_.timestamp)==null?void 0:E.toMillis)==null?void 0:C.call(E))||(((R=c.lastMessage)==null?void 0:R.timestamp)instanceof Date?c.lastMessage.timestamp.getTime():0)||((S=(A=c.updatedAt)==null?void 0:A.toMillis)==null?void 0:S.call(A))||0;return((($=(U=(V=h.lastMessage)==null?void 0:V.timestamp)==null?void 0:U.toMillis)==null?void 0:$.call(U))||(((W=h.lastMessage)==null?void 0:W.timestamp)instanceof Date?h.lastMessage.timestamp.getTime():0)||((X=(Y=h.updatedAt)==null?void 0:Y.toMillis)==null?void 0:X.call(Y))||0)-f});let r=n.currentConversationData;if(n.selectedConversation){const c=t.find(h=>h.id===n.selectedConversation);c&&(r=c)}return{...n,conversations:t,currentConversationData:r};case"UPDATE_LAST_MESSAGE":const s=n.conversations.map(c=>c.id===e.payload.conversationId?{...c,lastMessage:e.payload.lastMessage,updatedAt:e.payload.lastMessage.timestamp}:c).sort((c,h)=>{var _,E,C,R,A,S,V,U,$,W,Y,X;const f=((C=(E=(_=c.lastMessage)==null?void 0:_.timestamp)==null?void 0:E.toMillis)==null?void 0:C.call(E))||(((R=c.lastMessage)==null?void 0:R.timestamp)instanceof Date?c.lastMessage.timestamp.getTime():0)||((S=(A=c.updatedAt)==null?void 0:A.toMillis)==null?void 0:S.call(A))||0;return((($=(U=(V=h.lastMessage)==null?void 0:V.timestamp)==null?void 0:U.toMillis)==null?void 0:$.call(U))||(((W=h.lastMessage)==null?void 0:W.timestamp)instanceof Date?h.lastMessage.timestamp.getTime():0)||((X=(Y=h.updatedAt)==null?void 0:Y.toMillis)==null?void 0:X.call(Y))||0)-f});return{...n,conversations:s};case"SELECT_CONVERSATION":if(n.selectedConversation===e.payload)return n;const o=n.conversations.find(c=>c.id===e.payload)||null;return{...n,selectedConversation:e.payload,messages:[],currentConversationData:o};case"SET_CURRENT_CONVERSATION_DATA":return{...n,currentConversationData:e.payload};case"SET_MESSAGES":return{...n,messages:e.payload};case"ADD_MESSAGE":return n.messages.some(c=>{var h,f,g,_,E,C;return c.id===e.payload.id||c.senderId===e.payload.senderId&&c.text===e.payload.text&&Math.abs(((g=((f=(h=c.timestamp)==null?void 0:h.toDate)==null?void 0:f.call(h))||c.timestamp)==null?void 0:g.getTime())-((C=((E=(_=e.payload.timestamp)==null?void 0:_.toDate)==null?void 0:E.call(_))||e.payload.timestamp)==null?void 0:C.getTime()))<5e3})?n:{...n,messages:[...n.messages,e.payload].sort((c,h)=>{var _,E,C,R;const f=((E=(_=c.timestamp)==null?void 0:_.toMillis)==null?void 0:E.call(_))||(c.timestamp instanceof Date?c.timestamp.getTime():0),g=((R=(C=h.timestamp)==null?void 0:C.toMillis)==null?void 0:R.call(C))||(h.timestamp instanceof Date?h.timestamp.getTime():0);return f-g})};case"SET_LOADING":return{...n,loading:e.payload};default:return n}}function iF({children:n}){const[e,t]=I.useReducer(sF,rF);return I.useEffect(()=>{const r=e.selectedConversation;if(!r)return;console.log(`Setting up listener for conversation ${r}`);const s=Yn(jr,"conversations",r),o=tR(s,l=>{if(l.exists()){const c={id:l.id,...l.data()};if(console.log("Conversation data updated:",c),t({type:"SET_CURRENT_CONVERSATION_DATA",payload:c}),e.conversations.length>0){const h=e.conversations.map(f=>f.id===r?c:f);t({type:"SET_CONVERSATIONS",payload:h})}}else console.log(`Conversation ${r} does not exist`)},l=>{console.error("Error listening to conversation:",l)});return()=>{console.log(`Cleaning up listener for conversation ${r}`),o()}},[e.selectedConversation]),y.jsx(yA.Provider,{value:{state:e,dispatch:t},children:n})}function M$(){return I.useContext(yA)}function oF(){return y.jsxs("div",{className:"w-full h-screen flex flex-col items-center justify-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4"}),y.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}const aF="/Ureno_webdesign/assets/flooring-background-D6oQgrl-.png",lF="/Ureno_webdesign/assets/paint-background-DV-ynsPo.png",TI="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24px'%20height='24px'%3e%3cpath%20d='M12,2C6.477,2,2,6.477,2,12c0,5.013,3.693,9.153,8.505,9.876V14.65H8.031v-2.629h2.474v-1.749%20c0-2.896,1.411-4.167,3.818-4.167c1.153,0,1.762,0.085,2.051,0.124v2.294h-1.642c-1.022,0-1.379,0.969-1.379,2.061v1.437h2.995%20l-0.406,2.629h-2.588v7.247C18.235,21.236,22,17.062,22,12C22,6.477,17.523,2,12,2z'/%3e%3c/svg%3e",II="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24px'%20height='24px'%3e%3cpath%20d='M%208%203%20C%205.243%203%203%205.243%203%208%20L%203%2016%20C%203%2018.757%205.243%2021%208%2021%20L%2016%2021%20C%2018.757%2021%2021%2018.757%2021%2016%20L%2021%208%20C%2021%205.243%2018.757%203%2016%203%20L%208%203%20z%20M%208%205%20L%2016%205%20C%2017.654%205%2019%206.346%2019%208%20L%2019%2016%20C%2019%2017.654%2017.654%2019%2016%2019%20L%208%2019%20C%206.346%2019%205%2017.654%205%2016%20L%205%208%20C%205%206.346%206.346%205%208%205%20z%20M%2017%206%20A%201%201%200%200%200%2016%207%20A%201%201%200%200%200%2017%208%20A%201%201%200%200%200%2018%207%20A%201%201%200%200%200%2017%206%20z%20M%2012%207%20C%209.243%207%207%209.243%207%2012%20C%207%2014.757%209.243%2017%2012%2017%20C%2014.757%2017%2017%2014.757%2017%2012%20C%2017%209.243%2014.757%207%2012%207%20z%20M%2012%209%20C%2013.654%209%2015%2010.346%2015%2012%20C%2015%2013.654%2013.654%2015%2012%2015%20C%2010.346%2015%209%2013.654%209%2012%20C%209%2010.346%2010.346%209%2012%209%20z'/%3e%3c/svg%3e",CI="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24px'%20height='24px'%3e%3cpath%20d='M%205%203%20C%203.895%203%203%203.895%203%205%20L%203%2019%20C%203%2020.105%203.895%2021%205%2021%20L%2019%2021%20C%2020.105%2021%2021%2020.105%2021%2019%20L%2021%205%20C%2021%203.895%2020.105%203%2019%203%20L%205%203%20z%20M%205%205%20L%2019%205%20L%2019%2019%20L%205%2019%20L%205%205%20z%20M%207.7792969%206.3164062%20C%206.9222969%206.3164062%206.4082031%206.8315781%206.4082031%207.5175781%20C%206.4082031%208.2035781%206.9223594%208.7167969%207.6933594%208.7167969%20C%208.5503594%208.7167969%209.0644531%208.2035781%209.0644531%207.5175781%20C%209.0644531%206.8315781%208.5502969%206.3164062%207.7792969%206.3164062%20z%20M%206.4765625%2010%20L%206.4765625%2017%20L%209%2017%20L%209%2010%20L%206.4765625%2010%20z%20M%2011.082031%2010%20L%2011.082031%2017%20L%2013.605469%2017%20L%2013.605469%2013.173828%20C%2013.605469%2012.034828%2014.418109%2011.871094%2014.662109%2011.871094%20C%2014.906109%2011.871094%2015.558594%2012.115828%2015.558594%2013.173828%20L%2015.558594%2017%20L%2018%2017%20L%2018%2013.173828%20C%2018%2010.976828%2017.023734%2010%2015.802734%2010%20C%2014.581734%2010%2013.930469%2010.406562%2013.605469%2010.976562%20L%2013.605469%2010%20L%2011.082031%2010%20z'/%3e%3c/svg%3e",xI="/Ureno_webdesign/assets/icons8-youtube-logo-CImQkwOS.svg",y_=()=>y.jsxs("div",{className:"footer",children:[y.jsxs("div",{className:"left",children:[y.jsx("div",{className:"logo",children:"URENO"}),y.jsxs("div",{className:"social-sites",children:[y.jsx("object",{data:TI,type:"image/svg+xml",children:y.jsx("img",{src:TI})}),y.jsx("object",{data:II,type:"image/svg+xml",children:y.jsx("img",{src:II})}),y.jsx("object",{data:CI,type:"image/svg+xml",children:y.jsx("img",{src:CI})}),y.jsx("object",{data:xI,type:"image/svg+xml",children:y.jsx("img",{src:xI})})]})]}),y.jsxs("div",{className:"right",children:[y.jsxs("menu",{children:[y.jsx("li",{children:"Topic"}),y.jsx("li",{children:"Page"}),y.jsx("li",{children:"Page"}),y.jsx("li",{children:"Page"})]}),y.jsxs("menu",{children:[y.jsx("li",{children:"Topic"}),y.jsx("li",{children:"Page"}),y.jsx("li",{children:"Page"}),y.jsx("li",{children:"Page"})]}),y.jsxs("menu",{children:[y.jsx("li",{children:"Topic"}),y.jsx("li",{children:"Page"}),y.jsx("li",{children:"Page"}),y.jsx("li",{children:"Page"})]})]})]}),Cy="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20height='40px'%20width='40px'%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20402.161%20402.161'%20xml:space='preserve'%3e%3cg%3e%3cg%3e%3cg%3e%3cpath%20d='M201.08,49.778c-38.794,0-70.355,31.561-70.355,70.355c0,18.828,7.425,40.193,19.862,57.151%20c14.067,19.181,32,29.745,50.493,29.745c18.494,0,36.426-10.563,50.494-29.745c12.437-16.958,19.862-38.323,19.862-57.151%20C271.436,81.339,239.874,49.778,201.08,49.778z%20M201.08,192.029c-13.396,0-27.391-8.607-38.397-23.616%20c-10.46-14.262-16.958-32.762-16.958-48.28c0-30.523,24.832-55.355,55.355-55.355s55.355,24.832,55.355,55.355%20C256.436,151.824,230.372,192.029,201.08,192.029z'/%3e%3cpath%20d='M201.08,0C109.387,0,34.788,74.598,34.788,166.292c0,91.693,74.598,166.292,166.292,166.292%20s166.292-74.598,166.292-166.292C367.372,74.598,292.773,0,201.08,0z%20M201.08,317.584c-30.099-0.001-58.171-8.839-81.763-24.052%20c0.82-22.969,11.218-44.503,28.824-59.454c6.996-5.941,17.212-6.59,25.422-1.615c8.868,5.374,18.127,8.099,27.52,8.099%20c9.391,0,18.647-2.724,27.511-8.095c8.201-4.97,18.39-4.345,25.353,1.555c17.619,14.93,28.076,36.526,28.895,59.512%20C259.25,308.746,231.178,317.584,201.08,317.584z%20M296.981,283.218c-3.239-23.483-15.011-45.111-33.337-60.64%20c-11.89-10.074-29.1-11.256-42.824-2.939c-12.974,7.861-26.506,7.86-39.483-0.004c-13.74-8.327-30.981-7.116-42.906,3.01%20c-18.31,15.549-30.035,37.115-33.265,60.563c-33.789-27.77-55.378-69.868-55.378-116.915C49.788,82.869,117.658,15,201.08,15%20c83.423,0,151.292,67.869,151.292,151.292C352.372,213.345,330.778,255.448,296.981,283.218z'/%3e%3cpath%20d='M302.806,352.372H99.354c-4.142,0-7.5,3.358-7.5,7.5c0,4.142,3.358,7.5,7.5,7.5h203.452c4.142,0,7.5-3.358,7.5-7.5%20C310.307,355.73,306.948,352.372,302.806,352.372z'/%3e%3cpath%20d='M302.806,387.161H99.354c-4.142,0-7.5,3.358-7.5,7.5c0,4.142,3.358,7.5,7.5,7.5h203.452c4.142,0,7.5-3.358,7.5-7.5%20C310.307,390.519,306.948,387.161,302.806,387.161z'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",uF=async(n,e)=>OD(gp,n,e),cF=(n,e)=>LD(gp,n,e),dF=async()=>{var t;const n=Bf(),e=new ts;try{const r=await hO(n,e),s=(t=WD(r))==null?void 0:t.isNewUser,o=r.user;return s?(console.log("New user signed up with Google:",r.user),await m_(o.uid,o.displayname||"Google User",o.email,o.photoURL)):console.log("Existing user logged in with Google: ",r.user),r}catch(r){console.error("Google Sign-In Error:",r)}},v_=()=>gp.signOut();var wg={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var SI;function hF(){return SI||(SI=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",l=0;l<arguments.length;l++){var c=arguments[l];c&&(o=s(o,r(c)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var l="";for(var c in o)e.call(o,c)&&o[c]&&(l=s(l,c));return l}function s(o,l){return l?o?o+" "+l:o+l:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(wg)),wg.exports}var fF=hF();const Tt=kc(fF);var pF=Function.prototype.bind.call(Function.prototype.call,[].slice);function RI(n,e){return pF(n.querySelectorAll(e))}const vA=!!(typeof window<"u"&&window.document&&window.document.createElement);var xy=!1,Sy=!1;try{var Eg={get passive(){return xy=!0},get once(){return Sy=xy=!0}};vA&&(window.addEventListener("test",Eg,Eg),window.removeEventListener("test",Eg,!0))}catch{}function _A(n,e,t,r){if(r&&typeof r!="boolean"&&!Sy){var s=r.once,o=r.capture,l=t;!Sy&&s&&(l=t.__once||function c(h){this.removeEventListener(e,c,o),t.call(this,h)},t.__once=l),n.addEventListener(e,l,xy?r:o)}n.addEventListener(e,t,r)}function mF(n,e,t){const r=I.useRef(n!==void 0),[s,o]=I.useState(e),l=n!==void 0,c=r.current;return r.current=l,!l&&c&&s!==e&&o(e),[l?n:s,I.useCallback((...h)=>{const[f,...g]=h;let _=t==null?void 0:t(f,...g);return o(f),_},[t])]}function gF(n){const e=I.useRef(null);return I.useEffect(()=>{e.current=n}),e.current}function yF(){const[,n]=I.useReducer(e=>e+1,0);return n}function vF(n){const e=I.useRef(n);return I.useEffect(()=>{e.current=n},[n]),e}function qi(n){const e=vF(n);return I.useCallback(function(...t){return e.current&&e.current(...t)},[e])}function _F(n,e,t,r=!1){const s=qi(t);I.useEffect(()=>{const o=typeof n=="function"?n():n;return o.addEventListener(e,s,r),()=>o.removeEventListener(e,s,r)},[n])}const vp=I.createContext(null);function wF(){return I.useState(null)}var AI=Object.prototype.hasOwnProperty;function PI(n,e,t){for(t of n.keys())if(lc(t,e))return t}function lc(n,e){var t,r,s;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&lc(n[r],e[r]););return r===-1}if(t===Set){if(n.size!==e.size)return!1;for(r of n)if(s=r,s&&typeof s=="object"&&(s=PI(e,s),!s)||!e.has(s))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(r of n)if(s=r[0],s&&typeof s=="object"&&(s=PI(e,s),!s)||!lc(r[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((r=n.byteLength)===e.byteLength)for(;r--&&n.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(n)){if((r=n.byteLength)===e.byteLength)for(;r--&&n[r]===e[r];);return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(AI.call(n,t)&&++r&&!AI.call(e,t)||!(t in e)||!lc(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}function EF(){const n=I.useRef(!0),e=I.useRef(()=>n.current);return I.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),e.current}function TF(n){const e=EF();return[n[0],I.useCallback(t=>{if(e())return n[1](t)},[e,n[1]])]}var Ln="top",mr="bottom",gr="right",Mn="left",__="auto",Xc=[Ln,mr,gr,Mn],Sl="start",Pc="end",IF="clippingParents",wA="viewport",Bu="popper",CF="reference",bI=Xc.reduce(function(n,e){return n.concat([e+"-"+Sl,e+"-"+Pc])},[]),EA=[].concat(Xc,[__]).reduce(function(n,e){return n.concat([e,e+"-"+Sl,e+"-"+Pc])},[]),xF="beforeRead",SF="read",RF="afterRead",AF="beforeMain",PF="main",bF="afterMain",kF="beforeWrite",NF="write",DF="afterWrite",OF=[xF,SF,RF,AF,PF,bF,kF,NF,DF];function ls(n){return n.split("-")[0]}function Jn(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function ta(n){var e=Jn(n).Element;return n instanceof e||n instanceof Element}function us(n){var e=Jn(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function w_(n){if(typeof ShadowRoot>"u")return!1;var e=Jn(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}var qo=Math.max,xf=Math.min,Rl=Math.round;function Ry(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function TA(){return!/^((?!chrome|android).)*safari/i.test(Ry())}function Al(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=n.getBoundingClientRect(),s=1,o=1;e&&us(n)&&(s=n.offsetWidth>0&&Rl(r.width)/n.offsetWidth||1,o=n.offsetHeight>0&&Rl(r.height)/n.offsetHeight||1);var l=ta(n)?Jn(n):window,c=l.visualViewport,h=!TA()&&t,f=(r.left+(h&&c?c.offsetLeft:0))/s,g=(r.top+(h&&c?c.offsetTop:0))/o,_=r.width/s,E=r.height/o;return{width:_,height:E,top:g,right:f+_,bottom:g+E,left:f,x:f,y:g}}function E_(n){var e=Al(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function IA(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&w_(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ro(n){return n?(n.nodeName||"").toLowerCase():null}function Ys(n){return Jn(n).getComputedStyle(n)}function LF(n){return["table","td","th"].indexOf(ro(n))>=0}function co(n){return((ta(n)?n.ownerDocument:n.document)||window.document).documentElement}function _p(n){return ro(n)==="html"?n:n.assignedSlot||n.parentNode||(w_(n)?n.host:null)||co(n)}function kI(n){return!us(n)||Ys(n).position==="fixed"?null:n.offsetParent}function MF(n){var e=/firefox/i.test(Ry()),t=/Trident/i.test(Ry());if(t&&us(n)){var r=Ys(n);if(r.position==="fixed")return null}var s=_p(n);for(w_(s)&&(s=s.host);us(s)&&["html","body"].indexOf(ro(s))<0;){var o=Ys(s);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return s;s=s.parentNode}return null}function Jc(n){for(var e=Jn(n),t=kI(n);t&&LF(t)&&Ys(t).position==="static";)t=kI(t);return t&&(ro(t)==="html"||ro(t)==="body"&&Ys(t).position==="static")?e:t||MF(n)||e}function T_(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function uc(n,e,t){return qo(n,xf(e,t))}function jF(n,e,t){var r=uc(n,e,t);return r>t?t:r}function CA(){return{top:0,right:0,bottom:0,left:0}}function xA(n){return Object.assign({},CA(),n)}function SA(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var VF=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,xA(typeof e!="number"?e:SA(e,Xc))};function FF(n){var e,t=n.state,r=n.name,s=n.options,o=t.elements.arrow,l=t.modifiersData.popperOffsets,c=ls(t.placement),h=T_(c),f=[Mn,gr].indexOf(c)>=0,g=f?"height":"width";if(!(!o||!l)){var _=VF(s.padding,t),E=E_(o),C=h==="y"?Ln:Mn,R=h==="y"?mr:gr,A=t.rects.reference[g]+t.rects.reference[h]-l[h]-t.rects.popper[g],S=l[h]-t.rects.reference[h],V=Jc(o),U=V?h==="y"?V.clientHeight||0:V.clientWidth||0:0,$=A/2-S/2,W=_[C],Y=U-E[g]-_[R],X=U/2-E[g]/2+$,N=uc(W,X,Y),b=h;t.modifiersData[r]=(e={},e[b]=N,e.centerOffset=N-X,e)}}function UF(n){var e=n.state,t=n.options,r=t.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||IA(e.elements.popper,s)&&(e.elements.arrow=s))}const $F={name:"arrow",enabled:!0,phase:"main",fn:FF,effect:UF,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Pl(n){return n.split("-")[1]}var BF={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zF(n,e){var t=n.x,r=n.y,s=e.devicePixelRatio||1;return{x:Rl(t*s)/s||0,y:Rl(r*s)/s||0}}function NI(n){var e,t=n.popper,r=n.popperRect,s=n.placement,o=n.variation,l=n.offsets,c=n.position,h=n.gpuAcceleration,f=n.adaptive,g=n.roundOffsets,_=n.isFixed,E=l.x,C=E===void 0?0:E,R=l.y,A=R===void 0?0:R,S=typeof g=="function"?g({x:C,y:A}):{x:C,y:A};C=S.x,A=S.y;var V=l.hasOwnProperty("x"),U=l.hasOwnProperty("y"),$=Mn,W=Ln,Y=window;if(f){var X=Jc(t),N="clientHeight",b="clientWidth";if(X===Jn(t)&&(X=co(t),Ys(X).position!=="static"&&c==="absolute"&&(N="scrollHeight",b="scrollWidth")),X=X,s===Ln||(s===Mn||s===gr)&&o===Pc){W=mr;var k=_&&X===Y&&Y.visualViewport?Y.visualViewport.height:X[N];A-=k-r.height,A*=h?1:-1}if(s===Mn||(s===Ln||s===mr)&&o===Pc){$=gr;var L=_&&X===Y&&Y.visualViewport?Y.visualViewport.width:X[b];C-=L-r.width,C*=h?1:-1}}var M=Object.assign({position:c},f&&BF),j=g===!0?zF({x:C,y:A},Jn(t)):{x:C,y:A};if(C=j.x,A=j.y,h){var D;return Object.assign({},M,(D={},D[W]=U?"0":"",D[$]=V?"0":"",D.transform=(Y.devicePixelRatio||1)<=1?"translate("+C+"px, "+A+"px)":"translate3d("+C+"px, "+A+"px, 0)",D))}return Object.assign({},M,(e={},e[W]=U?A+"px":"",e[$]=V?C+"px":"",e.transform="",e))}function WF(n){var e=n.state,t=n.options,r=t.gpuAcceleration,s=r===void 0?!0:r,o=t.adaptive,l=o===void 0?!0:o,c=t.roundOffsets,h=c===void 0?!0:c,f={placement:ls(e.placement),variation:Pl(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,NI(Object.assign({},f,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:h})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,NI(Object.assign({},f,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const HF={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:WF,data:{}};var Sh={passive:!0};function qF(n){var e=n.state,t=n.instance,r=n.options,s=r.scroll,o=s===void 0?!0:s,l=r.resize,c=l===void 0?!0:l,h=Jn(e.elements.popper),f=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&f.forEach(function(g){g.addEventListener("scroll",t.update,Sh)}),c&&h.addEventListener("resize",t.update,Sh),function(){o&&f.forEach(function(g){g.removeEventListener("scroll",t.update,Sh)}),c&&h.removeEventListener("resize",t.update,Sh)}}const GF={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:qF,data:{}};var KF={left:"right",right:"left",bottom:"top",top:"bottom"};function Hh(n){return n.replace(/left|right|bottom|top/g,function(e){return KF[e]})}var QF={start:"end",end:"start"};function DI(n){return n.replace(/start|end/g,function(e){return QF[e]})}function I_(n){var e=Jn(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function C_(n){return Al(co(n)).left+I_(n).scrollLeft}function YF(n,e){var t=Jn(n),r=co(n),s=t.visualViewport,o=r.clientWidth,l=r.clientHeight,c=0,h=0;if(s){o=s.width,l=s.height;var f=TA();(f||!f&&e==="fixed")&&(c=s.offsetLeft,h=s.offsetTop)}return{width:o,height:l,x:c+C_(n),y:h}}function XF(n){var e,t=co(n),r=I_(n),s=(e=n.ownerDocument)==null?void 0:e.body,o=qo(t.scrollWidth,t.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),l=qo(t.scrollHeight,t.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),c=-r.scrollLeft+C_(n),h=-r.scrollTop;return Ys(s||t).direction==="rtl"&&(c+=qo(t.clientWidth,s?s.clientWidth:0)-o),{width:o,height:l,x:c,y:h}}function x_(n){var e=Ys(n),t=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+s+r)}function RA(n){return["html","body","#document"].indexOf(ro(n))>=0?n.ownerDocument.body:us(n)&&x_(n)?n:RA(_p(n))}function cc(n,e){var t;e===void 0&&(e=[]);var r=RA(n),s=r===((t=n.ownerDocument)==null?void 0:t.body),o=Jn(r),l=s?[o].concat(o.visualViewport||[],x_(r)?r:[]):r,c=e.concat(l);return s?c:c.concat(cc(_p(l)))}function Ay(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function JF(n,e){var t=Al(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function OI(n,e,t){return e===wA?Ay(YF(n,t)):ta(e)?JF(e,t):Ay(XF(co(n)))}function ZF(n){var e=cc(_p(n)),t=["absolute","fixed"].indexOf(Ys(n).position)>=0,r=t&&us(n)?Jc(n):n;return ta(r)?e.filter(function(s){return ta(s)&&IA(s,r)&&ro(s)!=="body"}):[]}function eU(n,e,t,r){var s=e==="clippingParents"?ZF(n):[].concat(e),o=[].concat(s,[t]),l=o[0],c=o.reduce(function(h,f){var g=OI(n,f,r);return h.top=qo(g.top,h.top),h.right=xf(g.right,h.right),h.bottom=xf(g.bottom,h.bottom),h.left=qo(g.left,h.left),h},OI(n,l,r));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function AA(n){var e=n.reference,t=n.element,r=n.placement,s=r?ls(r):null,o=r?Pl(r):null,l=e.x+e.width/2-t.width/2,c=e.y+e.height/2-t.height/2,h;switch(s){case Ln:h={x:l,y:e.y-t.height};break;case mr:h={x:l,y:e.y+e.height};break;case gr:h={x:e.x+e.width,y:c};break;case Mn:h={x:e.x-t.width,y:c};break;default:h={x:e.x,y:e.y}}var f=s?T_(s):null;if(f!=null){var g=f==="y"?"height":"width";switch(o){case Sl:h[f]=h[f]-(e[g]/2-t[g]/2);break;case Pc:h[f]=h[f]+(e[g]/2-t[g]/2);break}}return h}function bc(n,e){e===void 0&&(e={});var t=e,r=t.placement,s=r===void 0?n.placement:r,o=t.strategy,l=o===void 0?n.strategy:o,c=t.boundary,h=c===void 0?IF:c,f=t.rootBoundary,g=f===void 0?wA:f,_=t.elementContext,E=_===void 0?Bu:_,C=t.altBoundary,R=C===void 0?!1:C,A=t.padding,S=A===void 0?0:A,V=xA(typeof S!="number"?S:SA(S,Xc)),U=E===Bu?CF:Bu,$=n.rects.popper,W=n.elements[R?U:E],Y=eU(ta(W)?W:W.contextElement||co(n.elements.popper),h,g,l),X=Al(n.elements.reference),N=AA({reference:X,element:$,placement:s}),b=Ay(Object.assign({},$,N)),k=E===Bu?b:X,L={top:Y.top-k.top+V.top,bottom:k.bottom-Y.bottom+V.bottom,left:Y.left-k.left+V.left,right:k.right-Y.right+V.right},M=n.modifiersData.offset;if(E===Bu&&M){var j=M[s];Object.keys(L).forEach(function(D){var le=[gr,mr].indexOf(D)>=0?1:-1,xe=[Ln,mr].indexOf(D)>=0?"y":"x";L[D]+=j[xe]*le})}return L}function tU(n,e){e===void 0&&(e={});var t=e,r=t.placement,s=t.boundary,o=t.rootBoundary,l=t.padding,c=t.flipVariations,h=t.allowedAutoPlacements,f=h===void 0?EA:h,g=Pl(r),_=g?c?bI:bI.filter(function(R){return Pl(R)===g}):Xc,E=_.filter(function(R){return f.indexOf(R)>=0});E.length===0&&(E=_);var C=E.reduce(function(R,A){return R[A]=bc(n,{placement:A,boundary:s,rootBoundary:o,padding:l})[ls(A)],R},{});return Object.keys(C).sort(function(R,A){return C[R]-C[A]})}function nU(n){if(ls(n)===__)return[];var e=Hh(n);return[DI(n),e,DI(e)]}function rU(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var s=t.mainAxis,o=s===void 0?!0:s,l=t.altAxis,c=l===void 0?!0:l,h=t.fallbackPlacements,f=t.padding,g=t.boundary,_=t.rootBoundary,E=t.altBoundary,C=t.flipVariations,R=C===void 0?!0:C,A=t.allowedAutoPlacements,S=e.options.placement,V=ls(S),U=V===S,$=h||(U||!R?[Hh(S)]:nU(S)),W=[S].concat($).reduce(function(Ie,Ae){return Ie.concat(ls(Ae)===__?tU(e,{placement:Ae,boundary:g,rootBoundary:_,padding:f,flipVariations:R,allowedAutoPlacements:A}):Ae)},[]),Y=e.rects.reference,X=e.rects.popper,N=new Map,b=!0,k=W[0],L=0;L<W.length;L++){var M=W[L],j=ls(M),D=Pl(M)===Sl,le=[Ln,mr].indexOf(j)>=0,xe=le?"width":"height",Re=bc(e,{placement:M,boundary:g,rootBoundary:_,altBoundary:E,padding:f}),Te=le?D?gr:Mn:D?mr:Ln;Y[xe]>X[xe]&&(Te=Hh(Te));var se=Hh(Te),ue=[];if(o&&ue.push(Re[j]<=0),c&&ue.push(Re[Te]<=0,Re[se]<=0),ue.every(function(Ie){return Ie})){k=M,b=!1;break}N.set(M,ue)}if(b)for(var ie=R?3:1,z=function(Ae){var De=W.find(function(je){var Oe=N.get(je);if(Oe)return Oe.slice(0,Ae).every(function(Qe){return Qe})});if(De)return k=De,"break"},J=ie;J>0;J--){var pe=z(J);if(pe==="break")break}e.placement!==k&&(e.modifiersData[r]._skip=!0,e.placement=k,e.reset=!0)}}const sU={name:"flip",enabled:!0,phase:"main",fn:rU,requiresIfExists:["offset"],data:{_skip:!1}};function LI(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function MI(n){return[Ln,gr,mr,Mn].some(function(e){return n[e]>=0})}function iU(n){var e=n.state,t=n.name,r=e.rects.reference,s=e.rects.popper,o=e.modifiersData.preventOverflow,l=bc(e,{elementContext:"reference"}),c=bc(e,{altBoundary:!0}),h=LI(l,r),f=LI(c,s,o),g=MI(h),_=MI(f);e.modifiersData[t]={referenceClippingOffsets:h,popperEscapeOffsets:f,isReferenceHidden:g,hasPopperEscaped:_},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":g,"data-popper-escaped":_})}const oU={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:iU};function aU(n,e,t){var r=ls(n),s=[Mn,Ln].indexOf(r)>=0?-1:1,o=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,l=o[0],c=o[1];return l=l||0,c=(c||0)*s,[Mn,gr].indexOf(r)>=0?{x:c,y:l}:{x:l,y:c}}function lU(n){var e=n.state,t=n.options,r=n.name,s=t.offset,o=s===void 0?[0,0]:s,l=EA.reduce(function(g,_){return g[_]=aU(_,e.rects,o),g},{}),c=l[e.placement],h=c.x,f=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=f),e.modifiersData[r]=l}const uU={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:lU};function cU(n){var e=n.state,t=n.name;e.modifiersData[t]=AA({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const dU={name:"popperOffsets",enabled:!0,phase:"read",fn:cU,data:{}};function hU(n){return n==="x"?"y":"x"}function fU(n){var e=n.state,t=n.options,r=n.name,s=t.mainAxis,o=s===void 0?!0:s,l=t.altAxis,c=l===void 0?!1:l,h=t.boundary,f=t.rootBoundary,g=t.altBoundary,_=t.padding,E=t.tether,C=E===void 0?!0:E,R=t.tetherOffset,A=R===void 0?0:R,S=bc(e,{boundary:h,rootBoundary:f,padding:_,altBoundary:g}),V=ls(e.placement),U=Pl(e.placement),$=!U,W=T_(V),Y=hU(W),X=e.modifiersData.popperOffsets,N=e.rects.reference,b=e.rects.popper,k=typeof A=="function"?A(Object.assign({},e.rects,{placement:e.placement})):A,L=typeof k=="number"?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),M=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,j={x:0,y:0};if(X){if(o){var D,le=W==="y"?Ln:Mn,xe=W==="y"?mr:gr,Re=W==="y"?"height":"width",Te=X[W],se=Te+S[le],ue=Te-S[xe],ie=C?-b[Re]/2:0,z=U===Sl?N[Re]:b[Re],J=U===Sl?-b[Re]:-N[Re],pe=e.elements.arrow,Ie=C&&pe?E_(pe):{width:0,height:0},Ae=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:CA(),De=Ae[le],je=Ae[xe],Oe=uc(0,N[Re],Ie[Re]),Qe=$?N[Re]/2-ie-Oe-De-L.mainAxis:z-Oe-De-L.mainAxis,At=$?-N[Re]/2+ie+Oe+je+L.mainAxis:J+Oe+je+L.mainAxis,Vn=e.elements.arrow&&Jc(e.elements.arrow),ti=Vn?W==="y"?Vn.clientTop||0:Vn.clientLeft||0:0,yr=(D=M==null?void 0:M[W])!=null?D:0,ms=Te+Qe-yr-ti,ni=Te+At-yr,ri=uc(C?xf(se,ms):se,Te,C?qo(ue,ni):ue);X[W]=ri,j[W]=ri-Te}if(c){var si,da=W==="x"?Ln:Mn,ii=W==="x"?mr:gr,Kt=X[Y],Tn=Y==="y"?"height":"width",oi=Kt+S[da],gs=Kt-S[ii],Br=[Ln,Mn].indexOf(V)!==-1,ai=(si=M==null?void 0:M[Y])!=null?si:0,yt=Br?oi:Kt-N[Tn]-b[Tn]-ai+L.altAxis,vt=Br?Kt+N[Tn]+b[Tn]-ai-L.altAxis:gs,Zn=C&&Br?jF(yt,Kt,vt):uc(C?yt:oi,Kt,C?vt:gs);X[Y]=Zn,j[Y]=Zn-Kt}e.modifiersData[r]=j}}const pU={name:"preventOverflow",enabled:!0,phase:"main",fn:fU,requiresIfExists:["offset"]};function mU(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function gU(n){return n===Jn(n)||!us(n)?I_(n):mU(n)}function yU(n){var e=n.getBoundingClientRect(),t=Rl(e.width)/n.offsetWidth||1,r=Rl(e.height)/n.offsetHeight||1;return t!==1||r!==1}function vU(n,e,t){t===void 0&&(t=!1);var r=us(e),s=us(e)&&yU(e),o=co(e),l=Al(n,s,t),c={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(r||!r&&!t)&&((ro(e)!=="body"||x_(o))&&(c=gU(e)),us(e)?(h=Al(e,!0),h.x+=e.clientLeft,h.y+=e.clientTop):o&&(h.x=C_(o))),{x:l.left+c.scrollLeft-h.x,y:l.top+c.scrollTop-h.y,width:l.width,height:l.height}}function _U(n){var e=new Map,t=new Set,r=[];n.forEach(function(o){e.set(o.name,o)});function s(o){t.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(c){if(!t.has(c)){var h=e.get(c);h&&s(h)}}),r.push(o)}return n.forEach(function(o){t.has(o.name)||s(o)}),r}function wU(n){var e=_U(n);return OF.reduce(function(t,r){return t.concat(e.filter(function(s){return s.phase===r}))},[])}function EU(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function TU(n){var e=n.reduce(function(t,r){var s=t[r.name];return t[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var jI={placement:"bottom",modifiers:[],strategy:"absolute"};function VI(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function IU(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,s=e.defaultOptions,o=s===void 0?jI:s;return function(c,h,f){f===void 0&&(f=o);var g={placement:"bottom",orderedModifiers:[],options:Object.assign({},jI,o),modifiersData:{},elements:{reference:c,popper:h},attributes:{},styles:{}},_=[],E=!1,C={state:g,setOptions:function(V){var U=typeof V=="function"?V(g.options):V;A(),g.options=Object.assign({},o,g.options,U),g.scrollParents={reference:ta(c)?cc(c):c.contextElement?cc(c.contextElement):[],popper:cc(h)};var $=wU(TU([].concat(r,g.options.modifiers)));return g.orderedModifiers=$.filter(function(W){return W.enabled}),R(),C.update()},forceUpdate:function(){if(!E){var V=g.elements,U=V.reference,$=V.popper;if(VI(U,$)){g.rects={reference:vU(U,Jc($),g.options.strategy==="fixed"),popper:E_($)},g.reset=!1,g.placement=g.options.placement,g.orderedModifiers.forEach(function(L){return g.modifiersData[L.name]=Object.assign({},L.data)});for(var W=0;W<g.orderedModifiers.length;W++){if(g.reset===!0){g.reset=!1,W=-1;continue}var Y=g.orderedModifiers[W],X=Y.fn,N=Y.options,b=N===void 0?{}:N,k=Y.name;typeof X=="function"&&(g=X({state:g,options:b,name:k,instance:C})||g)}}}},update:EU(function(){return new Promise(function(S){C.forceUpdate(),S(g)})}),destroy:function(){A(),E=!0}};if(!VI(c,h))return C;C.setOptions(f).then(function(S){!E&&f.onFirstUpdate&&f.onFirstUpdate(S)});function R(){g.orderedModifiers.forEach(function(S){var V=S.name,U=S.options,$=U===void 0?{}:U,W=S.effect;if(typeof W=="function"){var Y=W({state:g,name:V,instance:C,options:$}),X=function(){};_.push(Y||X)}})}function A(){_.forEach(function(S){return S()}),_=[]}return C}}const CU=IU({defaultModifiers:[oU,dU,HF,GF,uU,sU,pU,$F]}),xU=["enabled","placement","strategy","modifiers"];function SU(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}const RU={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},AU={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:n})=>()=>{const{reference:e,popper:t}=n.elements;if("removeAttribute"in e){const r=(e.getAttribute("aria-describedby")||"").split(",").filter(s=>s.trim()!==t.id);r.length?e.setAttribute("aria-describedby",r.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:n})=>{var e;const{popper:t,reference:r}=n.elements,s=(e=t.getAttribute("role"))==null?void 0:e.toLowerCase();if(t.id&&s==="tooltip"&&"setAttribute"in r){const o=r.getAttribute("aria-describedby");if(o&&o.split(",").indexOf(t.id)!==-1)return;r.setAttribute("aria-describedby",o?`${o},${t.id}`:t.id)}}},PU=[];function bU(n,e,t={}){let{enabled:r=!0,placement:s="bottom",strategy:o="absolute",modifiers:l=PU}=t,c=SU(t,xU);const h=I.useRef(l),f=I.useRef(),g=I.useCallback(()=>{var S;(S=f.current)==null||S.update()},[]),_=I.useCallback(()=>{var S;(S=f.current)==null||S.forceUpdate()},[]),[E,C]=TF(I.useState({placement:s,update:g,forceUpdate:_,attributes:{},styles:{popper:{},arrow:{}}})),R=I.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:S})=>{const V={},U={};Object.keys(S.elements).forEach($=>{V[$]=S.styles[$],U[$]=S.attributes[$]}),C({state:S,styles:V,attributes:U,update:g,forceUpdate:_,placement:S.placement})}}),[g,_,C]),A=I.useMemo(()=>(lc(h.current,l)||(h.current=l),h.current),[l]);return I.useEffect(()=>{!f.current||!r||f.current.setOptions({placement:s,strategy:o,modifiers:[...A,R,RU]})},[o,s,R,r,A]),I.useEffect(()=>{if(!(!r||n==null||e==null))return f.current=CU(n,e,Object.assign({},c,{placement:s,strategy:o,modifiers:[...A,AU,R]})),()=>{f.current!=null&&(f.current.destroy(),f.current=void 0,C(S=>Object.assign({},S,{attributes:{},styles:{popper:{}}})))}},[r,n,e]),E}function FI(n,e){if(n.contains)return n.contains(e);if(n.compareDocumentPosition)return n===e||!!(n.compareDocumentPosition(e)&16)}function kU(n,e,t,r){var s=r&&typeof r!="boolean"?r.capture:r;n.removeEventListener(e,t,s),t.__once&&n.removeEventListener(e,t.__once,s)}function Rh(n,e,t,r){return _A(n,e,t,r),function(){kU(n,e,t,r)}}function NU(n){return n&&n.ownerDocument||document}var Tg,UI;function DU(){if(UI)return Tg;UI=1;var n=function(){};return Tg=n,Tg}var OU=DU();const LU=kc(OU),$I=()=>{};function MU(n){return n.button===0}function jU(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}const Ig=n=>n&&("current"in n?n.current:n),BI={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function VU(n,e=$I,{disabled:t,clickTrigger:r="click"}={}){const s=I.useRef(!1),o=I.useRef(!1),l=I.useCallback(f=>{const g=Ig(n);LU(!!g,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),s.current=!g||jU(f)||!MU(f)||!!FI(g,f.target)||o.current,o.current=!1},[n]),c=qi(f=>{const g=Ig(n);g&&FI(g,f.target)?o.current=!0:o.current=!1}),h=qi(f=>{s.current||e(f)});I.useEffect(()=>{var f,g;if(t||n==null)return;const _=NU(Ig(n)),E=_.defaultView||window;let C=(f=E.event)!=null?f:(g=E.parent)==null?void 0:g.event,R=null;BI[r]&&(R=Rh(_,BI[r],c,!0));const A=Rh(_,r,l,!0),S=Rh(_,r,U=>{if(U===C){C=void 0;return}h(U)});let V=[];return"ontouchstart"in _.documentElement&&(V=[].slice.call(_.body.children).map(U=>Rh(U,"mousemove",$I))),()=>{R==null||R(),A(),S(),V.forEach(U=>U())}},[n,t,r,l,c,h])}function FU(n){const e={};return Array.isArray(n)?(n==null||n.forEach(t=>{e[t.name]=t}),e):n||e}function UU(n={}){return Array.isArray(n)?n:Object.keys(n).map(e=>(n[e].name=e,n[e]))}function $U({enabled:n,enableEvents:e,placement:t,flip:r,offset:s,fixed:o,containerPadding:l,arrowElement:c,popperConfig:h={}}){var f,g,_,E,C;const R=FU(h.modifiers);return Object.assign({},h,{placement:t,enabled:n,strategy:o?"fixed":h.strategy,modifiers:UU(Object.assign({},R,{eventListeners:{enabled:e,options:(f=R.eventListeners)==null?void 0:f.options},preventOverflow:Object.assign({},R.preventOverflow,{options:l?Object.assign({padding:l},(g=R.preventOverflow)==null?void 0:g.options):(_=R.preventOverflow)==null?void 0:_.options}),offset:{options:Object.assign({offset:s},(E=R.offset)==null?void 0:E.options)},arrow:Object.assign({},R.arrow,{enabled:!!c,options:Object.assign({},(C=R.arrow)==null?void 0:C.options,{element:c})}),flip:Object.assign({enabled:!!r},R.flip)}))})}const BU=["children","usePopper"];function zU(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}const WU=()=>{};function PA(n={}){const e=I.useContext(vp),[t,r]=wF(),s=I.useRef(!1),{flip:o,offset:l,rootCloseEvent:c,fixed:h=!1,placement:f,popperConfig:g={},enableEventListeners:_=!0,usePopper:E=!!e}=n,C=(e==null?void 0:e.show)==null?!!n.show:e.show;C&&!s.current&&(s.current=!0);const R=X=>{e==null||e.toggle(!1,X)},{placement:A,setMenu:S,menuElement:V,toggleElement:U}=e||{},$=bU(U,V,$U({placement:f||A||"bottom-start",enabled:E,enableEvents:_??C,offset:l,flip:o,fixed:h,arrowElement:t,popperConfig:g})),W=Object.assign({ref:S||WU,"aria-labelledby":U==null?void 0:U.id},$.attributes.popper,{style:$.styles.popper}),Y={show:C,placement:A,hasShown:s.current,toggle:e==null?void 0:e.toggle,popper:E?$:null,arrowProps:E?Object.assign({ref:r},$.attributes.arrow,{style:$.styles.arrow}):{}};return VU(V,R,{clickTrigger:c,disabled:!C}),[W,Y]}function bA(n){let{children:e,usePopper:t=!0}=n,r=zU(n,BU);const[s,o]=PA(Object.assign({},r,{usePopper:t}));return y.jsx(y.Fragment,{children:e(s,o)})}bA.displayName="DropdownMenu";const S_={prefix:String(Math.round(Math.random()*1e10)),current:0},kA=En.createContext(S_),HU=En.createContext(!1);let qU=!!(typeof window<"u"&&window.document&&window.document.createElement),Cg=new WeakMap;function GU(n=!1){let e=I.useContext(kA),t=I.useRef(null);if(t.current===null&&!n){var r,s;let o=(s=En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||s===void 0||(r=s.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(o){let l=Cg.get(o);l==null?Cg.set(o,{id:e.current,state:o.memoizedState}):o.memoizedState!==l.state&&(e.current=l.id,Cg.delete(o))}t.current=++e.current}return t.current}function KU(n){let e=I.useContext(kA);e===S_&&!qU&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let t=GU(!!n),r=`react-aria${e.prefix}`;return n||`${r}-${t}`}function QU(n){let e=En.useId(),[t]=I.useState(e6()),r=t?"react-aria":`react-aria${S_.prefix}`;return n||`${r}-${e}`}const YU=typeof En.useId=="function"?QU:KU;function XU(){return!1}function JU(){return!0}function ZU(n){return()=>{}}function e6(){return typeof En.useSyncExternalStore=="function"?En.useSyncExternalStore(ZU,XU,JU):I.useContext(HU)}const NA=n=>{var e;return((e=n.getAttribute("role"))==null?void 0:e.toLowerCase())==="menu"},zI=()=>{};function DA(){const n=YU(),{show:e=!1,toggle:t=zI,setToggle:r,menuElement:s}=I.useContext(vp)||{},o=I.useCallback(c=>{t(!e,c)},[e,t]),l={id:n,ref:r||zI,onClick:o,"aria-expanded":!!e};return s&&NA(s)&&(l["aria-haspopup"]=!0),[l,{show:e,toggle:t}]}function OA({children:n}){const[e,t]=DA();return y.jsx(y.Fragment,{children:n(e,t)})}OA.displayName="DropdownToggle";const Py=I.createContext(null),WI=(n,e=null)=>n!=null?String(n):e||null,LA=I.createContext(null);LA.displayName="NavContext";const t6=["as","disabled"];function n6(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function r6(n){return!n||n.trim()==="#"}function R_({tagName:n,disabled:e,href:t,target:r,rel:s,role:o,onClick:l,tabIndex:c=0,type:h}){n||(t!=null||r!=null||s!=null?n="a":n="button");const f={tagName:n};if(n==="button")return[{type:h||"button",disabled:e},f];const g=E=>{if((e||n==="a"&&r6(t))&&E.preventDefault(),e){E.stopPropagation();return}l==null||l(E)},_=E=>{E.key===" "&&(E.preventDefault(),g(E))};return n==="a"&&(t||(t="#"),e&&(t=void 0)),[{role:o??"button",disabled:void 0,tabIndex:e?void 0:c,href:t,target:n==="a"?r:void 0,"aria-disabled":e||void 0,rel:n==="a"?s:void 0,onClick:g,onKeyDown:_},f]}const MA=I.forwardRef((n,e)=>{let{as:t,disabled:r}=n,s=n6(n,t6);const[o,{tagName:l}]=R_(Object.assign({tagName:t,disabled:r},s));return y.jsx(l,Object.assign({},s,o,{ref:e}))});MA.displayName="Button";const s6="data-rr-ui-";function jA(n){return`${s6}${n}`}const i6=["eventKey","disabled","onClick","active","as"];function o6(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function VA({key:n,href:e,active:t,disabled:r,onClick:s}){const o=I.useContext(Py),l=I.useContext(LA),{activeKey:c}=l||{},h=WI(n,e),f=t==null&&n!=null?WI(c)===h:t;return[{onClick:qi(_=>{r||(s==null||s(_),o&&!_.isPropagationStopped()&&o(h,_))}),"aria-disabled":r||void 0,"aria-selected":f,[jA("dropdown-item")]:""},{isActive:f}]}const FA=I.forwardRef((n,e)=>{let{eventKey:t,disabled:r,onClick:s,active:o,as:l=MA}=n,c=o6(n,i6);const[h]=VA({key:t,href:c.href,disabled:r,onClick:s,active:o});return y.jsx(l,Object.assign({},c,{ref:e},h))});FA.displayName="DropdownItem";const UA=I.createContext(vA?window:void 0);UA.Provider;function a6(){return I.useContext(UA)}function HI(){const n=yF(),e=I.useRef(null),t=I.useCallback(r=>{e.current=r,n()},[n]);return[e,t]}function Zc({defaultShow:n,show:e,onSelect:t,onToggle:r,itemSelector:s=`* [${jA("dropdown-item")}]`,focusFirstItemOnShow:o,placement:l="bottom-start",children:c}){const h=a6(),[f,g]=mF(e,n,r),[_,E]=HI(),C=_.current,[R,A]=HI(),S=R.current,V=gF(f),U=I.useRef(null),$=I.useRef(!1),W=I.useContext(Py),Y=I.useCallback((M,j,D=j==null?void 0:j.type)=>{g(M,{originalEvent:j,source:D})},[g]),X=qi((M,j)=>{t==null||t(M,j),Y(!1,j,"select"),j.isPropagationStopped()||W==null||W(M,j)}),N=I.useMemo(()=>({toggle:Y,placement:l,show:f,menuElement:C,toggleElement:S,setMenu:E,setToggle:A}),[Y,l,f,C,S,E,A]);C&&V&&!f&&($.current=C.contains(C.ownerDocument.activeElement));const b=qi(()=>{S&&S.focus&&S.focus()}),k=qi(()=>{const M=U.current;let j=o;if(j==null&&(j=_.current&&NA(_.current)?"keyboard":!1),j===!1||j==="keyboard"&&!/^key.+$/.test(M))return;const D=RI(_.current,s)[0];D&&D.focus&&D.focus()});I.useEffect(()=>{f?k():$.current&&($.current=!1,b())},[f,$,b,k]),I.useEffect(()=>{U.current=null});const L=(M,j)=>{if(!_.current)return null;const D=RI(_.current,s);let le=D.indexOf(M)+j;return le=Math.max(0,Math.min(le,D.length)),D[le]};return _F(I.useCallback(()=>h.document,[h]),"keydown",M=>{var j,D;const{key:le}=M,xe=M.target,Re=(j=_.current)==null?void 0:j.contains(xe),Te=(D=R.current)==null?void 0:D.contains(xe);if(/input|textarea/i.test(xe.tagName)&&(le===" "||le!=="Escape"&&Re||le==="Escape"&&xe.type==="search")||!Re&&!Te||le==="Tab"&&(!_.current||!f))return;U.current=M.type;const ue={originalEvent:M,source:M.type};switch(le){case"ArrowUp":{const ie=L(xe,-1);ie&&ie.focus&&ie.focus(),M.preventDefault();return}case"ArrowDown":if(M.preventDefault(),!f)g(!0,ue);else{const ie=L(xe,1);ie&&ie.focus&&ie.focus()}return;case"Tab":_A(xe.ownerDocument,"keyup",ie=>{var z;(ie.key==="Tab"&&!ie.target||!((z=_.current)!=null&&z.contains(ie.target)))&&g(!1,ue)},{once:!0});break;case"Escape":le==="Escape"&&(M.preventDefault(),M.stopPropagation()),g(!1,ue);break}}),y.jsx(Py.Provider,{value:X,children:y.jsx(vp.Provider,{value:N,children:c})})}Zc.displayName="Dropdown";Zc.Menu=bA;Zc.Toggle=OA;Zc.Item=FA;function by(){return by=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},by.apply(null,arguments)}function l6(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function qI(n){return"default"+n.charAt(0).toUpperCase()+n.substr(1)}function u6(n){var e=c6(n,"string");return typeof e=="symbol"?e:String(e)}function c6(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function d6(n,e,t){var r=I.useRef(n!==void 0),s=I.useState(e),o=s[0],l=s[1],c=n!==void 0,h=r.current;return r.current=c,!c&&h&&o!==e&&l(e),[c?n:o,I.useCallback(function(f){for(var g=arguments.length,_=new Array(g>1?g-1:0),E=1;E<g;E++)_[E-1]=arguments[E];t&&t.apply(void 0,[f].concat(_)),l(f)},[t])]}function h6(n,e){return Object.keys(e).reduce(function(t,r){var s,o=t,l=o[qI(r)],c=o[r],h=l6(o,[qI(r),r].map(u6)),f=e[r],g=d6(c,l,n[f]),_=g[0],E=g[1];return by({},h,(s={},s[r]=_,s[f]=E,s))},n)}function f6(n){const e=I.useRef(n);return I.useEffect(()=>{e.current=n},[n]),e}function p6(n){const e=f6(n);return I.useCallback(function(...t){return e.current&&e.current(...t)},[e])}const A_=I.createContext({});A_.displayName="DropdownContext";const m6=["xxl","xl","lg","md","sm","xs"],g6="xs",ed=I.createContext({prefixes:{},breakpoints:m6,minBreakpoint:g6}),{Consumer:j$,Provider:V$}=ed;function Ot(n,e){const{prefixes:t}=I.useContext(ed);return n||t[e]||e}function y6(){const{breakpoints:n}=I.useContext(ed);return n}function v6(){const{minBreakpoint:n}=I.useContext(ed);return n}function _6(){const{dir:n}=I.useContext(ed);return n==="rtl"}const $A=I.forwardRef(({className:n,bsPrefix:e,as:t="hr",role:r="separator",...s},o)=>(e=Ot(e,"dropdown-divider"),y.jsx(t,{ref:o,className:Tt(n,e),role:r,...s})));$A.displayName="DropdownDivider";const BA=I.forwardRef(({className:n,bsPrefix:e,as:t="div",role:r="heading",...s},o)=>(e=Ot(e,"dropdown-header"),y.jsx(t,{ref:o,className:Tt(n,e),role:r,...s})));BA.displayName="DropdownHeader";const w6=["onKeyDown"];function E6(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function T6(n){return!n||n.trim()==="#"}const zA=I.forwardRef((n,e)=>{let{onKeyDown:t}=n,r=E6(n,w6);const[s]=R_(Object.assign({tagName:"a"},r)),o=qi(l=>{s.onKeyDown(l),t==null||t(l)});return T6(r.href)||r.role==="button"?y.jsx("a",Object.assign({ref:e},r,s,{onKeyDown:o})):y.jsx("a",Object.assign({ref:e},r,{onKeyDown:t}))});zA.displayName="Anchor";const WA=I.forwardRef(({bsPrefix:n,className:e,eventKey:t,disabled:r=!1,onClick:s,active:o,as:l=zA,...c},h)=>{const f=Ot(n,"dropdown-item"),[g,_]=VA({key:t,href:c.href,disabled:r,onClick:s,active:o});return y.jsx(l,{...c,...g,ref:h,className:Tt(e,f,_.isActive&&"active",r&&"disabled")})});WA.displayName="DropdownItem";const HA=I.forwardRef(({className:n,bsPrefix:e,as:t="span",...r},s)=>(e=Ot(e,"dropdown-item-text"),y.jsx(t,{ref:s,className:Tt(n,e),...r})));HA.displayName="DropdownItemText";const I6=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",C6=typeof document<"u",x6=C6||I6?I.useLayoutEffect:I.useEffect,GI=n=>!n||typeof n=="function"?n:e=>{n.current=e};function S6(n,e){const t=GI(n),r=GI(e);return s=>{t&&t(s),r&&r(s)}}function qA(n,e){return I.useMemo(()=>S6(n,e),[n,e])}const P_=I.createContext(null);P_.displayName="InputGroupContext";const GA=I.createContext(null);GA.displayName="NavbarContext";function KA(n,e){return n}var xg={exports:{}},Sg,KI;function R6(){if(KI)return Sg;KI=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Sg=n,Sg}var Rg,QI;function A6(){if(QI)return Rg;QI=1;var n=R6();function e(){}function t(){}return t.resetWarningCache=e,Rg=function(){function r(l,c,h,f,g,_){if(_!==n){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}r.isRequired=r;function s(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},Rg}var YI;function P6(){return YI||(YI=1,xg.exports=A6()()),xg.exports}var b6=P6();const pl=kc(b6);function QA(n,e,t){const r=t?"top-end":"top-start",s=t?"top-start":"top-end",o=t?"bottom-end":"bottom-start",l=t?"bottom-start":"bottom-end",c=t?"right-start":"left-start",h=t?"right-end":"left-end",f=t?"left-start":"right-start",g=t?"left-end":"right-end";let _=n?l:o;return e==="up"?_=n?s:r:e==="end"?_=n?g:f:e==="start"?_=n?h:c:e==="down-centered"?_="bottom":e==="up-centered"&&(_="top"),_}const YA=I.forwardRef(({bsPrefix:n,className:e,align:t,rootCloseEvent:r,flip:s=!0,show:o,renderOnMount:l,as:c="div",popperConfig:h,variant:f,...g},_)=>{let E=!1;const C=I.useContext(GA),R=Ot(n,"dropdown-menu"),{align:A,drop:S,isRTL:V}=I.useContext(A_);t=t||A;const U=I.useContext(P_),$=[];if(t)if(typeof t=="object"){const M=Object.keys(t);if(M.length){const j=M[0],D=t[j];E=D==="start",$.push(`${R}-${j}-${D}`)}}else t==="end"&&(E=!0);const W=QA(E,S,V),[Y,{hasShown:X,popper:N,show:b,toggle:k}]=PA({flip:s,rootCloseEvent:r,show:o,usePopper:!C&&$.length===0,offset:[0,2],popperConfig:h,placement:W});if(Y.ref=qA(KA(_),Y.ref),x6(()=>{b&&(N==null||N.update())},[b]),!X&&!l&&!U)return null;typeof c!="string"&&(Y.show=b,Y.close=()=>k==null?void 0:k(!1),Y.align=t);let L=g.style;return N!=null&&N.placement&&(L={...g.style,...Y.style},g["x-placement"]=N.placement),y.jsx(c,{...g,...Y,style:L,...($.length||C)&&{"data-bs-popper":"static"},className:Tt(e,R,b&&"show",E&&`${R}-end`,f&&`${R}-${f}`,...$)})});YA.displayName="DropdownMenu";const Sf=I.forwardRef(({as:n,bsPrefix:e,variant:t="primary",size:r,active:s=!1,disabled:o=!1,className:l,...c},h)=>{const f=Ot(e,"btn"),[g,{tagName:_}]=R_({tagName:n,disabled:o,...c}),E=_;return y.jsx(E,{...g,...c,ref:h,disabled:o,className:Tt(l,f,s&&"active",t&&`${f}-${t}`,r&&`${f}-${r}`,c.href&&o&&"disabled")})});Sf.displayName="Button";const XA=I.forwardRef(({bsPrefix:n,split:e,className:t,childBsPrefix:r,as:s=Sf,...o},l)=>{const c=Ot(n,"dropdown-toggle"),h=I.useContext(vp);r!==void 0&&(o.bsPrefix=r);const[f]=DA();return f.ref=qA(f.ref,KA(l)),y.jsx(s,{className:Tt(t,c,e&&`${c}-split`,(h==null?void 0:h.show)&&"show"),...f,...o})});XA.displayName="DropdownToggle";const JA=I.forwardRef((n,e)=>{const{bsPrefix:t,drop:r="down",show:s,className:o,align:l="start",onSelect:c,onToggle:h,focusFirstItemOnShow:f,as:g="div",navbar:_,autoClose:E=!0,...C}=h6(n,{show:"onToggle"}),R=I.useContext(P_),A=Ot(t,"dropdown"),S=_6(),V=N=>E===!1?N==="click":E==="inside"?N!=="rootClose":E==="outside"?N!=="select":!0,U=p6((N,b)=>{var k;!((k=b.originalEvent)==null||(k=k.target)==null)&&k.classList.contains("dropdown-toggle")&&b.source==="mousedown"||(b.originalEvent.currentTarget===document&&(b.source!=="keydown"||b.originalEvent.key==="Escape")&&(b.source="rootClose"),V(b.source)&&(h==null||h(N,b)))}),W=QA(l==="end",r,S),Y=I.useMemo(()=>({align:l,drop:r,isRTL:S}),[l,r,S]),X={down:A,"down-centered":`${A}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return y.jsx(A_.Provider,{value:Y,children:y.jsx(Zc,{placement:W,show:s,onSelect:c,onToggle:U,focusFirstItemOnShow:f,itemSelector:`.${A}-item:not(.disabled):not(:disabled)`,children:R?C.children:y.jsx(g,{...C,ref:e,className:Tt(o,s&&"show",X[r])})})})});JA.displayName="Dropdown";const ks=Object.assign(JA,{Toggle:XA,Menu:YA,Item:WA,ItemText:HA,Divider:$A,Header:BA}),k6=()=>{const n=jn(),{currentUser:e}=fs(),{profile:t}=I.useContext(ua),r=async()=>{await v_(),n("/")};return y.jsxs(ks,{children:[y.jsx(ks.Toggle,{variant:"success",id:"dropdown-basic",children:y.jsx("img",{src:Cy})}),y.jsxs(ks.Menu,{children:[(t==null?void 0:t.role)==="contractor"?y.jsx(ks.Item,{as:wt,to:"/contractor-dashboard",children:"Dashboard"}):y.jsx(ks.Item,{as:wt,to:"/ProfileDashboard",children:"Profile"}),y.jsx(ks.Item,{as:wt,to:"/designerPage",children:"Designs"}),(e==null?void 0:e.isAdmin)&&y.jsx(ks.Item,{as:wt,to:"/Admin",children:"Admin"}),y.jsx(ks.Item,{href:"#/action-3",children:"Action"}),y.jsx(ks.Item,{onClick:r,children:"Log Out"})]})]})},b_=()=>{const{userLoggedIn:n}=fs()||{userLoggedIn:!1},e=jn(),t=async()=>{await v_(),e("/")};return y.jsxs("div",{className:"nav",children:[y.jsx(wt,{to:"/",children:y.jsx("div",{className:"logo",children:"URENO"})}),y.jsxs("div",{className:"Right",children:[y.jsxs("menu",{children:[y.jsx("li",{children:"AI Design"}),y.jsx("li",{children:"Architects & Designers"}),y.jsx("li",{children:"Projects"}),y.jsx("li",{children:"Messages"})]}),n?y.jsx("button",{className:"btn login-btn",onClick:t,children:"Log Out"}):y.jsx(wt,{to:"/sign-in",children:y.jsx("button",{className:"btn login-btn",children:"Log In"})}),n?y.jsx(k6,{}):y.jsx("button",{className:"btn profile-btn",children:y.jsx("object",{data:Cy,type:"image/svg+xml",children:y.jsx("img",{src:Cy})})})]})]})};function N6(){return y.jsxs(y.Fragment,{children:[y.jsx("meta",{charSet:"UTF-8"}),y.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),y.jsx("title",{children:"Ureno"}),y.jsx(b_,{}),y.jsx("div",{className:"center-logo",children:y.jsxs("div",{className:"container",children:[y.jsx("h1",{children:"URENO"}),y.jsx("p",{children:"Renovation Made Simple"}),y.jsx("button",{className:"btn try-now",children:"Try it Now"})]})}),y.jsxs("div",{className:"services",children:[y.jsx("div",{className:"our-services",children:y.jsx("p",{children:"Our Services"})}),y.jsxs("div",{className:"floor-content",children:[y.jsx("div",{className:"flooring fadeInRight",children:y.jsx("p",{children:y.jsx(wt,{to:"/product-page",children:y.jsx("img",{src:aF,alt:"light oak wooden floor"})})})}),y.jsxs("div",{className:"floor-txt fadeInRight",children:[y.jsx("h3",{children:"flooring"}),y.jsx("p",{children:"Lorem ipsum dolor sit amet. A reiciendis repellat in cupiditate temporibus est tenetur architecto sed voluptatibus saepe."})]})]}),y.jsxs("div",{className:"paint-content",children:[y.jsx("div",{className:"painting fadeInLeft",children:y.jsx("img",{src:lF,alt:"blue painted walls"})}),y.jsxs("div",{className:"paint-txt fadeInLeft",children:[y.jsx("h3",{children:"paint"}),y.jsx("p",{children:"Lorem ipsum dolor sit amet. A reiciendis repellat in cupiditate temporibus est tenetur architecto sed voluptatibus saepe."})]})]})]}),y.jsx(y_,{})]})}const D6="/Ureno_webdesign/assets/Harvest-grove-rigid-CaKY0j96.png",O6="/Ureno_webdesign/assets/tavertine-BlkzyBiO.png",ZA=({productId:n,image:e,title:t,description:r,price:s,link:o})=>y.jsx("div",{className:"products",children:y.jsxs(wt,{to:`/productDetail/${n}`,className:"container",children:[y.jsx("img",{src:e,alt:t}),y.jsx("div",{className:"prod-title",children:t}),y.jsx("p",{children:r}),y.jsx("p",{children:s})]})});ZA.defaultProps={productId:"default-id",image:"../assets/images/defaultImage.jpg.webp",title:"Default Title",description:"No description available",price:"Price not available.",link:"/productDetail"};function L6(){const[n,e]=I.useState(0),{userLoggedIn:t}=fs()||{userLoggedIn:!1},[r,s]=I.useState([]);return I.useEffect(()=>{(async()=>{try{const l=Wc();console.log("Attempting to fetch products from Firestore...");const c=await Os(dl(l,"products"));console.log("Products fetched successfully:",c.size);const h=c.docs.map(f=>({id:f.id,...f.data()}));s(h)}catch(l){console.error("Error fetching products:",l),s([{id:"HarvestGrove",image:D6,title:"Harvest Grove Rigid Luxury Vinyl",description:"Floor and Decor",price:"$2.19/sqft"},{id:"tavertine",image:O6,title:"Inverness Tavertine Vinyl",description:"Floor and Decor",price:"$2.19/sqft"}])}})()},[]),I.useEffect(()=>{const o=()=>{const l=document.querySelector(".nav");l&&e(l.offsetHeight)};return o(),window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}},[]),y.jsxs(y.Fragment,{children:[y.jsx("meta",{charSet:"UTF-8"}),y.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),y.jsx("title",{children:"URENO"}),y.jsx(b_,{}),y.jsxs("div",{className:"body",children:[y.jsxs("div",{className:`main-content ${t?"logged-in":""}`,children:[y.jsx("h1",{children:"Flooring"}),y.jsxs("div",{className:"search",children:[y.jsx("div",{className:"input",children:y.jsx("input",{type:"text",className:"search-bar",placeholder:"Search"})}),y.jsx("div",{className:"filter",children:"Filter"})]}),y.jsx("p",{children:"Popular"}),y.jsx("div",{className:"products",children:r.map(o=>y.jsx(ZA,{productId:o.id,image:o.image,title:o.title,description:o.description,price:o.price,link:o.link},o.id))})]}),y.jsx(y_,{})]})]})}function e1(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=e1(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function t1(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=e1(n))&&(r&&(r+=" "),r+=e);return r}const k_="-",M6=n=>{const e=V6(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:l=>{const c=l.split(k_);return c[0]===""&&c.length!==1&&c.shift(),n1(c,e)||j6(l)},getConflictingClassGroupIds:(l,c)=>{const h=t[l]||[];return c&&r[l]?[...h,...r[l]]:h}}},n1=(n,e)=>{var l;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?n1(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const o=n.join(k_);return(l=e.validators.find(({validator:c})=>c(o)))==null?void 0:l.classGroupId},XI=/^\[(.+)\]$/,j6=n=>{if(XI.test(n)){const e=XI.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},V6=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return U6(Object.entries(n.classGroups),t).forEach(([o,l])=>{ky(l,r,o,e)}),r},ky=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const o=s===""?e:JI(e,s);o.classGroupId=t;return}if(typeof s=="function"){if(F6(s)){ky(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([o,l])=>{ky(l,JI(e,o),t,r)})})},JI=(n,e)=>{let t=n;return e.split(k_).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},F6=n=>n.isThemeGetter,U6=(n,e)=>e?n.map(([t,r])=>{const s=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([l,c])=>[e+l,c])):o);return[t,s]}):n,$6=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(o,l)=>{t.set(o,l),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let l=t.get(o);if(l!==void 0)return l;if((l=r.get(o))!==void 0)return s(o,l),l},set(o,l){t.has(o)?t.set(o,l):s(o,l)}}},r1="!",B6=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],o=e.length,l=c=>{const h=[];let f=0,g=0,_;for(let S=0;S<c.length;S++){let V=c[S];if(f===0){if(V===s&&(r||c.slice(S,S+o)===e)){h.push(c.slice(g,S)),g=S+o;continue}if(V==="/"){_=S;continue}}V==="["?f++:V==="]"&&f--}const E=h.length===0?c:c.substring(g),C=E.startsWith(r1),R=C?E.substring(1):E,A=_&&_>g?_-g:void 0;return{modifiers:h,hasImportantModifier:C,baseClassName:R,maybePostfixModifierPosition:A}};return t?c=>t({className:c,parseClassName:l}):l},z6=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},W6=n=>({cache:$6(n.cacheSize),parseClassName:B6(n),...M6(n)}),H6=/\s+/,q6=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,o=[],l=n.trim().split(H6);let c="";for(let h=l.length-1;h>=0;h-=1){const f=l[h],{modifiers:g,hasImportantModifier:_,baseClassName:E,maybePostfixModifierPosition:C}=t(f);let R=!!C,A=r(R?E.substring(0,C):E);if(!A){if(!R){c=f+(c.length>0?" "+c:c);continue}if(A=r(E),!A){c=f+(c.length>0?" "+c:c);continue}R=!1}const S=z6(g).join(":"),V=_?S+r1:S,U=V+A;if(o.includes(U))continue;o.push(U);const $=s(A,R);for(let W=0;W<$.length;++W){const Y=$[W];o.push(V+Y)}c=f+(c.length>0?" "+c:c)}return c};function G6(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=s1(e))&&(r&&(r+=" "),r+=t);return r}const s1=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=s1(n[r]))&&(t&&(t+=" "),t+=e);return t};function K6(n,...e){let t,r,s,o=l;function l(h){const f=e.reduce((g,_)=>_(g),n());return t=W6(f),r=t.cache.get,s=t.cache.set,o=c,c(h)}function c(h){const f=r(h);if(f)return f;const g=q6(h,t);return s(h,g),g}return function(){return o(G6.apply(null,arguments))}}const at=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},i1=/^\[(?:([a-z-]+):)?(.+)\]$/i,Q6=/^\d+\/\d+$/,Y6=new Set(["px","full","screen"]),X6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,J6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Z6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,e9=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,t9=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ns=n=>ml(n)||Y6.has(n)||Q6.test(n),Di=n=>Wl(n,"length",u9),ml=n=>!!n&&!Number.isNaN(Number(n)),Ag=n=>Wl(n,"number",ml),zu=n=>!!n&&Number.isInteger(Number(n)),n9=n=>n.endsWith("%")&&ml(n.slice(0,-1)),Ne=n=>i1.test(n),Oi=n=>X6.test(n),r9=new Set(["length","size","percentage"]),s9=n=>Wl(n,r9,o1),i9=n=>Wl(n,"position",o1),o9=new Set(["image","url"]),a9=n=>Wl(n,o9,d9),l9=n=>Wl(n,"",c9),Wu=()=>!0,Wl=(n,e,t)=>{const r=i1.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},u9=n=>J6.test(n)&&!Z6.test(n),o1=()=>!1,c9=n=>e9.test(n),d9=n=>t9.test(n),h9=()=>{const n=at("colors"),e=at("spacing"),t=at("blur"),r=at("brightness"),s=at("borderColor"),o=at("borderRadius"),l=at("borderSpacing"),c=at("borderWidth"),h=at("contrast"),f=at("grayscale"),g=at("hueRotate"),_=at("invert"),E=at("gap"),C=at("gradientColorStops"),R=at("gradientColorStopPositions"),A=at("inset"),S=at("margin"),V=at("opacity"),U=at("padding"),$=at("saturate"),W=at("scale"),Y=at("sepia"),X=at("skew"),N=at("space"),b=at("translate"),k=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",Ne,e],j=()=>[Ne,e],D=()=>["",Ns,Di],le=()=>["auto",ml,Ne],xe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Re=()=>["solid","dashed","dotted","double","none"],Te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],se=()=>["start","end","center","between","around","evenly","stretch"],ue=()=>["","0",Ne],ie=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>[ml,Ne];return{cacheSize:500,separator:":",theme:{colors:[Wu],spacing:[Ns,Di],blur:["none","",Oi,Ne],brightness:z(),borderColor:[n],borderRadius:["none","","full",Oi,Ne],borderSpacing:j(),borderWidth:D(),contrast:z(),grayscale:ue(),hueRotate:z(),invert:ue(),gap:j(),gradientColorStops:[n],gradientColorStopPositions:[n9,Di],inset:M(),margin:M(),opacity:z(),padding:j(),saturate:z(),scale:z(),sepia:ue(),skew:z(),space:j(),translate:j()},classGroups:{aspect:[{aspect:["auto","square","video",Ne]}],container:["container"],columns:[{columns:[Oi]}],"break-after":[{"break-after":ie()}],"break-before":[{"break-before":ie()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...xe(),Ne]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[A]}],"inset-x":[{"inset-x":[A]}],"inset-y":[{"inset-y":[A]}],start:[{start:[A]}],end:[{end:[A]}],top:[{top:[A]}],right:[{right:[A]}],bottom:[{bottom:[A]}],left:[{left:[A]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",zu,Ne]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ne]}],grow:[{grow:ue()}],shrink:[{shrink:ue()}],order:[{order:["first","last","none",zu,Ne]}],"grid-cols":[{"grid-cols":[Wu]}],"col-start-end":[{col:["auto",{span:["full",zu,Ne]},Ne]}],"col-start":[{"col-start":le()}],"col-end":[{"col-end":le()}],"grid-rows":[{"grid-rows":[Wu]}],"row-start-end":[{row:["auto",{span:[zu,Ne]},Ne]}],"row-start":[{"row-start":le()}],"row-end":[{"row-end":le()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ne]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ne]}],gap:[{gap:[E]}],"gap-x":[{"gap-x":[E]}],"gap-y":[{"gap-y":[E]}],"justify-content":[{justify:["normal",...se()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...se(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...se(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[U]}],px:[{px:[U]}],py:[{py:[U]}],ps:[{ps:[U]}],pe:[{pe:[U]}],pt:[{pt:[U]}],pr:[{pr:[U]}],pb:[{pb:[U]}],pl:[{pl:[U]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ne,e]}],"min-w":[{"min-w":[Ne,e,"min","max","fit"]}],"max-w":[{"max-w":[Ne,e,"none","full","min","max","fit","prose",{screen:[Oi]},Oi]}],h:[{h:[Ne,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ne,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ne,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ne,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Oi,Di]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ag]}],"font-family":[{font:[Wu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ne]}],"line-clamp":[{"line-clamp":["none",ml,Ag]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ns,Ne]}],"list-image":[{"list-image":["none",Ne]}],"list-style-type":[{list:["none","disc","decimal",Ne]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[V]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[V]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Re(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ns,Di]}],"underline-offset":[{"underline-offset":["auto",Ns,Ne]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ne]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ne]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[V]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...xe(),i9]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",s9]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},a9]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[R]}],"gradient-via-pos":[{via:[R]}],"gradient-to-pos":[{to:[R]}],"gradient-from":[{from:[C]}],"gradient-via":[{via:[C]}],"gradient-to":[{to:[C]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[V]}],"border-style":[{border:[...Re(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[V]}],"divide-style":[{divide:Re()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Re()]}],"outline-offset":[{"outline-offset":[Ns,Ne]}],"outline-w":[{outline:[Ns,Di]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[V]}],"ring-offset-w":[{"ring-offset":[Ns,Di]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Oi,l9]}],"shadow-color":[{shadow:[Wu]}],opacity:[{opacity:[V]}],"mix-blend":[{"mix-blend":[...Te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Te()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",Oi,Ne]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[_]}],saturate:[{saturate:[$]}],sepia:[{sepia:[Y]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[_]}],"backdrop-opacity":[{"backdrop-opacity":[V]}],"backdrop-saturate":[{"backdrop-saturate":[$]}],"backdrop-sepia":[{"backdrop-sepia":[Y]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ne]}],duration:[{duration:z()}],ease:[{ease:["linear","in","out","in-out",Ne]}],delay:[{delay:z()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ne]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[W]}],"scale-x":[{"scale-x":[W]}],"scale-y":[{"scale-y":[W]}],rotate:[{rotate:[zu,Ne]}],"translate-x":[{"translate-x":[b]}],"translate-y":[{"translate-y":[b]}],"skew-x":[{"skew-x":[X]}],"skew-y":[{"skew-y":[X]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ne]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ne]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ne]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Ns,Di,Ag]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},f9=K6(h9);function ho(...n){return f9(t1(n))}const ZI=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,eC=t1,a1=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return eC(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:o}=e,l=Object.keys(s).map(f=>{const g=t==null?void 0:t[f],_=o==null?void 0:o[f];if(g===null)return null;const E=ZI(g)||ZI(_);return s[f][E]}),c=t&&Object.entries(t).reduce((f,g)=>{let[_,E]=g;return E===void 0||(f[_]=E),f},{}),h=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,g)=>{let{class:_,className:E,...C}=g;return Object.entries(C).every(R=>{let[A,S]=R;return Array.isArray(S)?S.includes({...o,...c}[A]):{...o,...c}[A]===S})?[...f,_,E]:f},[]);return eC(n,l,h,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l1=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var m9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=I.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...c},h)=>I.createElement("svg",{ref:h,...m9,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:l1("lucide",s),...c},[...l.map(([f,g])=>I.createElement(f,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=(n,e)=>{const t=I.forwardRef(({className:r,...s},o)=>I.createElement(g9,{ref:o,iconNode:e,className:l1(`lucide-${p9(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],v9=td("Bell",y9);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],w9=td("LoaderCircle",_9);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E9=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],T9=td("LogOut",E9);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],C9=td("Settings",I9);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],S9=td("X",x9),R9=a1("active:scale-95 inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:opacity-50 dark:focus:ring-slate-400 disabled:pointer-events-none dark:focus:ring-offset-slate-900",{variants:{variant:{default:"bg-zinc-900 text-zinc-100 hover:bg-zinc-800",destructive:"text-white hover:bg-red-600 dark:hover:bg-red-600",outline:"bg-zinc-100 text-zinc-900 hover:bg-zinc-200 outline outline-1 outline-zinc-300",subtle:"hover:bg-zinc-200 bg-zinc-100 text-zinc-900",ghost:"bg-transparent hover:bg-zinc-100 text-zinc-800 data-[state=open]:bg-transparent data-[state=open]:bg-transparent",link:"bg-transparent dark:bg-transparent underline-offset-4 hover:underline text-slate-900 dark:text-slate-100 hover:bg-transparent dark:hover:bg-transparent"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-2 rounded-md",xs:"h-8 px-1.5 rounded-sm",lg:"h-11 px-8 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),Rf=I.forwardRef(({className:n,children:e,variant:t,isLoading:r,size:s,...o},l)=>y.jsxs("button",{className:ho(R9({variant:t,size:s,className:n})),ref:l,disabled:r,...o,children:[r?y.jsx(w9,{className:"mr-2 h-4 w-4 animate-spin"}):null,e]}));Rf.displayName="Button";const N_={logo:n=>y.jsx("svg",{width:"271.015",height:"70.315",viewBox:"-145.011144365309036 -30.49067544250989 331.0151672857927 130.31489419250988",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("g",{id:"svgGroup",strokeLinecap:"round",fillRule:"nonzero",fontSize:"9pt",stroke:"#000",strokeWidth:"0.25mm",fill:"#000",children:y.jsx("path",{d:"M 0.871 42.383 L 9.367 0 L 22.306 0 L 13.81 42.383 A 30.417 30.417 0 0 0 13.441 44.675 Q 11.706 59.082 27.58 59.082 A 25.912 25.912 0 0 0 35.582 57.938 Q 43.671 55.317 46.807 46.686 A 29.378 29.378 0 0 0 47.99 42.383 L 56.486 0 L 69.425 0 L 60.929 42.383 Q 56.437 64.922 36.013 69.272 A 51.3 51.3 0 0 1 25.333 70.312 Q -4.549 70.313 0.817 42.655 A 54.603 54.603 0 0 1 0.871 42.383 Z M 170.255 69.824 L 157.316 69.824 L 167.57 18.555 L 179.044 18.555 L 177.042 35.84 A 48.043 48.043 0 0 1 182.438 27.877 Q 190.364 18.555 200.871 18.555 Q 215.284 18.555 212.504 34.358 A 37.97 37.97 0 0 1 212.345 35.205 L 205.412 69.824 L 192.472 69.824 L 199.406 35.059 A 9.722 9.722 0 0 0 199.542 34.192 Q 200.038 29.64 195.123 29.082 A 13.143 13.143 0 0 0 193.644 29.004 A 12.397 12.397 0 0 0 186.867 31.196 Q 182.454 34.051 178.041 40.623 A 72.792 72.792 0 0 0 175.187 45.264 L 170.255 69.824 Z M 131.242 49.219 L 118.4 49.219 A 14.778 14.778 0 0 0 118.188 50.62 Q 117.295 59.57 129.826 59.57 A 32.356 32.356 0 0 0 147.217 54.447 A 40.076 40.076 0 0 0 149.064 53.223 L 147.013 63.477 A 29.1 29.1 0 0 1 133.997 69.204 A 40.091 40.091 0 0 1 126.798 69.824 A 35.673 35.673 0 0 1 118.704 68.991 Q 102.573 65.217 106.442 44.34 A 55.876 55.876 0 0 1 106.583 43.604 Q 111.086 21.176 131.247 18.829 A 42.614 42.614 0 0 1 136.173 18.555 A 46.684 46.684 0 0 1 142.691 18.969 Q 157.543 21.075 154.972 33.887 A 16.984 16.984 0 0 1 144.095 47.13 Q 140.663 48.501 136.2 48.972 A 47.285 47.285 0 0 1 131.242 49.219 Z M 120.304 39.746 L 133.244 39.746 Q 137.059 39.746 139.319 38.509 A 6.004 6.004 0 0 0 142.423 34.229 A 6.024 6.024 0 0 0 142.521 33.509 Q 142.836 29.111 135.517 28.744 A 27.909 27.909 0 0 0 134.122 28.711 A 15.659 15.659 0 0 0 128.354 29.709 Q 124.114 31.377 121.81 35.833 A 20.477 20.477 0 0 0 120.304 39.746 Z M 81.828 69.824 L 68.888 69.824 L 79.142 18.555 L 90.617 18.555 L 88.81 34.863 A 59.862 59.862 0 0 1 92.813 28.311 Q 97.632 21.541 102.816 19.469 A 12.42 12.42 0 0 1 107.462 18.555 L 105.265 29.492 A 13.431 13.431 0 0 0 97.693 31.996 Q 92.076 35.776 86.759 45.264 L 81.828 69.824 Z M 224.146 32.761 Q 230.67 20.161 245.33 18.365 A 41.947 41.947 0 0 1 250.431 18.066 A 34.33 34.33 0 0 1 258.326 18.89 Q 274.406 22.705 270.109 44.189 A 43.09 43.09 0 0 1 266.267 55.597 Q 259.743 68.173 245.083 69.966 A 42.024 42.024 0 0 1 239.982 70.264 Q 215.53 70.264 220.164 44.926 A 56.584 56.584 0 0 1 220.304 44.189 A 43.226 43.226 0 0 1 224.146 32.761 Z M 233.292 43.994 Q 230.07 60.059 242.033 60.059 A 12.969 12.969 0 0 0 253.572 53.783 Q 255.134 51.371 256.191 48.032 A 38.445 38.445 0 0 0 257.218 43.994 Q 259.879 30.648 251.601 28.666 A 13.851 13.851 0 0 0 248.38 28.32 Q 236.417 28.32 233.292 43.994 Z",vectorEffect:"non-scaling-stroke"})})}),google:n=>y.jsxs("svg",{...n,viewBox:"0 0 24 24",children:[y.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),y.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),y.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),y.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"}),y.jsx("path",{d:"M1 1h22v22H1z",fill:"none"})]})},A9=1,P9=1e6;let Pg=0;function b9(){return Pg=(Pg+1)%Number.MAX_SAFE_INTEGER,Pg.toString()}const bg=new Map,tC=n=>{if(bg.has(n))return;const e=setTimeout(()=>{bg.delete(n),dc({type:"REMOVE_TOAST",toastId:n})},P9);bg.set(n,e)},k9=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,A9)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?tC(t):n.toasts.forEach(r=>{tC(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},qh=[];let Gh={toasts:[]};function dc(n){Gh=k9(Gh,n),qh.forEach(e=>{e(Gh)})}function N9({...n}){const e=b9(),t=s=>dc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>dc({type:"DISMISS_TOAST",toastId:e});return dc({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function u1(){const[n,e]=I.useState(Gh);return I.useEffect(()=>(qh.push(e),()=>{const t=qh.indexOf(e);t>-1&&qh.splice(t,1)}),[n]),{...n,toast:N9,dismiss:t=>dc({type:"DISMISS_TOAST",toastId:t})}}function Gn(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function nC(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function c1(...n){return e=>{let t=!1;const r=n.map(s=>{const o=nC(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():nC(n[s],null)}}}}function na(...n){return I.useCallback(c1(...n),n)}function d1(n,e=[]){let t=[];function r(o,l){const c=I.createContext(l),h=t.length;t=[...t,l];const f=_=>{var V;const{scope:E,children:C,...R}=_,A=((V=E==null?void 0:E[n])==null?void 0:V[h])||c,S=I.useMemo(()=>R,Object.values(R));return y.jsx(A.Provider,{value:S,children:C})};f.displayName=o+"Provider";function g(_,E){var A;const C=((A=E==null?void 0:E[n])==null?void 0:A[h])||c,R=I.useContext(C);if(R)return R;if(l!==void 0)return l;throw new Error(`\`${_}\` must be used within \`${o}\``)}return[f,g]}const s=()=>{const o=t.map(l=>I.createContext(l));return function(c){const h=(c==null?void 0:c[n])||o;return I.useMemo(()=>({[`__scope${n}`]:{...c,[n]:h}}),[c,h])}};return s.scopeName=n,[r,D9(s,...e)]}function D9(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const l=r.reduce((c,{useScope:h,scopeName:f})=>{const _=h(o)[`__scope${f}`];return{...c,..._}},{});return I.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}var Af=I.forwardRef((n,e)=>{const{children:t,...r}=n,s=I.Children.toArray(t),o=s.find(L9);if(o){const l=o.props.children,c=s.map(h=>h===o?I.Children.count(l)>1?I.Children.only(null):I.isValidElement(l)?l.props.children:null:h);return y.jsx(Ny,{...r,ref:e,children:I.isValidElement(l)?I.cloneElement(l,void 0,c):null})}return y.jsx(Ny,{...r,ref:e,children:t})});Af.displayName="Slot";var Ny=I.forwardRef((n,e)=>{const{children:t,...r}=n;if(I.isValidElement(t)){const s=j9(t),o=M9(r,t.props);return t.type!==I.Fragment&&(o.ref=e?c1(e,s):s),I.cloneElement(t,o)}return I.Children.count(t)>1?I.Children.only(null):null});Ny.displayName="SlotClone";var O9=({children:n})=>y.jsx(y.Fragment,{children:n});function L9(n){return I.isValidElement(n)&&n.type===O9}function M9(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...c)=>{o(...c),s(...c)}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function j9(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function V9(n){const e=n+"CollectionProvider",[t,r]=d1(e),[s,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=C=>{const{scope:R,children:A}=C,S=En.useRef(null),V=En.useRef(new Map).current;return y.jsx(s,{scope:R,itemMap:V,collectionRef:S,children:A})};l.displayName=e;const c=n+"CollectionSlot",h=En.forwardRef((C,R)=>{const{scope:A,children:S}=C,V=o(c,A),U=na(R,V.collectionRef);return y.jsx(Af,{ref:U,children:S})});h.displayName=c;const f=n+"CollectionItemSlot",g="data-radix-collection-item",_=En.forwardRef((C,R)=>{const{scope:A,children:S,...V}=C,U=En.useRef(null),$=na(R,U),W=o(f,A);return En.useEffect(()=>(W.itemMap.set(U,{ref:U,...V}),()=>void W.itemMap.delete(U))),y.jsx(Af,{[g]:"",ref:$,children:S})});_.displayName=f;function E(C){const R=o(n+"CollectionConsumer",C);return En.useCallback(()=>{const S=R.collectionRef.current;if(!S)return[];const V=Array.from(S.querySelectorAll(`[${g}]`));return Array.from(R.itemMap.values()).sort((W,Y)=>V.indexOf(W.ref.current)-V.indexOf(Y.ref.current))},[R.collectionRef,R.itemMap])}return[{Provider:l,Slot:h,ItemSlot:_},E,r]}var F9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ps=F9.reduce((n,e)=>{const t=I.forwardRef((r,s)=>{const{asChild:o,...l}=r,c=o?Af:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(c,{...l,ref:s})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function h1(n,e){n&&Gy.flushSync(()=>n.dispatchEvent(e))}function Xs(n){const e=I.useRef(n);return I.useEffect(()=>{e.current=n}),I.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function U9(n,e=globalThis==null?void 0:globalThis.document){const t=Xs(n);I.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var $9="DismissableLayer",Dy="dismissableLayer.update",B9="dismissableLayer.pointerDownOutside",z9="dismissableLayer.focusOutside",rC,f1=I.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),p1=I.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...h}=n,f=I.useContext(f1),[g,_]=I.useState(null),E=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,C]=I.useState({}),R=na(e,N=>_(N)),A=Array.from(f.layers),[S]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),V=A.indexOf(S),U=g?A.indexOf(g):-1,$=f.layersWithOutsidePointerEventsDisabled.size>0,W=U>=V,Y=H9(N=>{const b=N.target,k=[...f.branches].some(L=>L.contains(b));!W||k||(s==null||s(N),l==null||l(N),N.defaultPrevented||c==null||c())},E),X=q9(N=>{const b=N.target;[...f.branches].some(L=>L.contains(b))||(o==null||o(N),l==null||l(N),N.defaultPrevented||c==null||c())},E);return U9(N=>{U===f.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&c&&(N.preventDefault(),c()))},E),I.useEffect(()=>{if(g)return t&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(rC=E.body.style.pointerEvents,E.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(g)),f.layers.add(g),sC(),()=>{t&&f.layersWithOutsidePointerEventsDisabled.size===1&&(E.body.style.pointerEvents=rC)}},[g,E,t,f]),I.useEffect(()=>()=>{g&&(f.layers.delete(g),f.layersWithOutsidePointerEventsDisabled.delete(g),sC())},[g,f]),I.useEffect(()=>{const N=()=>C({});return document.addEventListener(Dy,N),()=>document.removeEventListener(Dy,N)},[]),y.jsx(ps.div,{...h,ref:R,style:{pointerEvents:$?W?"auto":"none":void 0,...n.style},onFocusCapture:Gn(n.onFocusCapture,X.onFocusCapture),onBlurCapture:Gn(n.onBlurCapture,X.onBlurCapture),onPointerDownCapture:Gn(n.onPointerDownCapture,Y.onPointerDownCapture)})});p1.displayName=$9;var W9="DismissableLayerBranch",m1=I.forwardRef((n,e)=>{const t=I.useContext(f1),r=I.useRef(null),s=na(e,r);return I.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),y.jsx(ps.div,{...n,ref:s})});m1.displayName=W9;function H9(n,e=globalThis==null?void 0:globalThis.document){const t=Xs(n),r=I.useRef(!1),s=I.useRef(()=>{});return I.useEffect(()=>{const o=c=>{if(c.target&&!r.current){let h=function(){g1(B9,t,f,{discrete:!0})};const f={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function q9(n,e=globalThis==null?void 0:globalThis.document){const t=Xs(n),r=I.useRef(!1);return I.useEffect(()=>{const s=o=>{o.target&&!r.current&&g1(z9,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function sC(){const n=new CustomEvent(Dy);document.dispatchEvent(n)}function g1(n,e,t,{discrete:r}){const s=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?h1(s,o):s.dispatchEvent(o)}var G9=p1,K9=m1,Pf=globalThis!=null&&globalThis.document?I.useLayoutEffect:()=>{},Q9="Portal",y1=I.forwardRef((n,e)=>{var c;const{container:t,...r}=n,[s,o]=I.useState(!1);Pf(()=>o(!0),[]);const l=t||s&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return l?Zb.createPortal(y.jsx(ps.div,{...r,ref:e}),l):null});y1.displayName=Q9;function Y9(n,e){return I.useReducer((t,r)=>e[t][r]??t,n)}var v1=n=>{const{present:e,children:t}=n,r=X9(e),s=typeof t=="function"?t({present:r.isPresent}):I.Children.only(t),o=na(r.ref,J9(s));return typeof t=="function"||r.isPresent?I.cloneElement(s,{ref:o}):null};v1.displayName="Presence";function X9(n){const[e,t]=I.useState(),r=I.useRef({}),s=I.useRef(n),o=I.useRef("none"),l=n?"mounted":"unmounted",[c,h]=Y9(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return I.useEffect(()=>{const f=Ah(r.current);o.current=c==="mounted"?f:"none"},[c]),Pf(()=>{const f=r.current,g=s.current;if(g!==n){const E=o.current,C=Ah(f);n?h("MOUNT"):C==="none"||(f==null?void 0:f.display)==="none"?h("UNMOUNT"):h(g&&E!==C?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,h]),Pf(()=>{if(e){let f;const g=e.ownerDocument.defaultView??window,_=C=>{const A=Ah(r.current).includes(C.animationName);if(C.target===e&&A&&(h("ANIMATION_END"),!s.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",f=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},E=C=>{C.target===e&&(o.current=Ah(r.current))};return e.addEventListener("animationstart",E),e.addEventListener("animationcancel",_),e.addEventListener("animationend",_),()=>{g.clearTimeout(f),e.removeEventListener("animationstart",E),e.removeEventListener("animationcancel",_),e.removeEventListener("animationend",_)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:I.useCallback(f=>{f&&(r.current=getComputedStyle(f)),t(f)},[])}}function Ah(n){return(n==null?void 0:n.animationName)||"none"}function J9(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Z9({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,s]=e5({defaultProp:e,onChange:t}),o=n!==void 0,l=o?n:r,c=Xs(t),h=I.useCallback(f=>{if(o){const _=typeof f=="function"?f(n):f;_!==n&&c(_)}else s(f)},[o,n,s,c]);return[l,h]}function e5({defaultProp:n,onChange:e}){const t=I.useState(n),[r]=t,s=I.useRef(r),o=Xs(e);return I.useEffect(()=>{s.current!==r&&(o(r),s.current=r)},[r,s,o]),t}var t5="VisuallyHidden",D_=I.forwardRef((n,e)=>y.jsx(ps.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));D_.displayName=t5;var O_="ToastProvider",[L_,n5,r5]=V9("Toast"),[_1,F$]=d1("Toast",[r5]),[s5,wp]=_1(O_),w1=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:l}=n,[c,h]=I.useState(null),[f,g]=I.useState(0),_=I.useRef(!1),E=I.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${O_}\`. Expected non-empty \`string\`.`),y.jsx(L_.Provider,{scope:e,children:y.jsx(s5,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:f,viewport:c,onViewportChange:h,onToastAdd:I.useCallback(()=>g(C=>C+1),[]),onToastRemove:I.useCallback(()=>g(C=>C-1),[]),isFocusedToastEscapeKeyDownRef:_,isClosePausedRef:E,children:l})})};w1.displayName=O_;var E1="ToastViewport",i5=["F8"],Oy="toast.viewportPause",Ly="toast.viewportResume",T1=I.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=i5,label:s="Notifications ({hotkey})",...o}=n,l=wp(E1,t),c=n5(t),h=I.useRef(null),f=I.useRef(null),g=I.useRef(null),_=I.useRef(null),E=na(e,_,l.onViewportChange),C=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),R=l.toastCount>0;I.useEffect(()=>{const S=V=>{var $;r.length!==0&&r.every(W=>V[W]||V.code===W)&&(($=_.current)==null||$.focus())};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[r]),I.useEffect(()=>{const S=h.current,V=_.current;if(R&&S&&V){const U=()=>{if(!l.isClosePausedRef.current){const X=new CustomEvent(Oy);V.dispatchEvent(X),l.isClosePausedRef.current=!0}},$=()=>{if(l.isClosePausedRef.current){const X=new CustomEvent(Ly);V.dispatchEvent(X),l.isClosePausedRef.current=!1}},W=X=>{!S.contains(X.relatedTarget)&&$()},Y=()=>{S.contains(document.activeElement)||$()};return S.addEventListener("focusin",U),S.addEventListener("focusout",W),S.addEventListener("pointermove",U),S.addEventListener("pointerleave",Y),window.addEventListener("blur",U),window.addEventListener("focus",$),()=>{S.removeEventListener("focusin",U),S.removeEventListener("focusout",W),S.removeEventListener("pointermove",U),S.removeEventListener("pointerleave",Y),window.removeEventListener("blur",U),window.removeEventListener("focus",$)}}},[R,l.isClosePausedRef]);const A=I.useCallback(({tabbingDirection:S})=>{const U=c().map($=>{const W=$.ref.current,Y=[W,...v5(W)];return S==="forwards"?Y:Y.reverse()});return(S==="forwards"?U.reverse():U).flat()},[c]);return I.useEffect(()=>{const S=_.current;if(S){const V=U=>{var Y,X,N;const $=U.altKey||U.ctrlKey||U.metaKey;if(U.key==="Tab"&&!$){const b=document.activeElement,k=U.shiftKey;if(U.target===S&&k){(Y=f.current)==null||Y.focus();return}const j=A({tabbingDirection:k?"backwards":"forwards"}),D=j.findIndex(le=>le===b);kg(j.slice(D+1))?U.preventDefault():k?(X=f.current)==null||X.focus():(N=g.current)==null||N.focus()}};return S.addEventListener("keydown",V),()=>S.removeEventListener("keydown",V)}},[c,A]),y.jsxs(K9,{ref:h,role:"region","aria-label":s.replace("{hotkey}",C),tabIndex:-1,style:{pointerEvents:R?void 0:"none"},children:[R&&y.jsx(My,{ref:f,onFocusFromOutsideViewport:()=>{const S=A({tabbingDirection:"forwards"});kg(S)}}),y.jsx(L_.Slot,{scope:t,children:y.jsx(ps.ol,{tabIndex:-1,...o,ref:E})}),R&&y.jsx(My,{ref:g,onFocusFromOutsideViewport:()=>{const S=A({tabbingDirection:"backwards"});kg(S)}})]})});T1.displayName=E1;var I1="ToastFocusProxy",My=I.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,o=wp(I1,t);return y.jsx(D_,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:l=>{var f;const c=l.relatedTarget;!((f=o.viewport)!=null&&f.contains(c))&&r()}})});My.displayName=I1;var Ep="Toast",o5="toast.swipeStart",a5="toast.swipeMove",l5="toast.swipeCancel",u5="toast.swipeEnd",C1=I.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:o,...l}=n,[c=!0,h]=Z9({prop:r,defaultProp:s,onChange:o});return y.jsx(v1,{present:t||c,children:y.jsx(h5,{open:c,...l,ref:e,onClose:()=>h(!1),onPause:Xs(n.onPause),onResume:Xs(n.onResume),onSwipeStart:Gn(n.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Gn(n.onSwipeMove,f=>{const{x:g,y:_}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${g}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${_}px`)}),onSwipeCancel:Gn(n.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Gn(n.onSwipeEnd,f=>{const{x:g,y:_}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${g}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${_}px`),h(!1)})})})});C1.displayName=Ep;var[c5,d5]=_1(Ep,{onClose(){}}),h5=I.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:o,onClose:l,onEscapeKeyDown:c,onPause:h,onResume:f,onSwipeStart:g,onSwipeMove:_,onSwipeCancel:E,onSwipeEnd:C,...R}=n,A=wp(Ep,t),[S,V]=I.useState(null),U=na(e,le=>V(le)),$=I.useRef(null),W=I.useRef(null),Y=s||A.duration,X=I.useRef(0),N=I.useRef(Y),b=I.useRef(0),{onToastAdd:k,onToastRemove:L}=A,M=Xs(()=>{var xe;(S==null?void 0:S.contains(document.activeElement))&&((xe=A.viewport)==null||xe.focus()),l()}),j=I.useCallback(le=>{!le||le===1/0||(window.clearTimeout(b.current),X.current=new Date().getTime(),b.current=window.setTimeout(M,le))},[M]);I.useEffect(()=>{const le=A.viewport;if(le){const xe=()=>{j(N.current),f==null||f()},Re=()=>{const Te=new Date().getTime()-X.current;N.current=N.current-Te,window.clearTimeout(b.current),h==null||h()};return le.addEventListener(Oy,Re),le.addEventListener(Ly,xe),()=>{le.removeEventListener(Oy,Re),le.removeEventListener(Ly,xe)}}},[A.viewport,Y,h,f,j]),I.useEffect(()=>{o&&!A.isClosePausedRef.current&&j(Y)},[o,Y,A.isClosePausedRef,j]),I.useEffect(()=>(k(),()=>L()),[k,L]);const D=I.useMemo(()=>S?k1(S):null,[S]);return A.viewport?y.jsxs(y.Fragment,{children:[D&&y.jsx(f5,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:D}),y.jsx(c5,{scope:t,onClose:M,children:Gy.createPortal(y.jsx(L_.ItemSlot,{scope:t,children:y.jsx(G9,{asChild:!0,onEscapeKeyDown:Gn(c,()=>{A.isFocusedToastEscapeKeyDownRef.current||M(),A.isFocusedToastEscapeKeyDownRef.current=!1}),children:y.jsx(ps.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":A.swipeDirection,...R,ref:U,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:Gn(n.onKeyDown,le=>{le.key==="Escape"&&(c==null||c(le.nativeEvent),le.nativeEvent.defaultPrevented||(A.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:Gn(n.onPointerDown,le=>{le.button===0&&($.current={x:le.clientX,y:le.clientY})}),onPointerMove:Gn(n.onPointerMove,le=>{if(!$.current)return;const xe=le.clientX-$.current.x,Re=le.clientY-$.current.y,Te=!!W.current,se=["left","right"].includes(A.swipeDirection),ue=["left","up"].includes(A.swipeDirection)?Math.min:Math.max,ie=se?ue(0,xe):0,z=se?0:ue(0,Re),J=le.pointerType==="touch"?10:2,pe={x:ie,y:z},Ie={originalEvent:le,delta:pe};Te?(W.current=pe,Ph(a5,_,Ie,{discrete:!1})):iC(pe,A.swipeDirection,J)?(W.current=pe,Ph(o5,g,Ie,{discrete:!1}),le.target.setPointerCapture(le.pointerId)):(Math.abs(xe)>J||Math.abs(Re)>J)&&($.current=null)}),onPointerUp:Gn(n.onPointerUp,le=>{const xe=W.current,Re=le.target;if(Re.hasPointerCapture(le.pointerId)&&Re.releasePointerCapture(le.pointerId),W.current=null,$.current=null,xe){const Te=le.currentTarget,se={originalEvent:le,delta:xe};iC(xe,A.swipeDirection,A.swipeThreshold)?Ph(u5,C,se,{discrete:!0}):Ph(l5,E,se,{discrete:!0}),Te.addEventListener("click",ue=>ue.preventDefault(),{once:!0})}})})})}),A.viewport)})]}):null}),f5=n=>{const{__scopeToast:e,children:t,...r}=n,s=wp(Ep,e),[o,l]=I.useState(!1),[c,h]=I.useState(!1);return g5(()=>l(!0)),I.useEffect(()=>{const f=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(f)},[]),c?null:y.jsx(y1,{asChild:!0,children:y.jsx(D_,{...r,children:o&&y.jsxs(y.Fragment,{children:[s.label," ",t]})})})},p5="ToastTitle",x1=I.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return y.jsx(ps.div,{...r,ref:e})});x1.displayName=p5;var m5="ToastDescription",S1=I.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return y.jsx(ps.div,{...r,ref:e})});S1.displayName=m5;var R1="ToastAction",A1=I.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?y.jsx(b1,{altText:t,asChild:!0,children:y.jsx(M_,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${R1}\`. Expected non-empty \`string\`.`),null)});A1.displayName=R1;var P1="ToastClose",M_=I.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=d5(P1,t);return y.jsx(b1,{asChild:!0,children:y.jsx(ps.button,{type:"button",...r,ref:e,onClick:Gn(n.onClick,s.onClose)})})});M_.displayName=P1;var b1=I.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return y.jsx(ps.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function k1(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),y5(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const l=r.dataset.radixToastAnnounceAlt;l&&e.push(l)}else e.push(...k1(r))}}),e}function Ph(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,o=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?h1(s,o):s.dispatchEvent(o)}var iC=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),o=r>s;return e==="left"||e==="right"?o&&r>t:!o&&s>t};function g5(n=()=>{}){const e=Xs(n);Pf(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function y5(n){return n.nodeType===n.ELEMENT_NODE}function v5(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function kg(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var _5=w1,N1=T1,D1=C1,O1=x1,L1=S1,M1=A1,j1=M_;const w5=_5,V1=I.forwardRef(({className:n,...e},t)=>y.jsx(N1,{ref:t,className:ho("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));V1.displayName=N1.displayName;const E5=a1("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),F1=I.forwardRef(({className:n,variant:e,...t},r)=>y.jsx(D1,{ref:r,className:ho(E5({variant:e}),n),...t}));F1.displayName=D1.displayName;const T5=I.forwardRef(({className:n,...e},t)=>y.jsx(M1,{ref:t,className:ho("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));T5.displayName=M1.displayName;const U1=I.forwardRef(({className:n,...e},t)=>y.jsx(j1,{ref:t,className:ho("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:y.jsx(S9,{className:"h-4 w-4"})}));U1.displayName=j1.displayName;const $1=I.forwardRef(({className:n,...e},t)=>y.jsx(O1,{ref:t,className:ho("text-sm font-semibold [&+div]:text-xs",n),...e}));$1.displayName=O1.displayName;const B1=I.forwardRef(({className:n,...e},t)=>y.jsx(L1,{ref:t,className:ho("text-sm opacity-90",n),...e}));B1.displayName=L1.displayName;function I5(){const{toasts:n}=u1();return y.jsxs(w5,{children:[n.map(function({id:e,title:t,description:r,action:s,...o}){return y.jsxs(F1,{...o,children:[y.jsxs("div",{className:"grid gap-1",children:[t&&y.jsx($1,{children:t}),r&&y.jsx(B1,{children:r})]}),s,y.jsx(U1,{})]},e)}),y.jsx(V1,{})]})}const C5=({className:n,...e})=>{const{userLoggedIn:t}=fs()||{userLoggedIn:!1},r=jn(),[s,o]=I.useState(""),[l,c]=I.useState(""),[h,f]=I.useState(!1),{toast:g}=u1();I.useEffect(()=>{console.log("Auth state changed: userLoggedIn = ",t),t&&r("/")},[t,r]);const _=async()=>{f(!0);try{const C=await dF();r("/")}catch(C){console.error("Google sign-in error:",C),g({title:"There was a problem.",description:"THere was an error logging in with Google",variant:"destructive"})}finally{f(!1),console.log("Logged in: ",t)}},E=async(C,R)=>{f(!0);try{const A=await cF(C,R);r("/"),g({title:"Success!",description:"Logged in",variant:"default"})}catch(A){let S="Error logging in with email and password";console.log(A.code),A.code==="auth/invalid-credential"?S="Incorrect email or password. Please try again.":A.code==="auth/user-not-found"?S="No account found with this email.":A.code==="auth/invalid-email"?S="Invalid email format":A.code==="auth/too-many-requests"&&(S="Too many failed login attempts. Try again later."),g({title:"There was a problem.",description:S,variant:"destructive"})}finally{f(!1),console.log("Logged in: ",t)}};return y.jsxs(y.Fragment,{children:[y.jsx(I5,{}),y.jsx("div",{className:ho("flex flex-col items-center space-y-4 justify-center",n),...e,children:y.jsxs("div",{className:"flex flex-col space-y-4",children:[y.jsx("input",{type:"email",value:s,onChange:C=>o(C.currentTarget.value),placeholder:"Email",className:"input"}),y.jsx("input",{type:"password",value:l,onChange:C=>c(C.target.value),placeholder:"Password",className:"input"}),y.jsx(Rf,{onClick:()=>E(s,l),isLoading:h,size:"sm",className:"w-full",children:"Login with Email"}),y.jsxs("p",{className:"flex items-center text-gray-500 text-sm",children:[y.jsx("span",{className:"flex-grow border-t border-gray-300"}),y.jsx("span",{className:"px-3",children:" Or Login with Google "}),y.jsx("span",{className:"flex-grow border-t border-gray-300"})]}),y.jsxs(Rf,{onClick:_,isLoading:h,size:"sm",className:"w-full",children:[h?null:y.jsx(N_.google,{className:"sh-4 w-4 mr-2"}),"Google"]})]})})]})},x5=()=>{const n=jn();return y.jsx("div",{className:"flex items-center justify-center h-screen w-full px-4",children:y.jsx("div",{className:"w-full max-w-sm space-y-6 text-center",children:y.jsxs("div",{className:"flex flex-col space-y-2 text-center",children:[y.jsx("div",{className:"w-full flex justify-center",children:y.jsx("button",{onClick:()=>n("/"),"aria-label":"Go to home",children:y.jsx(N_.logo,{className:"h-12 w-auto"})})}),y.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Welcome back"}),y.jsx(C5,{}),y.jsxs("p",{className:"px-8 text-center text-sm text-zinc-700",children:["New to Ureno?"," ",y.jsx(wt,{to:"/sign-up",className:"hover:text-zinc-800 text-sm underline underline-offset-4",children:"Sign Up"})]}),y.jsxs("p",{className:"text-sm max-w-xs mx-auto text-gray-500",children:["By clicking create account, you agree to our ",y.jsx("a",{href:"",className:"underline",children:"Terms of Service"})," and ",y.jsx("a",{href:"",className:"underline",children:"Privacy Policy"})]})]})})})},S5=()=>{const n=jn();X3();const{userLoggedIn:e,loading:t}=fs(),[r,s]=I.useState(""),[o,l]=I.useState(""),[c,h]=I.useState(""),[f,g]=I.useState(!1),[_,E]=I.useState(!1),[C,R]=I.useState(""),[A,S]=I.useState(""),[V,U]=I.useState(""),[$,W]=I.useState(!1),[Y,X]=I.useState(""),N=async k=>{if(k.preventDefault(),!$){if(X(""),W(!0),!C||!A){X("Email and password are required"),W(!1);return}if(A.length<6){X("Password must be at least 6 characters"),W(!1);return}if(A!==V){X("Passwords don't match"),W(!1);return}try{const M=(await uF(C.trim(),A.trim())).user;await qg(M,{displayName:`${r} ${o}`}),await m_(M.uid,r,o,C.trim(),c,M.displayName),n("/"),console.log(e)}catch(L){L.code==="auth/email-already-in-use"?X("An account with this email already exists."):L.code==="auth/invalid-email"?X("The email address is not valid."):X("There was a problem creating your account."),W(!1)}}},b=async()=>{E(!0);try{const k=await doSignInWithGoogle();n("/")}catch{toast({title:"THere was a problem.",description:"THere was an error logging in with Google",variant:"destructive"})}finally{E(!1),console.log("Logged in: ",e)}};return I.useEffect(()=>{f&&(n("/"),g(!1))},[f,n,g]),t?y.jsx("div",{children:"Loading..."}):y.jsxs(y.Fragment,{children:[e&&y.jsx(TC,{to:"/",replace:!0}),y.jsx("main",{className:"w-full h-screen flex self-center place-content-center place-items-center",children:y.jsxs("div",{className:"w-96 text-gray-600 space-y-5 p-4",children:[y.jsx("div",{className:"text-center mb-6",children:y.jsxs("div",{className:"mt-2",children:[y.jsx("h3",{className:"text-gray-800 text-xl font-semibold sm:text-2xl",children:"Account Information"}),y.jsx("p",{children:"Enter your information to sign up"})]})}),y.jsxs("form",{onSubmit:N,className:"space-y-4",children:[Y&&y.jsx("span",{className:"text-red-600 font-bold",children:Y}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-600 font-bold"}),y.jsx("input",{type:"text",autoComplete:"given-name",placeholder:"First Name",required:!0,value:r,onChange:k=>{s(k.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:indigo-600 shadow-sm rounded-lg transition duration-300"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-600 font-bold"}),y.jsx("input",{type:"text",autoComplete:"family-name",placeholder:"Last Name",required:!0,value:o,onChange:k=>{l(k.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:indigo-600 shadow-sm rounded-lg transition duration-300"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-600 font-bold"}),y.jsx("input",{type:"tel",autoComplete:"mobile",placeholder:"Phone Number",required:!0,value:c,onChange:k=>{h(k.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:indigo-600 shadow-sm rounded-lg transition duration-300"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-600 font-bold"}),y.jsx("input",{type:"email",autoComplete:"email",placeholder:"Email",required:!0,value:C,onChange:k=>{R(k.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:indigo-600 shadow-sm rounded-lg transition duration-300"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-600 font-bold"}),y.jsx("input",{type:"password",autoComplete:"new-password",placeholder:"Password",required:!0,value:A,onChange:k=>{S(k.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:border-indigo-600 shadow-sm rounded-lg transition duration-300"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-600 font-bold"}),y.jsx("input",{disabled:$,type:"password",autoComplete:"off",placeholder:"Confirm Password",required:!0,value:V,onChange:k=>{U(k.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:border-black shadow-sm rounded-lg transition duration-300"})]}),Y&&y.jsx("span",{className:"text-red-600 font-bold",children:Y}),y.jsx("button",{type:"submit",disabled:$,className:`w-full px-4 py-2 text-white font-medium rounded-lg ${$?" bg-gray-300 cursor-not-allowed":"bg-black hover:bg-black hover:shadow-xl transition duration-300"}`,children:$?"Signing Up...":"Create Account"})]}),y.jsxs("p",{className:"flex items-center text-gray-500 text-sm",children:[y.jsx("span",{className:"flex-grow border-t border-gray-300"}),y.jsx("span",{className:"px-3",children:" Or Sign up with Google "}),y.jsx("span",{className:"flex-grow border-t border-gray-300"})]}),y.jsxs(Rf,{onClick:b,isLoading:_,size:"sm",className:"w-full",children:[_?null:y.jsx(N_.google,{className:"sh-4 w-4 mr-2"}),"Google"]}),y.jsxs("div",{className:"text-sm text-center",children:["Already have an account? ","    ",y.jsx(wt,{to:"/sign-in",className:"text-center text-sm hover:underline font-bold",children:"Continue"})]}),y.jsxs("p",{className:"text-sm max-w-xs mx-auto",children:["By clicking create account, you agree to our ",y.jsx("a",{href:"",className:"underline",children:"Terms of Service"})," and ",y.jsx("a",{href:"",className:"underline",children:"Privacy Policy"})]})]})})]})},R5=()=>y.jsx("div",{className:"container mx-auto flex h-screen w-full flex-col justify-center space-y-6 sm:w-[400px]",children:y.jsx("div",{className:"flex flex-col space-y-2 text-center",children:y.jsx(S5,{})})}),We="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAOVBMVEXz9Pa5vsq2u8jN0dnV2N/o6u7w8fTi5OnFydO+ws3f4ee6v8vY2+H29/jy9Pbu7/LJztbCx9HR1ty/NMEIAAACq0lEQVR42u3cYXaqMBBA4cyEgEAi4P4X+34oLSra9IA9E979FtDj7SAJUOocAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAqrQ3Y311iH5fsaktBTYn3d/Y2JljlM/orAR2IsdOHNqPFbY2TqKdXj/Orl/C24/sLHwV0ygiIv2466n0+kNlNFHYiohotfNyWKmIyKm2U9jsffqyU+gopLDMwiGE+sCFjRdV1SkOxyw8X2Rer6cNe2e7hfVJv3ddGg9YeNHlxrIPhyvs9GHvXB+sMJ2eLoDSsQrDwwhF/cFm+HiQikxvP+Prk63RwhSfCtt3i6J/fbK1Wlj9qvCiIjEd9yg9e32zZFotHPLPNOd55VyfotnVYsq9XVZ7fbvxsbviZx6kZ7+Y9toU7e7a/P1x+mI5qP3doRyLuraYlokxY4LrUzRcOPj56knaxmVMcP1XYfkKODW+VVWZqiHlTXBtisbvYgwhhKF22RNcmWLBd6JWJ/g8xXIL64u+eg5zl1huodfXj5riAQrPF333NG0xxVILvb5/YBhLKxzC8+XSD4mpqMLQt2F59hj158e+saDCFFrRacj9Dj5MsYTC0IuIfk9xzAoU7QopTKG93dq/7d3yJiiiVSqjMPTzJ25Dcu6cOUERjUUUzhP8mmLuBIsp/Jrg9Soq+OzAMgqXE7wm/uKvhIoovJ/gLxVQ+DTBwxVummABhRsnWEDhxgmaL9w8QfOFmydovTDlb11KLawopJBCCimk8E8Kbd+nGcJ2Q9F39fNRSKH5wtSZeyvI7/sm8O053MnCCOc/C/7Iu2vexIuyn3z/sLEQ6Orp4O+QOtf0HwrsGyOFrhP9QJ+qmUDnwtju/jp+PwZT/1chdNW+YuMAAAAAAAAAAAAAAAAAAAAAAAAAAACA/9s/LTI30XlcBHoAAAAASUVORK5CYII=",z1=()=>{const{productId:n}=By(),t=[{id:"HarvestGrove",productTitle:"Harvest Grove Rigid Luxury Vinyl",productCategory:"Floor and Decor",price:"$2.19/sqft",description:"Default",mainIm:{defaultImage:We},alternate1:{defaultImage:We},alternate2:{defaultImage:We}},{id:"tavertine",productTitle:"Inverness Tavertine Vinyl",productCategory:"Floor and Decor",price:"$2.19/sqft",description:"Default",mainIm:{defaultImage:We},alternate1:{defaultImage:We},alternate2:{defaultImage:We}},{id:"Champagne",productTitle:"Champagne Limestone Rigid Core Luxury Vinyl",productCategory:"Floor and Decor",price:"$2.19/sqft",description:"Default",mainIm:{defaultImage:We},alternate1:{defaultImage:We},alternate2:{defaultImage:We}},{id:"Luxury",productTitle:"Harvest Grove Rigid Luxury Vinyl",productCategory:"Floor and Decor",price:"$2.19/sqft",description:"Default",mainIm:{defaultImage:We},alternate1:{defaultImage:We},alternate2:{defaultImage:We}},{id:"Harvest",productTitle:"Inverness Tavertine Vinyl",productCategory:"Floor and Decor",price:"$2.19/sqft",description:"Default",mainIm:{defaultImage:We},alternate1:{defaultImage:We},alternate2:{defaultImage:We}},{id:"Champagne2",productTitle:"Champagne Limestone Rigid Core luxiry Vinyl",productCategory:"Floor and Decor",price:"$2.19/sqft",description:"Default",mainIm:{defaultImage:We},alternate1:{defaultImage:We},alternate2:{defaultImage:We}}].find(r=>r.id===n);return t?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"main-content",children:[y.jsxs("div",{id:"left",children:[y.jsx("div",{className:"main-image",children:y.jsx("img",{src:t.mainIm,alt:""})}),y.jsxs("div",{className:"thumbnails",children:[y.jsx("img",{src:t.mainIm,alt:""}),y.jsx("img",{src:t.alternate1,alt:""}),y.jsx("img",{src:t.alternate2,alt:""})]})]}),y.jsxs("div",{id:"right",children:[y.jsxs("div",{className:"title-section",children:[y.jsxs("div",{className:"title",children:[y.jsx("p",{id:"main",children:t.productTitle}),y.jsx("p",{id:"sub",children:t.productCategory})]}),y.jsxs("div",{className:"price-link",children:[y.jsx("div",{className:"title-left",children:y.jsx("p",{children:"$"})}),y.jsx("div",{className:"title-right",children:y.jsx("a",{href:"",children:"See in my room"})})]}),y.jsx("a",{href:"",children:"View specifications"})]}),y.jsxs("div",{className:"description",children:[y.jsx("p",{children:t.description}),y.jsxs("ul",{children:[y.jsx("li",{children:"Install up to 6,400 square feetNo need for transition molding."}),y.jsx("li",{children:"You can install it right awayPre-installation acclimation is unnecessary."}),y.jsx("li",{children:"Attached foam underlayment makes for a quieter, warmer floor."}),y.jsx("li",{children:"Can be installed on, above, and below grade-level (perfect for basements!) and over most existing hard-surface flooring, including slightly irregular subfloors."}),y.jsx("li",{children:"This DuraLux Performance product is backed by a lifetime res./ 15 yr comm. warranty."}),y.jsx("li",{children:"It is recommended to use Sentinel Protect Plus Underlayment for optimal sound absorption and moisture resistance or a standard vapor barrier like 6mil PE Film."})]}),y.jsx("a",{href:"",children:"Product Details"}),y.jsx("a",{href:"",children:"Reviews"})]})]})]}),y.jsxs("div",{className:"secondary-content",children:[y.jsx("div",{className:"suggestedProduct",children:y.jsxs("div",{className:"container",children:[y.jsx("img",{src:We,alt:"{title}"}),y.jsxs("div",{className:"prod-title",children:["{","title","}"]}),y.jsxs("p",{children:["{","description","}"]}),y.jsxs("p",{children:["{","price","}"]})]})}),y.jsx("div",{className:"suggestedProduct",children:y.jsxs("div",{className:"container",children:[y.jsx("img",{src:We,alt:"{title}"}),y.jsxs("div",{className:"prod-title",children:["{","title","}"]}),y.jsxs("p",{children:["{","description","}"]}),y.jsxs("p",{children:["{","price","}"]})]})}),y.jsx("div",{className:"suggestedProduct",children:y.jsxs("div",{className:"container",children:[y.jsx("img",{src:We,alt:"{title}"}),y.jsxs("div",{className:"prod-title",children:["{","title","}"]}),y.jsxs("p",{children:["{","description","}"]}),y.jsxs("p",{children:["{","price","}"]})]})})]})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"main-content",children:[y.jsxs("div",{id:"left",children:[y.jsx("div",{className:"main-image",children:y.jsx("img",{src:We,alt:""})}),y.jsxs("div",{className:"thumbnails",children:[y.jsx("img",{src:We,alt:""}),y.jsx("img",{src:We,alt:""}),y.jsx("img",{src:We,alt:""})]})]}),y.jsxs("div",{id:"right",children:[y.jsxs("div",{className:"title-section",children:[y.jsxs("div",{className:"title",children:[y.jsx("p",{id:"main",children:"Deafult Title"}),y.jsx("p",{id:"sub",children:"Default Category"})]}),y.jsxs("div",{className:"price-link",children:[y.jsx("div",{className:"title-left",children:y.jsx("p",{children:"$"})}),y.jsx("div",{className:"title-right",children:y.jsx("a",{href:"",children:"See in my room"})})]}),y.jsx("a",{href:"",children:"View specifications"})]}),y.jsxs("div",{className:"description",children:[y.jsx("p",{children:"Default Description"}),y.jsx("a",{href:"",children:"Product Details"}),y.jsx("a",{href:"",children:"Reviews"})]})]})]}),y.jsxs("div",{className:"secondary-content",children:[y.jsx("div",{className:"suggestedProduct",children:y.jsxs("div",{className:"container",children:[y.jsx("img",{src:We,alt:"{title}"}),y.jsxs("div",{className:"prod-title",children:["{","title","}"]}),y.jsxs("p",{children:["{","description","}"]}),y.jsxs("p",{children:["{","price","}"]})]})}),y.jsx("div",{className:"suggestedProduct",children:y.jsxs("div",{className:"container",children:[y.jsx("img",{src:We,alt:"{title}"}),y.jsxs("div",{className:"prod-title",children:["{","title","}"]}),y.jsxs("p",{children:["{","description","}"]}),y.jsxs("p",{children:["{","price","}"]})]})}),y.jsx("div",{className:"suggestedProduct",children:y.jsxs("div",{className:"container",children:[y.jsx("img",{src:We,alt:"{title}"}),y.jsxs("div",{className:"prod-title",children:["{","title","}"]}),y.jsxs("p",{children:["{","description","}"]}),y.jsxs("p",{children:["{","price","}"]})]})})]})]})};z1.defaultProps={productTitle:"Default title",productCategory:"Default category",price:"Price not available",description:"No description available",mainIm:{defaultImage:We},alternate1:{defaultImage:We},alternate2:{defaultImage:We},suggested1:{defaultImage:We},suggested2:{defaultImage:We},suggested3:{defaultImage:We}};function A5(){return y.jsx(y.Fragment,{children:y.jsxs("div",{className:"product-detail-page",children:[y.jsx("meta",{charSet:"UTF-8"}),y.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),y.jsx("title",{children:"product detail"}),y.jsx(b_,{}),y.jsx(z1,{}),y.jsx(y_,{})]})})}function P5(n,e){return I.Children.toArray(n).some(t=>I.isValidElement(t)&&t.type===e)}function b5({as:n,bsPrefix:e,className:t,...r}){e=Ot(e,"col");const s=y6(),o=v6(),l=[],c=[];return s.forEach(h=>{const f=r[h];delete r[h];let g,_,E;typeof f=="object"&&f!=null?{span:g,offset:_,order:E}=f:g=f;const C=h!==o?`-${h}`:"";g&&l.push(g===!0?`${e}${C}`:`${e}${C}-${g}`),E!=null&&c.push(`order${C}-${E}`),_!=null&&c.push(`offset${C}-${_}`)}),[{...r,className:Tt(t,...l,...c)},{as:n,bsPrefix:e,spans:l}]}const W1=I.forwardRef((n,e)=>{const[{className:t,...r},{as:s="div",bsPrefix:o,spans:l}]=b5(n);return y.jsx(s,{...r,ref:e,className:Tt(t,!l.length&&o)})});W1.displayName="Col";const k5={type:pl.string,tooltip:pl.bool,as:pl.elementType},Tp=I.forwardRef(({as:n="div",className:e,type:t="valid",tooltip:r=!1,...s},o)=>y.jsx(n,{...s,ref:o,className:Tt(e,`${t}-${r?"tooltip":"feedback"}`)}));Tp.displayName="Feedback";Tp.propTypes=k5;const Js=I.createContext({}),j_=I.forwardRef(({id:n,bsPrefix:e,className:t,type:r="checkbox",isValid:s=!1,isInvalid:o=!1,as:l="input",...c},h)=>{const{controlId:f}=I.useContext(Js);return e=Ot(e,"form-check-input"),y.jsx(l,{...c,ref:h,type:r,id:n||f,className:Tt(t,e,s&&"is-valid",o&&"is-invalid")})});j_.displayName="FormCheckInput";const bf=I.forwardRef(({bsPrefix:n,className:e,htmlFor:t,...r},s)=>{const{controlId:o}=I.useContext(Js);return n=Ot(n,"form-check-label"),y.jsx("label",{...r,ref:s,htmlFor:t||o,className:Tt(e,n)})});bf.displayName="FormCheckLabel";const H1=I.forwardRef(({id:n,bsPrefix:e,bsSwitchPrefix:t,inline:r=!1,reverse:s=!1,disabled:o=!1,isValid:l=!1,isInvalid:c=!1,feedbackTooltip:h=!1,feedback:f,feedbackType:g,className:_,style:E,title:C="",type:R="checkbox",label:A,children:S,as:V="input",...U},$)=>{e=Ot(e,"form-check"),t=Ot(t,"form-switch");const{controlId:W}=I.useContext(Js),Y=I.useMemo(()=>({controlId:n||W}),[W,n]),X=!S&&A!=null&&A!==!1||P5(S,bf),N=y.jsx(j_,{...U,type:R==="switch"?"checkbox":R,ref:$,isValid:l,isInvalid:c,disabled:o,as:V});return y.jsx(Js.Provider,{value:Y,children:y.jsx("div",{style:E,className:Tt(_,X&&e,r&&`${e}-inline`,s&&`${e}-reverse`,R==="switch"&&t),children:S||y.jsxs(y.Fragment,{children:[N,X&&y.jsx(bf,{title:C,children:A}),f&&y.jsx(Tp,{type:g,tooltip:h,children:f})]})})})});H1.displayName="FormCheck";const kf=Object.assign(H1,{Input:j_,Label:bf}),q1=I.forwardRef(({bsPrefix:n,type:e,size:t,htmlSize:r,id:s,className:o,isValid:l=!1,isInvalid:c=!1,plaintext:h,readOnly:f,as:g="input",..._},E)=>{const{controlId:C}=I.useContext(Js);return n=Ot(n,"form-control"),y.jsx(g,{..._,type:e,size:r,ref:E,readOnly:f,id:s||C,className:Tt(o,h?`${n}-plaintext`:n,t&&`${n}-${t}`,e==="color"&&`${n}-color`,l&&"is-valid",c&&"is-invalid")})});q1.displayName="FormControl";const N5=Object.assign(q1,{Feedback:Tp}),G1=I.forwardRef(({className:n,bsPrefix:e,as:t="div",...r},s)=>(e=Ot(e,"form-floating"),y.jsx(t,{ref:s,className:Tt(n,e),...r})));G1.displayName="FormFloating";const V_=I.forwardRef(({controlId:n,as:e="div",...t},r)=>{const s=I.useMemo(()=>({controlId:n}),[n]);return y.jsx(Js.Provider,{value:s,children:y.jsx(e,{...t,ref:r})})});V_.displayName="FormGroup";const K1=I.forwardRef(({as:n="label",bsPrefix:e,column:t=!1,visuallyHidden:r=!1,className:s,htmlFor:o,...l},c)=>{const{controlId:h}=I.useContext(Js);e=Ot(e,"form-label");let f="col-form-label";typeof t=="string"&&(f=`${f} ${f}-${t}`);const g=Tt(s,e,r&&"visually-hidden",t&&f);return o=o||h,t?y.jsx(W1,{ref:c,as:"label",className:g,htmlFor:o,...l}):y.jsx(n,{ref:c,className:g,htmlFor:o,...l})});K1.displayName="FormLabel";const Q1=I.forwardRef(({bsPrefix:n,className:e,id:t,...r},s)=>{const{controlId:o}=I.useContext(Js);return n=Ot(n,"form-range"),y.jsx("input",{...r,type:"range",ref:s,className:Tt(e,n),id:t||o})});Q1.displayName="FormRange";const Y1=I.forwardRef(({bsPrefix:n,size:e,htmlSize:t,className:r,isValid:s=!1,isInvalid:o=!1,id:l,...c},h)=>{const{controlId:f}=I.useContext(Js);return n=Ot(n,"form-select"),y.jsx("select",{...c,size:t,ref:h,className:Tt(r,n,e&&`${n}-${e}`,s&&"is-valid",o&&"is-invalid"),id:l||f})});Y1.displayName="FormSelect";const X1=I.forwardRef(({bsPrefix:n,className:e,as:t="small",muted:r,...s},o)=>(n=Ot(n,"form-text"),y.jsx(t,{...s,ref:o,className:Tt(e,n,r&&"text-muted")})));X1.displayName="FormText";const J1=I.forwardRef((n,e)=>y.jsx(kf,{...n,ref:e,type:"switch"}));J1.displayName="Switch";const D5=Object.assign(J1,{Input:kf.Input,Label:kf.Label}),Z1=I.forwardRef(({bsPrefix:n,className:e,children:t,controlId:r,label:s,...o},l)=>(n=Ot(n,"form-floating"),y.jsxs(V_,{ref:l,className:Tt(e,n),controlId:r,...o,children:[t,y.jsx("label",{htmlFor:r,children:s})]})));Z1.displayName="FloatingLabel";const O5={_ref:pl.any,validated:pl.bool,as:pl.elementType},F_=I.forwardRef(({className:n,validated:e,as:t="form",...r},s)=>y.jsx(t,{...r,ref:s,className:Tt(n,e&&"was-validated")}));F_.displayName="Form";F_.propTypes=O5;const qn=Object.assign(F_,{Group:V_,Control:N5,Floating:G1,Check:kf,Switch:D5,Label:K1,Text:X1,Range:Q1,Select:Y1,FloatingLabel:Z1}),L5=()=>{const n=jn(),e=async()=>{await v_(),n("/")};return y.jsxs("div",{className:"nav flex justify-between items-center p-4 border-b",children:[y.jsx(wt,{to:"/",className:"text-2xl font-bold",children:y.jsx("div",{className:"logo",children:"URENO"})}),y.jsxs("div",{className:"flex items-center gap-4 ml-auto",children:[y.jsxs(wt,{to:"/settings",className:"flex items-center gap-2 text-gray-600 hover:text-black",children:[y.jsx(C9,{className:"w-5 h-5"})," Settings"]}),y.jsxs(wt,{to:"/notifications",className:"flex items-center gap-2 text-gray-600 hover:text-black",children:[y.jsx(v9,{className:"w-5 h-5"})," Notifications"]}),y.jsxs(wt,{to:"/logout",onClick:e,className:"flex items-center gap-2 text-red-500 hover:text-red-700",children:[y.jsx(T9,{className:"w-5 h-5"})," Log Out"]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP="firebasestorage.googleapis.com",tP="storageBucket",M5=2*60*1e3,j5=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It extends ds{constructor(e,t,r=0){super(Ng(e),`Firebase Storage: ${t} (${Ng(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,It.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ng(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Et;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Et||(Et={}));function Ng(n){return"storage/"+n}function U_(){const n="An unknown error occurred, please check the error payload for server response.";return new It(Et.UNKNOWN,n)}function V5(n){return new It(Et.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function F5(n){return new It(Et.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function U5(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new It(Et.UNAUTHENTICATED,n)}function $5(){return new It(Et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function B5(n){return new It(Et.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function z5(){return new It(Et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function W5(){return new It(Et.CANCELED,"User canceled the upload/download.")}function H5(n){return new It(Et.INVALID_URL,"Invalid URL '"+n+"'.")}function q5(n){return new It(Et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function G5(){return new It(Et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+tP+"' property when initializing the app?")}function K5(){return new It(Et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Q5(){return new It(Et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Y5(n){return new It(Et.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function jy(n){return new It(Et.INVALID_ARGUMENT,n)}function nP(){return new It(Et.APP_DELETED,"The Firebase app was deleted.")}function X5(n){return new It(Et.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hc(n,e){return new It(Et.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Hu(n){throw new It(Et.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Qn.makeFromUrl(e,t)}catch{return new Qn(e,"")}if(r.path==="")return r;throw q5(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(W){W.path.charAt(W.path.length-1)==="/"&&(W.path_=W.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+s+l,"i"),h={bucket:1,path:3};function f(W){W.path_=decodeURIComponent(W.path)}const g="v[A-Za-z0-9_]+",_=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",C=new RegExp(`^https?://${_}/${g}/b/${s}/o${E}`,"i"),R={bucket:1,path:3},A=t===eP?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",V=new RegExp(`^https?://${A}/${s}/${S}`,"i"),$=[{regex:c,indices:h,postModify:o},{regex:C,indices:R,postModify:f},{regex:V,indices:{bucket:1,path:2},postModify:f}];for(let W=0;W<$.length;W++){const Y=$[W],X=Y.regex.exec(e);if(X){const N=X[Y.indices.bucket];let b=X[Y.indices.path];b||(b=""),r=new Qn(N,b),Y.postModify(r);break}}if(r==null)throw H5(e);return r}}class J5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z5(n,e,t){let r=1,s=null,o=null,l=!1,c=0;function h(){return c===2}let f=!1;function g(...S){f||(f=!0,e.apply(null,S))}function _(S){s=setTimeout(()=>{s=null,n(C,h())},S)}function E(){o&&clearTimeout(o)}function C(S,...V){if(f){E();return}if(S){E(),g.call(null,S,...V);return}if(h()||l){E(),g.call(null,S,...V);return}r<64&&(r*=2);let $;c===1?(c=2,$=0):$=(r+Math.random())*1e3,_($)}let R=!1;function A(S){R||(R=!0,E(),!f&&(s!==null?(S||(c=2),clearTimeout(s),_(0)):S||(c=1)))}return _(0),o=setTimeout(()=>{l=!0,A(!0)},t),A}function e8(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t8(n){return n!==void 0}function n8(n){return typeof n=="object"&&!Array.isArray(n)}function $_(n){return typeof n=="string"||n instanceof String}function oC(n){return B_()&&n instanceof Blob}function B_(){return typeof Blob<"u"}function aC(n,e,t,r){if(r<e)throw jy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw jy(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function rP(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Go;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Go||(Go={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e,t,r,s,o,l,c,h,f,g,_,E=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=_,this.retry=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,R)=>{this.resolve_=C,this.reject_=R,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new bh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const h=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===Go.NO_ERROR,h=o.getStatus();if(!c||r8(h,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===Go.ABORT;r(!1,new bh(!1,null,g));return}const f=this.successCodes_.indexOf(h)!==-1;r(!0,new bh(f,o))})},t=(r,s)=>{const o=this.resolve_,l=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(c,c.getResponse());t8(h)?o(h):o()}catch(h){l(h)}else if(c!==null){const h=U_();h.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,h)):l(h)}else if(s.canceled){const h=this.appDelete_?nP():W5();l(h)}else{const h=z5();l(h)}};this.canceled_?t(!1,new bh(!1,null,!0)):this.backoffId_=Z5(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&e8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class bh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function i8(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function o8(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function a8(n,e){e&&(n["X-Firebase-GMPID"]=e)}function l8(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function u8(n,e,t,r,s,o,l=!0){const c=rP(n.urlParams),h=n.url+c,f=Object.assign({},n.headers);return a8(f,e),i8(f,t),o8(f,o),l8(f,r),new s8(h,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function d8(...n){const e=c8();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(B_())return new Blob(n);throw new It(Et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function h8(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f8(n){if(typeof atob>"u")throw Y5("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Dg{constructor(e,t){this.data=e,this.contentType=t||null}}function p8(n,e){switch(n){case rs.RAW:return new Dg(sP(e));case rs.BASE64:case rs.BASE64URL:return new Dg(iP(n,e));case rs.DATA_URL:return new Dg(g8(e),y8(e))}throw U_()}function sP(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=n.charCodeAt(++t);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function m8(n){let e;try{e=decodeURIComponent(n)}catch{throw hc(rs.DATA_URL,"Malformed data URL.")}return sP(e)}function iP(n,e){switch(n){case rs.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw hc(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case rs.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw hc(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=f8(e)}catch(s){throw s.message.includes("polyfill")?s:hc(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class oP{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw hc(rs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=v8(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function g8(n){const e=new oP(n);return e.base64?iP(rs.BASE64,e.rest):m8(e.rest)}function y8(n){return new oP(n).contentType}function v8(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,t){let r=0,s="";oC(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(oC(this.data_)){const r=this.data_,s=h8(r,e,t);return s===null?null:new Vi(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Vi(r,!0)}}static getBlob(...e){if(B_()){const t=e.map(r=>r instanceof Vi?r.data_:r);return new Vi(d8.apply(null,t))}else{const t=e.map(l=>$_(l)?p8(rs.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let c=0;c<l.length;c++)s[o++]=l[c]}),new Vi(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(n){let e;try{e=JSON.parse(n)}catch{return null}return n8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _8(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function w8(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function lP(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E8(n,e){return e}class wn{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||E8}}let kh=null;function T8(n){return!$_(n)||n.length<2?n:lP(n)}function uP(){if(kh)return kh;const n=[];n.push(new wn("bucket")),n.push(new wn("generation")),n.push(new wn("metageneration")),n.push(new wn("name","fullPath",!0));function e(o,l){return T8(l)}const t=new wn("name");t.xform=e,n.push(t);function r(o,l){return l!==void 0?Number(l):l}const s=new wn("size");return s.xform=r,n.push(s),n.push(new wn("timeCreated")),n.push(new wn("updated")),n.push(new wn("md5Hash",null,!0)),n.push(new wn("cacheControl",null,!0)),n.push(new wn("contentDisposition",null,!0)),n.push(new wn("contentEncoding",null,!0)),n.push(new wn("contentLanguage",null,!0)),n.push(new wn("contentType",null,!0)),n.push(new wn("metadata","customMetadata",!0)),kh=n,kh}function I8(n,e){function t(){const r=n.bucket,s=n.fullPath,o=new Qn(r,s);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function C8(n,e,t){const r={};r.type="file";const s=t.length;for(let o=0;o<s;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return I8(r,n),r}function cP(n,e,t){const r=aP(e);return r===null?null:C8(n,r,t)}function x8(n,e,t,r){const s=aP(e);if(s===null||!$_(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(f=>{const g=n.bucket,_=n.fullPath,E="/b/"+l(g)+"/o/"+l(_),C=z_(E,t,r),R=rP({alt:"media",token:f});return C+R})[0]}function S8(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class dP{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(n){if(!n)throw U_()}function R8(n,e){function t(r,s){const o=cP(n,s,e);return hP(o!==null),o}return t}function A8(n,e){function t(r,s){const o=cP(n,s,e);return hP(o!==null),x8(o,s,n.host,n._protocol)}return t}function fP(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=$5():s=U5():t.getStatus()===402?s=F5(n.bucket):t.getStatus()===403?s=B5(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function P8(n){const e=fP(n);function t(r,s){let o=e(r,s);return r.getStatus()===404&&(o=V5(n.path)),o.serverResponse=s.serverResponse,o}return t}function b8(n,e,t){const r=e.fullServerUrl(),s=z_(r,n.host,n._protocol),o="GET",l=n.maxOperationRetryTime,c=new dP(s,o,A8(n,t),l);return c.errorHandler=P8(e),c}function k8(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function N8(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=k8(null,e)),r}function D8(n,e,t,r,s){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let $="";for(let W=0;W<2;W++)$=$+Math.random().toString().slice(2);return $}const h=c();l["Content-Type"]="multipart/related; boundary="+h;const f=N8(e,r,s),g=S8(f,t),_="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+h+`\r
Content-Type: `+f.contentType+`\r
\r
`,E=`\r
--`+h+"--",C=Vi.getBlob(_,r,E);if(C===null)throw K5();const R={name:f.fullPath},A=z_(o,n.host,n._protocol),S="POST",V=n.maxUploadRetryTime,U=new dP(A,S,R8(n,t),V);return U.urlParams=R,U.headers=l,U.body=C.uploadData(),U.errorHandler=fP(e),U}class O8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Go.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Go.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Go.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw Hu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Hu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Hu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Hu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Hu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class L8 extends O8{initXhr(){this.xhr_.responseType="text"}}function pP(){return new L8}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,t){this._service=e,t instanceof Qn?this._location=t:this._location=Qn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ra(e,t)}get root(){const e=new Qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lP(this._location.path)}get storage(){return this._service}get parent(){const e=_8(this._location.path);if(e===null)return null;const t=new Qn(this._location.bucket,e);return new ra(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw X5(e)}}function M8(n,e,t){n._throwIfRoot("uploadBytes");const r=D8(n.storage,n._location,uP(),new Vi(e,!0),t);return n.storage.makeRequestWithTokens(r,pP).then(s=>({metadata:s,ref:n}))}function j8(n){n._throwIfRoot("getDownloadURL");const e=b8(n.storage,n._location,uP());return n.storage.makeRequestWithTokens(e,pP).then(t=>{if(t===null)throw Q5();return t})}function V8(n,e){const t=w8(n._location.path,e),r=new Qn(n._location.bucket,t);return new ra(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F8(n){return/^[A-Za-z]+:\/\//.test(n)}function U8(n,e){return new ra(n,e)}function mP(n,e){if(n instanceof W_){const t=n;if(t._bucket==null)throw G5();const r=new ra(t,t._bucket);return e!=null?mP(r,e):r}else return e!==void 0?V8(n,e):n}function $8(n,e){if(e&&F8(e)){if(n instanceof W_)return U8(n,e);throw jy("To use ref(service, url), the first argument must be a Storage instance.")}else return mP(n,e)}function lC(n,e){const t=e==null?void 0:e[tP];return t==null?null:Qn.makeFromBucketSpec(t,n)}function B8(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:Xy(s,n.app.options.projectId))}class W_{constructor(e,t,r,s,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._bucket=null,this._host=eP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=M5,this._maxUploadRetryTime=j5,this._requests=new Set,s!=null?this._bucket=Qn.makeFromBucketSpec(s,this._host):this._bucket=lC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Qn.makeFromBucketSpec(this._url,e):this._bucket=lC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){aC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){aC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ra(this,e)}_makeRequest(e,t,r,s,o=!0){if(this._deleted)return new J5(nP());{const l=u8(e,this._appId,r,s,t,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const uC="@firebase/storage",cC="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="storage";function z8(n,e,t){return n=st(n),M8(n,e,t)}function W8(n){return n=st(n),j8(n)}function H8(n,e){return n=st(n),$8(n,e)}function q8(n=jf(),e){n=st(n);const r=Lc(n,gP).getImmediate({identifier:e}),s=Qy("storage");return s&&G8(r,...s),r}function G8(n,e,t,r={}){B8(n,e,t,r)}function K8(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new W_(t,r,s,e,so)}function Q8(){Ki(new zs(gP,K8,"PUBLIC").setMultipleInstances(!0)),dr(uC,cC,""),dr(uC,cC,"esm2017")}Q8();function Y8(){const{user:n,profile:e}=yp(),t=jn(),[r,s]=I.useState({displayName:"",email:"",phone:"",profilePicture:null});if(I.useEffect(()=>{e&&s({displayName:n.displayName||"",email:n.email||"",phone:e.phone||"",profilePicture:null})},[e,n]),!n||!e)return y.jsx("p",{children:"Loading profile data..."});const o=async l=>{l.preventDefault();const c=Bf(),h=Wc(),f=q8(),g=c.currentUser;if(!g)return;const _={};try{if(r.displayName&&r.displayName!==g.displayName&&(await qg(g,{displayName:r.displayName}),_.displayName=r.displayName),r.email&&r.email!==g.email&&(await jD(g,r.email),_.email=r.email),r.phone&&(_.phone=r.phone),r.profilePicture){const E=H8(f,`profilePictures/${g.uid}`);await z8(E,r.profilePicture);const C=await W8(E);await qg(g,{photoURL:C}),_.photoURL=C}if(Object.keys(_).length>0){const E=Yn(h,"users",g.uid);await Sc(E,_)}alert("profile updated succesfully"),t("/ProfileDashboard")}catch(E){console.error("Error updating profile:",E),alert("Failed to update profile. Check the console for details.")}};return y.jsx(y.Fragment,{children:y.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[y.jsx("h2",{className:"text-2xl font-bold mb-4",children:" Edit Profile"}),y.jsxs(qn,{children:[y.jsxs(qn.Group,{controlId:"displayName",className:"mb-3",children:[y.jsx(qn.Label,{children:"Display Name"}),y.jsx(qn.Control,{type:"text",value:r.displayName,onChange:l=>s({...r,displayName:l.target.value})})]}),y.jsxs(qn.Group,{controlId:"email",className:"mb-3",children:[y.jsx(qn.Label,{children:"email"}),y.jsx(qn.Control,{type:"email",value:r.email,onChange:l=>s({...r,email:l.target.value})})]}),y.jsxs(qn.Group,{controlId:"phone",className:"mb-3",children:[y.jsx(qn.Label,{children:"Phone Number"}),y.jsx(qn.Control,{type:"text",value:r.phone,onChange:l=>s({...r,phone:l.target.value})})]}),y.jsxs(qn.Group,{controlId:"profilePicture",className:"mb-3",children:[y.jsx(qn.Label,{children:"Profile Picture"}),y.jsx(qn.Control,{type:"file",onChange:l=>s({...r,profilePicture:l.target.files[0]})})]}),y.jsxs("div",{className:"flex gap-4",children:[y.jsx(Sf,{variant:"primary",onClick:o,type:"submit",children:"Save Changes"}),y.jsx(Sf,{variant:"secondary",onClick:()=>t("/ProfileDashboard"),children:"Cancel"})]})]})]})})}function X8(){const{currentUser:n}=fs(),[e,t]=I.useState([]),[r,s]=I.useState(!0);return I.useEffect(()=>{(async()=>{if(!n)return;const l=dl(jr,"savedMaterials"),c=rc(l,Bo("userId","==",n.uid));try{const f=(await Os(c)).docs.map(g=>({id:g.id,...g.data()}));t(f)}catch(h){console.error("Error fetching saved materials:",h)}finally{s(!1)}})()},[n]),r?y.jsx("div",{children:"Loading saved materials..."}):y.jsxs("div",{className:"p-4 max-w-6xl mx-auto",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(wt,{to:"/ProfileDashboard",className:"text-blue-500 text-3xl font-bold hover:scale-110 hover:text-blue-700 transition-all duration-200 flex items-center justify-center",children:"<"}),y.jsx("h1",{className:"text-2xl font-bold",children:"Saved Items"})]}),e.length===0?y.jsx("p",{className:"text-gray-500",children:"You don't have any saved materials yet."}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(o=>y.jsxs("div",{className:"border p-4 rounded shadow",children:[o.materialImageURL&&y.jsx("img",{src:o.materialImageURL,alt:o.materialName,className:"w-full h-32 object-cover rounded mb-2"}),y.jsx("h2",{className:"text-xl font-semibold",children:o.materialName}),y.jsx("p",{className:"text-gray-600",children:o.materialType})]},o.id))})]})}const J8="_loginWrapper_1063v_3",Z8="_container_1063v_11",e$="_form_1063v_32",t$="_formBox_1063v_34",n$="_active_1063v_49",r$="_register_1063v_51",s$="_inputBox_1063v_54",i$="_forgotLink_1063v_84",o$="_btn_1063v_90",a$="_socialIcons_1063v_103",l$="_toggleBox_1063v_118",u$="_togglePanel_1063v_138",c$="_toggleLeft_1063v_152",d$="_toggleRight_1063v_161",Ze={loginWrapper:J8,container:Z8,form:e$,formBox:t$,active:n$,register:r$,inputBox:s$,forgotLink:i$,btn:o$,socialIcons:a$,toggleBox:l$,togglePanel:u$,toggleLeft:c$,toggleRight:d$},h$=()=>{const[n,e]=I.useState(!1),t=()=>{e(!0)},r=()=>{e(!1)};return y.jsx("div",{className:Ze.loginWrapper,children:y.jsxs("div",{className:`${Ze.container} ${n?Ze.active:""}`,children:[y.jsx("div",{className:`${Ze.formBox} ${Ze.login}`,children:y.jsxs("form",{className:Ze.form,action:"#",children:[y.jsx("h1",{children:"Login"}),y.jsxs("div",{className:Ze.inputBox,children:[y.jsx("input",{type:"text",placeholder:"Email",required:!0}),y.jsx("i",{className:"bx bxs-user"})]}),y.jsxs("div",{className:Ze.inputBox,children:[y.jsx("input",{type:"password",placeholder:"Password",required:!0}),y.jsx("i",{className:"bx bxs-lock-alt"})]}),y.jsx("div",{className:Ze.forgotLink,children:y.jsx("a",{href:"#",children:"Forgot Password?"})}),y.jsx("button",{type:"submit",className:Ze.btn,children:"Login"}),y.jsx("p",{children:"or login with social platforms"}),y.jsxs("div",{className:Ze.socialIcons,children:[y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-google"})}),y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-facebook"})}),y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-github"})}),y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-linkedin"})})]})]})}),y.jsx("div",{className:`${Ze.formBox} ${Ze.register}`,children:y.jsxs("form",{className:Ze.form,action:"#",children:[y.jsx("h1",{children:"Registration"}),y.jsxs("div",{className:Ze.inputBox,children:[y.jsx("input",{type:"text",placeholder:"First Name",required:!0}),y.jsx("i",{className:"bx bxs-user"})]}),y.jsxs("div",{className:Ze.inputBox,children:[y.jsx("input",{type:"text",placeholder:"Last Name",required:!0}),y.jsx("i",{className:"bx bxs-user"})]}),y.jsxs("div",{className:Ze.inputBox,children:[y.jsx("input",{type:"email",placeholder:"Email",required:!0}),y.jsx("i",{className:"bx bxs-envelope"})]}),y.jsxs("div",{className:Ze.inputBox,children:[y.jsx("input",{type:"password",placeholder:"Password",required:!0}),y.jsx("i",{className:"bx bxs-lock-alt"})]}),y.jsxs("div",{className:Ze.inputBox,children:[y.jsx("input",{type:"password",placeholder:"Confirm Password",required:!0}),y.jsx("i",{className:"bx bxs-lock-alt"})]}),y.jsx("button",{type:"submit",className:Ze.btn,children:"Register"}),y.jsx("p",{children:"or register with social platforms"}),y.jsxs("div",{className:Ze.socialIcons,children:[y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-google"})}),y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-facebook"})}),y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-github"})}),y.jsx("a",{href:"#",children:y.jsx("i",{className:"bx bxl-linkedin"})})]})]})}),y.jsxs("div",{className:Ze.toggleBox,children:[y.jsxs("div",{className:`${Ze.togglePanel} ${Ze.toggleLeft}`,children:[y.jsx("h1",{children:"Hello, Welcome!"}),y.jsx("p",{children:"Don't have an account?"}),y.jsx("button",{className:Ze.btn,onClick:t,children:"Register"})]}),y.jsxs("div",{className:`${Ze.togglePanel} ${Ze.toggleRight}`,children:[y.jsx("h1",{children:"Welcome Back!"}),y.jsx("p",{children:"Already have an account?"}),y.jsx("button",{className:Ze.btn,onClick:r,children:"Login"})]})]})]})})},f$=()=>{const{user:n}=I.useContext(ua),e=jn(),t=async r=>{if(n!=null&&n.uid)try{await Sc(Yn(Cf,"users",n.uid),{role:r}),e(r==="contractor"?"/contractor-dashboard":"/")}catch(s){console.error("Failed to update role:",s)}};return y.jsxs("div",{className:"flex flex-col items-center justify-center h-screen px-4 text-center",children:[y.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Are you a contractor or homeowner?"}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[y.jsx("button",{onClick:()=>t("contractor"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded",children:"I'm a Contractor"}),y.jsx("button",{onClick:()=>t("customer"),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded",children:"I'm a Homeowner"})]})]})},p$=()=>{const{projectId:n}=By(),{currentUser:e}=fs(),t=jn(),[r,s]=I.useState(null),[o,l]=I.useState(!0);I.useEffect(()=>{(async()=>{if(!e)return;const f=Yn(jr,"users",e.uid,"projects",n),g=await xc(f);g.exists()&&s({id:g.id,...g.data()}),l(!1)})()},[e,n]);const c=async h=>{h.preventDefault();const f=Yn(jr,"users",e.uid,"projects",n);await Sc(f,{title:r.title,description:r.description}),t("/projects")};return o?y.jsx("div",{children:"Loading..."}):r?y.jsxs("div",{className:"max-w-xl mx-auto p-4",children:[y.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Edit Project"}),y.jsxs("form",{onSubmit:c,className:"flex flex-col gap-4",children:[y.jsx("input",{type:"text",value:r.title,onChange:h=>s(f=>({...f,title:h.target.value})),placeholder:"Project Title",className:"border p-2 rounded"}),y.jsx("textarea",{value:r.description,onChange:h=>s(f=>({...f,description:h.target.value})),placeholder:"Project Description",className:"border p-2 rounded"}),y.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Update Project"})]})]}):y.jsx("div",{children:"Project not found"})},m$=()=>{const{profile:n,user:e}=yp(),t=jn(),[r,s]=I.useState([]),[o,l]=I.useState(!0);return I.useEffect(()=>{(async()=>{try{if(!n||!e||n.role!=="contractor"){l(!1);return}console.log("Fetching projects for contractor:",e.uid);const h=rc(dl(jr,"projects"),Bo("status","==","submitted")),f=await Os(h);console.log("CollectionGroup query returned",f.docs.length,"projects");const g=f.docs.map(_=>({id:_.id,..._.data()}));s(g)}catch(h){console.error("Error fetching projects:",h.message),s([])}finally{l(!1)}})()},[n,e]),o?y.jsx("div",{children:"Loading..."}):y.jsxs("div",{className:"p-4 max-w-4xl mx-auto mt-20",children:[y.jsx("div",{className:"fixed top-0 left-0 w-full bg-white p-4 flex items-center pb-6 z-10",children:y.jsx(wt,{to:"/contractor-dashboard",children:y.jsx("div",{className:"logo",children:" return "})})}),y.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Available Projects"}),r.length===0?y.jsx("p",{children:"No Submitted projects found."}):y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:r.map(c=>{var h,f,g;return y.jsxs("div",{className:"border p-4 rounded shadow",children:[y.jsx("h2",{className:"text-xl font-semibold mb-2",children:c.title}),y.jsx("p",{className:"text-gray-600 mb-1",children:c.description}),y.jsxs("p",{className:"text-sm",children:["Material: ",(h=c.flooringOption)==null?void 0:h.title]}),y.jsxs("p",{className:"text-sm",children:["Area: ",(f=c.roomDimensions)==null?void 0:f.length," ft x ",(g=c.roomDimensions)==null?void 0:g.width," ft"]}),y.jsx("button",{className:"mt-3 px-4 py-2 bg-blue-600 text-white rounded",onClick:()=>t(`/projects/view/${c.id}`),children:"View Project"})]},c.id)})})]})},g$="/Ureno_webdesign/assets/default_pfp-bcxf0fN1.png",y$=()=>{const{profile:n}=I.useContext(ua),{currnetUser:e}=fs(),[t,r]=I.useState(0),[s,o]=I.useState(0),[l,c]=I.useState(0),[h,f]=I.useState(null);return I.useEffect(()=>{if(!(n!=null&&n.role)||n.role!=="contractor")return;(async()=>{try{console.log("Fetching project stats for contractor role:",n.role);const _=rc(dl(jr,"projects"),Bo("status","==","submitted")),E=rc(dl(jr,"projects"),Bo("status","==","inquired"),Bo("inquiredBy","array-contains",(e==null?void 0:e.uid)||"")),C=rc(dl(jr,"projects"),Bo("status","==","accepted"),Bo("inquiredBy","array-contains",(e==null?void 0:e.uid)||""));try{const[R,A,S]=await Promise.all([Os(_),Os(E),Os(C)]);console.log("Available projects count:",R.size),console.log("Inquired projects count:",A.size),console.log("Accepted projects count:",S.size),r(R.size),o(A.size),c(S.size),f(null)}catch(R){console.error("Error in queries:",R);try{const A=await Os(_);r(A.size),console.log("Available query succeeded:",A.size)}catch(A){console.error("Available query failed:",A),r(0)}try{const A=await Os(E);o(A.size),console.log("Inquired query succeeded:",A.size)}catch(A){console.error("Inquired query failed:",A),o(0)}try{const A=await Os(C);c(A.size),console.log("Accepted query succeeded:",A.size)}catch(A){console.error("Accepted query failed:",A),c(0)}}}catch(_){console.error("Error fetching project stats:",_),f(_.message),r(0),o(0),c(0)}})()},[e,n]),y.jsxs(y.Fragment,{children:[y.jsx(L5,{}),y.jsx("div",{className:"main-content max-w-6xl mx-auto p-6",children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-24",children:[y.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"p-4 border rounded shadow",children:[y.jsx("h3",{className:"text-lg font-semibold",children:"Projects"}),y.jsxs("p",{className:"text-gray-500",children:[t," Available, ",s," Inquired, ",l," Accepted"]}),y.jsx(wt,{to:"/available-projects",children:y.jsx("button",{className:"mt-2 text-blue-500 hover:underline",children:"Browse Projects"})})]}),y.jsxs("div",{className:"p-4 border rounded shadow",children:[y.jsx("h3",{className:"text-lg font-semibold",children:"Messages & Notifications"}),y.jsx("p",{className:"text-gray-500",children:"Check for project updates and messages"}),y.jsx(wt,{to:"/messages",children:y.jsx("button",{className:"mt-2 text-blue-500 hover:underline",children:"Go to Messages"})})]})]}),y.jsxs("div",{className:"flex flex-col items-center md:col-span-1 text-center",children:[y.jsx("h2",{className:"text-2xl font-bold mt-4",children:(n==null?void 0:n.username)||(n==null?void 0:n.firstName)||"Contractor"}),y.jsx("img",{src:g$,alt:"profile",className:"w-24 h-24 rounded-full my-2"}),y.jsx("p",{className:"text-gray-500",children:n==null?void 0:n.email}),y.jsx(wt,{to:"/edit-profile",children:y.jsx("button",{className:"mt-2 bg-blue-500 text-white px-4 py-2 rounded",children:"Edit Profile"})})]})]})})]})},v$=()=>{var g,_,E;const{projectId:n}=By();console.log("Project ID from URL:",n);const e=jn(),{profile:t,user:r}=yp(),[s,o]=I.useState(null),[l,c]=I.useState(!0);I.useEffect(()=>{(async()=>{if(!n){console.error("No project ID provided in URL"),c(!1);return}try{const R=Yn(jr,"projects",n),A=await xc(R);A.exists()&&o({projectId:A.projectId,...A.data()})}catch(R){console.error("Error fetching project:",R.message)}finally{c(!1)}})()},[n]);const h=async()=>{try{const C=Yn(jr,"projects",n);await Sc(C,{status:"inquiry",inquiredBy:[...s.inquiredBy||[],r.uid]}),e("/messages")}catch(C){console.error("Error inquiring about project:",C.message)}},f=async()=>{try{const C=Yn(jr,"projects",n);await Sc(C,{status:"in progress",contractorId:r.uid}),e("/contractor-dashboard")}catch(C){console.error("Error accepting project:",C.message)}};return l?y.jsx("div",{children:"Loading project..."}):s?y.jsxs("div",{className:"p-6 max-w-4xl mx-auto mt-24",children:[y.jsx("div",{className:"fixed top-0 left-0 w-full bg-white p-4 flex items-center pb-6 z-10",children:y.jsx(wt,{to:"/available-projects",children:y.jsx("div",{className:"logo",children:" return "})})}),y.jsx("h1",{className:"text-2xl font-bold mb-2",children:s.title}),y.jsx("p",{className:"text-gray-700 mb-4",children:s.description}),y.jsxs("p",{children:["Material: ",(g=s.flooringOption)==null?void 0:g.title]}),y.jsxs("p",{children:["Area: ",(_=s.roomDimensions)==null?void 0:_.length," x ",(E=s.roomDimensions)==null?void 0:E.width," ft"]}),(t==null?void 0:t.role)==="contractor"&&y.jsxs("div",{className:"mt-6 flex gap-4",children:[y.jsx("button",{onClick:h,className:"bg-yellow-500 text-white px-4 py-2 rounded",children:"Inquire"}),y.jsx("button",{onClick:f,className:"bg-green-600 text-white px-4 py-2 rounded",children:"Accept Project"})]})]}):y.jsx("div",{children:"Project not found."})};function ca(n,e=0){return e>0?I.lazy(()=>Promise.all([n(),new Promise(t=>setTimeout(t,e))]).then(([t])=>t)):I.lazy(async()=>{try{return await n()}catch(t){return console.error("Error loading component:",t),{}}})}const _$=()=>{const{user:n,profile:e,loading:t}=yp(),r=jn(),s=Zs();return I.useEffect(()=>{if(t)return;n&&e&&!e.role&&s.pathname!=="/choose-role"&&r("/choose-role");const o=["/contractor-dashboard","/available-projects"];n&&e&&e.role!=="contractor"&&o.includes(s.pathname)&&r("/"),console.log("RoleRedirectGate check:",{user:!!n,profile:!!e,role:e==null?void 0:e.role,path:s.pathname})},[n,e,t,s.pathname,r]),null},w$=ca(()=>sa(()=>import("./designer-DGC_iM1C.js"),[])),E$=ca(()=>sa(()=>import("./profile-BNGO4h0_.js"),[])),T$=ca(()=>sa(()=>import("./projectsDashboard-CRLzRc6i.js"),[])),I$=ca(()=>sa(()=>import("./CreateProject-Ci_zhlwr.js"),[])),C$=ca(()=>sa(()=>import("./MessagePage-BSlrTflK.js"),[])),x$=ca(()=>sa(()=>import("./AdminDashboard-1paxOnN7.js"),[])),S$=ca(()=>sa(()=>import("./ProductForm-BhYhb6Wr.js"),[])),dC=({children:n})=>{const{currentUser:e}=fs(),{profile:t}=I.useContext(ua);return!e||(t==null?void 0:t.role)!=="admin"?null:n},Og=({children:n})=>{const{currentUser:e}=fs(),{profile:t}=I.useContext(ua);return!e||(t==null?void 0:t.role)!=="contractor"?y.jsx(TC,{to:"/"}):n},R$=document.getElementById("root"),A$=P2.createRoot(R$);A$.render(y.jsx(I.StrictMode,{children:y.jsx(eF,{children:y.jsx(nF,{children:y.jsx(iF,{children:y.jsxs(zb,{basename:"/Ureno_webdesign/",children:[y.jsx(_$,{}),y.jsx(I.Suspense,{fallback:y.jsx(oF,{}),children:y.jsxs(_b,{children:[y.jsx(St,{path:"/",element:y.jsx(N6,{})}),y.jsx(St,{path:"/product-page",element:y.jsx(L6,{})}),y.jsx(St,{path:"/productDetail/:productId",element:y.jsx(A5,{})}),y.jsx(St,{path:"/designerPage",element:y.jsx(w$,{})}),y.jsx(St,{path:"/ProfileDashboard",element:y.jsx(E$,{})}),y.jsx(St,{path:"/edit-profile",element:y.jsx(Y8,{})}),y.jsx(St,{path:"/sign-in",element:y.jsx(x5,{})}),y.jsx(St,{path:"/Login",element:y.jsx(h$,{})}),y.jsx(St,{path:"/sign-up",element:y.jsx(R5,{})}),y.jsx(St,{path:"/admin",element:y.jsx(dC,{children:y.jsx(x$,{})})}),y.jsx(St,{path:"/admin/add",element:y.jsx(dC,{children:y.jsx(S$,{})})}),y.jsx(St,{path:"/projects",element:y.jsx(T$,{})}),y.jsx(St,{path:"/projects/new",element:y.jsx(I$,{})}),y.jsx(St,{path:"/savedItems",element:y.jsx(X8,{})}),y.jsx(St,{path:"/messages",element:y.jsx(C$,{})}),y.jsx(St,{path:"/choose-role",element:y.jsx(f$,{})}),y.jsx(St,{path:"/projects/edit/:projectId",element:y.jsx(p$,{})}),y.jsx(St,{path:"/contractor-dashboard",element:y.jsx(Og,{children:y.jsx(y$,{})})}),y.jsx(St,{path:"/available-projects",element:y.jsx(Og,{children:y.jsx(m$,{})})}),y.jsx(St,{path:"/projects/view/:projectId",element:y.jsx(Og,{children:y.jsx(v$,{})})})]})})]})})})})}));export{Sf as B,y_ as F,wt as L,b_ as N,L5 as P,ua as U,yp as a,M$ as b,Tt as c,g$ as d,dl as e,jr as f,Os as g,fs as h,Yn as i,y as j,D$ as k,jn as l,O$ as m,N$ as n,tR as o,Sc as p,rc as q,I as r,L$ as s,Wc as t,Ot as u,q8 as v,Bo as w,H8 as x,z8 as y,W8 as z};
