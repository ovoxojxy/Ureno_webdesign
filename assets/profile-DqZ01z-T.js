import{c as S,r as c,j as e,a as o,u as d,b as A,L as m,d as D,e as z,f as G,B as g,F as W,g as L,h as M,q as R,i as I,w as J}from"./index-zGRfcon2.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Q=S("Bell",K);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],Y=S("LogOut",X);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],P=S("Settings",Z),O=a=>c.forwardRef((s,t)=>e.jsx("div",{...s,ref:t,className:o(s.className,a)})),k=c.forwardRef(({className:a,bsPrefix:s,as:t="div",...r},l)=>(s=d(s,"card-body"),e.jsx(t,{ref:l,className:o(a,s),...r})));k.displayName="CardBody";const b=c.forwardRef(({className:a,bsPrefix:s,as:t="div",...r},l)=>(s=d(s,"card-footer"),e.jsx(t,{ref:l,className:o(a,s),...r})));b.displayName="CardFooter";const q=c.createContext(null);q.displayName="CardHeaderContext";const B=c.forwardRef(({bsPrefix:a,className:s,as:t="div",...r},l)=>{const n=d(a,"card-header"),i=c.useMemo(()=>({cardHeaderBsPrefix:n}),[n]);return e.jsx(q.Provider,{value:i,children:e.jsx(t,{ref:l,...r,className:o(s,n)})})});B.displayName="CardHeader";const F=c.forwardRef(({bsPrefix:a,className:s,variant:t,as:r="img",...l},n)=>{const i=d(a,"card-img");return e.jsx(r,{ref:n,className:o(t?`${i}-${t}`:i,s),...l})});F.displayName="CardImg";const H=c.forwardRef(({className:a,bsPrefix:s,as:t="div",...r},l)=>(s=d(s,"card-img-overlay"),e.jsx(t,{ref:l,className:o(a,s),...r})));H.displayName="CardImgOverlay";const _=c.forwardRef(({className:a,bsPrefix:s,as:t="a",...r},l)=>(s=d(s,"card-link"),e.jsx(t,{ref:l,className:o(a,s),...r})));_.displayName="CardLink";const ee=O("h6"),$=c.forwardRef(({className:a,bsPrefix:s,as:t=ee,...r},l)=>(s=d(s,"card-subtitle"),e.jsx(t,{ref:l,className:o(a,s),...r})));$.displayName="CardSubtitle";const E=c.forwardRef(({className:a,bsPrefix:s,as:t="p",...r},l)=>(s=d(s,"card-text"),e.jsx(t,{ref:l,className:o(a,s),...r})));E.displayName="CardText";const se=O("h5"),T=c.forwardRef(({className:a,bsPrefix:s,as:t=se,...r},l)=>(s=d(s,"card-title"),e.jsx(t,{ref:l,className:o(a,s),...r})));T.displayName="CardTitle";const U=c.forwardRef(({bsPrefix:a,className:s,bg:t,text:r,border:l,body:n=!1,children:i,as:j="div",...p},u)=>{const N=d(a,"card");return e.jsx(j,{ref:u,...p,className:o(s,N,t&&`bg-${t}`,r&&`text-${r}`,l&&`border-${l}`),children:n?e.jsx(k,{children:i}):i})});U.displayName="Card";const C=Object.assign(U,{Img:F,Title:T,Subtitle:$,Body:k,Link:_,Text:E,Header:B,Footer:b,ImgOverlay:H}),ae=()=>{const a=A(),s=async()=>{await D(),a("/")};return e.jsxs("div",{className:"nav flex justify-between items-center p-4 border-b",children:[e.jsx(m,{to:"/",className:"text-2xl font-bold",children:e.jsx("div",{className:"logo",children:"URENO"})}),e.jsxs("div",{className:"flex items-center gap-4 ml-auto",children:[e.jsxs(m,{to:"/settings",className:"flex items-center gap-2 text-gray-600 hover:text-black",children:[e.jsx(P,{className:"w-5 h-5"})," Settings"]}),e.jsxs(m,{to:"/notifications",className:"flex items-center gap-2 text-gray-600 hover:text-black",children:[e.jsx(Q,{className:"w-5 h-5"})," Notifications"]}),e.jsxs(m,{to:"/logout",onClick:s,className:"flex items-center gap-2 text-red-500 hover:text-red-700",children:[e.jsx(Y,{className:"w-5 h-5"})," Log Out"]})]})]})},te="/Ureno_webdesign/assets/default_pfp-bcxf0fN1.png";function le(){const{user:a,profile:s,loading:t}=z();G();const[r,l]=c.useState([]),[n,i]=c.useState(!0),[j,p]=c.useState([]),[u,N]=c.useState(!0);return c.useEffect(()=>{const x=async()=>{if(!a)return;const v=L(M,"users",a.uid,"projects"),y=R(v);try{const w=(await I(y)).docs.map(h=>({id:h.id,...h.data()}));l(w)}catch(f){console.error("Error fetching projects: ",f)}finally{i(!1)}},V=async()=>{if(!a)return;const v=L(M,"savedMaterials"),y=R(v,J("userId","==",a.uid));try{const w=(await I(y)).docs.map(h=>({id:h.id,...h.data()}));p(w)}catch{console.error("Error fetching saved materials:",errors)}finally{N(!1)}};x(),V()},[a]),t?e.jsx("p",{children:"Loading..."}):!a||!s?e.jsx("p",{children:"User not found nor not logged in."}):e.jsxs(e.Fragment,{children:[e.jsx("meta",{charSet:"UTF-8"}),e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),e.jsx("title",{children:"Profile"}),e.jsx(ae,{}),e.jsx("div",{className:"main-content max-w-6xl mx-auto p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-24 ",children:[e.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Projects"}),n?e.jsx("p",{className:"text-gray-500",children:"Loading project stats..."}):e.jsxs("p",{className:"text-gray-500",children:[r.filter(x=>x.status==="in progress").length," Ongoing, "," ",r.filter(x=>x.status==="completed").length," Completed"]}),e.jsx(m,{to:"/projects",children:e.jsx(g,{variant:"link",className:"mt-2",children:"View projects"})})]})}),e.jsx(C,{children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Saved Items"}),u?e.jsx("p",{className:"text-gray-500",children:"Loading saved materials..."}):e.jsxs("p",{className:"text-gray-500",children:[j.length," Materials Favorited"]}),e.jsx(m,{to:"/savedItems",children:e.jsx(g,{variant:"link",className:"mt-2",children:"View Favorites"})})]})}),e.jsx(C,{children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Messages & Notifications"}),e.jsx("p",{className:"text-gray-500",children:"2 Unread Messages"}),e.jsx(m,{to:"/messages",children:e.jsx(g,{variant:"link",className:"mt-2",children:"Go to Messages"})})]})})]}),e.jsxs("div",{className:"flex flex-col items-center md:col-span-1 text-center ",children:[e.jsx("h2",{className:"text-2xl font-bold mt-4",children:s.username||a.displayName}),e.jsx("img",{src:te}),e.jsx("p",{className:"text-gray-500",children:a.email}),e.jsx(m,{to:"/edit-profile",children:e.jsx(g,{className:"mt-2",children:"Edit Profile"})})]})]})}),e.jsx(W,{})]})}export{le as default};
