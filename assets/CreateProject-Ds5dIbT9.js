import{k as P,b as F,r as s,j as t,L,q as E,w as T,g as m,h as x,i as A,n as k,s as j}from"./index-BrTkbn2K.js";function W(){const{currentUser:a}=P(),n=F(),[l,b]=s.useState(""),[i,w]=s.useState(""),[o,v]=s.useState(null),[c,N]=s.useState(""),[u,S]=s.useState(""),[d,p]=s.useState(!1),[y,h]=s.useState(!1),[C,q]=s.useState([]);s.useEffect(()=>{(async()=>{const r=E(m(x,"products"),T("description","==","Flooring")),D=(await A(r)).docs.map(f=>({id:f.id,...f.data()}));q(D)})()},[]);const O=async e=>{if(e.preventDefault(),!!a){p(!0);try{const r=m(x,"users",a.uid,"projects");await k(r,{ownerId:a.uid,title:l,description:i,flooringOption:o,roomDimensions:{length:Number(c),width:Number(u)},createdAt:j(),updatedAt:j(),status:"in progress"}),h(!0),setTimeout(()=>{h(!1),n("/projects")},1500),n("/projects")}catch(r){console.error("Error creating project: ",r)}finally{p(!1)}}};return t.jsxs("div",{className:"p-4 max-w-2xl mx-auto mt-20 relative",children:[t.jsx("div",{className:"fixed top-0 left-0 w-full bg-white  p-4 flex items-center",children:t.jsx(L,{to:"/projects",children:t.jsx("div",{className:"logo",children:" return "})})}),t.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Create New Project"}),y&&t.jsx("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow",children:"Project created successfully!"}),t.jsxs("form",{onSubmit:O,className:"space-y-4",children:[t.jsx("input",{type:"text",placeholder:"Project Title",value:l,onChange:e=>b(e.target.value),required:!0,className:"w-full border p-2 rounded"}),t.jsx("textarea",{placeholder:"Project Description",value:i,onChange:e=>w(e.target.value),required:!0,className:"w-full border p-2 rounded"}),t.jsxs("select",{value:(o==null?void 0:o.id)||"",className:"w-full border p-2 rounded bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onChange:e=>{const r=flooringOptions.find(g=>g.id===e.target.value);v(r||null)},children:[t.jsx("option",{value:"",children:"Select Flooring Option"}),C.map(e=>t.jsxs("option",{value:e.id,children:[e.title," - ",e.price]},e.id))]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx("input",{type:"number",placeholder:"Length (ft)",value:c,onChange:e=>N(e.target.value),className:"w-full border p-2 rounded"}),t.jsx("input",{type:"number",placeholder:"Width (ft)",value:u,onChange:e=>S(e.target.value),className:"w-full border p-2 rounded"})]}),t.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-blue-500 text-white rounded",children:d?"Creating...":"Create Project"})]})]})}export{W as default};
